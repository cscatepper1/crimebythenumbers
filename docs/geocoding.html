<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>24 Geocoding | Crime by the Numbers: A Criminologist’s Guide to R</title>
  <meta name="description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="24 Geocoding | Crime by the Numbers: A Criminologist’s Guide to R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://crimebythenumbers.com" />
  
  <meta property="og:description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  <meta name="github-repo" content="jacobkap/crimebythenumbers" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="24 Geocoding | Crime by the Numbers: A Criminologist’s Guide to R" />
  
  <meta name="twitter:description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  

<meta name="author" content="Jacob Kaplan" />


<meta name="date" content="2022-01-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="scrape-table2.html"/>

<script src="libs/header-attrs-2.11.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99359926-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99359926-6');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Crime by the Numbers: A Criminologist's Guide to R</a></strong></li>

<li class="divider"></li>
<li class="part"><span><b>I Introduction<span></span></b></span></li>
<li><a href="index.html#preface">Preface<span></span></a>
<ul>
<li><a href="index.html#why-learn-to-program">Why learn to program?<span></span></a>
<ul>
<li><a href="index.html#scale">Scale<span></span></a></li>
<li><a href="index.html#reproducibility">Reproducibility<span></span></a></li>
</ul></li>
<li><a href="index.html#what-you-will-learn">What you will learn<span></span></a>
<ul>
<li><a href="index.html#skills">Skills<span></span></a></li>
</ul></li>
<li><a href="index.html#what-you-wont-learn">What you won’t learn<span></span></a></li>
<li><a href="index.html#simple-vs-easy">Simple vs Easy<span></span></a></li>
<li><a href="index.html#how-to-read-this-book">How to read this book<span></span></a></li>
<li><a href="index.html#citing-this-book">Citing this book<span></span></a></li>
<li><a href="index.html#how-to-contribute-to-this-book">How to contribute to this book<span></span></a></li>
<li><a href="index.html#where-to-find-data-included-in-this-book">Where to find data included in this book<span></span></a></li>
<li><a href="index.html#where-to-find-code-included-in-this-book">Where to find code included in this book<span></span></a></li>
</ul></li>
<li><a href="about-the-author.html#about-the-author">About the author<span></span></a></li>
<li class="chapter" data-level="1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html"><i class="fa fa-check"></i><b>1</b> A soup to nuts project example<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#big-picture-data-example"><i class="fa fa-check"></i><b>1.1</b> Big picture data example<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#little-picture-data-example"><i class="fa fa-check"></i><b>1.2</b> Little picture data example<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#loading-packages"><i class="fa fa-check"></i><b>1.2.1</b> Loading packages<span></span></a></li>
<li class="chapter" data-level="1.2.2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#loading-data"><i class="fa fa-check"></i><b>1.2.2</b> Loading data<span></span></a></li>
<li class="chapter" data-level="1.2.3" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#cleaning"><i class="fa fa-check"></i><b>1.2.3</b> Cleaning<span></span></a></li>
<li class="chapter" data-level="1.2.4" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#aggregating"><i class="fa fa-check"></i><b>1.2.4</b> Aggregating<span></span></a></li>
<li class="chapter" data-level="1.2.5" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#graphing"><i class="fa fa-check"></i><b>1.2.5</b> Graphing<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#reusing-and-modifying-code"><i class="fa fa-check"></i><b>1.3</b> Reusing and modifying code<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#using-rstudio"><i class="fa fa-check"></i><b>2.1</b> Using RStudio<span></span></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro-to-r.html"><a href="intro-to-r.html#opening-an-r-script"><i class="fa fa-check"></i><b>2.1.1</b> Opening an R Script<span></span></a></li>
<li class="chapter" data-level="2.1.2" data-path="intro-to-r.html"><a href="intro-to-r.html#setting-the-working-directory"><i class="fa fa-check"></i><b>2.1.2</b> Setting the working directory<span></span></a></li>
<li class="chapter" data-level="2.1.3" data-path="intro-to-r.html"><a href="intro-to-r.html#changing-rstudio"><i class="fa fa-check"></i><b>2.1.3</b> Changing RStudio<span></span></a></li>
<li class="chapter" data-level="2.1.4" data-path="intro-to-r.html"><a href="intro-to-r.html#helpful-cheat-sheets"><i class="fa fa-check"></i><b>2.1.4</b> Helpful Cheat Sheets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro-to-r.html"><a href="intro-to-r.html#assignment"><i class="fa fa-check"></i><b>2.2</b> Assigning variables<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="intro-to-r.html"><a href="intro-to-r.html#functions-intro"><i class="fa fa-check"></i><b>2.3</b> What are functions (and packages)?<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="intro-to-r.html"><a href="intro-to-r.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Reading data into R<span></span></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro-to-r.html"><a href="intro-to-r.html#loading-data-intro"><i class="fa fa-check"></i><b>2.4.1</b> Loading data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-to-r.html"><a href="intro-to-r.html#first-steps-to-exploring-data"><i class="fa fa-check"></i><b>2.5</b> First steps to exploring data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>3</b> Data types and structures<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-types.html"><a href="data-types.html#section-data-types"><i class="fa fa-check"></i><b>3.1</b> Data types<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="data-types.html"><a href="data-types.html#data-structures"><i class="fa fa-check"></i><b>3.2</b> Data structures<span></span></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-types.html"><a href="data-types.html#vectors"><i class="fa fa-check"></i><b>3.2.1</b> Vectors (collections of “things”)<span></span></a></li>
<li class="chapter" data-level="3.2.2" data-path="data-types.html"><a href="data-types.html#dataframes"><i class="fa fa-check"></i><b>3.2.2</b> Data.frames<span></span></a></li>
<li class="chapter" data-level="3.2.3" data-path="data-types.html"><a href="data-types.html#other-data-structures"><i class="fa fa-check"></i><b>3.2.3</b> Other data structures<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>4</b> Reading and writing Data<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-data-into-r-1"><i class="fa fa-check"></i><b>4.1</b> Reading Data into R<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r"><i class="fa fa-check"></i><b>4.1.1</b> R<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel"><i class="fa fa-check"></i><b>4.1.2</b> Excel<span></span></a></li>
<li class="chapter" data-level="4.1.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata"><i class="fa fa-check"></i><b>4.1.3</b> Stata<span></span></a></li>
<li class="chapter" data-level="4.1.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas"><i class="fa fa-check"></i><b>4.1.4</b> SAS<span></span></a></li>
<li class="chapter" data-level="4.1.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss"><i class="fa fa-check"></i><b>4.1.5</b> SPSS<span></span></a></li>
<li class="chapter" data-level="4.1.6" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#fixed-width-ascii"><i class="fa fa-check"></i><b>4.1.6</b> Fixed-width ASCII<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-data"><i class="fa fa-check"></i><b>4.2</b> Writing Data<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-1"><i class="fa fa-check"></i><b>4.2.1</b> R<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#rda-and-.rdata"><i class="fa fa-check"></i><b>4.2.2</b> .rda and .rdata<span></span></a></li>
<li class="chapter" data-level="4.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#rds"><i class="fa fa-check"></i><b>4.2.3</b> .rds<span></span></a></li>
<li class="chapter" data-level="4.2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-1"><i class="fa fa-check"></i><b>4.2.4</b> Excel<span></span></a></li>
<li class="chapter" data-level="4.2.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-1"><i class="fa fa-check"></i><b>4.2.5</b> Stata<span></span></a></li>
<li class="chapter" data-level="4.2.6" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-1"><i class="fa fa-check"></i><b>4.2.6</b> SAS<span></span></a></li>
<li class="chapter" data-level="4.2.7" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss-1"><i class="fa fa-check"></i><b>4.2.7</b> SPSS<span></span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Project Management<span></span></b></span></li>
<li class="chapter" data-level="5" data-path="mise-en-place.html"><a href="mise-en-place.html"><i class="fa fa-check"></i><b>5</b> <em>Mise en place</em><span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="mise-en-place.html"><a href="mise-en-place.html#starting-with-a-pencil-and-paper"><i class="fa fa-check"></i><b>5.1</b> Starting with a pencil and paper<span></span></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="mise-en-place.html"><a href="mise-en-place.html#tables-and-graphs"><i class="fa fa-check"></i><b>5.1.1</b> Tables and graphs<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="mise-en-place.html"><a href="mise-en-place.html#r-projects"><i class="fa fa-check"></i><b>5.2</b> R Projects<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="mise-en-place.html"><a href="mise-en-place.html#folders"><i class="fa fa-check"></i><b>5.2.1</b> Folders<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="mise-en-place.html"><a href="mise-en-place.html#modular-r-scripts"><i class="fa fa-check"></i><b>5.3</b> Modular R scripts<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="mise-en-place.html"><a href="mise-en-place.html#modular-code"><i class="fa fa-check"></i><b>5.4</b> Modular code<span></span></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="mise-en-place.html"><a href="mise-en-place.html#section-labels"><i class="fa fa-check"></i><b>5.4.1</b> Section Labels<span></span></a></li>
<li class="chapter" data-level="5.4.2" data-path="mise-en-place.html"><a href="mise-en-place.html#helper-r-scripts"><i class="fa fa-check"></i><b>5.4.2</b> Helper R Scripts<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="collaboration.html"><a href="collaboration.html"><i class="fa fa-check"></i><b>6</b> Collaboration<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="collaboration.html"><a href="collaboration.html#code-review"><i class="fa fa-check"></i><b>6.1</b> Code review<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="collaboration.html"><a href="collaboration.html#style-guidelines"><i class="fa fa-check"></i><b>6.1.1</b> Style guidelines<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="collaboration.html"><a href="collaboration.html#documentation"><i class="fa fa-check"></i><b>6.2</b> Documentation<span></span></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="collaboration.html"><a href="collaboration.html#comments"><i class="fa fa-check"></i><b>6.2.1</b> Comments<span></span></a></li>
<li class="chapter" data-level="6.2.2" data-path="collaboration.html"><a href="collaboration.html#vignettes"><i class="fa fa-check"></i><b>6.2.2</b> Vignettes<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7</b> R Markdown<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-markdown.html"><a href="r-markdown.html#code-1"><i class="fa fa-check"></i><b>7.1</b> Code<span></span></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="r-markdown.html"><a href="r-markdown.html#hiding-code-in-the-output"><i class="fa fa-check"></i><b>7.1.1</b> Hiding code in the output<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="r-markdown.html"><a href="r-markdown.html#inline-code"><i class="fa fa-check"></i><b>7.2</b> Inline Code<span></span></a></li>
<li class="chapter" data-level="7.3" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i><b>7.3</b> Tables<span></span></a></li>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html#footnotes"><i class="fa fa-check"></i><b>7.4</b> Footnotes<span></span></a></li>
<li class="chapter" data-level="7.5" data-path="r-markdown.html"><a href="r-markdown.html#citation"><i class="fa fa-check"></i><b>7.5</b> Citation<span></span></a></li>
<li class="chapter" data-level="7.6" data-path="r-markdown.html"><a href="r-markdown.html#spell-check"><i class="fa fa-check"></i><b>7.6</b> Spell check<span></span></a></li>
<li class="chapter" data-level="7.7" data-path="r-markdown.html"><a href="r-markdown.html#making-the-output-file"><i class="fa fa-check"></i><b>7.7</b> Making the output file<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tests.html"><a href="tests.html"><i class="fa fa-check"></i><b>8</b> Testing your code<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="tests.html"><a href="tests.html#why-test-your-code"><i class="fa fa-check"></i><b>8.1</b> Why test your code?<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="tests.html"><a href="tests.html#unit-tests"><i class="fa fa-check"></i><b>8.2</b> Unit tests<span></span></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="tests.html"><a href="tests.html#modular-test-scripts"><i class="fa fa-check"></i><b>8.2.1</b> Modular test scripts<span></span></a></li>
<li class="chapter" data-level="8.2.2" data-path="tests.html"><a href="tests.html#how-to-write-unit-tests"><i class="fa fa-check"></i><b>8.2.2</b> How to write unit tests<span></span></a></li>
<li class="chapter" data-level="8.2.3" data-path="tests.html"><a href="tests.html#what-to-test"><i class="fa fa-check"></i><b>8.2.3</b> What to test<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tests.html"><a href="tests.html#test-driven-development-tdd"><i class="fa fa-check"></i><b>8.3</b> Test-driven development (TDD)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>9</b> Git<span></span></a>
<ul>
<li class="chapter" data-level="9.1" data-path="git.html"><a href="git.html#what-is-git-and-why-do-i-need-it"><i class="fa fa-check"></i><b>9.1</b> What is Git and why do I need it?<span></span></a></li>
<li class="chapter" data-level="9.2" data-path="git.html"><a href="git.html#git-basics"><i class="fa fa-check"></i><b>9.2</b> Git basics<span></span></a></li>
<li class="chapter" data-level="9.3" data-path="git.html"><a href="git.html#using-git"><i class="fa fa-check"></i><b>9.3</b> Using Git<span></span></a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="git.html"><a href="git.html#setting-up-git"><i class="fa fa-check"></i><b>9.3.1</b> Setting up Git<span></span></a></li>
<li class="chapter" data-level="9.3.2" data-path="git.html"><a href="git.html#setting-up-github"><i class="fa fa-check"></i><b>9.3.2</b> Setting up GitHub<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="git.html"><a href="git.html#setting-up-git-on-an-already-made-r-project"><i class="fa fa-check"></i><b>9.4</b> Setting up Git on an already made R Project<span></span></a></li>
<li class="chapter" data-level="9.5" data-path="git.html"><a href="git.html#using-git-through-rstudio"><i class="fa fa-check"></i><b>9.5</b> Using Git through RStudio<span></span></a></li>
<li class="chapter" data-level="9.6" data-path="git.html"><a href="git.html#when-to-commit"><i class="fa fa-check"></i><b>9.6</b> When to commit<span></span></a></li>
<li class="chapter" data-level="9.7" data-path="git.html"><a href="git.html#other-resources"><i class="fa fa-check"></i><b>9.7</b> Other resources<span></span></a></li>
</ul></li>
<li class="part"><span><b>III Clean<span></span></b></span></li>
<li class="chapter" data-level="10" data-path="subsetting-intro.html"><a href="subsetting-intro.html"><i class="fa fa-check"></i><b>10</b> Subsetting: Making big things small<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-values"><i class="fa fa-check"></i><b>10.1</b> Select specific values<span></span></a></li>
<li class="chapter" data-level="10.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#logical-values-and-operations"><i class="fa fa-check"></i><b>10.2</b> Logical values and operations<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-a-single-value"><i class="fa fa-check"></i><b>10.2.1</b> Matching a single value<span></span></a></li>
<li class="chapter" data-level="10.2.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-multiple-values"><i class="fa fa-check"></i><b>10.2.2</b> Matching multiple values<span></span></a></li>
<li class="chapter" data-level="10.2.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#does-not-match"><i class="fa fa-check"></i><b>10.2.3</b> Does not match<span></span></a></li>
<li class="chapter" data-level="10.2.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#greater-than-or-less-than"><i class="fa fa-check"></i><b>10.2.4</b> Greater than or less than<span></span></a></li>
<li class="chapter" data-level="10.2.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#combining-conditional-statements---or-and"><i class="fa fa-check"></i><b>10.2.5</b> Combining conditional statements - or, and<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subsetting-a-data.frame"><i class="fa fa-check"></i><b>10.3</b> Subsetting a data.frame<span></span></a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-columns"><i class="fa fa-check"></i><b>10.3.1</b> Select specific columns<span></span></a></li>
<li class="chapter" data-level="10.3.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-rows"><i class="fa fa-check"></i><b>10.3.2</b> Select specific rows<span></span></a></li>
<li class="chapter" data-level="10.3.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subset-colorado-data"><i class="fa fa-check"></i><b>10.3.3</b> Subset Colorado data<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>11</b> Exploratory data analysis<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="explore.html"><a href="explore.html#summary-and-table"><i class="fa fa-check"></i><b>11.1</b> Summary and Table<span></span></a></li>
<li class="chapter" data-level="11.2" data-path="explore.html"><a href="explore.html#graphing-1"><i class="fa fa-check"></i><b>11.2</b> Graphing<span></span></a></li>
<li class="chapter" data-level="11.3" data-path="explore.html"><a href="explore.html#aggregate"><i class="fa fa-check"></i><b>11.3</b> Aggregating (summaries of groups)<span></span></a></li>
<li class="chapter" data-level="11.4" data-path="explore.html"><a href="explore.html#dplyr-pipes"><i class="fa fa-check"></i><b>11.4</b> Pipes in <code>dplyr</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>12</b> Regular Expressions<span></span></a>
<ul>
<li class="chapter" data-level="12.1" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-patterns-in-text-with-grep"><i class="fa fa-check"></i><b>12.1</b> Finding patterns in text with <code>grep()</code><span></span></a></li>
<li class="chapter" data-level="12.2" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub"><i class="fa fa-check"></i><b>12.2</b> Finding and replacing patterns in text with <code>gsub()</code><span></span></a></li>
<li class="chapter" data-level="12.3" data-path="regular-expressions.html"><a href="regular-expressions.html#useful-special-characters"><i class="fa fa-check"></i><b>12.3</b> Useful special characters<span></span></a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-characters"><i class="fa fa-check"></i><b>12.3.1</b> Multiple characters <code>[]</code><span></span></a></li>
<li class="chapter" data-level="12.3.2" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-of-previous-character-n"><i class="fa fa-check"></i><b>12.3.2</b> n-many of previous character <code>{n}</code><span></span></a></li>
<li class="chapter" data-level="12.3.3" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm"><i class="fa fa-check"></i><b>12.3.3</b> n-many to m-many of previous character <code>{n,m}</code><span></span></a></li>
<li class="chapter" data-level="12.3.4" data-path="regular-expressions.html"><a href="regular-expressions.html#start-of-string"><i class="fa fa-check"></i><b>12.3.4</b> Start of string<span></span></a></li>
<li class="chapter" data-level="12.3.5" data-path="regular-expressions.html"><a href="regular-expressions.html#end-of-string"><i class="fa fa-check"></i><b>12.3.5</b> End of string <code>$</code><span></span></a></li>
<li class="chapter" data-level="12.3.6" data-path="regular-expressions.html"><a href="regular-expressions.html#anything-."><i class="fa fa-check"></i><b>12.3.6</b> Anything <code>.</code><span></span></a></li>
<li class="chapter" data-level="12.3.7" data-path="regular-expressions.html"><a href="regular-expressions.html#one-or-more-of-previous"><i class="fa fa-check"></i><b>12.3.7</b> One or more of previous <code>+</code><span></span></a></li>
<li class="chapter" data-level="12.3.8" data-path="regular-expressions.html"><a href="regular-expressions.html#zero-or-more-of-previous"><i class="fa fa-check"></i><b>12.3.8</b> Zero or more of previous <code>*</code><span></span></a></li>
<li class="chapter" data-level="12.3.9" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-patterns"><i class="fa fa-check"></i><b>12.3.9</b> Multiple patterns <code>|</code><span></span></a></li>
<li class="chapter" data-level="12.3.10" data-path="regular-expressions.html"><a href="regular-expressions.html#parentheses"><i class="fa fa-check"></i><b>12.3.10</b> Parentheses <code>()</code><span></span></a></li>
<li class="chapter" data-level="12.3.11" data-path="regular-expressions.html"><a href="regular-expressions.html#optional-text"><i class="fa fa-check"></i><b>12.3.11</b> Optional text <code>?</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="regular-expressions.html"><a href="regular-expressions.html#changing-capitalization"><i class="fa fa-check"></i><b>12.4</b> Changing capitalization<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="reshaping.html"><a href="reshaping.html"><i class="fa fa-check"></i><b>13</b> Reshaping data<span></span></a>
<ul>
<li class="chapter" data-level="13.1" data-path="reshaping.html"><a href="reshaping.html#reshaping-a-single-column"><i class="fa fa-check"></i><b>13.1</b> Reshaping a single column<span></span></a></li>
<li class="chapter" data-level="13.2" data-path="reshaping.html"><a href="reshaping.html#reshaping-multiple-columns"><i class="fa fa-check"></i><b>13.2</b> Reshaping multiple columns<span></span></a></li>
</ul></li>
<li class="part"><span><b>IV Visualize<span></span></b></span></li>
<li class="chapter" data-level="14" data-path="graphing-intro.html"><a href="graphing-intro.html"><i class="fa fa-check"></i><b>14</b> Graphing with <code>ggplot2</code><span></span></a>
<ul>
<li class="chapter" data-level="14.1" data-path="graphing-intro.html"><a href="graphing-intro.html#what-does-the-data-look-like"><i class="fa fa-check"></i><b>14.1</b> What does the data look like?<span></span></a></li>
<li class="chapter" data-level="14.2" data-path="graphing-intro.html"><a href="graphing-intro.html#graphing-data"><i class="fa fa-check"></i><b>14.2</b> Graphing data<span></span></a></li>
<li class="chapter" data-level="14.3" data-path="graphing-intro.html"><a href="graphing-intro.html#time-series-plots"><i class="fa fa-check"></i><b>14.3</b> Time-Series Plots<span></span></a></li>
<li class="chapter" data-level="14.4" data-path="graphing-intro.html"><a href="graphing-intro.html#scatter-plots"><i class="fa fa-check"></i><b>14.4</b> Scatter Plots<span></span></a></li>
<li class="chapter" data-level="14.5" data-path="graphing-intro.html"><a href="graphing-intro.html#color-blindness"><i class="fa fa-check"></i><b>14.5</b> Color blindness<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ois-graphs.html"><a href="ois-graphs.html"><i class="fa fa-check"></i><b>15</b> More graphing with <code>ggplot2</code><span></span></a>
<ul>
<li class="chapter" data-level="15.1" data-path="ois-graphs.html"><a href="ois-graphs.html#exploring-data"><i class="fa fa-check"></i><b>15.1</b> Exploring data<span></span></a></li>
<li class="chapter" data-level="15.2" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-a-single-numeric-variable"><i class="fa fa-check"></i><b>15.2</b> Graphing a single numeric variable<span></span></a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="ois-graphs.html"><a href="ois-graphs.html#histogram"><i class="fa fa-check"></i><b>15.2.1</b> Histogram<span></span></a></li>
<li class="chapter" data-level="15.2.2" data-path="ois-graphs.html"><a href="ois-graphs.html#density-plot"><i class="fa fa-check"></i><b>15.2.2</b> Density plot<span></span></a></li>
<li class="chapter" data-level="15.2.3" data-path="ois-graphs.html"><a href="ois-graphs.html#count-graph"><i class="fa fa-check"></i><b>15.2.3</b> Count graph<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-a-categorical-variable"><i class="fa fa-check"></i><b>15.3</b> Graphing a categorical variable<span></span></a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="ois-graphs.html"><a href="ois-graphs.html#bar-graph"><i class="fa fa-check"></i><b>15.3.1</b> Bar graph<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-data-over-time"><i class="fa fa-check"></i><b>15.4</b> Graphing data over time<span></span></a></li>
<li class="chapter" data-level="15.5" data-path="ois-graphs.html"><a href="ois-graphs.html#pretty-graphs"><i class="fa fa-check"></i><b>15.5</b> Pretty graphs<span></span></a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="ois-graphs.html"><a href="ois-graphs.html#themes"><i class="fa fa-check"></i><b>15.5.1</b> Themes<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="hotspot-maps.html"><a href="hotspot-maps.html"><i class="fa fa-check"></i><b>16</b> Hotspot maps<span></span></a>
<ul>
<li class="chapter" data-level="16.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#a-simple-map"><i class="fa fa-check"></i><b>16.1</b> A simple map<span></span></a></li>
<li class="chapter" data-level="16.2" data-path="hotspot-maps.html"><a href="hotspot-maps.html#what-really-are-maps"><i class="fa fa-check"></i><b>16.2</b> What really are maps?<span></span></a></li>
<li class="chapter" data-level="16.3" data-path="hotspot-maps.html"><a href="hotspot-maps.html#making-a-hotspot-map"><i class="fa fa-check"></i><b>16.3</b> Making a hotspot map<span></span></a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#colors"><i class="fa fa-check"></i><b>16.3.1</b> Colors<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="choropleth-maps.html"><a href="choropleth-maps.html"><i class="fa fa-check"></i><b>17</b> Choropleth maps<span></span></a>
<ul>
<li class="chapter" data-level="17.1" data-path="choropleth-maps.html"><a href="choropleth-maps.html#spatial-joins"><i class="fa fa-check"></i><b>17.1</b> Spatial joins<span></span></a></li>
<li class="chapter" data-level="17.2" data-path="choropleth-maps.html"><a href="choropleth-maps.html#making-choropleth-maps"><i class="fa fa-check"></i><b>17.2</b> Making choropleth maps<span></span></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>18</b> Interactive maps<span></span></a>
<ul>
<li class="chapter" data-level="18.1" data-path="interactive-maps.html"><a href="interactive-maps.html#why-do-interactive-graphs-matter"><i class="fa fa-check"></i><b>18.1</b> Why do interactive graphs matter?<span></span></a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="interactive-maps.html"><a href="interactive-maps.html#understanding-your-data"><i class="fa fa-check"></i><b>18.1.1</b> Understanding your data<span></span></a></li>
<li class="chapter" data-level="18.1.2" data-path="interactive-maps.html"><a href="interactive-maps.html#police-departments-use-them"><i class="fa fa-check"></i><b>18.1.2</b> Police departments use them<span></span></a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="interactive-maps.html"><a href="interactive-maps.html#making-the-interactive-map"><i class="fa fa-check"></i><b>18.2</b> Making the interactive map<span></span></a></li>
<li class="chapter" data-level="18.3" data-path="interactive-maps.html"><a href="interactive-maps.html#adding-popup-information"><i class="fa fa-check"></i><b>18.3</b> Adding popup information<span></span></a></li>
<li class="chapter" data-level="18.4" data-path="interactive-maps.html"><a href="interactive-maps.html#dealing-with-too-many-markers"><i class="fa fa-check"></i><b>18.4</b> Dealing with too many markers<span></span></a></li>
<li class="chapter" data-level="18.5" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-choropleth-maps"><i class="fa fa-check"></i><b>18.5</b> Interactive choropleth maps<span></span></a></li>
</ul></li>
<li class="part"><span><b>V Collect<span></span></b></span></li>
<li class="chapter" data-level="19" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html"><i class="fa fa-check"></i><b>19</b> Webscraping with <code>rvest</code><span></span></a>
<ul>
<li class="chapter" data-level="19.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#scraping-one-page"><i class="fa fa-check"></i><b>19.1</b> Scraping one page<span></span></a></li>
<li class="chapter" data-level="19.2" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#cleaning-the-webscraped-data"><i class="fa fa-check"></i><b>19.2</b> Cleaning the webscraped data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>20</b> Functions<span></span></a>
<ul>
<li class="chapter" data-level="20.1" data-path="functions.html"><a href="functions.html#a-simple-function"><i class="fa fa-check"></i><b>20.1</b> A simple function<span></span></a></li>
<li class="chapter" data-level="20.2" data-path="functions.html"><a href="functions.html#adding-parameters"><i class="fa fa-check"></i><b>20.2</b> Adding parameters<span></span></a></li>
<li class="chapter" data-level="20.3" data-path="functions.html"><a href="functions.html#recipes-function"><i class="fa fa-check"></i><b>20.3</b> Making a function to scrape recipes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>21</b> For loops<span></span></a>
<ul>
<li class="chapter" data-level="21.1" data-path="for-loops.html"><a href="for-loops.html#basic-for-loops"><i class="fa fa-check"></i><b>21.1</b> Basic for loops<span></span></a></li>
<li class="chapter" data-level="21.2" data-path="for-loops.html"><a href="for-loops.html#scraping-multiple-recipes"><i class="fa fa-check"></i><b>21.2</b> Scraping multiple recipes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="scrape-table.html"><a href="scrape-table.html"><i class="fa fa-check"></i><b>22</b> Scraping tables from PDFs<span></span></a>
<ul>
<li class="chapter" data-level="22.1" data-path="scrape-table.html"><a href="scrape-table.html#scraping-the-first-table"><i class="fa fa-check"></i><b>22.1</b> Scraping the first table<span></span></a></li>
<li class="chapter" data-level="22.2" data-path="scrape-table.html"><a href="scrape-table.html#making-a-function"><i class="fa fa-check"></i><b>22.2</b> Making a function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="scrape-table2.html"><a href="scrape-table2.html"><i class="fa fa-check"></i><b>23</b> More scraping tables from PDFs<span></span></a>
<ul>
<li class="chapter" data-level="23.1" data-path="scrape-table2.html"><a href="scrape-table2.html#texas-jail-data"><i class="fa fa-check"></i><b>23.1</b> Texas jail data<span></span></a></li>
<li class="chapter" data-level="23.2" data-path="scrape-table2.html"><a href="scrape-table2.html#pregnant-women-incarcerated"><i class="fa fa-check"></i><b>23.2</b> Pregnant women incarcerated<span></span></a></li>
<li class="chapter" data-level="23.3" data-path="scrape-table2.html"><a href="scrape-table2.html#making-pdf-scraped-data-available-to-others"><i class="fa fa-check"></i><b>23.3</b> Making PDF-scraped data available to others<span></span></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>24</b> Geocoding<span></span></a>
<ul>
<li class="chapter" data-level="24.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-a-single-address"><i class="fa fa-check"></i><b>24.1</b> Geocoding a single address<span></span></a></li>
<li class="chapter" data-level="24.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-san-francisco-marijuana-dispensary-locations"><i class="fa fa-check"></i><b>24.2</b> Geocoding San Francisco marijuana dispensary locations<span></span></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime by the Numbers: A Criminologist’s Guide to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geocoding" class="section level1 hasAnchor" number="24">
<h1><span class="header-section-number">24</span> Geocoding<a href="geocoding.html#geocoding" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>For this chapter you’ll need the following file, which is available for download <a href="https://github.com/jacobkap/r4crimz/tree/master/data">here</a>: san_francisco_active_marijuana_retailers.csv.</p>
<p>Several recent studies have looked at the effect of marijuana dispensaries on crime around the dispensary. For these analyses they find the coordinates of each crime in the city and see if it occurred in a certain distance from the dispensary. Many crime data sets provide the coordinates of where each crime occurred, however sometimes the coordinates are missing - and other data such as marijuana dispensary locations give only the address - meaning that we need a way to find the coordinates of these locations.</p>
<div id="geocoding-a-single-address" class="section level2 hasAnchor" number="24.1">
<h2><span class="header-section-number">24.1</span> Geocoding a single address<a href="geocoding.html#geocoding-a-single-address" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this chapter we will cover how to geocode addresses. Geocoding is the process of taking an address (e.g. 123 Main Street, Somewhere, CA, 12345) and getting the longitude and latitude coordinates of that address. With these coordinates we can then do spatial analyses on the data ranging from simply making a map and showing where each address is to merging these coordinates with some other spatial data (such as seeing which police district the address is in) and seeing how it relates to other variables, such as crime.</p>
<p>To do our geocoding, we’re going to use the package <code>tidygeocoder</code> which greatly simplifies the work of geocoding addresses in R. For more information about this package, please see the package’s site <a href="https://jessecambon.github.io/tidygeocoder/">here</a>. If you’ve never used this package before you’ll need to install it using <code>install.packages("tidygeocoder")</code></p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="geocoding.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidygeocoder&quot;</span>)</span></code></pre></div>
<p>Now we need to tell R that we want to use this package by running <code>library(tidygeocoder)</code>.</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="geocoding.html#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygeocoder)</span>
<span id="cb447-2"><a href="geocoding.html#cb447-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb447-3"><a href="geocoding.html#cb447-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;tidygeocoder&#39;</span></span>
<span id="cb447-4"><a href="geocoding.html#cb447-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following object is masked from &#39;package:ggmap&#39;:</span></span>
<span id="cb447-5"><a href="geocoding.html#cb447-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb447-6"><a href="geocoding.html#cb447-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     geocode</span></span></code></pre></div>
<p>To geocode our addresses we’ll use the helpfully named <code>geocode()</code> function inside of <code>tidygeocoder</code>. For <code>geocode()</code> we input an address and it returns the coordinates for that address. For our address we’ll use “750 Race St. Philadelphia, PA 19106” which is the address of the Philadelphia Police Department headquarters.</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="geocoding.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geocode</span>(<span class="st">&quot;750 Race St. Philadelphia, PA 19106&quot;</span>)</span>
<span id="cb448-2"><a href="geocoding.html#cb448-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error: .tbl is not a dataframe. See ?geocode</span></span></code></pre></div>
<p>As shown above, running <code>geocode("750 Race St. Philadelphia, PA 19106")</code> gives us an error that tells us that “.tbl is not a dataframe.” The issue is that <code>geocode()</code> expects a data.frame (and .tbl is an abbreviation for tibble which is a kind of data.frame), but we entered only the string with our one address, not a data.frame. For this function to work we need to enter two parameters into <code>geocode()</code>: a data.frame (or something similar such as a tibble) and the name of the column which has the addresses.<a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a> Since we need a data.frame, we’ll make one below. I’m calling it <em>address_to_geocode</em> and calling the column with the address “address,” but you can call both the data.frame and the column whatever name you want.</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="geocoding.html#cb449-1" aria-hidden="true" tabindex="-1"></a>address_to_geocode <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb449-2"><a href="geocoding.html#cb449-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">address =</span></span>
<span id="cb449-3"><a href="geocoding.html#cb449-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;750 Race St. Philadelphia, PA 19106&quot;</span></span>
<span id="cb449-4"><a href="geocoding.html#cb449-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Now let’s try again. We’ll enter our data.frame <em>address_to_geocode</em> first and then the name of our column which is “address.”</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="geocoding.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geocode</span>(address_to_geocode, address)</span>
<span id="cb450-2"><a href="geocoding.html#cb450-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the Nominatim single address geocoder</span></span>
<span id="cb450-3"><a href="geocoding.html#cb450-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 1.1 seconds</span></span>
<span id="cb450-4"><a href="geocoding.html#cb450-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb450-5"><a href="geocoding.html#cb450-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   address                               lat  long</span></span>
<span id="cb450-6"><a href="geocoding.html#cb450-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                               &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb450-7"><a href="geocoding.html#cb450-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106  40.0 -75.2</span></span></code></pre></div>
<p>It worked, returning the same data.frame but with two additional columns with the latitude and longitude of that address.</p>
<p>You might be wondering why we put “address” into <code>geocode()</code> without quotes when usually when we talk about a column we need to do so in quotes. The simple answer is that the authors of the <code>tidygeocoder</code> package spent the time allowing users to input the column name either with or without quotes. Trying it again and now having “address” in quotes gives us the same result.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="geocoding.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geocode</span>(address_to_geocode, <span class="st">&quot;address&quot;</span>)</span>
<span id="cb451-2"><a href="geocoding.html#cb451-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the Nominatim single address geocoder</span></span>
<span id="cb451-3"><a href="geocoding.html#cb451-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 1 seconds</span></span>
<span id="cb451-4"><a href="geocoding.html#cb451-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb451-5"><a href="geocoding.html#cb451-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   address                               lat  long</span></span>
<span id="cb451-6"><a href="geocoding.html#cb451-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                               &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb451-7"><a href="geocoding.html#cb451-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106  40.0 -75.2</span></span></code></pre></div>
<p>There are two additional parameters which are important to talk about for this function, especially when you encounter an address that doesn’t geocode properly.</p>
<p>First, there are actually multiple sources where you can enter an address and get the coordinates for that address. Just think about the big mapping apps or sites, such as Google Maps and Apple Maps. For these sources you can enter in the same address and you’ll get different results. In most cases you’ll get extremely similar coordinates, usually off only after a few decimals points, so they are functionally identical. But occasionally you’ll have some addresses that can be geocoded through some sources but not others. This is because some sources have a more comprehensive list of addresses than others.</p>
<p>At the time of this writing the <code>tidygeocoder</code> package can handle geocoding from 13 different sources. For 10 of these, however, you need to setup an API key and some also require paying money (usually after a set number of addresses that it’ll geocode for free each day). So here I’ll just cover the three sources of geocoding that don’t require any setup: “osm” (Open Street Map or OSM is similar to Google Maps), “census” (the US Census Bureau’s geocoder), and “arcgis” (ArcGIS is a clunky mapping software that nonetheless has an excellent geocoder that R can use). To select which of these to use (“osm” is the default), you add the parameter “method” and set that equal to which one you want to use. As “osm” is the default we actually don’t need to set it explicitly, but we’ll do so anyways here as an example of the three geocoding sources we want to use.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="geocoding.html#cb452-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">geocode</span>(address_to_geocode, <span class="st">&quot;address&quot;</span>, <span class="at">method =</span> <span class="st">&quot;osm&quot;</span>)</span>
<span id="cb452-2"><a href="geocoding.html#cb452-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the Nominatim single address geocoder</span></span>
<span id="cb452-3"><a href="geocoding.html#cb452-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 1 seconds</span></span>
<span id="cb452-4"><a href="geocoding.html#cb452-4" aria-hidden="true" tabindex="-1"></a>example</span>
<span id="cb452-5"><a href="geocoding.html#cb452-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb452-6"><a href="geocoding.html#cb452-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   address                               lat  long</span></span>
<span id="cb452-7"><a href="geocoding.html#cb452-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                               &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb452-8"><a href="geocoding.html#cb452-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106  40.0 -75.2</span></span></code></pre></div>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="geocoding.html#cb453-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">geocode</span>(address_to_geocode, <span class="st">&quot;address&quot;</span>, <span class="at">method =</span> <span class="st">&quot;census&quot;</span>)</span>
<span id="cb453-2"><a href="geocoding.html#cb453-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the US Census single address geocoder</span></span>
<span id="cb453-3"><a href="geocoding.html#cb453-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 1.4 seconds</span></span>
<span id="cb453-4"><a href="geocoding.html#cb453-4" aria-hidden="true" tabindex="-1"></a>example</span>
<span id="cb453-5"><a href="geocoding.html#cb453-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb453-6"><a href="geocoding.html#cb453-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   address                               lat  long</span></span>
<span id="cb453-7"><a href="geocoding.html#cb453-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                               &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb453-8"><a href="geocoding.html#cb453-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106  40.0 -75.2</span></span></code></pre></div>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="geocoding.html#cb454-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">geocode</span>(address_to_geocode, <span class="st">&quot;address&quot;</span>, <span class="at">method =</span> <span class="st">&quot;arcgis&quot;</span>)</span>
<span id="cb454-2"><a href="geocoding.html#cb454-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the ArcGIS single address geocoder</span></span>
<span id="cb454-3"><a href="geocoding.html#cb454-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 0.3 seconds</span></span>
<span id="cb454-4"><a href="geocoding.html#cb454-4" aria-hidden="true" tabindex="-1"></a>example</span>
<span id="cb454-5"><a href="geocoding.html#cb454-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 x 3</span></span>
<span id="cb454-6"><a href="geocoding.html#cb454-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   address                               lat  long</span></span>
<span id="cb454-7"><a href="geocoding.html#cb454-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                               &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb454-8"><a href="geocoding.html#cb454-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106  40.0 -75.2</span></span></code></pre></div>
<p>By default this function returns a tibble instead of a normal data.frame so it only shows one decimal point by default - though it doesn’t actually round the number, merely shorten what it shows us. We can change the output back into a data.frame by using the <code>data.frame()</code> function. If you check each result after converting it to a data.frame you’ll see that each set of coordinates are very slightly different, though for all purposes are the same location.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="geocoding.html#cb455-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">geocode</span>(address_to_geocode, <span class="st">&quot;address&quot;</span>, <span class="at">method =</span> <span class="st">&quot;arcgis&quot;</span>)</span>
<span id="cb455-2"><a href="geocoding.html#cb455-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the ArcGIS single address geocoder</span></span>
<span id="cb455-3"><a href="geocoding.html#cb455-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 0.9 seconds</span></span>
<span id="cb455-4"><a href="geocoding.html#cb455-4" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(example)</span>
<span id="cb455-5"><a href="geocoding.html#cb455-5" aria-hidden="true" tabindex="-1"></a>example</span>
<span id="cb455-6"><a href="geocoding.html#cb455-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                               address      lat      long</span></span>
<span id="cb455-7"><a href="geocoding.html#cb455-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106 39.95488 -75.15205</span></span></code></pre></div>
<p>Given how similar the coordinates are, you really only need to set the source of the geocoder in cases where one geocoder fails to find a match for the address.</p>
<p>The second important parameter is <code>full_results</code> which is by default set to FALSE. When set to TRUE it gives more columns in the returning data.frame than just the longitude and latitude of that address. These columns differ for each geocoder source so we’ll look at all three. I’ll convert all of these results to a data.frame so it prints out all of the columns, and doesn’t abbreviate results which is how tibbles function. The <code>example$display_name &lt;- NULL</code> isn’t necessary but I use it to remove a column that prints out an extremely long line for the location’s full address and that looks bad in the print version of this book.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="geocoding.html#cb456-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">geocode</span>(address_to_geocode, <span class="st">&quot;address&quot;</span>,</span>
<span id="cb456-2"><a href="geocoding.html#cb456-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;osm&quot;</span>, <span class="at">full_results =</span> <span class="cn">TRUE</span></span>
<span id="cb456-3"><a href="geocoding.html#cb456-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb456-4"><a href="geocoding.html#cb456-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the Nominatim single address geocoder</span></span>
<span id="cb456-5"><a href="geocoding.html#cb456-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 1 seconds</span></span>
<span id="cb456-6"><a href="geocoding.html#cb456-6" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(example)</span>
<span id="cb456-7"><a href="geocoding.html#cb456-7" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>display_name <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb456-8"><a href="geocoding.html#cb456-8" aria-hidden="true" tabindex="-1"></a>example</span>
<span id="cb456-9"><a href="geocoding.html#cb456-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                               address     lat      long</span></span>
<span id="cb456-10"><a href="geocoding.html#cb456-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106 39.9548 -75.15142</span></span>
<span id="cb456-11"><a href="geocoding.html#cb456-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    place_id</span></span>
<span id="cb456-12"><a href="geocoding.html#cb456-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 288259524</span></span>
<span id="cb456-13"><a href="geocoding.html#cb456-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                                  licence</span></span>
<span id="cb456-14"><a href="geocoding.html#cb456-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Data © OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright</span></span>
<span id="cb456-15"><a href="geocoding.html#cb456-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   osm_type   osm_id</span></span>
<span id="cb456-16"><a href="geocoding.html#cb456-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      way 62202366</span></span>
<span id="cb456-17"><a href="geocoding.html#cb456-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                          boundingbox</span></span>
<span id="cb456-18"><a href="geocoding.html#cb456-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 39.95474977551, 39.95484977551, -75.151465816327, -75.151365816327</span></span>
<span id="cb456-19"><a href="geocoding.html#cb456-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   class  type importance</span></span>
<span id="cb456-20"><a href="geocoding.html#cb456-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 place house      0.531</span></span></code></pre></div>
<p>For OSM as a source we also get information about the address such as what type of place it is, a bounding box which is a geographic area right around this coordinate, the address for those coordinates in the OSM database, and a bunch of other variables that don’t seem very useful for our purposes such as the “importance” of the address. It’s interesting that OSM classifies this address as a “house” as the headquarters of a major police department is quite a bit bigger than a house, so this is likely an misclassification of the type of address. The most important extra variable here is the address, called the “display_name.”</p>
<p>Sometimes geocoders will be quite a bit off in their geocoding because they match the address you inputted incorrectly to one in their database. For example, if you input “123 Main Street” and the geocoder thinks you mean “123 Maine Street” you may be quite a bit off in the resulting coordinates. When you only get coordinates returned you won’t know that the coordinates are wrong. Even if you know where an address is supposed to be it’s hard to catch errors like this. If you’re geocoding addresses in a single city and one point is in a different city (or completely different part of the world), then it’s pretty clear that there’s an error. But if the coordinates are simply in a wrong part of the city, but near other coordinates, then it’s very hard to notice a problem. So having an address to check against the one you inputted is a very useful way of validate the geocoding.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="geocoding.html#cb457-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">geocode</span>(address_to_geocode, <span class="st">&quot;address&quot;</span>,</span>
<span id="cb457-2"><a href="geocoding.html#cb457-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;census&quot;</span>, <span class="at">full_results =</span> <span class="cn">TRUE</span></span>
<span id="cb457-3"><a href="geocoding.html#cb457-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb457-4"><a href="geocoding.html#cb457-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the US Census single address geocoder</span></span>
<span id="cb457-5"><a href="geocoding.html#cb457-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 0.8 seconds</span></span>
<span id="cb457-6"><a href="geocoding.html#cb457-6" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(example)</span>
<span id="cb457-7"><a href="geocoding.html#cb457-7" aria-hidden="true" tabindex="-1"></a>example</span>
<span id="cb457-8"><a href="geocoding.html#cb457-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                               address      lat     long</span></span>
<span id="cb457-9"><a href="geocoding.html#cb457-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106 39.95488 -75.1514</span></span>
<span id="cb457-10"><a href="geocoding.html#cb457-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         matchedAddress</span></span>
<span id="cb457-11"><a href="geocoding.html#cb457-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 RACE ST, PHILADELPHIA, PA, 19106</span></span>
<span id="cb457-12"><a href="geocoding.html#cb457-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   tigerLine.tigerLineId tigerLine.side</span></span>
<span id="cb457-13"><a href="geocoding.html#cb457-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1             131423677              L</span></span>
<span id="cb457-14"><a href="geocoding.html#cb457-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   addressComponents.fromAddress addressComponents.toAddress</span></span>
<span id="cb457-15"><a href="geocoding.html#cb457-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                           700                         798</span></span>
<span id="cb457-16"><a href="geocoding.html#cb457-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   addressComponents.preQualifier</span></span>
<span id="cb457-17"><a href="geocoding.html#cb457-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                               </span></span>
<span id="cb457-18"><a href="geocoding.html#cb457-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   addressComponents.preDirection addressComponents.preType</span></span>
<span id="cb457-19"><a href="geocoding.html#cb457-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                                                         </span></span>
<span id="cb457-20"><a href="geocoding.html#cb457-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   addressComponents.streetName addressComponents.suffixType</span></span>
<span id="cb457-21"><a href="geocoding.html#cb457-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                         RACE                           ST</span></span>
<span id="cb457-22"><a href="geocoding.html#cb457-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   addressComponents.suffixDirection</span></span>
<span id="cb457-23"><a href="geocoding.html#cb457-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                                  </span></span>
<span id="cb457-24"><a href="geocoding.html#cb457-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   addressComponents.suffixQualifier addressComponents.city</span></span>
<span id="cb457-25"><a href="geocoding.html#cb457-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                                             PHILADELPHIA</span></span>
<span id="cb457-26"><a href="geocoding.html#cb457-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   addressComponents.state addressComponents.zip</span></span>
<span id="cb457-27"><a href="geocoding.html#cb457-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                      PA                 19106</span></span></code></pre></div>
<p>The Census results are similar to the OSM results and also have the matched address to compare your inputted address to. Most of the columns are just the address broken into different pieces (street, city, state, etc.) so are mostly repeating the address again in multiple columns.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="geocoding.html#cb458-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">geocode</span>(address_to_geocode, <span class="st">&quot;address&quot;</span>,</span>
<span id="cb458-2"><a href="geocoding.html#cb458-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;arcgis&quot;</span>, <span class="at">full_results =</span> <span class="cn">TRUE</span></span>
<span id="cb458-3"><a href="geocoding.html#cb458-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb458-4"><a href="geocoding.html#cb458-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 1 address to the ArcGIS single address geocoder</span></span>
<span id="cb458-5"><a href="geocoding.html#cb458-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 0.2 seconds</span></span>
<span id="cb458-6"><a href="geocoding.html#cb458-6" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(example)</span>
<span id="cb458-7"><a href="geocoding.html#cb458-7" aria-hidden="true" tabindex="-1"></a>example</span>
<span id="cb458-8"><a href="geocoding.html#cb458-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                               address      lat      long</span></span>
<span id="cb458-9"><a href="geocoding.html#cb458-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St. Philadelphia, PA 19106 39.95488 -75.15205</span></span>
<span id="cb458-10"><a href="geocoding.html#cb458-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                   arcgis_address score</span></span>
<span id="cb458-11"><a href="geocoding.html#cb458-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 750 Race St, Philadelphia, Pennsylvania, 19106   100</span></span>
<span id="cb458-12"><a href="geocoding.html#cb458-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   location.x location.y extent.xmin extent.ymin extent.xmax</span></span>
<span id="cb458-13"><a href="geocoding.html#cb458-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  -75.15205   39.95488   -75.15305    39.95388   -75.15105</span></span>
<span id="cb458-14"><a href="geocoding.html#cb458-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   extent.ymax</span></span>
<span id="cb458-15"><a href="geocoding.html#cb458-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    39.95588</span></span></code></pre></div>
<p>For the ArcGIS results we have the matched address again, and then an important variable called “score” which is basically a measure of how confident ArcGIS is that it matched the right address. Higher values are more confident, but in my experience anything under 90-95 confidence is an incorrect address. These results also repeat the longitude and latitude columns as “location.x” and “location.y” columns, and I’m not sure why they do so.</p>
</div>
<div id="geocoding-san-francisco-marijuana-dispensary-locations" class="section level2 hasAnchor" number="24.2">
<h2><span class="header-section-number">24.2</span> Geocoding San Francisco marijuana dispensary locations<a href="geocoding.html#geocoding-san-francisco-marijuana-dispensary-locations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So now that we can use the <code>geocoder()</code> function well, we can geocode every location in our marijuana dispensary data.</p>
<p>Let’s read in the marijuana dispensary data which is called “san_francisco_active_marijuana_retailers.csv” and call the object <em>marijuana</em>. Note the “data/” part in front of the name of the .csv file. This is to tell R that the file we want is in the “data” folder of our working directory. Doing this is essentially a shortcut to changing the working directory directly. For this book I keep all of the data files in a folder called “data” in my working directory. Unless you also have a folder called “data” in your working directory which has this file, please delete “data/” from the following code.</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="geocoding.html#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb459-2"><a href="geocoding.html#cb459-2" aria-hidden="true" tabindex="-1"></a>marijuana <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/san_francisco_active_marijuana_retailers.csv&quot;</span>)</span>
<span id="cb459-3"><a href="geocoding.html#cb459-3" aria-hidden="true" tabindex="-1"></a>marijuana <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(marijuana)</span></code></pre></div>
<p>Let’s look at the top 6 rows.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="geocoding.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(marijuana)</span>
<span id="cb460-2"><a href="geocoding.html#cb460-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    License.Number                License.Type</span></span>
<span id="cb460-3"><a href="geocoding.html#cb460-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 C10-0000614-LIC Cannabis - Retailer License</span></span>
<span id="cb460-4"><a href="geocoding.html#cb460-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 C10-0000586-LIC Cannabis - Retailer License</span></span>
<span id="cb460-5"><a href="geocoding.html#cb460-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 C10-0000587-LIC Cannabis - Retailer License</span></span>
<span id="cb460-6"><a href="geocoding.html#cb460-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 C10-0000539-LIC Cannabis - Retailer License</span></span>
<span id="cb460-7"><a href="geocoding.html#cb460-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 C10-0000522-LIC Cannabis - Retailer License</span></span>
<span id="cb460-8"><a href="geocoding.html#cb460-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 C10-0000523-LIC Cannabis - Retailer License</span></span>
<span id="cb460-9"><a href="geocoding.html#cb460-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Business.Owner        Business.Structure</span></span>
<span id="cb460-10"><a href="geocoding.html#cb460-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     Terry Muller Limited Liability Company</span></span>
<span id="cb460-11"><a href="geocoding.html#cb460-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    Jeremy Goodin               Corporation</span></span>
<span id="cb460-12"><a href="geocoding.html#cb460-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     Justin Jarin               Corporation</span></span>
<span id="cb460-13"><a href="geocoding.html#cb460-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Ondyn Herschelle               Corporation</span></span>
<span id="cb460-14"><a href="geocoding.html#cb460-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      Ryan Hudson Limited Liability Company</span></span>
<span id="cb460-15"><a href="geocoding.html#cb460-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      Ryan Hudson Limited Liability Company</span></span>
<span id="cb460-16"><a href="geocoding.html#cb460-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                                 Premise.Address</span></span>
<span id="cb460-17"><a href="geocoding.html#cb460-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  2165 IRVING ST san francisco, CA 94122 County: SAN FRANCISCO</span></span>
<span id="cb460-18"><a href="geocoding.html#cb460-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 122 10TH ST SAN FRANCISCO, CA 941032605 County: SAN FRANCISCO</span></span>
<span id="cb460-19"><a href="geocoding.html#cb460-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   843 Howard ST SAN FRANCISCO, CA 94103 County: SAN FRANCISCO</span></span>
<span id="cb460-20"><a href="geocoding.html#cb460-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    70 SECOND ST SAN FRANCISCO, CA 94105 County: SAN FRANCISCO</span></span>
<span id="cb460-21"><a href="geocoding.html#cb460-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   527 Howard ST San Francisco, CA 94105 County: SAN FRANCISCO</span></span>
<span id="cb460-22"><a href="geocoding.html#cb460-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 2414 Lombard ST San Francisco, CA 94123 County: SAN FRANCISCO</span></span>
<span id="cb460-23"><a href="geocoding.html#cb460-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Status Issue.Date Expiration.Date</span></span>
<span id="cb460-24"><a href="geocoding.html#cb460-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Active  9/13/2019       9/12/2020</span></span>
<span id="cb460-25"><a href="geocoding.html#cb460-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Active  8/26/2019       8/25/2020</span></span>
<span id="cb460-26"><a href="geocoding.html#cb460-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Active  8/26/2019       8/25/2020</span></span>
<span id="cb460-27"><a href="geocoding.html#cb460-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Active   8/5/2019        8/4/2020</span></span>
<span id="cb460-28"><a href="geocoding.html#cb460-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Active  7/29/2019       7/28/2020</span></span>
<span id="cb460-29"><a href="geocoding.html#cb460-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Active  7/29/2019       7/28/2020</span></span>
<span id="cb460-30"><a href="geocoding.html#cb460-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                  Activities Adult.Use.Medicinal</span></span>
<span id="cb460-31"><a href="geocoding.html#cb460-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 N/A for this license type                BOTH</span></span>
<span id="cb460-32"><a href="geocoding.html#cb460-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 N/A for this license type                BOTH</span></span>
<span id="cb460-33"><a href="geocoding.html#cb460-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 N/A for this license type                BOTH</span></span>
<span id="cb460-34"><a href="geocoding.html#cb460-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 N/A for this license type                BOTH</span></span>
<span id="cb460-35"><a href="geocoding.html#cb460-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 N/A for this license type                BOTH</span></span>
<span id="cb460-36"><a href="geocoding.html#cb460-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 N/A for this license type                BOTH</span></span></code></pre></div>
<p>The column with the address is called <em>Premise Address</em>. Since the address county is always ” County: SAN FRANCISCO” we can just <code>gsub()</code> out that entire string.</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="geocoding.html#cb461-1" aria-hidden="true" tabindex="-1"></a>marijuana<span class="sc">$</span>Premise.Address <span class="ot">&lt;-</span> <span class="fu">gsub</span>(</span>
<span id="cb461-2"><a href="geocoding.html#cb461-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot; County: SAN FRANCISCO&quot;</span>,</span>
<span id="cb461-3"><a href="geocoding.html#cb461-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;&quot;</span>, marijuana<span class="sc">$</span>Premise.Address</span>
<span id="cb461-4"><a href="geocoding.html#cb461-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Now let’s make sure we did it right.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="geocoding.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(marijuana<span class="sc">$</span>Premise.Address)</span>
<span id="cb462-2"><a href="geocoding.html#cb462-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2165 IRVING ST san francisco, CA 94122&quot; </span></span>
<span id="cb462-3"><a href="geocoding.html#cb462-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2] &quot;122 10TH ST SAN FRANCISCO, CA 941032605&quot;</span></span>
<span id="cb462-4"><a href="geocoding.html#cb462-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] &quot;843 Howard ST SAN FRANCISCO, CA 94103&quot;  </span></span>
<span id="cb462-5"><a href="geocoding.html#cb462-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] &quot;70 SECOND ST SAN FRANCISCO, CA 94105&quot;   </span></span>
<span id="cb462-6"><a href="geocoding.html#cb462-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] &quot;527 Howard ST San Francisco, CA 94105&quot;  </span></span>
<span id="cb462-7"><a href="geocoding.html#cb462-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;2414 Lombard ST San Francisco, CA 94123&quot;</span></span></code></pre></div>
<p>To do the geocoding we’ll just tell <code>geocode()</code> our data.frame name and the name of the column with the addresses. We’ll assign the results back into the <code>marijuana</code> object. As noted earlier, we don’t need to put the name of our column in quotes, but I like to do so because it is consistent with some other functions that require it. Running this code may take up to a minute because it’s geocoding 33 different addresses.</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="geocoding.html#cb463-1" aria-hidden="true" tabindex="-1"></a>marijuana <span class="ot">&lt;-</span> <span class="fu">geocode</span>(marijuana, <span class="st">&quot;Premise.Address&quot;</span>)</span>
<span id="cb463-2"><a href="geocoding.html#cb463-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 33 addresses to the Nominatim single address geocoder</span></span>
<span id="cb463-3"><a href="geocoding.html#cb463-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 33.1 seconds</span></span></code></pre></div>
<p>Now it appears that we have longitude and latitude for every dispensary. We should check that they all look sensible.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="geocoding.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(marijuana<span class="sc">$</span>long)</span>
<span id="cb464-2"><a href="geocoding.html#cb464-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></span>
<span id="cb464-3"><a href="geocoding.html#cb464-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  -122.5  -122.4  -122.4  -122.4  -122.4  -122.4      10</span></span></code></pre></div>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="geocoding.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(marijuana<span class="sc">$</span>lat)</span>
<span id="cb465-2"><a href="geocoding.html#cb465-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></span>
<span id="cb465-3"><a href="geocoding.html#cb465-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   37.71   37.75   37.78   37.77   37.78   37.80      10</span></span></code></pre></div>
<p>The minimum and maximum are very similar to each other for both longitude and latitude so that’s a sign that it geocoded correctly. The 10 NA values mean that it didn’t find a match for 10 of the addresses. Let’s try again and now set <code>method</code> to “arcgis” which generally has a very high match rate. Before we do this let’s just remove the entire latitude and longitude columns from our data. How the <code>geocode()</code> function works is that if we keep the “long” and “lat” columns that are currently in the data from when we just geocoded, when we run it again it’ll make new columns that have nearly identical names. We usually want as few columns in our data as possible so there’s no point having the “lat” column from the last geocode run with the 10 NAs and another “lat” (though slightly different, automatically chosen name) column from this time we run <code>geocode().</code></p>
<p>We could also just geocode the 10 addresses that failed on the first run, but given that we’ll only be geocoding a small number of addresses it won’t take much extra time to have ArcGIS run it all. Running this function on just the NA rows requires a bit more work than just rerunning them all. In general, when the choice is between you spending time writing code and letting the computer do more work, let the computer do the work. And in general I’d recommend starting with ArcGIS as it is more reliable for geocoding. We’ll remove the current coordinate columns by setting them each to NULL.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="geocoding.html#cb466-1" aria-hidden="true" tabindex="-1"></a>marijuana<span class="sc">$</span>long <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb466-2"><a href="geocoding.html#cb466-2" aria-hidden="true" tabindex="-1"></a>marijuana<span class="sc">$</span>lat <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb466-3"><a href="geocoding.html#cb466-3" aria-hidden="true" tabindex="-1"></a>marijuana <span class="ot">&lt;-</span> <span class="fu">geocode</span>(marijuana, <span class="st">&quot;Premise.Address&quot;</span>,</span>
<span id="cb466-4"><a href="geocoding.html#cb466-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;arcgis&quot;</span></span>
<span id="cb466-5"><a href="geocoding.html#cb466-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb466-6"><a href="geocoding.html#cb466-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Passing 33 addresses to the ArcGIS single address geocoder</span></span>
<span id="cb466-7"><a href="geocoding.html#cb466-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Query completed in: 18.8 seconds</span></span></code></pre></div>
<p>And let’s do the <code>summary()</code> check again.</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="geocoding.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(marijuana<span class="sc">$</span>long)</span>
<span id="cb467-2"><a href="geocoding.html#cb467-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb467-3"><a href="geocoding.html#cb467-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  -122.5  -122.4  -122.4  -122.4  -122.4  -122.4</span></span></code></pre></div>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="geocoding.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(marijuana<span class="sc">$</span>lat)</span>
<span id="cb468-2"><a href="geocoding.html#cb468-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb468-3"><a href="geocoding.html#cb468-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   37.71   37.76   37.77   37.77   37.78   37.80</span></span></code></pre></div>
<p>No more NAs which means that we successfully geocoded our addresses. Another check is to make a simple scatterplot of the data. Since all of the data is from San Francisco, they should be relatively close to each other. If there are dots far from the rest, that is probably a geocoding issue.</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="geocoding.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(marijuana<span class="sc">$</span>long, marijuana<span class="sc">$</span>lat)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-651-1.png" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<p>Most points are within a very narrow range so it appears that our geocoding worked properly.</p>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
Jain, Harish C, Parbudyal Singh, and Carol Agocs. 2000. <span>“Recruitment, Selection and Promotion of Visible-Minority and <span>A</span>boriginal Police Officers in Selected <span>C</span>anadian Police Services.”</span> <em>Canadian Public Administration</em> 43 (1): 46–74.
</div>
<div class="csl-entry">
Reaves, Brian. 1993. <em>Using <span>NIBRS</span> Data to Analyze Violent Crime</em>. US Department of Justice, Office of Justice Programs, Bureau of Justice.
</div>
</div>
</div>
</div>


























<div class="footnotes">
<hr />
<ol start="21">
<li id="fn21"><p>We can look at all of the parameters for this function by running the code <code>help(geocode)</code> or <code>?geocode()</code> to look at the functions Help page.<a href="geocoding.html#fnref21" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="scrape-table2.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": true,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacobkap/crimebythenumbers/edit/master/geocoding.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>

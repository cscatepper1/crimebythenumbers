<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="2.5 Subsetting a data.frame | Crime by the Numbers" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://crimebythenumbers.com" />
<meta property="og:image" content="https://crimebythenumbers.comimages/cover.png" />
<meta property="og:description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
<meta name="github-repo" content="jacobkap/crimebythenumbers" />

<meta name="author" content="Jacob Kaplan" />

<meta name="date" content="2020-07-20" />


<meta name="description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets.">

<title>2.5 Subsetting a data.frame | Crime by the Numbers</title>

<script src="libs/header-attrs-2.3.2/header-attrs.js"></script>
<script src="libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#welcome">Welcome</a>
<ul>
<li><a href="why-learn-to-program.html#why-learn-to-program">Why learn to program?</a>
<ul>
<li><a href="why-learn-to-program.html#scale">Scale</a></li>
<li><a href="why-learn-to-program.html#reproducibility">Reproducibility</a></li>
</ul></li>
<li><a href="what-you-will-learn.html#what-you-will-learn">What you will learn</a>
<ul>
<li><a href="what-you-will-learn.html#skills">Skills</a></li>
<li><a href="what-you-will-learn.html#data">Data</a></li>
</ul></li>
<li><a href="what-you-wont-learn.html#what-you-wont-learn">What you won’t learn</a></li>
<li><a href="simple-vs-easy.html#simple-vs-easy">Simple vs Easy</a></li>
<li><a href="how-to-contribute.html#how-to-contribute">How to Contribute</a></li>
</ul></li>
<li><a href="about-the-author.html#about-the-author">About the author</a></li>
<li><a href="1-introduction-to-r-and-rstudio.html#introduction-to-r-and-rstudio"><span class="toc-section-number">1</span> Introduction to R and RStudio</a>
<ul>
<li><a href="1-1-using-rstudio.html#using-rstudio"><span class="toc-section-number">1.1</span> Using RStudio</a>
<ul>
<li><a href="1-1-using-rstudio.html#opening-an-r-script"><span class="toc-section-number">1.1.1</span> Opening an R Script</a></li>
<li><a href="1-1-using-rstudio.html#setting-the-working-directory"><span class="toc-section-number">1.1.2</span> Setting the working directory</a></li>
<li><a href="1-1-using-rstudio.html#changing-rstudio"><span class="toc-section-number">1.1.3</span> Changing RStudio</a></li>
<li><a href="1-1-using-rstudio.html#helpful-cheatsheets"><span class="toc-section-number">1.1.4</span> Helpful cheatsheets</a></li>
</ul></li>
<li><a href="1-2-reading-data-into-r.html#reading-data-into-r"><span class="toc-section-number">1.2</span> Reading data into R</a>
<ul>
<li><a href="1-2-reading-data-into-r.html#loading-data"><span class="toc-section-number">1.2.1</span> Loading data</a></li>
</ul></li>
<li><a href="1-3-first-steps-to-exploring-data.html#first-steps-to-exploring-data"><span class="toc-section-number">1.3</span> First steps to exploring data</a></li>
<li><a href="1-4-finding-help-about-functions.html#finding-help-about-functions"><span class="toc-section-number">1.4</span> Finding help about functions</a></li>
</ul></li>
<li class="part"><span><b>I Clean</b></span></li>
<li><a href="2-subsetting-intro.html#subsetting-intro"><span class="toc-section-number">2</span> Subsetting: Making big things small</a>
<ul>
<li><a href="2-1-select-specific-values.html#select-specific-values"><span class="toc-section-number">2.1</span> Select specific values</a></li>
<li><a href="2-2-assignment.html#assignment"><span class="toc-section-number">2.2</span> Assigning values to objects (Making “things”)</a></li>
<li><a href="2-3-vectors.html#vectors"><span class="toc-section-number">2.3</span> Vectors (collections of “things”)</a></li>
<li><a href="2-4-logical-values-and-operations.html#logical-values-and-operations"><span class="toc-section-number">2.4</span> Logical values and operations</a>
<ul>
<li><a href="2-4-logical-values-and-operations.html#matching-a-single-value"><span class="toc-section-number">2.4.1</span> Matching a single value</a></li>
<li><a href="2-4-logical-values-and-operations.html#matching-multiple-values"><span class="toc-section-number">2.4.2</span> Matching multiple values</a></li>
<li><a href="2-4-logical-values-and-operations.html#does-not-match"><span class="toc-section-number">2.4.3</span> Does not match</a></li>
<li><a href="2-4-logical-values-and-operations.html#greater-than-or-less-than"><span class="toc-section-number">2.4.4</span> Greater than or less than</a></li>
<li><a href="2-4-logical-values-and-operations.html#combining-conditional-statements---or-and"><span class="toc-section-number">2.4.5</span> Combining conditional statements - or, and</a></li>
</ul></li>
<li><a href="2-5-subsetting-a-data-frame.html#subsetting-a-data.frame"><span class="toc-section-number">2.5</span> Subsetting a data.frame</a>
<ul>
<li><a href="2-5-subsetting-a-data-frame.html#select-specific-columns"><span class="toc-section-number">2.5.1</span> Select specific columns</a></li>
<li><a href="2-5-subsetting-a-data-frame.html#select-specific-rows"><span class="toc-section-number">2.5.2</span> Select specific rows</a></li>
<li><a href="2-5-subsetting-a-data-frame.html#subset-colorado-data"><span class="toc-section-number">2.5.3</span> Subset Colorado data</a></li>
</ul></li>
</ul></li>
<li><a href="3-explore.html#explore"><span class="toc-section-number">3</span> Exploratory data analysis</a>
<ul>
<li><a href="3-1-summary-and-table.html#summary-and-table"><span class="toc-section-number">3.1</span> Summary and Table</a></li>
<li><a href="3-2-graphing.html#graphing"><span class="toc-section-number">3.2</span> Graphing</a></li>
<li><a href="3-3-aggregate.html#aggregate"><span class="toc-section-number">3.3</span> Aggregating (summaries of groups)</a></li>
</ul></li>
<li><a href="4-regular-expressions.html#regular-expressions"><span class="toc-section-number">4</span> Regular Expressions</a>
<ul>
<li><a href="4-1-finding-patterns-in-text-with-grep.html#finding-patterns-in-text-with-grep"><span class="toc-section-number">4.1</span> Finding patterns in text with <code>grep()</code></a></li>
<li><a href="4-2-finding-and-replacing-patterns-in-text-with-gsub.html#finding-and-replacing-patterns-in-text-with-gsub"><span class="toc-section-number">4.2</span> Finding and replacing patterns in text with <code>gsub()</code></a></li>
<li><a href="4-3-useful-special-characters.html#useful-special-characters"><span class="toc-section-number">4.3</span> Useful special characters</a>
<ul>
<li><a href="4-3-useful-special-characters.html#multiple-characters"><span class="toc-section-number">4.3.1</span> Multiple characters <code>[]</code></a></li>
<li><a href="4-3-useful-special-characters.html#n-many-of-previous-character-n"><span class="toc-section-number">4.3.2</span> n-many of previous character <code>{n}</code></a></li>
<li><a href="4-3-useful-special-characters.html#n-many-to-m-many-of-previous-character-nm"><span class="toc-section-number">4.3.3</span> n-many to m-many of previous character <code>{n,m}</code></a></li>
<li><a href="4-3-useful-special-characters.html#start-of-string"><span class="toc-section-number">4.3.4</span> Start of string</a></li>
<li><a href="4-3-useful-special-characters.html#end-of-string"><span class="toc-section-number">4.3.5</span> End of string <code>$</code></a></li>
<li><a href="4-3-useful-special-characters.html#anything-."><span class="toc-section-number">4.3.6</span> Anything <code>.</code></a></li>
<li><a href="4-3-useful-special-characters.html#one-or-more-of-previous"><span class="toc-section-number">4.3.7</span> One or more of previous <code>+</code></a></li>
<li><a href="4-3-useful-special-characters.html#zero-or-more-of-previous"><span class="toc-section-number">4.3.8</span> Zero or more of previous <code>*</code></a></li>
<li><a href="4-3-useful-special-characters.html#multiple-patterns"><span class="toc-section-number">4.3.9</span> Multiple patterns <code>|</code></a></li>
<li><a href="4-3-useful-special-characters.html#parentheses"><span class="toc-section-number">4.3.10</span> Parentheses <code>()</code></a></li>
<li><a href="4-3-useful-special-characters.html#optional-text"><span class="toc-section-number">4.3.11</span> Optional text <code>?</code></a></li>
</ul></li>
<li><a href="4-4-changing-capitalization.html#changing-capitalization"><span class="toc-section-number">4.4</span> Changing capitalization</a></li>
</ul></li>
<li><a href="5-reading-and-writing-data.html#reading-and-writing-data"><span class="toc-section-number">5</span> Reading and Writing Data</a>
<ul>
<li><a href="1-2-reading-data-into-r.html#reading-data-into-r"><span class="toc-section-number">5.1</span> Reading Data into R</a>
<ul>
<li><a href="5-1-reading-data-into-r.html#r"><span class="toc-section-number">5.1.1</span> R</a></li>
<li><a href="5-1-reading-data-into-r.html#excel"><span class="toc-section-number">5.1.2</span> Excel</a></li>
<li><a href="5-1-reading-data-into-r.html#stata"><span class="toc-section-number">5.1.3</span> Stata</a></li>
<li><a href="5-1-reading-data-into-r.html#sas"><span class="toc-section-number">5.1.4</span> SAS</a></li>
<li><a href="5-1-reading-data-into-r.html#spss"><span class="toc-section-number">5.1.5</span> SPSS</a></li>
</ul></li>
<li><a href="5-2-writing-data.html#writing-data"><span class="toc-section-number">5.2</span> Writing Data</a>
<ul>
<li><a href="5-2-writing-data.html#r-1"><span class="toc-section-number">5.2.1</span> R</a></li>
<li><a href="5-2-writing-data.html#excel-1"><span class="toc-section-number">5.2.2</span> Excel</a></li>
<li><a href="5-2-writing-data.html#stata-1"><span class="toc-section-number">5.2.3</span> Stata</a></li>
<li><a href="5-2-writing-data.html#sas-1"><span class="toc-section-number">5.2.4</span> SAS</a></li>
<li><a href="5-2-writing-data.html#spss-1"><span class="toc-section-number">5.2.5</span> SPSS</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Visualize</b></span></li>
<li><a href="6-graphing-intro.html#graphing-intro"><span class="toc-section-number">6</span> Graphing with <code>ggplot2</code></a>
<ul>
<li><a href="6-1-what-does-the-data-look-like.html#what-does-the-data-look-like"><span class="toc-section-number">6.1</span> What does the data look like?</a></li>
<li><a href="6-2-graphing-data.html#graphing-data"><span class="toc-section-number">6.2</span> Graphing data</a></li>
<li><a href="6-3-time-series-plots.html#time-series-plots"><span class="toc-section-number">6.3</span> Time-Series Plots</a></li>
<li><a href="6-4-scatter-plots.html#scatter-plots"><span class="toc-section-number">6.4</span> Scatter Plots</a></li>
<li><a href="6-5-color-blindness.html#color-blindness"><span class="toc-section-number">6.5</span> Color blindness</a></li>
</ul></li>
<li><a href="7-ois-graphs.html#ois_graphs"><span class="toc-section-number">7</span> More graphing with <code>ggplot2</code></a>
<ul>
<li><a href="7-1-exploring-data.html#exploring-data"><span class="toc-section-number">7.1</span> Exploring Data</a></li>
<li><a href="7-2-graphing-a-single-numeric-variable.html#graphing-a-single-numeric-variable"><span class="toc-section-number">7.2</span> Graphing a Single Numeric Variable</a>
<ul>
<li><a href="7-2-graphing-a-single-numeric-variable.html#histogram"><span class="toc-section-number">7.2.1</span> Histogram</a></li>
<li><a href="7-2-graphing-a-single-numeric-variable.html#density-plot"><span class="toc-section-number">7.2.2</span> Density plot</a></li>
<li><a href="7-2-graphing-a-single-numeric-variable.html#count-graph"><span class="toc-section-number">7.2.3</span> Count Graph</a></li>
</ul></li>
<li><a href="7-3-bar-graph.html#bar-graph"><span class="toc-section-number">7.3</span> Bar graph</a></li>
<li><a href="7-4-graphing-data-over-time.html#graphing-data-over-time"><span class="toc-section-number">7.4</span> Graphing Data Over Time</a></li>
<li><a href="7-5-pretty-graphs.html#pretty-graphs"><span class="toc-section-number">7.5</span> Pretty Graphs</a>
<ul>
<li><a href="7-5-pretty-graphs.html#themes"><span class="toc-section-number">7.5.1</span> Themes</a></li>
</ul></li>
</ul></li>
<li><a href="8-hotspot-maps.html#hotspot-maps"><span class="toc-section-number">8</span> Hotspot maps</a>
<ul>
<li><a href="8-1-a-simple-map.html#a-simple-map"><span class="toc-section-number">8.1</span> A simple map</a></li>
<li><a href="8-2-what-really-are-maps.html#what-really-are-maps"><span class="toc-section-number">8.2</span> What really are maps?</a></li>
<li><a href="8-3-making-a-hotspot-map.html#making-a-hotspot-map"><span class="toc-section-number">8.3</span> Making a hotspot map</a>
<ul>
<li><a href="8-3-making-a-hotspot-map.html#colors"><span class="toc-section-number">8.3.1</span> Colors</a></li>
</ul></li>
</ul></li>
<li><a href="9-choropleth-maps.html#choropleth-maps"><span class="toc-section-number">9</span> Choropleth maps</a>
<ul>
<li><a href="9-1-spatial-joins.html#spatial-joins"><span class="toc-section-number">9.1</span> Spatial joins</a></li>
<li><a href="9-2-making-choropleth-maps.html#making-choropleth-maps"><span class="toc-section-number">9.2</span> Making choropleth maps</a></li>
</ul></li>
<li><a href="10-interactive-maps.html#interactive-maps"><span class="toc-section-number">10</span> Interactive maps</a>
<ul>
<li><a href="10-1-why-do-interactive-graphs-matter.html#why-do-interactive-graphs-matter"><span class="toc-section-number">10.1</span> Why do interactive graphs matter?</a>
<ul>
<li><a href="10-1-why-do-interactive-graphs-matter.html#understanding-your-data"><span class="toc-section-number">10.1.1</span> Understanding your data</a></li>
<li><a href="10-1-why-do-interactive-graphs-matter.html#police-departments-use-them"><span class="toc-section-number">10.1.2</span> Police departments use them</a></li>
</ul></li>
<li><a href="10-2-making-the-interactive-map.html#making-the-interactive-map"><span class="toc-section-number">10.2</span> Making the interactive map</a></li>
<li><a href="10-3-adding-popup-information.html#adding-popup-information"><span class="toc-section-number">10.3</span> Adding popup information</a></li>
<li><a href="10-4-dealing-with-too-many-markers.html#dealing-with-too-many-markers"><span class="toc-section-number">10.4</span> Dealing with too many markers</a></li>
<li><a href="10-5-interactive-choropleth-maps.html#interactive-choropleth-maps"><span class="toc-section-number">10.5</span> Interactive choropleth maps</a></li>
</ul></li>
<li><a href="11-r-markdown.html#r-markdown"><span class="toc-section-number">11</span> R Markdown</a>
<ul>
<li><a href="1-1-using-rstudio.html#code"><span class="toc-section-number">11.1</span> Code</a>
<ul>
<li><a href="11-1-code.html#hiding-code-in-the-output"><span class="toc-section-number">11.1.1</span> Hiding code in the output</a></li>
</ul></li>
<li><a href="11-2-inline-code.html#inline-code"><span class="toc-section-number">11.2</span> Inline Code</a></li>
<li><a href="11-3-tables.html#tables"><span class="toc-section-number">11.3</span> Tables</a></li>
<li><a href="11-4-footnotes.html#footnotes"><span class="toc-section-number">11.4</span> Footnotes</a></li>
<li><a href="11-5-citation.html#citation"><span class="toc-section-number">11.5</span> Citation</a></li>
<li><a href="11-6-spell-check.html#spell-check"><span class="toc-section-number">11.6</span> Spell check</a></li>
<li><a href="11-7-making-the-output-file.html#making-the-output-file"><span class="toc-section-number">11.7</span> Making the output file</a></li>
</ul></li>
<li><a href="12-git.html#git"><span class="toc-section-number">12</span> Git</a>
<ul>
<li><a href="12-1-what-is-git-and-why-do-i-need-it.html#what-is-git-and-why-do-i-need-it"><span class="toc-section-number">12.1</span> What is Git and why do I need it?</a></li>
<li><a href="12-2-git-basics.html#git-basics"><span class="toc-section-number">12.2</span> Git basics</a></li>
<li><a href="12-3-when-to-commit.html#when-to-commit"><span class="toc-section-number">12.3</span> When to commit</a></li>
<li><a href="12-4-code-review.html#code-review"><span class="toc-section-number">12.4</span> Code review</a></li>
</ul></li>
<li class="part"><span><b>III Collect</b></span></li>
<li><a href="13-webscraping-with-rvest.html#webscraping-with-rvest"><span class="toc-section-number">13</span> Webscraping with <code>rvest</code></a>
<ul>
<li><a href="13-1-scraping-one-page.html#scraping-one-page"><span class="toc-section-number">13.1</span> Scraping one page</a></li>
<li><a href="13-2-cleaning-the-webscraped-data.html#cleaning-the-webscraped-data"><span class="toc-section-number">13.2</span> Cleaning the webscraped data</a></li>
</ul></li>
<li><a href="14-functions.html#functions"><span class="toc-section-number">14</span> Functions</a>
<ul>
<li><a href="14-1-a-simple-function.html#a-simple-function"><span class="toc-section-number">14.1</span> A simple function</a></li>
<li><a href="14-2-adding-parameters.html#adding-parameters"><span class="toc-section-number">14.2</span> Adding parameters</a></li>
<li><a href="14-3-recipes-function.html#recipes-function"><span class="toc-section-number">14.3</span> Making a function to scrape recipes</a></li>
</ul></li>
<li><a href="15-for-loops.html#for-loops"><span class="toc-section-number">15</span> For loops</a>
<ul>
<li><a href="15-1-basic-for-loops.html#basic-for-loops"><span class="toc-section-number">15.1</span> Basic for loops</a></li>
<li><a href="15-2-scraping-multiple-recipes.html#scraping-multiple-recipes"><span class="toc-section-number">15.2</span> Scraping multiple recipes</a></li>
</ul></li>
<li><a href="16-scrape-table.html#scrape-table"><span class="toc-section-number">16</span> Scraping tables from PDFs</a>
<ul>
<li><a href="16-1-scraping-the-first-table.html#scraping-the-first-table"><span class="toc-section-number">16.1</span> Scraping the first table</a></li>
<li><a href="16-2-making-a-function.html#making-a-function"><span class="toc-section-number">16.2</span> Making a function</a></li>
</ul></li>
<li><a href="17-scrape-table2.html#scrape-table2"><span class="toc-section-number">17</span> More scraping tables from PDFs</a>
<ul>
<li><a href="17-1-pregnant-women-incarcerated.html#pregnant-women-incarcerated"><span class="toc-section-number">17.1</span> Pregnant Women Incarcerated</a></li>
<li><a href="17-2-making-pdf-scraped-data-available-to-others.html#making-pdf-scraped-data-available-to-others"><span class="toc-section-number">17.2</span> Making PDF-scraped data available to others</a></li>
</ul></li>
<li><a href="18-geocoding.html#geocoding"><span class="toc-section-number">18</span> Geocoding</a>
<ul>
<li><a href="18-1-geocoding-a-single-address.html#geocoding-a-single-address"><span class="toc-section-number">18.1</span> Geocoding a single address</a></li>
<li><a href="16-2-making-a-function.html#making-a-function"><span class="toc-section-number">18.2</span> Making a function</a></li>
<li><a href="18-3-geocoding-san-francisco-marijuana-dispensary-locations.html#geocoding-san-francisco-marijuana-dispensary-locations"><span class="toc-section-number">18.3</span> Geocoding San Francisco marijuana dispensary locations</a></li>
</ul></li>
<li class="part"><span><b>IV Data</b></span></li>
<li><a href="19-introduction.html#introduction"><span class="toc-section-number">19</span> Introduction</a></li>
<li><a href="20-ucr.html#ucr"><span class="toc-section-number">20</span> Uniform Crime Report (UCR) - Offenses Known and Clearances by Arrest</a>
<ul>
<li><a href="20-1-exploring-the-ucr-data.html#exploring-the-ucr-data"><span class="toc-section-number">20.1</span> Exploring the UCR data</a></li>
<li><a href="20-2-oris-unique-agency-identifiers.html#oris---unique-agency-identifiers"><span class="toc-section-number">20.2</span> ORIs - Unique agency identifiers</a></li>
<li><a href="20-3-hierarchy-rule.html#hierarchy-rule"><span class="toc-section-number">20.3</span> Hierarchy Rule</a></li>
<li><a href="20-4-which-crimes-are-included.html#which-crimes-are-included"><span class="toc-section-number">20.4</span> Which crimes are included</a>
<ul>
<li><a href="20-4-which-crimes-are-included.html#index-crimes"><span class="toc-section-number">20.4.1</span> Index Crimes</a></li>
<li><a href="20-4-which-crimes-are-included.html#the-problem-with-using-index-crimes"><span class="toc-section-number">20.4.2</span> The problem with using index crimes</a></li>
<li><a href="20-4-which-crimes-are-included.html#rape-definition-change"><span class="toc-section-number">20.4.3</span> Rape definition change</a></li>
</ul></li>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#actual-offenses-clearances-and-unfounded-offenses"><span class="toc-section-number">20.5</span> Actual offenses, clearances, and unfounded offenses</a>
<ul>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#actual"><span class="toc-section-number">20.5.1</span> Actual</a></li>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#total-cleared"><span class="toc-section-number">20.5.2</span> Total Cleared</a></li>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#cleared-where-all-offenders-are-under-18"><span class="toc-section-number">20.5.3</span> Cleared Where All Offenders Are Under 18</a></li>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#unfounded"><span class="toc-section-number">20.5.4</span> Unfounded</a></li>
</ul></li>
<li><a href="20-6-number-of-months-reported.html#number-of-months-reported"><span class="toc-section-number">20.6</span> Number of months reported</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li><a href="A-useful-resources.html#useful-resources"><span class="toc-section-number">A</span> Useful resources</a>
<ul>
<li><a href="A-1-learning-r-and-coding-issues.html#learning-r-and-coding-issues"><span class="toc-section-number">A.1</span> Learning R and coding issues</a></li>
<li><a href="what-you-will-learn.html#data"><span class="toc-section-number">A.2</span> Data</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="subsetting-a-data.frame" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Subsetting a data.frame</h2>
<p>Earlier we were using a simple vector (collection of values). In this class - and in your own work - you will usually work on an entire data set. These generally come in the form called a “data.frame” which you can imagine as being like an Excel file with multiple rows and columns.</p>
<p>Let’s load in data from the Uniform Crime Report (UCR), an FBI data set that we’ll work on in a later lesson. This data has crime data every year from 1960-2017 and for nearly every agency in the country.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="2-5-subsetting-a-data-frame.html#cb40-1"></a><span class="kw">load</span>(<span class="st">&quot;data/offenses_known_yearly_1960_2017.rda&quot;</span>)</span></code></pre></div>
<p>Let’s peak at the first 6 rows and 6 columns using the square bracket notation <code>[]</code> for data.frames which we’ll explain more below.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="2-5-subsetting-a-data-frame.html#cb41-1"></a>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]</span>
<span id="cb41-2"><a href="2-5-subsetting-a-data-frame.html#cb41-2"></a><span class="co">#&gt;       ori      ori9 agency_name  state state_abb year</span></span>
<span id="cb41-3"><a href="2-5-subsetting-a-data-frame.html#cb41-3"></a><span class="co">#&gt; 1 AK00101 AK0010100   anchorage alaska        AK 2017</span></span>
<span id="cb41-4"><a href="2-5-subsetting-a-data-frame.html#cb41-4"></a><span class="co">#&gt; 2 AK00101 AK0010100   anchorage alaska        AK 2016</span></span>
<span id="cb41-5"><a href="2-5-subsetting-a-data-frame.html#cb41-5"></a><span class="co">#&gt; 3 AK00101 AK0010100   anchorage alaska        AK 2015</span></span>
<span id="cb41-6"><a href="2-5-subsetting-a-data-frame.html#cb41-6"></a><span class="co">#&gt; 4 AK00101 AK0010100   anchorage alaska        AK 2014</span></span>
<span id="cb41-7"><a href="2-5-subsetting-a-data-frame.html#cb41-7"></a><span class="co">#&gt; 5 AK00101 AK0010100   anchorage alaska        AK 2013</span></span>
<span id="cb41-8"><a href="2-5-subsetting-a-data-frame.html#cb41-8"></a><span class="co">#&gt; 6 AK00101 AK0010100   anchorage alaska        AK 2012</span></span></code></pre></div>
<p>The first 6 rows appear to be agency identification info for Anchorage, Alaska from 2017-2012. For good measure let’s check how many rows and columns are in this data. This will give us some guidance on subsetting which we’ll see below. <code>nrow()</code> gives us the number of rows and <code>ncol()</code> gives us the number of columns.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="2-5-subsetting-a-data-frame.html#cb42-1"></a><span class="kw">nrow</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>)</span>
<span id="cb42-2"><a href="2-5-subsetting-a-data-frame.html#cb42-2"></a><span class="co">#&gt; [1] 959010</span></span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="2-5-subsetting-a-data-frame.html#cb43-1"></a><span class="kw">ncol</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>)</span>
<span id="cb43-2"><a href="2-5-subsetting-a-data-frame.html#cb43-2"></a><span class="co">#&gt; [1] 159</span></span></code></pre></div>
<p>This is a large file with 159 columns and nearly a million rows. Normally we wouldn’t want to print out the names of all 159 columns but let’s do this here as we want to know the variables available to subset.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="2-5-subsetting-a-data-frame.html#cb44-1"></a><span class="kw">names</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>)</span>
<span id="cb44-2"><a href="2-5-subsetting-a-data-frame.html#cb44-2"></a><span class="co">#&gt;   [1] &quot;ori&quot;                            &quot;ori9&quot;                          </span></span>
<span id="cb44-3"><a href="2-5-subsetting-a-data-frame.html#cb44-3"></a><span class="co">#&gt;   [3] &quot;agency_name&quot;                    &quot;state&quot;                         </span></span>
<span id="cb44-4"><a href="2-5-subsetting-a-data-frame.html#cb44-4"></a><span class="co">#&gt;   [5] &quot;state_abb&quot;                      &quot;year&quot;                          </span></span>
<span id="cb44-5"><a href="2-5-subsetting-a-data-frame.html#cb44-5"></a><span class="co">#&gt;   [7] &quot;number_of_months_reported&quot;      &quot;fips_state_code&quot;               </span></span>
<span id="cb44-6"><a href="2-5-subsetting-a-data-frame.html#cb44-6"></a><span class="co">#&gt;   [9] &quot;fips_county_code&quot;               &quot;fips_state_county_code&quot;        </span></span>
<span id="cb44-7"><a href="2-5-subsetting-a-data-frame.html#cb44-7"></a><span class="co">#&gt;  [11] &quot;fips_place_code&quot;                &quot;fips_state_place_code&quot;         </span></span>
<span id="cb44-8"><a href="2-5-subsetting-a-data-frame.html#cb44-8"></a><span class="co">#&gt;  [13] &quot;agency_type&quot;                    &quot;agency_subtype_1&quot;              </span></span>
<span id="cb44-9"><a href="2-5-subsetting-a-data-frame.html#cb44-9"></a><span class="co">#&gt;  [15] &quot;agency_subtype_2&quot;               &quot;crosswalk_agency_name&quot;         </span></span>
<span id="cb44-10"><a href="2-5-subsetting-a-data-frame.html#cb44-10"></a><span class="co">#&gt;  [17] &quot;census_name&quot;                    &quot;population&quot;                    </span></span>
<span id="cb44-11"><a href="2-5-subsetting-a-data-frame.html#cb44-11"></a><span class="co">#&gt;  [19] &quot;population_group&quot;               &quot;country_division&quot;              </span></span>
<span id="cb44-12"><a href="2-5-subsetting-a-data-frame.html#cb44-12"></a><span class="co">#&gt;  [21] &quot;juvenile_age&quot;                   &quot;core_city_indication&quot;          </span></span>
<span id="cb44-13"><a href="2-5-subsetting-a-data-frame.html#cb44-13"></a><span class="co">#&gt;  [23] &quot;last_update&quot;                    &quot;fbi_field_office&quot;              </span></span>
<span id="cb44-14"><a href="2-5-subsetting-a-data-frame.html#cb44-14"></a><span class="co">#&gt;  [25] &quot;followup_indication&quot;            &quot;zip_code&quot;                      </span></span>
<span id="cb44-15"><a href="2-5-subsetting-a-data-frame.html#cb44-15"></a><span class="co">#&gt;  [27] &quot;covered_by_ori&quot;                 &quot;agency_count&quot;                  </span></span>
<span id="cb44-16"><a href="2-5-subsetting-a-data-frame.html#cb44-16"></a><span class="co">#&gt;  [29] &quot;date_of_last_update&quot;            &quot;month_included_in&quot;             </span></span>
<span id="cb44-17"><a href="2-5-subsetting-a-data-frame.html#cb44-17"></a><span class="co">#&gt;  [31] &quot;special_mailing_group&quot;          &quot;special_mailing_address&quot;       </span></span>
<span id="cb44-18"><a href="2-5-subsetting-a-data-frame.html#cb44-18"></a><span class="co">#&gt;  [33] &quot;first_line_of_mailing_address&quot;  &quot;second_line_of_mailing_address&quot;</span></span>
<span id="cb44-19"><a href="2-5-subsetting-a-data-frame.html#cb44-19"></a><span class="co">#&gt;  [35] &quot;third_line_of_mailing_address&quot;  &quot;fourth_line_of_mailing_address&quot;</span></span>
<span id="cb44-20"><a href="2-5-subsetting-a-data-frame.html#cb44-20"></a><span class="co">#&gt;  [37] &quot;officers_killed_by_felony&quot;      &quot;officers_killed_by_accident&quot;   </span></span>
<span id="cb44-21"><a href="2-5-subsetting-a-data-frame.html#cb44-21"></a><span class="co">#&gt;  [39] &quot;officers_assaulted&quot;             &quot;actual_murder&quot;                 </span></span>
<span id="cb44-22"><a href="2-5-subsetting-a-data-frame.html#cb44-22"></a><span class="co">#&gt;  [41] &quot;actual_manslaughter&quot;            &quot;actual_rape_total&quot;             </span></span>
<span id="cb44-23"><a href="2-5-subsetting-a-data-frame.html#cb44-23"></a><span class="co">#&gt;  [43] &quot;actual_rape_by_force&quot;           &quot;actual_rape_attempted&quot;         </span></span>
<span id="cb44-24"><a href="2-5-subsetting-a-data-frame.html#cb44-24"></a><span class="co">#&gt;  [45] &quot;actual_robbery_total&quot;           &quot;actual_robbery_with_a_gun&quot;     </span></span>
<span id="cb44-25"><a href="2-5-subsetting-a-data-frame.html#cb44-25"></a><span class="co">#&gt;  [47] &quot;actual_robbery_with_a_knife&quot;    &quot;actual_robbery_other_weapon&quot;   </span></span>
<span id="cb44-26"><a href="2-5-subsetting-a-data-frame.html#cb44-26"></a><span class="co">#&gt;  [49] &quot;actual_robbery_unarmed&quot;         &quot;actual_assault_total&quot;          </span></span>
<span id="cb44-27"><a href="2-5-subsetting-a-data-frame.html#cb44-27"></a><span class="co">#&gt;  [51] &quot;actual_assault_with_a_gun&quot;      &quot;actual_assault_with_a_knife&quot;   </span></span>
<span id="cb44-28"><a href="2-5-subsetting-a-data-frame.html#cb44-28"></a><span class="co">#&gt;  [53] &quot;actual_assault_other_weapon&quot;    &quot;actual_assault_unarmed&quot;        </span></span>
<span id="cb44-29"><a href="2-5-subsetting-a-data-frame.html#cb44-29"></a><span class="co">#&gt;  [55] &quot;actual_assault_simple&quot;          &quot;actual_burg_total&quot;             </span></span>
<span id="cb44-30"><a href="2-5-subsetting-a-data-frame.html#cb44-30"></a><span class="co">#&gt;  [57] &quot;actual_burg_force_entry&quot;        &quot;actual_burg_nonforce_entry&quot;    </span></span>
<span id="cb44-31"><a href="2-5-subsetting-a-data-frame.html#cb44-31"></a><span class="co">#&gt;  [59] &quot;actual_burg_attempted&quot;          &quot;actual_theft_total&quot;            </span></span>
<span id="cb44-32"><a href="2-5-subsetting-a-data-frame.html#cb44-32"></a><span class="co">#&gt;  [61] &quot;actual_mtr_veh_theft_total&quot;     &quot;actual_mtr_veh_theft_car&quot;      </span></span>
<span id="cb44-33"><a href="2-5-subsetting-a-data-frame.html#cb44-33"></a><span class="co">#&gt;  [63] &quot;actual_mtr_veh_theft_truck&quot;     &quot;actual_mtr_veh_theft_other&quot;    </span></span>
<span id="cb44-34"><a href="2-5-subsetting-a-data-frame.html#cb44-34"></a><span class="co">#&gt;  [65] &quot;actual_all_crimes&quot;              &quot;actual_assault_aggravated&quot;     </span></span>
<span id="cb44-35"><a href="2-5-subsetting-a-data-frame.html#cb44-35"></a><span class="co">#&gt;  [67] &quot;actual_index_violent&quot;           &quot;actual_index_property&quot;         </span></span>
<span id="cb44-36"><a href="2-5-subsetting-a-data-frame.html#cb44-36"></a><span class="co">#&gt;  [69] &quot;actual_index_total&quot;             &quot;tot_clr_murder&quot;                </span></span>
<span id="cb44-37"><a href="2-5-subsetting-a-data-frame.html#cb44-37"></a><span class="co">#&gt;  [71] &quot;tot_clr_manslaughter&quot;           &quot;tot_clr_rape_total&quot;            </span></span>
<span id="cb44-38"><a href="2-5-subsetting-a-data-frame.html#cb44-38"></a><span class="co">#&gt;  [73] &quot;tot_clr_rape_by_force&quot;          &quot;tot_clr_rape_attempted&quot;        </span></span>
<span id="cb44-39"><a href="2-5-subsetting-a-data-frame.html#cb44-39"></a><span class="co">#&gt;  [75] &quot;tot_clr_robbery_total&quot;          &quot;tot_clr_robbery_with_a_gun&quot;    </span></span>
<span id="cb44-40"><a href="2-5-subsetting-a-data-frame.html#cb44-40"></a><span class="co">#&gt;  [77] &quot;tot_clr_robbery_with_a_knife&quot;   &quot;tot_clr_robbery_other_weapon&quot;  </span></span>
<span id="cb44-41"><a href="2-5-subsetting-a-data-frame.html#cb44-41"></a><span class="co">#&gt;  [79] &quot;tot_clr_robbery_unarmed&quot;        &quot;tot_clr_assault_total&quot;         </span></span>
<span id="cb44-42"><a href="2-5-subsetting-a-data-frame.html#cb44-42"></a><span class="co">#&gt;  [81] &quot;tot_clr_assault_with_a_gun&quot;     &quot;tot_clr_assault_with_a_knife&quot;  </span></span>
<span id="cb44-43"><a href="2-5-subsetting-a-data-frame.html#cb44-43"></a><span class="co">#&gt;  [83] &quot;tot_clr_assault_other_weapon&quot;   &quot;tot_clr_assault_unarmed&quot;       </span></span>
<span id="cb44-44"><a href="2-5-subsetting-a-data-frame.html#cb44-44"></a><span class="co">#&gt;  [85] &quot;tot_clr_assault_simple&quot;         &quot;tot_clr_burg_total&quot;            </span></span>
<span id="cb44-45"><a href="2-5-subsetting-a-data-frame.html#cb44-45"></a><span class="co">#&gt;  [87] &quot;tot_clr_burg_force_entry&quot;       &quot;tot_clr_burg_nonforce_entry&quot;   </span></span>
<span id="cb44-46"><a href="2-5-subsetting-a-data-frame.html#cb44-46"></a><span class="co">#&gt;  [89] &quot;tot_clr_burg_attempted&quot;         &quot;tot_clr_theft_total&quot;           </span></span>
<span id="cb44-47"><a href="2-5-subsetting-a-data-frame.html#cb44-47"></a><span class="co">#&gt;  [91] &quot;tot_clr_mtr_veh_theft_total&quot;    &quot;tot_clr_mtr_veh_theft_car&quot;     </span></span>
<span id="cb44-48"><a href="2-5-subsetting-a-data-frame.html#cb44-48"></a><span class="co">#&gt;  [93] &quot;tot_clr_mtr_veh_theft_truck&quot;    &quot;tot_clr_mtr_veh_theft_other&quot;   </span></span>
<span id="cb44-49"><a href="2-5-subsetting-a-data-frame.html#cb44-49"></a><span class="co">#&gt;  [95] &quot;tot_clr_all_crimes&quot;             &quot;tot_clr_assault_aggravated&quot;    </span></span>
<span id="cb44-50"><a href="2-5-subsetting-a-data-frame.html#cb44-50"></a><span class="co">#&gt;  [97] &quot;tot_clr_index_violent&quot;          &quot;tot_clr_index_property&quot;        </span></span>
<span id="cb44-51"><a href="2-5-subsetting-a-data-frame.html#cb44-51"></a><span class="co">#&gt;  [99] &quot;tot_clr_index_total&quot;            &quot;clr_18_murder&quot;                 </span></span>
<span id="cb44-52"><a href="2-5-subsetting-a-data-frame.html#cb44-52"></a><span class="co">#&gt; [101] &quot;clr_18_manslaughter&quot;            &quot;clr_18_rape_total&quot;             </span></span>
<span id="cb44-53"><a href="2-5-subsetting-a-data-frame.html#cb44-53"></a><span class="co">#&gt; [103] &quot;clr_18_rape_by_force&quot;           &quot;clr_18_rape_attempted&quot;         </span></span>
<span id="cb44-54"><a href="2-5-subsetting-a-data-frame.html#cb44-54"></a><span class="co">#&gt; [105] &quot;clr_18_robbery_total&quot;           &quot;clr_18_robbery_with_a_gun&quot;     </span></span>
<span id="cb44-55"><a href="2-5-subsetting-a-data-frame.html#cb44-55"></a><span class="co">#&gt; [107] &quot;clr_18_robbery_with_a_knife&quot;    &quot;clr_18_robbery_other_weapon&quot;   </span></span>
<span id="cb44-56"><a href="2-5-subsetting-a-data-frame.html#cb44-56"></a><span class="co">#&gt; [109] &quot;clr_18_robbery_unarmed&quot;         &quot;clr_18_assault_total&quot;          </span></span>
<span id="cb44-57"><a href="2-5-subsetting-a-data-frame.html#cb44-57"></a><span class="co">#&gt; [111] &quot;clr_18_assault_with_a_gun&quot;      &quot;clr_18_assault_with_a_knife&quot;   </span></span>
<span id="cb44-58"><a href="2-5-subsetting-a-data-frame.html#cb44-58"></a><span class="co">#&gt; [113] &quot;clr_18_assault_other_weapon&quot;    &quot;clr_18_assault_unarmed&quot;        </span></span>
<span id="cb44-59"><a href="2-5-subsetting-a-data-frame.html#cb44-59"></a><span class="co">#&gt; [115] &quot;clr_18_assault_simple&quot;          &quot;clr_18_burg_total&quot;             </span></span>
<span id="cb44-60"><a href="2-5-subsetting-a-data-frame.html#cb44-60"></a><span class="co">#&gt; [117] &quot;clr_18_burg_force_entry&quot;        &quot;clr_18_burg_nonforce_entry&quot;    </span></span>
<span id="cb44-61"><a href="2-5-subsetting-a-data-frame.html#cb44-61"></a><span class="co">#&gt; [119] &quot;clr_18_burg_attempted&quot;          &quot;clr_18_theft_total&quot;            </span></span>
<span id="cb44-62"><a href="2-5-subsetting-a-data-frame.html#cb44-62"></a><span class="co">#&gt; [121] &quot;clr_18_mtr_veh_theft_total&quot;     &quot;clr_18_mtr_veh_theft_car&quot;      </span></span>
<span id="cb44-63"><a href="2-5-subsetting-a-data-frame.html#cb44-63"></a><span class="co">#&gt; [123] &quot;clr_18_mtr_veh_theft_truck&quot;     &quot;clr_18_mtr_veh_theft_other&quot;    </span></span>
<span id="cb44-64"><a href="2-5-subsetting-a-data-frame.html#cb44-64"></a><span class="co">#&gt; [125] &quot;clr_18_all_crimes&quot;              &quot;clr_18_assault_aggravated&quot;     </span></span>
<span id="cb44-65"><a href="2-5-subsetting-a-data-frame.html#cb44-65"></a><span class="co">#&gt; [127] &quot;clr_18_index_violent&quot;           &quot;clr_18_index_property&quot;         </span></span>
<span id="cb44-66"><a href="2-5-subsetting-a-data-frame.html#cb44-66"></a><span class="co">#&gt; [129] &quot;clr_18_index_total&quot;             &quot;unfound_murder&quot;                </span></span>
<span id="cb44-67"><a href="2-5-subsetting-a-data-frame.html#cb44-67"></a><span class="co">#&gt; [131] &quot;unfound_manslaughter&quot;           &quot;unfound_rape_total&quot;            </span></span>
<span id="cb44-68"><a href="2-5-subsetting-a-data-frame.html#cb44-68"></a><span class="co">#&gt; [133] &quot;unfound_rape_by_force&quot;          &quot;unfound_rape_attempted&quot;        </span></span>
<span id="cb44-69"><a href="2-5-subsetting-a-data-frame.html#cb44-69"></a><span class="co">#&gt; [135] &quot;unfound_robbery_total&quot;          &quot;unfound_robbery_with_a_gun&quot;    </span></span>
<span id="cb44-70"><a href="2-5-subsetting-a-data-frame.html#cb44-70"></a><span class="co">#&gt; [137] &quot;unfound_robbery_with_a_knife&quot;   &quot;unfound_robbery_other_weapon&quot;  </span></span>
<span id="cb44-71"><a href="2-5-subsetting-a-data-frame.html#cb44-71"></a><span class="co">#&gt; [139] &quot;unfound_robbery_unarmed&quot;        &quot;unfound_assault_total&quot;         </span></span>
<span id="cb44-72"><a href="2-5-subsetting-a-data-frame.html#cb44-72"></a><span class="co">#&gt; [141] &quot;unfound_assault_with_a_gun&quot;     &quot;unfound_assault_with_a_knife&quot;  </span></span>
<span id="cb44-73"><a href="2-5-subsetting-a-data-frame.html#cb44-73"></a><span class="co">#&gt; [143] &quot;unfound_assault_other_weapon&quot;   &quot;unfound_assault_unarmed&quot;       </span></span>
<span id="cb44-74"><a href="2-5-subsetting-a-data-frame.html#cb44-74"></a><span class="co">#&gt; [145] &quot;unfound_assault_simple&quot;         &quot;unfound_burg_total&quot;            </span></span>
<span id="cb44-75"><a href="2-5-subsetting-a-data-frame.html#cb44-75"></a><span class="co">#&gt; [147] &quot;unfound_burg_force_entry&quot;       &quot;unfound_burg_nonforce_entry&quot;   </span></span>
<span id="cb44-76"><a href="2-5-subsetting-a-data-frame.html#cb44-76"></a><span class="co">#&gt; [149] &quot;unfound_burg_attempted&quot;         &quot;unfound_theft_total&quot;           </span></span>
<span id="cb44-77"><a href="2-5-subsetting-a-data-frame.html#cb44-77"></a><span class="co">#&gt; [151] &quot;unfound_mtr_veh_theft_total&quot;    &quot;unfound_mtr_veh_theft_car&quot;     </span></span>
<span id="cb44-78"><a href="2-5-subsetting-a-data-frame.html#cb44-78"></a><span class="co">#&gt; [153] &quot;unfound_mtr_veh_theft_truck&quot;    &quot;unfound_mtr_veh_theft_other&quot;   </span></span>
<span id="cb44-79"><a href="2-5-subsetting-a-data-frame.html#cb44-79"></a><span class="co">#&gt; [155] &quot;unfound_all_crimes&quot;             &quot;unfound_assault_aggravated&quot;    </span></span>
<span id="cb44-80"><a href="2-5-subsetting-a-data-frame.html#cb44-80"></a><span class="co">#&gt; [157] &quot;unfound_index_violent&quot;          &quot;unfound_index_property&quot;        </span></span>
<span id="cb44-81"><a href="2-5-subsetting-a-data-frame.html#cb44-81"></a><span class="co">#&gt; [159] &quot;unfound_index_total&quot;</span></span></code></pre></div>
<p>Now let’s discuss how to subset this data into a smaller data set to answer a specific question. Let’s subset the data to answer our above question of “did Colorado’s marijuana legalization affect crime in the state?” Like mentioned above, we need data just from Colorado and just for years around the legalization year - we can do 2011-2017 for simplicity.</p>
<p>We also don’t need all 159 columns in the current data. Let’s say we’re only interested in if murder changes. We’d need the column called <em>actual_murder</em>, the <em>state</em> column (as a check to make sure we subset only Colorado), the <em>year</em> column, the <em>population</em> column, the <em>ori</em> column, and the <em>agency_name</em> column (a real analysis would likely grab geographic variables too to see if changes depended on location but here we’re just using it as an example). The last two columns - <em>ori</em> and <em>agency_name</em> - aren’t strictly necessary but would be useful if checking if an agency’s values are reasonable when checking for outliers, a step we won’t do here.</p>
<p>Before explaining how to subset from a data.frame, let’s write pseudocode (essentially a description of what we are going to do that is readable to people but isn’t real code) for our subset.</p>
<p>We want</p>
<ul>
<li>Only rows where the state equals Colorado</li>
<li>Only rows where the year is 2011-2017</li>
<li>Only the following columns: <em>actual_murder</em>, <em>state</em>, <em>year</em>, <em>population</em>, <em>ori</em>, <em>agency_name</em></li>
</ul>
<div id="select-specific-columns" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Select specific columns</h3>
<p>The way to select a specific column in R is called the dollar sign notation.</p>
<p><code>data$column</code></p>
<p>We write the data name followed by a <code>$</code> and then the column name. Make sure there are no spaces, quotes, or misspellings (or capitalization issues). Just the <code>data$column</code> exactly as it is spelled. Since we are referring to data already read into R, there should not be any quotes for either the data or the column name.</p>
<p>We can do this for the column <em>agency_name</em> in our UCR data. If we wrote this in the console it would print out every single row in the column. Because this data is large (nearly a million rows), I am going to wrap this in <code>head()</code> so it only displays the first 6 rows of the column rather than printing the entire column.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="2-5-subsetting-a-data-frame.html#cb45-1"></a><span class="kw">head</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span><span class="op">$</span>agency_name)</span>
<span id="cb45-2"><a href="2-5-subsetting-a-data-frame.html#cb45-2"></a><span class="co">#&gt; [1] &quot;anchorage&quot; &quot;anchorage&quot; &quot;anchorage&quot; &quot;anchorage&quot; &quot;anchorage&quot; &quot;anchorage&quot;</span></span></code></pre></div>
<p>They’re all the same name because Anchorage Police reported many times and are in the data set multiple times. Let’s look at the column <em>actual_murder</em> which shows the annual number of murders in that agency.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="2-5-subsetting-a-data-frame.html#cb46-1"></a><span class="kw">head</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span><span class="op">$</span>actual_murder)</span>
<span id="cb46-2"><a href="2-5-subsetting-a-data-frame.html#cb46-2"></a><span class="co">#&gt; [1] 27 28 26 12 14 15</span></span></code></pre></div>
<p>One hint is to write out the data set name in the console and hit the Tab key. Wait a couple of seconds and a popup will appear listing every column in the data set. You can scroll through this and then hit enter to select that column.</p>
<p><img src="images/tab_example.PNG" /></p>
</div>
<div id="select-specific-rows" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Select specific rows</h3>
<p>In the earlier examples we used square bracket notation <code>[]</code> and just put a number or several numbers in the <code>[]</code>. When dealing with data.frames, however, you need an extra step to tell R which columns to keep. The syntax in the square bracket is</p>
<p><code>[row, column]</code></p>
<p>As we did earlier, we start in the square bracket by saying which row we want. Now, since we also have to consider the columns, we need to tell it the number or name (in a vector using <code>c()</code> if more than one name and putting column names in quotes) of the column or columns we want.</p>
<p>The exception to this is when we use the dollar sign notation to select a single column. In that case we don’t need a comma (and indeed it will give us an error!). Let’s see a few examples and then explain why this works the way it does.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="2-5-subsetting-a-data-frame.html#cb47-1"></a>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span>, <span class="dv">1</span>]</span>
<span id="cb47-2"><a href="2-5-subsetting-a-data-frame.html#cb47-2"></a><span class="co">#&gt; [1] &quot;AK00101&quot;</span></span></code></pre></div>
<p>If we input multiple numbers we can get multiple rows and columns.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="2-5-subsetting-a-data-frame.html#cb48-1"></a>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]</span>
<span id="cb48-2"><a href="2-5-subsetting-a-data-frame.html#cb48-2"></a><span class="co">#&gt;       ori      ori9 agency_name  state state_abb year</span></span>
<span id="cb48-3"><a href="2-5-subsetting-a-data-frame.html#cb48-3"></a><span class="co">#&gt; 1 AK00101 AK0010100   anchorage alaska        AK 2017</span></span>
<span id="cb48-4"><a href="2-5-subsetting-a-data-frame.html#cb48-4"></a><span class="co">#&gt; 2 AK00101 AK0010100   anchorage alaska        AK 2016</span></span>
<span id="cb48-5"><a href="2-5-subsetting-a-data-frame.html#cb48-5"></a><span class="co">#&gt; 3 AK00101 AK0010100   anchorage alaska        AK 2015</span></span>
<span id="cb48-6"><a href="2-5-subsetting-a-data-frame.html#cb48-6"></a><span class="co">#&gt; 4 AK00101 AK0010100   anchorage alaska        AK 2014</span></span>
<span id="cb48-7"><a href="2-5-subsetting-a-data-frame.html#cb48-7"></a><span class="co">#&gt; 5 AK00101 AK0010100   anchorage alaska        AK 2013</span></span>
<span id="cb48-8"><a href="2-5-subsetting-a-data-frame.html#cb48-8"></a><span class="co">#&gt; 6 AK00101 AK0010100   anchorage alaska        AK 2012</span></span></code></pre></div>
<p>The column section also accepts a vector of the names of the columns. These names must be spelled correctly and in quotes.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="2-5-subsetting-a-data-frame.html#cb49-1"></a>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="kw">c</span>(<span class="st">&quot;ori&quot;</span>, <span class="st">&quot;year&quot;</span>)]</span>
<span id="cb49-2"><a href="2-5-subsetting-a-data-frame.html#cb49-2"></a><span class="co">#&gt;       ori year</span></span>
<span id="cb49-3"><a href="2-5-subsetting-a-data-frame.html#cb49-3"></a><span class="co">#&gt; 1 AK00101 2017</span></span>
<span id="cb49-4"><a href="2-5-subsetting-a-data-frame.html#cb49-4"></a><span class="co">#&gt; 2 AK00101 2016</span></span>
<span id="cb49-5"><a href="2-5-subsetting-a-data-frame.html#cb49-5"></a><span class="co">#&gt; 3 AK00101 2015</span></span>
<span id="cb49-6"><a href="2-5-subsetting-a-data-frame.html#cb49-6"></a><span class="co">#&gt; 4 AK00101 2014</span></span>
<span id="cb49-7"><a href="2-5-subsetting-a-data-frame.html#cb49-7"></a><span class="co">#&gt; 5 AK00101 2013</span></span>
<span id="cb49-8"><a href="2-5-subsetting-a-data-frame.html#cb49-8"></a><span class="co">#&gt; 6 AK00101 2012</span></span></code></pre></div>
<p>In cases where we want every row or every column, we just don’t put a number. By default R will return every row/column if you don’t specify which ones you want. However you will still need to include the comma.</p>
<p>Here is every column in the first row.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="2-5-subsetting-a-data-frame.html#cb50-1"></a>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span>, ]</span>
<span id="cb50-2"><a href="2-5-subsetting-a-data-frame.html#cb50-2"></a><span class="co">#&gt;       ori      ori9 agency_name  state state_abb year number_of_months_reported</span></span>
<span id="cb50-3"><a href="2-5-subsetting-a-data-frame.html#cb50-3"></a><span class="co">#&gt; 1 AK00101 AK0010100   anchorage alaska        AK 2017                        12</span></span>
<span id="cb50-4"><a href="2-5-subsetting-a-data-frame.html#cb50-4"></a><span class="co">#&gt;   fips_state_code fips_county_code fips_state_county_code fips_place_code</span></span>
<span id="cb50-5"><a href="2-5-subsetting-a-data-frame.html#cb50-5"></a><span class="co">#&gt; 1              02              020                  02020           03000</span></span>
<span id="cb50-6"><a href="2-5-subsetting-a-data-frame.html#cb50-6"></a><span class="co">#&gt;   fips_state_place_code             agency_type agency_subtype_1</span></span>
<span id="cb50-7"><a href="2-5-subsetting-a-data-frame.html#cb50-7"></a><span class="co">#&gt; 1               0203000 local police department   not applicable</span></span>
<span id="cb50-8"><a href="2-5-subsetting-a-data-frame.html#cb50-8"></a><span class="co">#&gt;   agency_subtype_2       crosswalk_agency_name            census_name</span></span>
<span id="cb50-9"><a href="2-5-subsetting-a-data-frame.html#cb50-9"></a><span class="co">#&gt; 1   not applicable anchorage police department anchorage municipality</span></span>
<span id="cb50-10"><a href="2-5-subsetting-a-data-frame.html#cb50-10"></a><span class="co">#&gt;   population          population_group country_division juvenile_age</span></span>
<span id="cb50-11"><a href="2-5-subsetting-a-data-frame.html#cb50-11"></a><span class="co">#&gt; 1     296188 city 250,000 thru 499,999          pacific           18</span></span>
<span id="cb50-12"><a href="2-5-subsetting-a-data-frame.html#cb50-12"></a><span class="co">#&gt;   core_city_indication last_update fbi_field_office followup_indication</span></span>
<span id="cb50-13"><a href="2-5-subsetting-a-data-frame.html#cb50-13"></a><span class="co">#&gt; 1     core city of msa       42094             3030    send a follow-up</span></span>
<span id="cb50-14"><a href="2-5-subsetting-a-data-frame.html#cb50-14"></a><span class="co">#&gt;   zip_code covered_by_ori agency_count date_of_last_update month_included_in</span></span>
<span id="cb50-15"><a href="2-5-subsetting-a-data-frame.html#cb50-15"></a><span class="co">#&gt; 1    99507           &lt;NA&gt;            1              120717                 0</span></span>
<span id="cb50-16"><a href="2-5-subsetting-a-data-frame.html#cb50-16"></a><span class="co">#&gt;                                                              special_mailing_group</span></span>
<span id="cb50-17"><a href="2-5-subsetting-a-data-frame.html#cb50-17"></a><span class="co">#&gt; 1 the agency is a contributor but not on the mailing list,they are not sent forms.</span></span>
<span id="cb50-18"><a href="2-5-subsetting-a-data-frame.html#cb50-18"></a><span class="co">#&gt;         special_mailing_address first_line_of_mailing_address</span></span>
<span id="cb50-19"><a href="2-5-subsetting-a-data-frame.html#cb50-19"></a><span class="co">#&gt; 1 not a special mailing address               chief of police</span></span>
<span id="cb50-20"><a href="2-5-subsetting-a-data-frame.html#cb50-20"></a><span class="co">#&gt;   second_line_of_mailing_address third_line_of_mailing_address</span></span>
<span id="cb50-21"><a href="2-5-subsetting-a-data-frame.html#cb50-21"></a><span class="co">#&gt; 1    anchorage police department                4501 elmore rd</span></span>
<span id="cb50-22"><a href="2-5-subsetting-a-data-frame.html#cb50-22"></a><span class="co">#&gt;   fourth_line_of_mailing_address officers_killed_by_felony</span></span>
<span id="cb50-23"><a href="2-5-subsetting-a-data-frame.html#cb50-23"></a><span class="co">#&gt; 1                  anchorage, ak                         0</span></span>
<span id="cb50-24"><a href="2-5-subsetting-a-data-frame.html#cb50-24"></a><span class="co">#&gt;   officers_killed_by_accident officers_assaulted actual_murder</span></span>
<span id="cb50-25"><a href="2-5-subsetting-a-data-frame.html#cb50-25"></a><span class="co">#&gt; 1                           0                426            27</span></span>
<span id="cb50-26"><a href="2-5-subsetting-a-data-frame.html#cb50-26"></a><span class="co">#&gt;   actual_manslaughter actual_rape_total actual_rape_by_force</span></span>
<span id="cb50-27"><a href="2-5-subsetting-a-data-frame.html#cb50-27"></a><span class="co">#&gt; 1                   3               391                  350</span></span>
<span id="cb50-28"><a href="2-5-subsetting-a-data-frame.html#cb50-28"></a><span class="co">#&gt;   actual_rape_attempted actual_robbery_total actual_robbery_with_a_gun</span></span>
<span id="cb50-29"><a href="2-5-subsetting-a-data-frame.html#cb50-29"></a><span class="co">#&gt; 1                    41                  778                       249</span></span>
<span id="cb50-30"><a href="2-5-subsetting-a-data-frame.html#cb50-30"></a><span class="co">#&gt;   actual_robbery_with_a_knife actual_robbery_other_weapon</span></span>
<span id="cb50-31"><a href="2-5-subsetting-a-data-frame.html#cb50-31"></a><span class="co">#&gt; 1                          69                         116</span></span>
<span id="cb50-32"><a href="2-5-subsetting-a-data-frame.html#cb50-32"></a><span class="co">#&gt;   actual_robbery_unarmed actual_assault_total actual_assault_with_a_gun</span></span>
<span id="cb50-33"><a href="2-5-subsetting-a-data-frame.html#cb50-33"></a><span class="co">#&gt; 1                    344                 6448                       621</span></span>
<span id="cb50-34"><a href="2-5-subsetting-a-data-frame.html#cb50-34"></a><span class="co">#&gt;   actual_assault_with_a_knife actual_assault_other_weapon</span></span>
<span id="cb50-35"><a href="2-5-subsetting-a-data-frame.html#cb50-35"></a><span class="co">#&gt; 1                         392                         704</span></span>
<span id="cb50-36"><a href="2-5-subsetting-a-data-frame.html#cb50-36"></a><span class="co">#&gt;   actual_assault_unarmed actual_assault_simple actual_burg_total</span></span>
<span id="cb50-37"><a href="2-5-subsetting-a-data-frame.html#cb50-37"></a><span class="co">#&gt; 1                    651                  4080              2216</span></span>
<span id="cb50-38"><a href="2-5-subsetting-a-data-frame.html#cb50-38"></a><span class="co">#&gt;   actual_burg_force_entry actual_burg_nonforce_entry actual_burg_attempted</span></span>
<span id="cb50-39"><a href="2-5-subsetting-a-data-frame.html#cb50-39"></a><span class="co">#&gt; 1                    1537                        521                   158</span></span>
<span id="cb50-40"><a href="2-5-subsetting-a-data-frame.html#cb50-40"></a><span class="co">#&gt;   actual_theft_total actual_mtr_veh_theft_total actual_mtr_veh_theft_car</span></span>
<span id="cb50-41"><a href="2-5-subsetting-a-data-frame.html#cb50-41"></a><span class="co">#&gt; 1              10721                       3104                     1934</span></span>
<span id="cb50-42"><a href="2-5-subsetting-a-data-frame.html#cb50-42"></a><span class="co">#&gt;   actual_mtr_veh_theft_truck actual_mtr_veh_theft_other actual_all_crimes</span></span>
<span id="cb50-43"><a href="2-5-subsetting-a-data-frame.html#cb50-43"></a><span class="co">#&gt; 1                        971                        199             23688</span></span>
<span id="cb50-44"><a href="2-5-subsetting-a-data-frame.html#cb50-44"></a><span class="co">#&gt;   actual_assault_aggravated actual_index_violent actual_index_property</span></span>
<span id="cb50-45"><a href="2-5-subsetting-a-data-frame.html#cb50-45"></a><span class="co">#&gt; 1                      2368                 3564                 16041</span></span>
<span id="cb50-46"><a href="2-5-subsetting-a-data-frame.html#cb50-46"></a><span class="co">#&gt;   actual_index_total tot_clr_murder tot_clr_manslaughter tot_clr_rape_total</span></span>
<span id="cb50-47"><a href="2-5-subsetting-a-data-frame.html#cb50-47"></a><span class="co">#&gt; 1              19605             28                    0                 58</span></span>
<span id="cb50-48"><a href="2-5-subsetting-a-data-frame.html#cb50-48"></a><span class="co">#&gt;   tot_clr_rape_by_force tot_clr_rape_attempted tot_clr_robbery_total</span></span>
<span id="cb50-49"><a href="2-5-subsetting-a-data-frame.html#cb50-49"></a><span class="co">#&gt; 1                    48                     10                   216</span></span>
<span id="cb50-50"><a href="2-5-subsetting-a-data-frame.html#cb50-50"></a><span class="co">#&gt;   tot_clr_robbery_with_a_gun tot_clr_robbery_with_a_knife</span></span>
<span id="cb50-51"><a href="2-5-subsetting-a-data-frame.html#cb50-51"></a><span class="co">#&gt; 1                         47                           22</span></span>
<span id="cb50-52"><a href="2-5-subsetting-a-data-frame.html#cb50-52"></a><span class="co">#&gt;   tot_clr_robbery_other_weapon tot_clr_robbery_unarmed tot_clr_assault_total</span></span>
<span id="cb50-53"><a href="2-5-subsetting-a-data-frame.html#cb50-53"></a><span class="co">#&gt; 1                           37                     110                  3576</span></span>
<span id="cb50-54"><a href="2-5-subsetting-a-data-frame.html#cb50-54"></a><span class="co">#&gt;   tot_clr_assault_with_a_gun tot_clr_assault_with_a_knife</span></span>
<span id="cb50-55"><a href="2-5-subsetting-a-data-frame.html#cb50-55"></a><span class="co">#&gt; 1                        249                          250</span></span>
<span id="cb50-56"><a href="2-5-subsetting-a-data-frame.html#cb50-56"></a><span class="co">#&gt;   tot_clr_assault_other_weapon tot_clr_assault_unarmed tot_clr_assault_simple</span></span>
<span id="cb50-57"><a href="2-5-subsetting-a-data-frame.html#cb50-57"></a><span class="co">#&gt; 1                          413                     436                   2228</span></span>
<span id="cb50-58"><a href="2-5-subsetting-a-data-frame.html#cb50-58"></a><span class="co">#&gt;   tot_clr_burg_total tot_clr_burg_force_entry tot_clr_burg_nonforce_entry</span></span>
<span id="cb50-59"><a href="2-5-subsetting-a-data-frame.html#cb50-59"></a><span class="co">#&gt; 1                250                      129                         114</span></span>
<span id="cb50-60"><a href="2-5-subsetting-a-data-frame.html#cb50-60"></a><span class="co">#&gt;   tot_clr_burg_attempted tot_clr_theft_total tot_clr_mtr_veh_theft_total</span></span>
<span id="cb50-61"><a href="2-5-subsetting-a-data-frame.html#cb50-61"></a><span class="co">#&gt; 1                      7                1358                         497</span></span>
<span id="cb50-62"><a href="2-5-subsetting-a-data-frame.html#cb50-62"></a><span class="co">#&gt;   tot_clr_mtr_veh_theft_car tot_clr_mtr_veh_theft_truck</span></span>
<span id="cb50-63"><a href="2-5-subsetting-a-data-frame.html#cb50-63"></a><span class="co">#&gt; 1                       335                         145</span></span>
<span id="cb50-64"><a href="2-5-subsetting-a-data-frame.html#cb50-64"></a><span class="co">#&gt;   tot_clr_mtr_veh_theft_other tot_clr_all_crimes tot_clr_assault_aggravated</span></span>
<span id="cb50-65"><a href="2-5-subsetting-a-data-frame.html#cb50-65"></a><span class="co">#&gt; 1                          17               5983                       1348</span></span>
<span id="cb50-66"><a href="2-5-subsetting-a-data-frame.html#cb50-66"></a><span class="co">#&gt;   tot_clr_index_violent tot_clr_index_property tot_clr_index_total</span></span>
<span id="cb50-67"><a href="2-5-subsetting-a-data-frame.html#cb50-67"></a><span class="co">#&gt; 1                  1650                   2105                3755</span></span>
<span id="cb50-68"><a href="2-5-subsetting-a-data-frame.html#cb50-68"></a><span class="co">#&gt;   clr_18_murder clr_18_manslaughter clr_18_rape_total clr_18_rape_by_force</span></span>
<span id="cb50-69"><a href="2-5-subsetting-a-data-frame.html#cb50-69"></a><span class="co">#&gt; 1             1                   0                 5                    4</span></span>
<span id="cb50-70"><a href="2-5-subsetting-a-data-frame.html#cb50-70"></a><span class="co">#&gt;   clr_18_rape_attempted clr_18_robbery_total clr_18_robbery_with_a_gun</span></span>
<span id="cb50-71"><a href="2-5-subsetting-a-data-frame.html#cb50-71"></a><span class="co">#&gt; 1                     1                    9                         1</span></span>
<span id="cb50-72"><a href="2-5-subsetting-a-data-frame.html#cb50-72"></a><span class="co">#&gt;   clr_18_robbery_with_a_knife clr_18_robbery_other_weapon</span></span>
<span id="cb50-73"><a href="2-5-subsetting-a-data-frame.html#cb50-73"></a><span class="co">#&gt; 1                           1                           0</span></span>
<span id="cb50-74"><a href="2-5-subsetting-a-data-frame.html#cb50-74"></a><span class="co">#&gt;   clr_18_robbery_unarmed clr_18_assault_total clr_18_assault_with_a_gun</span></span>
<span id="cb50-75"><a href="2-5-subsetting-a-data-frame.html#cb50-75"></a><span class="co">#&gt; 1                      7                  277                        37</span></span>
<span id="cb50-76"><a href="2-5-subsetting-a-data-frame.html#cb50-76"></a><span class="co">#&gt;   clr_18_assault_with_a_knife clr_18_assault_other_weapon</span></span>
<span id="cb50-77"><a href="2-5-subsetting-a-data-frame.html#cb50-77"></a><span class="co">#&gt; 1                          17                          19</span></span>
<span id="cb50-78"><a href="2-5-subsetting-a-data-frame.html#cb50-78"></a><span class="co">#&gt;   clr_18_assault_unarmed clr_18_assault_simple clr_18_burg_total</span></span>
<span id="cb50-79"><a href="2-5-subsetting-a-data-frame.html#cb50-79"></a><span class="co">#&gt; 1                     17                   187                 8</span></span>
<span id="cb50-80"><a href="2-5-subsetting-a-data-frame.html#cb50-80"></a><span class="co">#&gt;   clr_18_burg_force_entry clr_18_burg_nonforce_entry clr_18_burg_attempted</span></span>
<span id="cb50-81"><a href="2-5-subsetting-a-data-frame.html#cb50-81"></a><span class="co">#&gt; 1                       4                          2                     2</span></span>
<span id="cb50-82"><a href="2-5-subsetting-a-data-frame.html#cb50-82"></a><span class="co">#&gt;   clr_18_theft_total clr_18_mtr_veh_theft_total clr_18_mtr_veh_theft_car</span></span>
<span id="cb50-83"><a href="2-5-subsetting-a-data-frame.html#cb50-83"></a><span class="co">#&gt; 1                107                         22                       17</span></span>
<span id="cb50-84"><a href="2-5-subsetting-a-data-frame.html#cb50-84"></a><span class="co">#&gt;   clr_18_mtr_veh_theft_truck clr_18_mtr_veh_theft_other clr_18_all_crimes</span></span>
<span id="cb50-85"><a href="2-5-subsetting-a-data-frame.html#cb50-85"></a><span class="co">#&gt; 1                          2                          3               429</span></span>
<span id="cb50-86"><a href="2-5-subsetting-a-data-frame.html#cb50-86"></a><span class="co">#&gt;   clr_18_assault_aggravated clr_18_index_violent clr_18_index_property</span></span>
<span id="cb50-87"><a href="2-5-subsetting-a-data-frame.html#cb50-87"></a><span class="co">#&gt; 1                        90                  105                   137</span></span>
<span id="cb50-88"><a href="2-5-subsetting-a-data-frame.html#cb50-88"></a><span class="co">#&gt;   clr_18_index_total unfound_murder unfound_manslaughter unfound_rape_total</span></span>
<span id="cb50-89"><a href="2-5-subsetting-a-data-frame.html#cb50-89"></a><span class="co">#&gt; 1                242              5                    0                 16</span></span>
<span id="cb50-90"><a href="2-5-subsetting-a-data-frame.html#cb50-90"></a><span class="co">#&gt;   unfound_rape_by_force unfound_rape_attempted unfound_robbery_total</span></span>
<span id="cb50-91"><a href="2-5-subsetting-a-data-frame.html#cb50-91"></a><span class="co">#&gt; 1                    16                      0                     1</span></span>
<span id="cb50-92"><a href="2-5-subsetting-a-data-frame.html#cb50-92"></a><span class="co">#&gt;   unfound_robbery_with_a_gun unfound_robbery_with_a_knife</span></span>
<span id="cb50-93"><a href="2-5-subsetting-a-data-frame.html#cb50-93"></a><span class="co">#&gt; 1                          1                            0</span></span>
<span id="cb50-94"><a href="2-5-subsetting-a-data-frame.html#cb50-94"></a><span class="co">#&gt;   unfound_robbery_other_weapon unfound_robbery_unarmed unfound_assault_total</span></span>
<span id="cb50-95"><a href="2-5-subsetting-a-data-frame.html#cb50-95"></a><span class="co">#&gt; 1                            0                       0                     6</span></span>
<span id="cb50-96"><a href="2-5-subsetting-a-data-frame.html#cb50-96"></a><span class="co">#&gt;   unfound_assault_with_a_gun unfound_assault_with_a_knife</span></span>
<span id="cb50-97"><a href="2-5-subsetting-a-data-frame.html#cb50-97"></a><span class="co">#&gt; 1                          0                            1</span></span>
<span id="cb50-98"><a href="2-5-subsetting-a-data-frame.html#cb50-98"></a><span class="co">#&gt;   unfound_assault_other_weapon unfound_assault_unarmed unfound_assault_simple</span></span>
<span id="cb50-99"><a href="2-5-subsetting-a-data-frame.html#cb50-99"></a><span class="co">#&gt; 1                            1                       0                      4</span></span>
<span id="cb50-100"><a href="2-5-subsetting-a-data-frame.html#cb50-100"></a><span class="co">#&gt;   unfound_burg_total unfound_burg_force_entry unfound_burg_nonforce_entry</span></span>
<span id="cb50-101"><a href="2-5-subsetting-a-data-frame.html#cb50-101"></a><span class="co">#&gt; 1                  0                        0                           0</span></span>
<span id="cb50-102"><a href="2-5-subsetting-a-data-frame.html#cb50-102"></a><span class="co">#&gt;   unfound_burg_attempted unfound_theft_total unfound_mtr_veh_theft_total</span></span>
<span id="cb50-103"><a href="2-5-subsetting-a-data-frame.html#cb50-103"></a><span class="co">#&gt; 1                      0                  40                          70</span></span>
<span id="cb50-104"><a href="2-5-subsetting-a-data-frame.html#cb50-104"></a><span class="co">#&gt;   unfound_mtr_veh_theft_car unfound_mtr_veh_theft_truck</span></span>
<span id="cb50-105"><a href="2-5-subsetting-a-data-frame.html#cb50-105"></a><span class="co">#&gt; 1                        53                          16</span></span>
<span id="cb50-106"><a href="2-5-subsetting-a-data-frame.html#cb50-106"></a><span class="co">#&gt;   unfound_mtr_veh_theft_other unfound_all_crimes unfound_assault_aggravated</span></span>
<span id="cb50-107"><a href="2-5-subsetting-a-data-frame.html#cb50-107"></a><span class="co">#&gt; 1                           1                138                          2</span></span>
<span id="cb50-108"><a href="2-5-subsetting-a-data-frame.html#cb50-108"></a><span class="co">#&gt;   unfound_index_violent unfound_index_property unfound_index_total</span></span>
<span id="cb50-109"><a href="2-5-subsetting-a-data-frame.html#cb50-109"></a><span class="co">#&gt; 1                    24                    110                 134</span></span></code></pre></div>
<p>Since there are 159 columns in our data, normally we’d want to avoid printing out all of them. And in most cases we would save the output of subsets to a new object to be used later rather than just printing the output in the console.</p>
<p>What happens if we forget the comma? If we put in numbers for both rows and columns but don’t include a comma between them it will have an error.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="2-5-subsetting-a-data-frame.html#cb51-1"></a>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span> <span class="dv">1</span>]</span>
<span id="cb51-2"><a href="2-5-subsetting-a-data-frame.html#cb51-2"></a><span class="co">#&gt; Error: &lt;text&gt;:1:35: unexpected numeric constant</span></span>
<span id="cb51-3"><a href="2-5-subsetting-a-data-frame.html#cb51-3"></a><span class="co">#&gt; 1: offenses_known_yearly_1960_2017[1 1</span></span>
<span id="cb51-4"><a href="2-5-subsetting-a-data-frame.html#cb51-4"></a><span class="co">#&gt;                                       ^</span></span></code></pre></div>
<p>If we only put in a single number and no comma, it will return the column that matches that number. Here we have number 1 and it will return the first column. We’ll wrap it in <code>head()</code> so it doesn’t print out a million rows.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="2-5-subsetting-a-data-frame.html#cb52-1"></a><span class="kw">head</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span>])</span>
<span id="cb52-2"><a href="2-5-subsetting-a-data-frame.html#cb52-2"></a><span class="co">#&gt;       ori</span></span>
<span id="cb52-3"><a href="2-5-subsetting-a-data-frame.html#cb52-3"></a><span class="co">#&gt; 1 AK00101</span></span>
<span id="cb52-4"><a href="2-5-subsetting-a-data-frame.html#cb52-4"></a><span class="co">#&gt; 2 AK00101</span></span>
<span id="cb52-5"><a href="2-5-subsetting-a-data-frame.html#cb52-5"></a><span class="co">#&gt; 3 AK00101</span></span>
<span id="cb52-6"><a href="2-5-subsetting-a-data-frame.html#cb52-6"></a><span class="co">#&gt; 4 AK00101</span></span>
<span id="cb52-7"><a href="2-5-subsetting-a-data-frame.html#cb52-7"></a><span class="co">#&gt; 5 AK00101</span></span>
<span id="cb52-8"><a href="2-5-subsetting-a-data-frame.html#cb52-8"></a><span class="co">#&gt; 6 AK00101</span></span></code></pre></div>
<p>Since R thinks you are requesting a column, and we only have 159 columns in the data, asking for any number above 159 will return an error.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="2-5-subsetting-a-data-frame.html#cb53-1"></a><span class="kw">head</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1000</span>])</span>
<span id="cb53-2"><a href="2-5-subsetting-a-data-frame.html#cb53-2"></a><span class="co">#&gt; Error in `[.data.frame`(offenses_known_yearly_1960_2017, 1000): undefined columns selected</span></span></code></pre></div>
<p>If you already specify a column using dollar sign notation <code>$</code>, you do not need to indicate any column in the square brackets<code>[]</code>. All you need to do is say which row or rows you want.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="2-5-subsetting-a-data-frame.html#cb54-1"></a>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span><span class="op">$</span>agency_name[<span class="dv">15</span>]</span>
<span id="cb54-2"><a href="2-5-subsetting-a-data-frame.html#cb54-2"></a><span class="co">#&gt; [1] &quot;anchorage&quot;</span></span></code></pre></div>
<p>So make sure when you want a row from a data.frame you always include the comma!</p>
</div>
<div id="subset-colorado-data" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Subset Colorado data</h3>
<p>Finally we have the tools to subset our UCR data to just be Colorado from 2011-2017. There are three conditional statements we need to make, two for rows and one for columns.</p>
<ul>
<li>Only rows where the state equals Colorado</li>
<li>Only rows where the year is 2011-2017</li>
<li>Only the following columns: actual_murder, state, year, population, ori, agency_name</li>
</ul>
<p>We could use the <code>&amp;</code> operator to say rows must meet condition 1 and condition 2. Since this is an intro lesson we will do them as two separate conditional statements. For the first step we want to get all rows in the data where the state equals “colorado” (in this data all state names are lowercase). And at this point we want keep all columns in the data. So let’s make a new object called <em>colorado</em> to save the result of this subset.</p>
<p>Remember that we want to put the object to the left of the <code>[]</code> (and touching the <code>[]</code>) to make sure it returns the data. Just having the conditional statement will only return TRUE or FALSE values. Since we want all columns we don’t need to put anything after the comma (but we must include the comma!).</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="2-5-subsetting-a-data-frame.html#cb55-1"></a>colorado &lt;-<span class="st"> </span>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span><span class="op">$</span>state <span class="op">==</span><span class="st"> &quot;colorado&quot;</span>, ]</span></code></pre></div>
<p>Now we want to get all the rows where the year is 2011-2017. Since we want to check if the year is one of the years 2011-2017, we will use <code>%in%</code> and put the years in a vector <code>2011:2017</code>. This time our primary data set is <em>colorado</em>, not <em>offenses_known_yearly_1960_2017</em> since <em>colorado</em> has already subsetted to just the state we want. This is how subsetting generally works. You take a large data set, subset it to a smaller one and continue to subset the smaller one to only the data you want.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="2-5-subsetting-a-data-frame.html#cb56-1"></a>colorado &lt;-<span class="st"> </span>colorado[colorado<span class="op">$</span>year <span class="op">%in%</span><span class="st"> </span><span class="dv">2011</span><span class="op">:</span><span class="dv">2017</span>, ]</span></code></pre></div>
<p>Finally we want the columns stated above and to keep every row in the current data. Since the format is <code>[row, column]</code> in this case we keep the “row” part blank to indicate that we want every row.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="2-5-subsetting-a-data-frame.html#cb57-1"></a>colorado &lt;-<span class="st"> </span>colorado[ , <span class="kw">c</span>(<span class="st">&quot;actual_murder&quot;</span>, <span class="st">&quot;state&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;population&quot;</span>, <span class="st">&quot;ori&quot;</span>, <span class="st">&quot;agency_name&quot;</span>)]</span></code></pre></div>
<p>We can do a quick check using the <code>unique()</code> function. The <code>unique()</code> prints all the unique values in a category, such as a column. We will use it on the <em>state</em> and <em>year</em> columns to make sure only the values that we want are present.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="2-5-subsetting-a-data-frame.html#cb58-1"></a><span class="kw">unique</span>(colorado<span class="op">$</span>state)</span>
<span id="cb58-2"><a href="2-5-subsetting-a-data-frame.html#cb58-2"></a><span class="co">#&gt; [1] &quot;colorado&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="2-5-subsetting-a-data-frame.html#cb59-1"></a><span class="kw">unique</span>(colorado<span class="op">$</span>year)</span>
<span id="cb59-2"><a href="2-5-subsetting-a-data-frame.html#cb59-2"></a><span class="co">#&gt; [1] 2017 2016 2015 2014 2013 2012 2011</span></span></code></pre></div>
<p>The only state is Colorado and the only years are 2011-2017 so our subset worked! This data shows the number of murders in each agency. We want to look at state trends so in Section <a href="3-3-aggregate.html#aggregate">3.3</a> we will sum up all the murders per year and see if marijuana legalization affected it.</p>

</div>
</div>
<!-- </div> -->
<p style="text-align: center;">
<a href="2-4-logical-values-and-operations.html"><button class="btn btn-default">Previous</button></a>
<a href="3-explore.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>

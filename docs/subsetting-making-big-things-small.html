<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Subsetting: Making big things small | R 4 Criminology</title>
  <meta name="description" content="Notes for learning and applying R to questions about crime and the justice system." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Subsetting: Making big things small | R 4 Criminology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://r4crim.com" />
  
  <meta property="og:description" content="Notes for learning and applying R to questions about crime and the justice system." />
  <meta name="github-repo" content="jacobkap/r4crim" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Subsetting: Making big things small | R 4 Criminology" />
  
  <meta name="twitter:description" content="Notes for learning and applying R to questions about crime and the justice system." />
  

<meta name="author" content="Jacob Kaplan" />
<meta name="author" content="Greg Ridgeway" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-rstudio.html">
<link rel="next" href="exploratory-data-analysis.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99359926-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99359926-6');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Criminology</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-math"><i class="fa fa-check"></i><b>1.1</b> Basic Math</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#combining-values-together-into-a-collection-or-vector"><i class="fa fa-check"></i><b>1.2</b> Combining values together into a collection (or vector)</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#assignment-of-values-to-variables-making-things"><i class="fa fa-check"></i><b>1.3</b> Assignment of values to variables (Making “things”)</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#reading-data-into-r"><i class="fa fa-check"></i><b>1.4</b> Reading data into R</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#setting-the-working-directory"><i class="fa fa-check"></i><b>1.4.1</b> Setting the working directory</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#loading-data"><i class="fa fa-check"></i><b>1.4.2</b> Loading data</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#first-steps-to-explore-the-data"><i class="fa fa-check"></i><b>1.4.3</b> First steps to explore the data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-rstudio.html"><a href="introduction-to-rstudio.html"><i class="fa fa-check"></i><b>2</b> Introduction to RStudio</a></li>
<li class="chapter" data-level="3" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html"><i class="fa fa-check"></i><b>3</b> Subsetting: Making big things small</a><ul>
<li class="chapter" data-level="3.1" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#select-specific-values"><i class="fa fa-check"></i><b>3.1</b> Select specific values</a></li>
<li class="chapter" data-level="3.2" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#logical-values-and-operations"><i class="fa fa-check"></i><b>3.2</b> Logical values and operations</a><ul>
<li class="chapter" data-level="3.2.1" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#matching-a-single-value"><i class="fa fa-check"></i><b>3.2.1</b> Matching a single value</a></li>
<li class="chapter" data-level="3.2.2" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#matching-multiple-values"><i class="fa fa-check"></i><b>3.2.2</b> Matching multiple values</a></li>
<li class="chapter" data-level="3.2.3" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#does-not-match"><i class="fa fa-check"></i><b>3.2.3</b> Does not match</a></li>
<li class="chapter" data-level="3.2.4" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#greater-than-or-less-than"><i class="fa fa-check"></i><b>3.2.4</b> Greater than or less than</a></li>
<li class="chapter" data-level="3.2.5" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#combining-conditional-statements---or-and"><i class="fa fa-check"></i><b>3.2.5</b> Combining conditional statements - or, and</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#subsetting-a-data.frame"><i class="fa fa-check"></i><b>3.3</b> Subsetting a data.frame</a></li>
<li class="chapter" data-level="3.4" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#select-a-specific-column"><i class="fa fa-check"></i><b>3.4</b> Select a specific column</a><ul>
<li class="chapter" data-level="3.4.1" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#select-specific-rows-in-a-data.frame"><i class="fa fa-check"></i><b>3.4.1</b> Select specific rows in a data.frame</a></li>
<li class="chapter" data-level="3.4.2" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#battleships"><i class="fa fa-check"></i><b>3.4.2</b> Battleships</a></li>
<li class="chapter" data-level="3.4.3" data-path="subsetting-making-big-things-small.html"><a href="subsetting-making-big-things-small.html#subset-colorado-data"><i class="fa fa-check"></i><b>3.4.3</b> Subset Colorado data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Exploratory data analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#summary-and-table"><i class="fa fa-check"></i><b>4.1</b> Summary and Table</a></li>
<li class="chapter" data-level="4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#graphing-data"><i class="fa fa-check"></i><b>4.2</b> Graphing Data</a></li>
<li class="chapter" data-level="4.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#aggregating-summaries-of-groups"><i class="fa fa-check"></i><b>4.3</b> Aggregating (summaries of groups)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>5</b> Dates and Times</a><ul>
<li class="chapter" data-level="5.1" data-path="dates-and-times.html"><a href="dates-and-times.html#why-do-dates-and-times-matter"><i class="fa fa-check"></i><b>5.1</b> Why do dates and times matter?</a></li>
<li class="chapter" data-level="5.2" data-path="dates-and-times.html"><a href="dates-and-times.html#lubridate"><i class="fa fa-check"></i><b>5.2</b> <code>lubridate</code></a></li>
<li class="chapter" data-level="5.3" data-path="dates-and-times.html"><a href="dates-and-times.html#working-with-dates"><i class="fa fa-check"></i><b>5.3</b> Working with dates</a></li>
<li class="chapter" data-level="5.4" data-path="dates-and-times.html"><a href="dates-and-times.html#chicago-crime-data"><i class="fa fa-check"></i><b>5.4</b> Chicago crime data</a></li>
<li class="chapter" data-level="5.5" data-path="dates-and-times.html"><a href="dates-and-times.html#time-zones"><i class="fa fa-check"></i><b>5.5</b> Time zones</a><ul>
<li class="chapter" data-level="5.5.1" data-path="dates-and-times.html"><a href="dates-and-times.html#exercises"><i class="fa fa-check"></i><b>5.5.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>6</b> Regular Expressions</a><ul>
<li class="chapter" data-level="6.1" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-patterns-in-text-with-grep"><i class="fa fa-check"></i><b>6.1</b> Finding patterns in text with <code>grep()</code></a></li>
<li class="chapter" data-level="6.2" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub"><i class="fa fa-check"></i><b>6.2</b> Finding and replacing patterns in text with <code>gsub()</code></a></li>
<li class="chapter" data-level="6.3" data-path="regular-expressions.html"><a href="regular-expressions.html#useful-special-characters"><i class="fa fa-check"></i><b>6.3</b> Useful special characters</a><ul>
<li class="chapter" data-level="6.3.1" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-characters"><i class="fa fa-check"></i><b>6.3.1</b> Multiple characters <code>[]</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-of-previous-character-n"><i class="fa fa-check"></i><b>6.3.2</b> n-many of previous character <code>{n}</code></a></li>
<li class="chapter" data-level="6.3.3" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm"><i class="fa fa-check"></i><b>6.3.3</b> n-many to m-many of previous character <code>{n,m}</code></a></li>
<li class="chapter" data-level="6.3.4" data-path="regular-expressions.html"><a href="regular-expressions.html#start-of-string-and-not"><i class="fa fa-check"></i><b>6.3.4</b> Start of string and “not” <code>^</code></a></li>
<li class="chapter" data-level="6.3.5" data-path="regular-expressions.html"><a href="regular-expressions.html#end-of-string"><i class="fa fa-check"></i><b>6.3.5</b> End of string <code>$</code></a></li>
<li class="chapter" data-level="6.3.6" data-path="regular-expressions.html"><a href="regular-expressions.html#anything-."><i class="fa fa-check"></i><b>6.3.6</b> Anything <code>.</code></a></li>
<li class="chapter" data-level="6.3.7" data-path="regular-expressions.html"><a href="regular-expressions.html#one-or-more-of-previous"><i class="fa fa-check"></i><b>6.3.7</b> One or more of previous <code>+</code></a></li>
<li class="chapter" data-level="6.3.8" data-path="regular-expressions.html"><a href="regular-expressions.html#zero-or-more-of-previous"><i class="fa fa-check"></i><b>6.3.8</b> Zero or more of previous <code>*</code></a></li>
<li class="chapter" data-level="6.3.9" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-patterns"><i class="fa fa-check"></i><b>6.3.9</b> Multiple patterns <code>|</code></a></li>
<li class="chapter" data-level="6.3.10" data-path="regular-expressions.html"><a href="regular-expressions.html#parentheses"><i class="fa fa-check"></i><b>6.3.10</b> Parentheses <code>()</code></a></li>
<li class="chapter" data-level="6.3.11" data-path="regular-expressions.html"><a href="regular-expressions.html#optional-text"><i class="fa fa-check"></i><b>6.3.11</b> Optional text <code>?</code></a></li>
<li class="chapter" data-level="6.3.12" data-path="regular-expressions.html"><a href="regular-expressions.html#back-referencing"><i class="fa fa-check"></i><b>6.3.12</b> Back-referencing <code>()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="regular-expressions.html"><a href="regular-expressions.html#changing-capitalization"><i class="fa fa-check"></i><b>6.4</b> Changing capitalization</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Graphing with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="7.1" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#what-does-the-data-look-like"><i class="fa fa-check"></i><b>7.1</b> What does the data look like?</a><ul>
<li class="chapter" data-level="7.1.1" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#exercises-1"><i class="fa fa-check"></i><b>7.1.1</b> Exercises</a></li>
<li class="chapter" data-level="7.1.2" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#exercises-2"><i class="fa fa-check"></i><b>7.1.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#graphing-data-1"><i class="fa fa-check"></i><b>7.2</b> Graphing data</a></li>
<li class="chapter" data-level="7.3" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#time-series-plots"><i class="fa fa-check"></i><b>7.3</b> Time-Series Plots</a><ul>
<li class="chapter" data-level="7.3.1" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#exercises-3"><i class="fa fa-check"></i><b>7.3.1</b> Exercises</a></li>
<li class="chapter" data-level="7.3.2" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#exercises-4"><i class="fa fa-check"></i><b>7.3.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#should-we-trust-this-data"><i class="fa fa-check"></i><b>7.4</b> Should we trust this data?</a><ul>
<li class="chapter" data-level="7.4.1" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#exercises-5"><i class="fa fa-check"></i><b>7.4.1</b> Exercises</a></li>
<li class="chapter" data-level="7.4.2" data-path="graphing-with-ggplot2.html"><a href="graphing-with-ggplot2.html#exercises-6"><i class="fa fa-check"></i><b>7.4.2</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html"><i class="fa fa-check"></i><b>8</b> Webscraping with <code>rvest</code></a><ul>
<li class="chapter" data-level="8.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#scraping-one-page"><i class="fa fa-check"></i><b>8.1</b> Scraping one page</a></li>
<li class="chapter" data-level="8.2" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#cleaning-the-webscraped-data"><i class="fa fa-check"></i><b>8.2</b> Cleaning the webscraped data</a></li>
<li class="chapter" data-level="8.3" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#fixing-names"><i class="fa fa-check"></i><b>8.3</b> Fixing names</a><ul>
<li class="chapter" data-level="8.3.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#exercises-7"><i class="fa fa-check"></i><b>8.3.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>9</b> Functions</a><ul>
<li class="chapter" data-level="9.1" data-path="functions.html"><a href="functions.html#a-simple-function"><i class="fa fa-check"></i><b>9.1</b> A simple function</a></li>
<li class="chapter" data-level="9.2" data-path="functions.html"><a href="functions.html#adding-parameters"><i class="fa fa-check"></i><b>9.2</b> Adding parameters</a></li>
<li class="chapter" data-level="9.3" data-path="functions.html"><a href="functions.html#making-a-function-to-scrape-movie-data"><i class="fa fa-check"></i><b>9.3</b> Making a function to scrape movie data</a></li>
<li class="chapter" data-level="9.4" data-path="functions.html"><a href="functions.html#the-benefits-of-functions"><i class="fa fa-check"></i><b>9.4</b> The benefits of functions</a></li>
<li class="chapter" data-level="9.5" data-path="functions.html"><a href="functions.html#understanding-other-peoples-functions"><i class="fa fa-check"></i><b>9.5</b> Understanding other people’s functions</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>10</b> For loops</a><ul>
<li class="chapter" data-level="10.1" data-path="for-loops.html"><a href="for-loops.html#basic-for-loops"><i class="fa fa-check"></i><b>10.1</b> Basic for loops</a></li>
<li class="chapter" data-level="10.2" data-path="for-loops.html"><a href="for-loops.html#scraping-multiple-days-of-movie"><i class="fa fa-check"></i><b>10.2</b> Scraping multiple days of movie</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="types-of-objects.html"><a href="types-of-objects.html"><i class="fa fa-check"></i><b>11</b> Types of objects</a><ul>
<li class="chapter" data-level="11.1" data-path="types-of-objects.html"><a href="types-of-objects.html#vectors"><i class="fa fa-check"></i><b>11.1</b> Vectors</a></li>
<li class="chapter" data-level="11.2" data-path="types-of-objects.html"><a href="types-of-objects.html#data-frames"><i class="fa fa-check"></i><b>11.2</b> Data frames</a></li>
<li class="chapter" data-level="11.3" data-path="types-of-objects.html"><a href="types-of-objects.html#lists"><i class="fa fa-check"></i><b>11.3</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>12</b> Reading and Writing Data</a><ul>
<li class="chapter" data-level="12.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-data-into-r-1"><i class="fa fa-check"></i><b>12.1</b> Reading Data into R</a><ul>
<li class="chapter" data-level="12.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-files"><i class="fa fa-check"></i><b>12.1.1</b> R files</a></li>
<li class="chapter" data-level="12.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-files"><i class="fa fa-check"></i><b>12.1.2</b> Excel files</a></li>
<li class="chapter" data-level="12.1.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-files"><i class="fa fa-check"></i><b>12.1.3</b> Stata files</a></li>
<li class="chapter" data-level="12.1.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-files"><i class="fa fa-check"></i><b>12.1.4</b> SAS files</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-data"><i class="fa fa-check"></i><b>12.2</b> Writing Data</a><ul>
<li class="chapter" data-level="12.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-files-1"><i class="fa fa-check"></i><b>12.2.1</b> R files</a></li>
<li class="chapter" data-level="12.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-files-1"><i class="fa fa-check"></i><b>12.2.2</b> Excel files</a></li>
<li class="chapter" data-level="12.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-files-1"><i class="fa fa-check"></i><b>12.2.3</b> Stata files</a></li>
<li class="chapter" data-level="12.2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-files-1"><i class="fa fa-check"></i><b>12.2.4</b> SAS files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html"><i class="fa fa-check"></i><b>13</b> Scraping data from PDFs</a><ul>
<li class="chapter" data-level="13.1" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#downloading-officer-involved-shooting-files"><i class="fa fa-check"></i><b>13.1</b> Downloading officer-involved Shooting Files</a></li>
<li class="chapter" data-level="13.2" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#scraping-information-from-the-page"><i class="fa fa-check"></i><b>13.2</b> Scraping information from the page</a><ul>
<li class="chapter" data-level="13.2.1" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#combining-the-data-sets"><i class="fa fa-check"></i><b>13.2.1</b> Combining the data sets</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#extracting-data-from-pdfs"><i class="fa fa-check"></i><b>13.3</b> Extracting data from PDFs</a><ul>
<li class="chapter" data-level="13.3.1" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#scraping-a-single-pdf"><i class="fa fa-check"></i><b>13.3.1</b> Scraping a single PDF</a></li>
<li class="chapter" data-level="13.3.2" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#making-a-function"><i class="fa fa-check"></i><b>13.3.2</b> Making a function</a></li>
<li class="chapter" data-level="13.3.3" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#looping-through-every-pdf"><i class="fa fa-check"></i><b>13.3.3</b> Looping through every PDF</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>14</b> Geocoding</a><ul>
<li class="chapter" data-level="14.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-a-single-address"><i class="fa fa-check"></i><b>14.1</b> Geocoding a single address</a></li>
<li class="chapter" data-level="14.2" data-path="geocoding.html"><a href="geocoding.html#making-a-function-1"><i class="fa fa-check"></i><b>14.2</b> Making a function</a></li>
<li class="chapter" data-level="14.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-officer-shooting-locations"><i class="fa fa-check"></i><b>14.3</b> Geocoding officer shooting locations</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="hotspot-maps.html"><a href="hotspot-maps.html"><i class="fa fa-check"></i><b>15</b> Hotspot maps</a><ul>
<li class="chapter" data-level="15.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#creating-the-maps"><i class="fa fa-check"></i><b>15.1</b> Creating the maps</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="choropleth-maps.html"><a href="choropleth-maps.html"><i class="fa fa-check"></i><b>16</b> Choropleth Maps</a><ul>
<li class="chapter" data-level="16.1" data-path="choropleth-maps.html"><a href="choropleth-maps.html#spatial-joins"><i class="fa fa-check"></i><b>16.1</b> Spatial joins</a></li>
<li class="chapter" data-level="16.2" data-path="choropleth-maps.html"><a href="choropleth-maps.html#making-choropleth-maps"><i class="fa fa-check"></i><b>16.2</b> Making choropleth maps</a></li>
<li class="chapter" data-level="16.3" data-path="choropleth-maps.html"><a href="choropleth-maps.html#getting-census-data-from-social-explorer"><i class="fa fa-check"></i><b>16.3</b> Getting Census data from Social Explorer</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>17</b> Interactive Maps</a><ul>
<li class="chapter" data-level="17.1" data-path="interactive-maps.html"><a href="interactive-maps.html#why-do-interactive-graphs-matter"><i class="fa fa-check"></i><b>17.1</b> Why do interactive graphs matter?</a><ul>
<li class="chapter" data-level="17.1.1" data-path="interactive-maps.html"><a href="interactive-maps.html#understanding-your-data"><i class="fa fa-check"></i><b>17.1.1</b> Understanding your data</a></li>
<li class="chapter" data-level="17.1.2" data-path="interactive-maps.html"><a href="interactive-maps.html#police-departments-use-them"><i class="fa fa-check"></i><b>17.1.2</b> Police departments use them</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="interactive-maps.html"><a href="interactive-maps.html#making-the-interactive-map"><i class="fa fa-check"></i><b>17.2</b> Making the interactive map</a></li>
<li class="chapter" data-level="17.3" data-path="interactive-maps.html"><a href="interactive-maps.html#adding-popup-information"><i class="fa fa-check"></i><b>17.3</b> Adding popup information</a></li>
<li class="chapter" data-level="17.4" data-path="interactive-maps.html"><a href="interactive-maps.html#dealing-with-too-many-markers"><i class="fa fa-check"></i><b>17.4</b> Dealing with too many markers</a></li>
<li class="chapter" data-level="17.5" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-polygons"><i class="fa fa-check"></i><b>17.5</b> Interactive polygons</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="graphing-officer-involved-shootings.html"><a href="graphing-officer-involved-shootings.html"><i class="fa fa-check"></i><b>18</b> Graphing Officer-Involved Shootings</a><ul>
<li class="chapter" data-level="18.1" data-path="graphing-officer-involved-shootings.html"><a href="graphing-officer-involved-shootings.html#graphing-a-single-variable"><i class="fa fa-check"></i><b>18.1</b> Graphing a single variable</a><ul>
<li class="chapter" data-level="18.1.1" data-path="graphing-officer-involved-shootings.html"><a href="graphing-officer-involved-shootings.html#numeric-variable"><i class="fa fa-check"></i><b>18.1.1</b> Numeric variable</a></li>
<li class="chapter" data-level="18.1.2" data-path="graphing-officer-involved-shootings.html"><a href="graphing-officer-involved-shootings.html#categorical-variable"><i class="fa fa-check"></i><b>18.1.2</b> Categorical variable</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="graphing-officer-involved-shootings.html"><a href="graphing-officer-involved-shootings.html#time-series"><i class="fa fa-check"></i><b>18.2</b> Time Series</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="scraping-tables-from-pdfs.html"><a href="scraping-tables-from-pdfs.html"><i class="fa fa-check"></i><b>19</b> Scraping Tables from PDFs</a></li>
<li class="chapter" data-level="20" data-path="uniform-crime-report-ucr-data.html"><a href="uniform-crime-report-ucr-data.html"><i class="fa fa-check"></i><b>20</b> Uniform Crime Report (UCR) Data</a><ul>
<li class="chapter" data-level="20.1" data-path="uniform-crime-report-ucr-data.html"><a href="uniform-crime-report-ucr-data.html#exploring-the-ucr-data"><i class="fa fa-check"></i><b>20.1</b> Exploring the UCR data</a></li>
<li class="chapter" data-level="20.2" data-path="uniform-crime-report-ucr-data.html"><a href="uniform-crime-report-ucr-data.html#finding-things-in-our-data"><i class="fa fa-check"></i><b>20.2</b> Finding things in our data</a></li>
<li class="chapter" data-level="20.3" data-path="uniform-crime-report-ucr-data.html"><a href="uniform-crime-report-ucr-data.html#manipulating-our-data"><i class="fa fa-check"></i><b>20.3</b> Manipulating our data</a><ul>
<li class="chapter" data-level="20.3.1" data-path="uniform-crime-report-ucr-data.html"><a href="uniform-crime-report-ucr-data.html#exercises-8"><i class="fa fa-check"></i><b>20.3.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="census-data-from-ipums.html"><a href="census-data-from-ipums.html"><i class="fa fa-check"></i><b>21</b> Census Data from IPUMS</a></li>
<li class="chapter" data-level="22" data-path="national-incident-based-reporting-system-nibrs-data.html"><a href="national-incident-based-reporting-system-nibrs-data.html"><i class="fa fa-check"></i><b>22</b> National Incident-Based Reporting System (NIBRS) Data</a><ul>
<li class="chapter" data-level="22.1" data-path="national-incident-based-reporting-system-nibrs-data.html"><a href="national-incident-based-reporting-system-nibrs-data.html#downloading-the-data"><i class="fa fa-check"></i><b>22.1</b> Downloading the data</a></li>
<li class="chapter" data-level="22.2" data-path="national-incident-based-reporting-system-nibrs-data.html"><a href="national-incident-based-reporting-system-nibrs-data.html#reading-the-data"><i class="fa fa-check"></i><b>22.2</b> Reading the data</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="useful-resources.html"><a href="useful-resources.html"><i class="fa fa-check"></i><b>A</b> Useful Resources</a><ul>
<li class="chapter" data-level="A.1" data-path="useful-resources.html"><a href="useful-resources.html#learning-r-and-coding-issues"><i class="fa fa-check"></i><b>A.1</b> Learning R and coding issues</a></li>
<li class="chapter" data-level="A.2" data-path="useful-resources.html"><a href="useful-resources.html#data"><i class="fa fa-check"></i><b>A.2</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="using-r-markdown.html"><a href="using-r-markdown.html"><i class="fa fa-check"></i><b>B</b> Using R Markdown</a><ul>
<li class="chapter" data-level="B.1" data-path="using-r-markdown.html"><a href="using-r-markdown.html#code"><i class="fa fa-check"></i><b>B.1</b> Code</a><ul>
<li class="chapter" data-level="B.1.1" data-path="using-r-markdown.html"><a href="using-r-markdown.html#only-use-code-to-make-output"><i class="fa fa-check"></i><b>B.1.1</b> Only use code to make output</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="using-r-markdown.html"><a href="using-r-markdown.html#figures-and-tables"><i class="fa fa-check"></i><b>B.2</b> Figures and Tables</a></li>
<li class="chapter" data-level="B.3" data-path="using-r-markdown.html"><a href="using-r-markdown.html#finally-making-the-output-file"><i class="fa fa-check"></i><b>B.3</b> Finally, making the output file</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 4 Criminology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="subsetting-making-big-things-small" class="section level1">
<h1><span class="header-section-number">3</span> Subsetting: Making big things small</h1>
<p>Subsetting data is a way to take a large data set and reduce it to a smaller one better suited for answering a specific question. This is useful when you have a lot of data in the data set that isn’t relevant to your research. Reducing it to a smaller data set makes it easier to manage, both in understanding your data and avoiding have a huge file that could slow down R.</p>
<div id="select-specific-values" class="section level2">
<h2><span class="header-section-number">3.1</span> Select specific values</h2>
<pre class="sourceCode r"><code class="sourceCode r">animals &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;gorilla&quot;</span>, <span class="st">&quot;buffalo&quot;</span>, <span class="st">&quot;lion&quot;</span>, <span class="st">&quot;snake&quot;</span>)</code></pre>
<p>Here we have made an object called “animals” with a number of different animals in it. In R, we will use square brackets [] to select specific values in that object, something called “indexing”. Put a number (or numbers) in the square bracket and it’ll return the value at that “index”. The index is just the place number where each value is. “cat” is the first value in “animals” so it is at the first index, “dog” is the second value so it is the second index or index 2. “snake” is our last value and is the 6th value in “animals” so it index 6 (some languages use “zero indexing” which means the first index is index 0, the second is index 1. So in our example “cat” would be index 0. R does not do that and the first value is index 1, the second is index 2 and so on.).</p>
<p>The snytax (how the code is written) goes</p>
<p>object[index(s)]</p>
<p>First we have the object and then we put the square bracket []. We need both the object and the [] for subsetting to work. Let’s say we wanted to choose just the “snake” from our “animals” object. In normal language we say “I want the 6th value from”animals". We say where we’re looking and which value we want.</p>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="dv">6</span>]
<span class="co">#&gt; [1] &quot;snake&quot;</span></code></pre>
<p>Now let’s the third value</p>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="dv">3</span>]
<span class="co">#&gt; [1] &quot;gorilla&quot;</span></code></pre>
<p>If we want multiple values we can enter multiple numbers. Remember that if you have multiple values, you need to make a vector using <code>c()</code>. If we wanted values 1-3 we could use c(1, 2, 3), with each number separated by a column.</p>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)]
<span class="co">#&gt; [1] &quot;cat&quot;     &quot;dog&quot;     &quot;gorilla&quot;</span></code></pre>
<p>When making a vector of continuous integers, instead of writing them all out manually we can use first_number:last_number like so</p>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]
[<span class="dv">1</span>] <span class="st">&quot;cat&quot;</span>     <span class="st">&quot;dog&quot;</span>     <span class="st">&quot;gorilla&quot;</span></code></pre>
<p>The order we enter the numbers determines the order of values it returns. Let’s get the third index, the fourth index, and the first index, in that order.</p>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">1</span>)]
<span class="co">#&gt; [1] &quot;gorilla&quot; &quot;buffalo&quot; &quot;cat&quot;</span></code></pre>
<p>If you put a negative number inside the <code>[]</code>, this will communicate to R to remove that item from the collection. Let’s remove “cat” from “animals”. Since it is the 1st item in “animals” we can remove it like this</p>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="op">-</span><span class="dv">1</span>]
[<span class="dv">1</span>] <span class="st">&quot;dog&quot;</span>     <span class="st">&quot;gorilla&quot;</span> <span class="st">&quot;buffalo&quot;</span> <span class="st">&quot;lion&quot;</span>    <span class="st">&quot;snake&quot;</span>  </code></pre>
<p>Now let’s remove multiple values, the first 3.</p>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)]
[<span class="dv">1</span>] <span class="st">&quot;buffalo&quot;</span> <span class="st">&quot;lion&quot;</span>    <span class="st">&quot;snake&quot;</span>  </code></pre>
</div>
<div id="logical-values-and-operations" class="section level2">
<h2><span class="header-section-number">3.2</span> Logical values and operations</h2>
<p>We also frequently want to conditionally select certain values Above we selected values by number, but that requires us to know exactly which values we want. Conditionally selecting values say having some conditional statement (e.g. fewer than 100 murders) and keeping only values that meet that condition.</p>
<p>First we will discuss conditionals abstractly and then we will use a real example using data from the FBI to make a data set tailored to answer a specific question.</p>
<p>Logical values in R are the two values <code>TRUE</code> and <code>FALSE</code>, always written in all capital letters in R. You can also combine a bunch of <code>TRUE</code> and <code>FALSE</code> values into a collection.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="ot">TRUE</span>
<span class="ot">FALSE</span>
<span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>,<span class="ot">TRUE</span>,<span class="ot">FALSE</span>)
[<span class="dv">1</span>] <span class="ot">TRUE</span>
[<span class="dv">1</span>] <span class="ot">FALSE</span>
[<span class="dv">1</span>]  <span class="ot">TRUE</span> <span class="ot">FALSE</span>  <span class="ot">TRUE</span> <span class="ot">FALSE</span></code></pre>
<p>We can use this to index and it will return every element with we say TRUE.</p>
<pre class="sourceCode r"><code class="sourceCode r">animals[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)]
<span class="co">#&gt; [1] &quot;cat&quot; &quot;dog&quot;</span></code></pre>
<p>This is the basis of conditional subsetting. If we have a large data set and only want a small chunk based on some condition (data in a single state, at a certain time, at least a certain population) we need to make a conditional statement that returns TRUE if it matches what we want and FALSE if it doesn’t. There are a number of different ways to make conditional statements. First let’s go through some special characters involved and then show examples of each one.</p>
<p>For each case you are asking does the thing on the left of the conditional statement return TRUE or FALSE compared to the thing on the right.</p>
<ul>
<li>== Equals (compared to a single value)</li>
<li>%in% Equals (one value match out of many comparisons)</li>
<li>!= Does not equal</li>
<li>&lt; Less than</li>
<li>&gt; Greater than</li>
<li>&lt;= Less than or equal to</li>
<li>&gt;= Greater than or equal to</li>
</ul>
<p>Since many conditionals involve numbers (espcially in criminology), let’s make a new object called “numbers” with the first 10 numbers to use in the examples.</p>
<pre class="sourceCode r"><code class="sourceCode r">numbers &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></code></pre>
<div id="matching-a-single-value" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Matching a single value</h3>
<p>The conditional == asks if the thing on the left equals the thing on the right. Note that it uses two equal signs. If we used only one equal sign it would assign the thing on the left the value of the thing on the right (as if we did <code>&lt;-</code>).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">2</span>
<span class="co">#&gt; [1] TRUE</span></code></pre>
<p>This gives <code>TRUE</code> as we know that 2 does equal 2. If we change either value, it would give us FALSE.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">3</span>
<span class="co">#&gt; [1] FALSE</span></code></pre>
<p>And it works when we have multiple numbers on the left side, such as our object called “numbers”.</p>
<pre class="sourceCode r"><code class="sourceCode r">numbers <span class="op">==</span><span class="st"> </span><span class="dv">2</span>
<span class="co">#&gt;  [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></code></pre>
<p>This also works with characters such as all the animals in the object we made earlier. “gorilla” is the third animal in our object, so if we check animals == “gorilla” we expect the third value to be <code>TRUE</code> and all others to be <code>FALSE</code>. Make sure it is spelled exactly (including capitalization) and is in quotes.</p>
<pre class="sourceCode r"><code class="sourceCode r">animals <span class="op">==</span><span class="st"> &quot;gorilla&quot;</span>
<span class="co">#&gt; [1] FALSE FALSE  TRUE FALSE FALSE FALSE</span></code></pre>
<p>The == only works when there is one thing on the right hand side. In criminology we often want to know if there is a match for multiple things - is the crime one of the following crimes…, did the crime happen in one of these months…, is the victim a member of these demographic groups…? So we need a way to check if a value is one of many values.</p>
</div>
<div id="matching-multiple-values" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Matching multiple values</h3>
<p>The R operator <code>%in%</code> asks each value on the left whether or not it is a member of the set on the right. It asks, is the single value on the left hand side (even when there are multiple values such as our “animals” object, it goes through them one at a time) a match with any of the values on the right hand side? It only has to match with one of the right hand side values to be a match.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) 
[<span class="dv">1</span>] <span class="ot">TRUE</span></code></pre>
<p>For our “animals” object, if we check if they are in the vector c(“cat”, “dog”, “gorilla”), now all three of those animals will return <code>TRUE</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">animals <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;gorilla&quot;</span>)
<span class="co">#&gt; [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE</span></code></pre>
</div>
<div id="does-not-match" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Does not match</h3>
<p>Sometimes it is easier to ask what is not a match. For example, if you wanted to get every month except January, instead of writing the other 11 months, you just ask for any month that does not equal “January”.</p>
<p>We can use <code>!</code>, which means “not,”. When we wanted an exact match we used ==, if we want a not match we can use != (this time it is only a single equals sign).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">!=</span><span class="st"> </span><span class="dv">3</span>
<span class="co">#&gt; [1] TRUE</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="st">&quot;cat&quot;</span> <span class="op">!=</span><span class="st"> &quot;gorilla&quot;</span>
<span class="co">#&gt; [1] TRUE</span></code></pre>
<p>Note that for matching multiple values with %in%, we can’t write !%in% but have to put the ! before the values on the left.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">!</span>animals <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;cat&quot;</span>, <span class="st">&quot;dog&quot;</span>, <span class="st">&quot;gorilla&quot;</span>)
<span class="co">#&gt; [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE</span></code></pre>
</div>
<div id="greater-than-or-less-than" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Greater than or less than</h3>
<p>We can use R to compare values using greater than or less than symbols. We can also express “greater than or equal to” or “less than or equal to.” These will evaluate to <code>TRUE</code> or <code>FALSE</code> depending, of course, on whether the statement is true or false.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">6</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>
[<span class="dv">1</span>] <span class="ot">TRUE</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">6</span> <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span>
[<span class="dv">1</span>] <span class="ot">FALSE</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">6</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span>
[<span class="dv">1</span>] <span class="ot">TRUE</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">5</span> <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>
[<span class="dv">1</span>] <span class="ot">TRUE</span></code></pre>
<p>When used on our object “numbers” it will return 10 values (since number is 10 elements long) with a <code>TRUE</code> is the condition is true for the element and <code>FALSE</code> otherwise. Let’s run numbers &gt; 3. We expect the first 3 values to be <code>FALSE</code> as 1, 2, and 3 and not larger than 3.</p>
<pre class="sourceCode r"><code class="sourceCode r">numbers <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>
<span class="co">#&gt;  [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</span></code></pre>
</div>
<div id="combining-conditional-statements---or-and" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Combining conditional statements - or, and</h3>
<p>In many cases when you are subsetting you will want to subset based on more than one condition. For example, let’s say you have crime data from every state between 1960 and 2017. Your research question is “did Colorado’s marijuana legalization affect crime in the state?” In that case you want only data from Colorado. Since legalization begin in January 2014, you wouldn’t need every year, only years some period of time before and after legalization to be able to measure its effect. So you would need to subset based on the state column and the year column.</p>
<p>We use logical operators to create logical expressions and R can evaluate them as either <code>TRUE</code> or <code>FALSE</code>. For example, <code>&amp;</code> represents the logical “and” and <code>|</code> represents the logical “or.”</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="ot">TRUE</span>  <span class="op">&amp;</span><span class="st"> </span><span class="ot">TRUE</span>
<span class="ot">FALSE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">TRUE</span>
<span class="ot">FALSE</span> <span class="op">|</span><span class="st"> </span><span class="ot">TRUE</span>
<span class="ot">FALSE</span> <span class="op">|</span><span class="st"> </span><span class="ot">FALSE</span>
[<span class="dv">1</span>] <span class="ot">TRUE</span>
[<span class="dv">1</span>] <span class="ot">FALSE</span>
[<span class="dv">1</span>] <span class="ot">TRUE</span>
[<span class="dv">1</span>] <span class="ot">FALSE</span></code></pre>
<p>Note that witn <code>&amp;</code> every condition must be true for it to return TRUE. With <code>or</code> only one condition must be true.</p>
<p>We can combine logical operators into more complicated expressions.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">|</span><span class="st"> </span><span class="dv">2</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>
<span class="co">#&gt; [1] TRUE</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">&amp;</span><span class="st"> </span><span class="dv">2</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>
<span class="co">#&gt; [1] FALSE</span></code></pre>
</div>
</div>
<div id="subsetting-a-data.frame" class="section level2">
<h2><span class="header-section-number">3.3</span> Subsetting a data.frame</h2>
<p>Above we were just using a simple vector (collection of values). In this class - and in your own work - you will usually work on an entire data set. These generally come in the form called a “data.frame” which is something we’ll discuss in detail later on. For now you can imaginate a data.frame being like an Excel file with multiple rows and columns.</p>
<p>Let’s load in data from the Uniform Crime Report (UCR), an FBI data set that we’ll work on in a later lesson. This data has crime data every year from 1960-2017 and for every nearly every agency in the country (early years have far fewer agencies reporting than recent years).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;data/offenses_known_yearly_1960_2017.rda&quot;</span>)</code></pre>
<p>Let’s peak at the first 6 rows and 6 columns using the square bracket notation [] for data.frames which we’ll explain more below.</p>
<pre class="sourceCode r"><code class="sourceCode r">offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]
<span class="co">#&gt;       ori      ori9 agency_name  state state_abb year</span>
<span class="co">#&gt; 1 AK00101 AK0010100   anchorage alaska        AK 2017</span>
<span class="co">#&gt; 2 AK00101 AK0010100   anchorage alaska        AK 2016</span>
<span class="co">#&gt; 3 AK00101 AK0010100   anchorage alaska        AK 2015</span>
<span class="co">#&gt; 4 AK00101 AK0010100   anchorage alaska        AK 2014</span>
<span class="co">#&gt; 5 AK00101 AK0010100   anchorage alaska        AK 2013</span>
<span class="co">#&gt; 6 AK00101 AK0010100   anchorage alaska        AK 2012</span></code></pre>
<p>The first 6 rows appear to be agency identification info for Archorage, Alaska from 2017-2012. For good measure let’s check how many rows and columns are in this data. This will give us some guidance on subsetting which we’ll see below. <code>nrow()</code> gives us the number of rows and <code>ncol()</code> givws us the number of columns.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>)
<span class="co">#&gt; [1] 959010</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>)
<span class="co">#&gt; [1] 159</span></code></pre>
<p>Normally we wouldn’t want to print out the names of all 159 columns but let’s do this here as we want to know the variables available to subset.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>)
<span class="co">#&gt;   [1] &quot;ori&quot;                            &quot;ori9&quot;                          </span>
<span class="co">#&gt;   [3] &quot;agency_name&quot;                    &quot;state&quot;                         </span>
<span class="co">#&gt;   [5] &quot;state_abb&quot;                      &quot;year&quot;                          </span>
<span class="co">#&gt;   [7] &quot;number_of_months_reported&quot;      &quot;fips_state_code&quot;               </span>
<span class="co">#&gt;   [9] &quot;fips_county_code&quot;               &quot;fips_state_county_code&quot;        </span>
<span class="co">#&gt;  [11] &quot;fips_place_code&quot;                &quot;fips_state_place_code&quot;         </span>
<span class="co">#&gt;  [13] &quot;agency_type&quot;                    &quot;agency_subtype_1&quot;              </span>
<span class="co">#&gt;  [15] &quot;agency_subtype_2&quot;               &quot;crosswalk_agency_name&quot;         </span>
<span class="co">#&gt;  [17] &quot;census_name&quot;                    &quot;population&quot;                    </span>
<span class="co">#&gt;  [19] &quot;population_group&quot;               &quot;country_division&quot;              </span>
<span class="co">#&gt;  [21] &quot;juvenile_age&quot;                   &quot;core_city_indication&quot;          </span>
<span class="co">#&gt;  [23] &quot;last_update&quot;                    &quot;fbi_field_office&quot;              </span>
<span class="co">#&gt;  [25] &quot;followup_indication&quot;            &quot;zip_code&quot;                      </span>
<span class="co">#&gt;  [27] &quot;covered_by_ori&quot;                 &quot;agency_count&quot;                  </span>
<span class="co">#&gt;  [29] &quot;date_of_last_update&quot;            &quot;month_included_in&quot;             </span>
<span class="co">#&gt;  [31] &quot;special_mailing_group&quot;          &quot;special_mailing_address&quot;       </span>
<span class="co">#&gt;  [33] &quot;first_line_of_mailing_address&quot;  &quot;second_line_of_mailing_address&quot;</span>
<span class="co">#&gt;  [35] &quot;third_line_of_mailing_address&quot;  &quot;fourth_line_of_mailing_address&quot;</span>
<span class="co">#&gt;  [37] &quot;officers_killed_by_felony&quot;      &quot;officers_killed_by_accident&quot;   </span>
<span class="co">#&gt;  [39] &quot;officers_assaulted&quot;             &quot;actual_murder&quot;                 </span>
<span class="co">#&gt;  [41] &quot;actual_manslaughter&quot;            &quot;actual_rape_total&quot;             </span>
<span class="co">#&gt;  [43] &quot;actual_rape_by_force&quot;           &quot;actual_rape_attempted&quot;         </span>
<span class="co">#&gt;  [45] &quot;actual_robbery_total&quot;           &quot;actual_robbery_with_a_gun&quot;     </span>
<span class="co">#&gt;  [47] &quot;actual_robbery_with_a_knife&quot;    &quot;actual_robbery_other_weapon&quot;   </span>
<span class="co">#&gt;  [49] &quot;actual_robbery_unarmed&quot;         &quot;actual_assault_total&quot;          </span>
<span class="co">#&gt;  [51] &quot;actual_assault_with_a_gun&quot;      &quot;actual_assault_with_a_knife&quot;   </span>
<span class="co">#&gt;  [53] &quot;actual_assault_other_weapon&quot;    &quot;actual_assault_unarmed&quot;        </span>
<span class="co">#&gt;  [55] &quot;actual_assault_simple&quot;          &quot;actual_burg_total&quot;             </span>
<span class="co">#&gt;  [57] &quot;actual_burg_force_entry&quot;        &quot;actual_burg_nonforce_entry&quot;    </span>
<span class="co">#&gt;  [59] &quot;actual_burg_attempted&quot;          &quot;actual_theft_total&quot;            </span>
<span class="co">#&gt;  [61] &quot;actual_mtr_veh_theft_total&quot;     &quot;actual_mtr_veh_theft_car&quot;      </span>
<span class="co">#&gt;  [63] &quot;actual_mtr_veh_theft_truck&quot;     &quot;actual_mtr_veh_theft_other&quot;    </span>
<span class="co">#&gt;  [65] &quot;actual_all_crimes&quot;              &quot;actual_assault_aggravated&quot;     </span>
<span class="co">#&gt;  [67] &quot;actual_index_violent&quot;           &quot;actual_index_property&quot;         </span>
<span class="co">#&gt;  [69] &quot;actual_index_total&quot;             &quot;tot_clr_murder&quot;                </span>
<span class="co">#&gt;  [71] &quot;tot_clr_manslaughter&quot;           &quot;tot_clr_rape_total&quot;            </span>
<span class="co">#&gt;  [73] &quot;tot_clr_rape_by_force&quot;          &quot;tot_clr_rape_attempted&quot;        </span>
<span class="co">#&gt;  [75] &quot;tot_clr_robbery_total&quot;          &quot;tot_clr_robbery_with_a_gun&quot;    </span>
<span class="co">#&gt;  [77] &quot;tot_clr_robbery_with_a_knife&quot;   &quot;tot_clr_robbery_other_weapon&quot;  </span>
<span class="co">#&gt;  [79] &quot;tot_clr_robbery_unarmed&quot;        &quot;tot_clr_assault_total&quot;         </span>
<span class="co">#&gt;  [81] &quot;tot_clr_assault_with_a_gun&quot;     &quot;tot_clr_assault_with_a_knife&quot;  </span>
<span class="co">#&gt;  [83] &quot;tot_clr_assault_other_weapon&quot;   &quot;tot_clr_assault_unarmed&quot;       </span>
<span class="co">#&gt;  [85] &quot;tot_clr_assault_simple&quot;         &quot;tot_clr_burg_total&quot;            </span>
<span class="co">#&gt;  [87] &quot;tot_clr_burg_force_entry&quot;       &quot;tot_clr_burg_nonforce_entry&quot;   </span>
<span class="co">#&gt;  [89] &quot;tot_clr_burg_attempted&quot;         &quot;tot_clr_theft_total&quot;           </span>
<span class="co">#&gt;  [91] &quot;tot_clr_mtr_veh_theft_total&quot;    &quot;tot_clr_mtr_veh_theft_car&quot;     </span>
<span class="co">#&gt;  [93] &quot;tot_clr_mtr_veh_theft_truck&quot;    &quot;tot_clr_mtr_veh_theft_other&quot;   </span>
<span class="co">#&gt;  [95] &quot;tot_clr_all_crimes&quot;             &quot;tot_clr_assault_aggravated&quot;    </span>
<span class="co">#&gt;  [97] &quot;tot_clr_index_violent&quot;          &quot;tot_clr_index_property&quot;        </span>
<span class="co">#&gt;  [99] &quot;tot_clr_index_total&quot;            &quot;clr_18_murder&quot;                 </span>
<span class="co">#&gt; [101] &quot;clr_18_manslaughter&quot;            &quot;clr_18_rape_total&quot;             </span>
<span class="co">#&gt; [103] &quot;clr_18_rape_by_force&quot;           &quot;clr_18_rape_attempted&quot;         </span>
<span class="co">#&gt; [105] &quot;clr_18_robbery_total&quot;           &quot;clr_18_robbery_with_a_gun&quot;     </span>
<span class="co">#&gt; [107] &quot;clr_18_robbery_with_a_knife&quot;    &quot;clr_18_robbery_other_weapon&quot;   </span>
<span class="co">#&gt; [109] &quot;clr_18_robbery_unarmed&quot;         &quot;clr_18_assault_total&quot;          </span>
<span class="co">#&gt; [111] &quot;clr_18_assault_with_a_gun&quot;      &quot;clr_18_assault_with_a_knife&quot;   </span>
<span class="co">#&gt; [113] &quot;clr_18_assault_other_weapon&quot;    &quot;clr_18_assault_unarmed&quot;        </span>
<span class="co">#&gt; [115] &quot;clr_18_assault_simple&quot;          &quot;clr_18_burg_total&quot;             </span>
<span class="co">#&gt; [117] &quot;clr_18_burg_force_entry&quot;        &quot;clr_18_burg_nonforce_entry&quot;    </span>
<span class="co">#&gt; [119] &quot;clr_18_burg_attempted&quot;          &quot;clr_18_theft_total&quot;            </span>
<span class="co">#&gt; [121] &quot;clr_18_mtr_veh_theft_total&quot;     &quot;clr_18_mtr_veh_theft_car&quot;      </span>
<span class="co">#&gt; [123] &quot;clr_18_mtr_veh_theft_truck&quot;     &quot;clr_18_mtr_veh_theft_other&quot;    </span>
<span class="co">#&gt; [125] &quot;clr_18_all_crimes&quot;              &quot;clr_18_assault_aggravated&quot;     </span>
<span class="co">#&gt; [127] &quot;clr_18_index_violent&quot;           &quot;clr_18_index_property&quot;         </span>
<span class="co">#&gt; [129] &quot;clr_18_index_total&quot;             &quot;unfound_murder&quot;                </span>
<span class="co">#&gt; [131] &quot;unfound_manslaughter&quot;           &quot;unfound_rape_total&quot;            </span>
<span class="co">#&gt; [133] &quot;unfound_rape_by_force&quot;          &quot;unfound_rape_attempted&quot;        </span>
<span class="co">#&gt; [135] &quot;unfound_robbery_total&quot;          &quot;unfound_robbery_with_a_gun&quot;    </span>
<span class="co">#&gt; [137] &quot;unfound_robbery_with_a_knife&quot;   &quot;unfound_robbery_other_weapon&quot;  </span>
<span class="co">#&gt; [139] &quot;unfound_robbery_unarmed&quot;        &quot;unfound_assault_total&quot;         </span>
<span class="co">#&gt; [141] &quot;unfound_assault_with_a_gun&quot;     &quot;unfound_assault_with_a_knife&quot;  </span>
<span class="co">#&gt; [143] &quot;unfound_assault_other_weapon&quot;   &quot;unfound_assault_unarmed&quot;       </span>
<span class="co">#&gt; [145] &quot;unfound_assault_simple&quot;         &quot;unfound_burg_total&quot;            </span>
<span class="co">#&gt; [147] &quot;unfound_burg_force_entry&quot;       &quot;unfound_burg_nonforce_entry&quot;   </span>
<span class="co">#&gt; [149] &quot;unfound_burg_attempted&quot;         &quot;unfound_theft_total&quot;           </span>
<span class="co">#&gt; [151] &quot;unfound_mtr_veh_theft_total&quot;    &quot;unfound_mtr_veh_theft_car&quot;     </span>
<span class="co">#&gt; [153] &quot;unfound_mtr_veh_theft_truck&quot;    &quot;unfound_mtr_veh_theft_other&quot;   </span>
<span class="co">#&gt; [155] &quot;unfound_all_crimes&quot;             &quot;unfound_assault_aggravated&quot;    </span>
<span class="co">#&gt; [157] &quot;unfound_index_violent&quot;          &quot;unfound_index_property&quot;        </span>
<span class="co">#&gt; [159] &quot;unfound_index_total&quot;</span></code></pre>
<p>This data has nearly a million rows and 159 columns so we certainly don’t want to print everything in the console. Now let’s discuss how to subset this data into a smaller data set to answer a specific question. Let’s subset the data to answer our above question of “did Colorado’s marijuana legalization affect crime in the state?”. Like mentioned above, we need data just from Colorado and just for years around the legalization year - we can do 2011-2017 for simplicity.</p>
<p>We also don’t need all 159 columns in the current data. Let’s say we’re only interested in if murder changes. We’d need the column called “actual_murder”, the “state” column (as a check), the “year” column, the “population” column, the “ori” column, and the “agency_name” column (a real analysis would likely grab geographic variables too to see if changes depended on location but here we’re just using it as an example). The last two columns - ori and agency_name - aren’t strictly necessary but would be useful if checking if an agency’s values are reasonable when checking for outliers, a step we won’t do here.</p>
<p>Before explaining how to subset from a data.frame, let’s write pseudocode (essentially a description of what we are going to do that is readable to people but isn’t real code) for our subset.</p>
<p>We want</p>
<p>only rows where the state equals Colorado
only rows where the year is 2011-2017
only the following columns: actual_murder, state, year, population, ori, agency_name</p>
</div>
<div id="select-a-specific-column" class="section level2">
<h2><span class="header-section-number">3.4</span> Select a specific column</h2>
<p>The way to select a specific column in R is called the dollar sign notation.</p>
<p><code>data$column</code></p>
<p>We write the data name followed by a <code>$</code> and then the column name. Make sure there are no spaces, quotes, or mispellings (or capitalization issues). Just the data$column exactly as it is spelled. Since we are referring to data already read into R, there should not be any quotes for either the data or the column name.</p>
<p>We can do this for the column “agency_name” in our UCR data. If we wrote this in the console it would print out every single row in the column. Because this data is large (nearly a million rows), I am going to wrap this in <code>head()</code> so it only displays the first 6 rows of the column rather than printing the entire column.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span><span class="op">$</span>agency_name)
<span class="co">#&gt; [1] &quot;anchorage&quot; &quot;anchorage&quot; &quot;anchorage&quot; &quot;anchorage&quot; &quot;anchorage&quot; &quot;anchorage&quot;</span></code></pre>
<p>They’re all the same name because Anchorage Police reported many times and are in the data set multiple times. Let’s look at the column “actual_murder” which shows the annual number of murders in that agency.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span><span class="op">$</span>actual_murder)
<span class="co">#&gt; [1] 27 28 26 12 14 15</span></code></pre>
<p>One hint is to write out the data set name in the console at hit the Tab key. Wait a couple of seconds and a popup will appear listing every column in the data set. You can scroll through this and then hit enter to select that column.</p>
<p><img src="images/tab_example.png" /></p>
<div id="select-specific-rows-in-a-data.frame" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Select specific rows in a data.frame</h3>
<p>In the earlier examples we used square bracket notation [] and just put a number or several numbers in the []. When dealing with data.frames, however, you need an extra step to tell R which columns to keep. The syntax in the square bracket is</p>
<p>[row, column]</p>
<p>As we did earlier, we start in the square bracket by saying which row we want. Now, since we also have to consider the columns, we need to tell it the number or name (in a vector using <code>c()</code> if more than one name. And the names must be in quotes!) of the column or columns we want.</p>
<p>The exception to this is when we use the dollar sign notation to select a single column. In that case we don’t need a comma (and indeed it will give us an error!). Let’s see a few examples then explain why this works the way it does.</p>
<pre class="sourceCode r"><code class="sourceCode r">offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span>, <span class="dv">1</span>]
<span class="co">#&gt; [1] &quot;AK00101&quot;</span></code></pre>
<p>If we input multiple numbers we can get multiple rows and columns.</p>
<pre class="sourceCode r"><code class="sourceCode r">offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]
<span class="co">#&gt;       ori      ori9 agency_name  state state_abb year</span>
<span class="co">#&gt; 1 AK00101 AK0010100   anchorage alaska        AK 2017</span>
<span class="co">#&gt; 2 AK00101 AK0010100   anchorage alaska        AK 2016</span>
<span class="co">#&gt; 3 AK00101 AK0010100   anchorage alaska        AK 2015</span>
<span class="co">#&gt; 4 AK00101 AK0010100   anchorage alaska        AK 2014</span>
<span class="co">#&gt; 5 AK00101 AK0010100   anchorage alaska        AK 2013</span>
<span class="co">#&gt; 6 AK00101 AK0010100   anchorage alaska        AK 2012</span></code></pre>
<p>The column section also accepts a vector of the names of the columns. These names must be spelled correctly and in quotes.</p>
<pre class="sourceCode r"><code class="sourceCode r">offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="kw">c</span>(<span class="st">&quot;ori&quot;</span>, <span class="st">&quot;year&quot;</span>)]
<span class="co">#&gt;       ori year</span>
<span class="co">#&gt; 1 AK00101 2017</span>
<span class="co">#&gt; 2 AK00101 2016</span>
<span class="co">#&gt; 3 AK00101 2015</span>
<span class="co">#&gt; 4 AK00101 2014</span>
<span class="co">#&gt; 5 AK00101 2013</span>
<span class="co">#&gt; 6 AK00101 2012</span></code></pre>
<p>In cases where we want every row or every column, we just don’t put a number. By default R will return every row/column if you don’t specify which ones you want. However you will still need to include the comma.</p>
<p>Here is every column in the first row.</p>
<pre class="sourceCode r"><code class="sourceCode r">offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span>, ]
<span class="co">#&gt;       ori      ori9 agency_name  state state_abb year</span>
<span class="co">#&gt; 1 AK00101 AK0010100   anchorage alaska        AK 2017</span>
<span class="co">#&gt;   number_of_months_reported fips_state_code fips_county_code</span>
<span class="co">#&gt; 1                        12              02              020</span>
<span class="co">#&gt;   fips_state_county_code fips_place_code fips_state_place_code</span>
<span class="co">#&gt; 1                  02020           03000               0203000</span>
<span class="co">#&gt;               agency_type agency_subtype_1 agency_subtype_2</span>
<span class="co">#&gt; 1 local police department   not applicable   not applicable</span>
<span class="co">#&gt;         crosswalk_agency_name            census_name population</span>
<span class="co">#&gt; 1 anchorage police department anchorage municipality     296188</span>
<span class="co">#&gt;            population_group country_division juvenile_age</span>
<span class="co">#&gt; 1 city 250,000 thru 499,999          pacific           18</span>
<span class="co">#&gt;   core_city_indication last_update fbi_field_office followup_indication</span>
<span class="co">#&gt; 1     core city of msa       42094             3030    send a follow-up</span>
<span class="co">#&gt;   zip_code covered_by_ori agency_count date_of_last_update</span>
<span class="co">#&gt; 1    99507           &lt;NA&gt;            1              120717</span>
<span class="co">#&gt;   month_included_in</span>
<span class="co">#&gt; 1                 0</span>
<span class="co">#&gt;                                                              special_mailing_group</span>
<span class="co">#&gt; 1 the agency is a contributor but not on the mailing list,they are not sent forms.</span>
<span class="co">#&gt;         special_mailing_address first_line_of_mailing_address</span>
<span class="co">#&gt; 1 not a special mailing address               chief of police</span>
<span class="co">#&gt;   second_line_of_mailing_address third_line_of_mailing_address</span>
<span class="co">#&gt; 1    anchorage police department                4501 elmore rd</span>
<span class="co">#&gt;   fourth_line_of_mailing_address officers_killed_by_felony</span>
<span class="co">#&gt; 1                  anchorage, ak                         0</span>
<span class="co">#&gt;   officers_killed_by_accident officers_assaulted actual_murder</span>
<span class="co">#&gt; 1                           0                426            27</span>
<span class="co">#&gt;   actual_manslaughter actual_rape_total actual_rape_by_force</span>
<span class="co">#&gt; 1                   3               391                  350</span>
<span class="co">#&gt;   actual_rape_attempted actual_robbery_total actual_robbery_with_a_gun</span>
<span class="co">#&gt; 1                    41                  778                       249</span>
<span class="co">#&gt;   actual_robbery_with_a_knife actual_robbery_other_weapon</span>
<span class="co">#&gt; 1                          69                         116</span>
<span class="co">#&gt;   actual_robbery_unarmed actual_assault_total actual_assault_with_a_gun</span>
<span class="co">#&gt; 1                    344                 6448                       621</span>
<span class="co">#&gt;   actual_assault_with_a_knife actual_assault_other_weapon</span>
<span class="co">#&gt; 1                         392                         704</span>
<span class="co">#&gt;   actual_assault_unarmed actual_assault_simple actual_burg_total</span>
<span class="co">#&gt; 1                    651                  4080              2216</span>
<span class="co">#&gt;   actual_burg_force_entry actual_burg_nonforce_entry actual_burg_attempted</span>
<span class="co">#&gt; 1                    1537                        521                   158</span>
<span class="co">#&gt;   actual_theft_total actual_mtr_veh_theft_total actual_mtr_veh_theft_car</span>
<span class="co">#&gt; 1              10721                       3104                     1934</span>
<span class="co">#&gt;   actual_mtr_veh_theft_truck actual_mtr_veh_theft_other actual_all_crimes</span>
<span class="co">#&gt; 1                        971                        199             23688</span>
<span class="co">#&gt;   actual_assault_aggravated actual_index_violent actual_index_property</span>
<span class="co">#&gt; 1                      2368                 3564                 16041</span>
<span class="co">#&gt;   actual_index_total tot_clr_murder tot_clr_manslaughter</span>
<span class="co">#&gt; 1              19605             28                    0</span>
<span class="co">#&gt;   tot_clr_rape_total tot_clr_rape_by_force tot_clr_rape_attempted</span>
<span class="co">#&gt; 1                 58                    48                     10</span>
<span class="co">#&gt;   tot_clr_robbery_total tot_clr_robbery_with_a_gun</span>
<span class="co">#&gt; 1                   216                         47</span>
<span class="co">#&gt;   tot_clr_robbery_with_a_knife tot_clr_robbery_other_weapon</span>
<span class="co">#&gt; 1                           22                           37</span>
<span class="co">#&gt;   tot_clr_robbery_unarmed tot_clr_assault_total tot_clr_assault_with_a_gun</span>
<span class="co">#&gt; 1                     110                  3576                        249</span>
<span class="co">#&gt;   tot_clr_assault_with_a_knife tot_clr_assault_other_weapon</span>
<span class="co">#&gt; 1                          250                          413</span>
<span class="co">#&gt;   tot_clr_assault_unarmed tot_clr_assault_simple tot_clr_burg_total</span>
<span class="co">#&gt; 1                     436                   2228                250</span>
<span class="co">#&gt;   tot_clr_burg_force_entry tot_clr_burg_nonforce_entry</span>
<span class="co">#&gt; 1                      129                         114</span>
<span class="co">#&gt;   tot_clr_burg_attempted tot_clr_theft_total tot_clr_mtr_veh_theft_total</span>
<span class="co">#&gt; 1                      7                1358                         497</span>
<span class="co">#&gt;   tot_clr_mtr_veh_theft_car tot_clr_mtr_veh_theft_truck</span>
<span class="co">#&gt; 1                       335                         145</span>
<span class="co">#&gt;   tot_clr_mtr_veh_theft_other tot_clr_all_crimes</span>
<span class="co">#&gt; 1                          17               5983</span>
<span class="co">#&gt;   tot_clr_assault_aggravated tot_clr_index_violent tot_clr_index_property</span>
<span class="co">#&gt; 1                       1348                  1650                   2105</span>
<span class="co">#&gt;   tot_clr_index_total clr_18_murder clr_18_manslaughter clr_18_rape_total</span>
<span class="co">#&gt; 1                3755             1                   0                 5</span>
<span class="co">#&gt;   clr_18_rape_by_force clr_18_rape_attempted clr_18_robbery_total</span>
<span class="co">#&gt; 1                    4                     1                    9</span>
<span class="co">#&gt;   clr_18_robbery_with_a_gun clr_18_robbery_with_a_knife</span>
<span class="co">#&gt; 1                         1                           1</span>
<span class="co">#&gt;   clr_18_robbery_other_weapon clr_18_robbery_unarmed clr_18_assault_total</span>
<span class="co">#&gt; 1                           0                      7                  277</span>
<span class="co">#&gt;   clr_18_assault_with_a_gun clr_18_assault_with_a_knife</span>
<span class="co">#&gt; 1                        37                          17</span>
<span class="co">#&gt;   clr_18_assault_other_weapon clr_18_assault_unarmed clr_18_assault_simple</span>
<span class="co">#&gt; 1                          19                     17                   187</span>
<span class="co">#&gt;   clr_18_burg_total clr_18_burg_force_entry clr_18_burg_nonforce_entry</span>
<span class="co">#&gt; 1                 8                       4                          2</span>
<span class="co">#&gt;   clr_18_burg_attempted clr_18_theft_total clr_18_mtr_veh_theft_total</span>
<span class="co">#&gt; 1                     2                107                         22</span>
<span class="co">#&gt;   clr_18_mtr_veh_theft_car clr_18_mtr_veh_theft_truck</span>
<span class="co">#&gt; 1                       17                          2</span>
<span class="co">#&gt;   clr_18_mtr_veh_theft_other clr_18_all_crimes clr_18_assault_aggravated</span>
<span class="co">#&gt; 1                          3               429                        90</span>
<span class="co">#&gt;   clr_18_index_violent clr_18_index_property clr_18_index_total</span>
<span class="co">#&gt; 1                  105                   137                242</span>
<span class="co">#&gt;   unfound_murder unfound_manslaughter unfound_rape_total</span>
<span class="co">#&gt; 1              5                    0                 16</span>
<span class="co">#&gt;   unfound_rape_by_force unfound_rape_attempted unfound_robbery_total</span>
<span class="co">#&gt; 1                    16                      0                     1</span>
<span class="co">#&gt;   unfound_robbery_with_a_gun unfound_robbery_with_a_knife</span>
<span class="co">#&gt; 1                          1                            0</span>
<span class="co">#&gt;   unfound_robbery_other_weapon unfound_robbery_unarmed</span>
<span class="co">#&gt; 1                            0                       0</span>
<span class="co">#&gt;   unfound_assault_total unfound_assault_with_a_gun</span>
<span class="co">#&gt; 1                     6                          0</span>
<span class="co">#&gt;   unfound_assault_with_a_knife unfound_assault_other_weapon</span>
<span class="co">#&gt; 1                            1                            1</span>
<span class="co">#&gt;   unfound_assault_unarmed unfound_assault_simple unfound_burg_total</span>
<span class="co">#&gt; 1                       0                      4                  0</span>
<span class="co">#&gt;   unfound_burg_force_entry unfound_burg_nonforce_entry</span>
<span class="co">#&gt; 1                        0                           0</span>
<span class="co">#&gt;   unfound_burg_attempted unfound_theft_total unfound_mtr_veh_theft_total</span>
<span class="co">#&gt; 1                      0                  40                          70</span>
<span class="co">#&gt;   unfound_mtr_veh_theft_car unfound_mtr_veh_theft_truck</span>
<span class="co">#&gt; 1                        53                          16</span>
<span class="co">#&gt;   unfound_mtr_veh_theft_other unfound_all_crimes</span>
<span class="co">#&gt; 1                           1                138</span>
<span class="co">#&gt;   unfound_assault_aggravated unfound_index_violent unfound_index_property</span>
<span class="co">#&gt; 1                          2                    24                    110</span>
<span class="co">#&gt;   unfound_index_total</span>
<span class="co">#&gt; 1                 134</span></code></pre>
<p>Since there are 159 columns in our data, normally we’d want to avoid printing out all of them. And in most cases we would save the output of subsets to a new object to be used later rather than just printing the output in the console.</p>
<p>What happens if we forget the comma? If we put in numbers for both rows and columns but don’t include a comma between them it will have an error.</p>
<pre class="sourceCode r"><code class="sourceCode r">offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span> <span class="dv">1</span>]
<span class="co">#&gt; Error: &lt;text&gt;:1:35: unexpected numeric constant</span>
<span class="co">#&gt; 1: offenses_known_yearly_1960_2017[1 1</span>
<span class="co">#&gt;                                       ^</span></code></pre>
<p>If we only put in a single number and no comma, it will return the column that matches that number. Here we have number 1 and it will return the first column. We’ll wrap it in <code>head()</code> to it doesn’t print out a million rows.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1</span>])
<span class="co">#&gt;       ori</span>
<span class="co">#&gt; 1 AK00101</span>
<span class="co">#&gt; 2 AK00101</span>
<span class="co">#&gt; 3 AK00101</span>
<span class="co">#&gt; 4 AK00101</span>
<span class="co">#&gt; 5 AK00101</span>
<span class="co">#&gt; 6 AK00101</span></code></pre>
<p>Since R thinks you are requesting a columns, and we only have 159 columns in the data, asking for any number above 159 will return an error.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[<span class="dv">1000</span>])
<span class="co">#&gt; Error in `[.data.frame`(offenses_known_yearly_1960_2017, 1000): undefined columns selected</span></code></pre>
<p>So make sure when you want a row from a data.frame you always include the comma!</p>
</div>
<div id="battleships" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Battleships</h3>
<p>When we use square bracket [] notation on a data.frame we must include both row and column numbers (or column names in a vector <code>c()</code>) for the subset to work properly. Why? Think about the game Battleships. The board have 10 rows and 10 columns making for 100 cells. When you select a target to fire at you tell the opponent the row and column, such as A7. Saying you attack A or attack 7 doesn’t make sense. Column A has 10 rows you could mean and row 7 has 10 columns. So your opponent only knows which cell you mean if you give both the column name and row number.</p>
<p><img src="images/battleships.png" /></p>
<p>A data.frame is very similar to the Battleships board, with a number of rows and columns. You need to specify both the row(s) and column(s) you want to subset (hit) for R to understand what it is you want.</p>
</div>
<div id="subset-colorado-data" class="section level3">
<h3><span class="header-section-number">3.4.3</span> Subset Colorado data</h3>
<p>Finally we have the tools to subset our UCR data to just be Colorado from 2011-2017. There are three conditional statements we need to make, two for rows and one for columns.</p>
<ol style="list-style-type: decimal">
<li>only rows where the state equals Colorado</li>
<li>only rows where the year is 2011-2017</li>
<li>only the following columns: actual_murder, state, year, population, ori, agency_name</li>
</ol>
<p>We could use the <code>&amp;</code> operator to say rows must meet condition 1 and condition 2. Since this is an intro lesson we will do them as two separate conditional statements. For the first step we want to get all rows in the data where the state equals “colorado” (in this data all state names are lowercased). And at this point we want keep all columns in the data. So let’s make a new object called “colorado” to save the result of this subset.</p>
<p>Remember that we want to put the object to the left of the [] to make sure it returns the data. Just having the [] will only return TRUE or FALSE values based on the conditional statement. Since we want all columns we don’t need to put anything after the comma.</p>
<pre class="sourceCode r"><code class="sourceCode r">colorado &lt;-<span class="st"> </span>offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span>[offenses_known_yearly_<span class="dv">1960</span>_<span class="dv">2017</span><span class="op">$</span>state <span class="op">==</span><span class="st"> &quot;colorado&quot;</span>, ]</code></pre>
<p>Now we want to get all the rows where the year is 2011-2017. Since we want to check if the year is one of the years 2011-2017, we will use %in% and put the years in a vector 2011:2017. This time our primary data set is “colorado”, not “offenses_known_yearly_1960_2017” since “colorado” has already subsetted to just the state we want. This is how subsetting generally works. You take a large data set, subset it to a smaller one and continue to subset the smaller one to only the data you want.</p>
<pre class="sourceCode r"><code class="sourceCode r">colorado &lt;-<span class="st"> </span>colorado[colorado<span class="op">$</span>year <span class="op">%in%</span><span class="st"> </span><span class="dv">2011</span><span class="op">:</span><span class="dv">2017</span>, ]</code></pre>
<p>Finally we want the columns stated above and to keep every row in the current data. Since the format is [row, column] in this case we keep the “row” part blank to indicate we want every row.</p>
<pre class="sourceCode r"><code class="sourceCode r">colorado &lt;-<span class="st"> </span>colorado[ , <span class="kw">c</span>(<span class="st">&quot;actual_murder&quot;</span>, <span class="st">&quot;state&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;population&quot;</span>, <span class="st">&quot;ori&quot;</span>, <span class="st">&quot;agency_name&quot;</span>)]</code></pre>
<p>We can do a quick check using the <code>unique()</code> function. The <code>unique()</code> prints all the unique values in a category, such as a column. We will use it on the “state” and “year” columns to make sure only the values we want are present.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(colorado<span class="op">$</span>state)
<span class="co">#&gt; [1] &quot;colorado&quot;</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unique</span>(colorado<span class="op">$</span>year)
<span class="co">#&gt; [1] 2017 2016 2015 2014 2013 2012 2011</span></code></pre>
<p>The only state is Colorado and the only years are 2011-2017 so our subset worked! This data shows the number of murders in each agency. We want to look at state trends so in the next chapter we will sum up all the murders per year and see if marijuana affected it.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-rstudio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exploratory-data-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacobkap/r4crim/edit/master/subsetting.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>

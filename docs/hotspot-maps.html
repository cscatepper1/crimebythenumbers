<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>17 Hotspot maps | Crime by the Numbers: A Criminologist’s Guide to R</title>
  <meta name="description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="17 Hotspot maps | Crime by the Numbers: A Criminologist’s Guide to R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://crimebythenumbers.com" />
  
  <meta property="og:description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="github-repo" content="jacobkap/crimebythenumbers" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="17 Hotspot maps | Crime by the Numbers: A Criminologist’s Guide to R" />
  
  <meta name="twitter:description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  

<meta name="author" content="Jacob Kaplan" />


<meta name="date" content="2021-11-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ois_graphs.html"/>
<link rel="next" href="choropleth-maps.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99359926-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99359926-6');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Crime by the Numbers: A Criminologist's Guide to R</a></strong></li>

<li class="divider"></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#why-learn-to-program"><i class="fa fa-check"></i><b>1.1</b> Why learn to program?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#scale"><i class="fa fa-check"></i><b>1.1.1</b> Scale</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i><b>1.1.2</b> Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-you-will-learn"><i class="fa fa-check"></i><b>1.2</b> What you will learn</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i><b>1.2.1</b> Skills</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.2.2</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-you-wont-learn"><i class="fa fa-check"></i><b>1.3</b> What you won’t learn</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#simple-vs-easy"><i class="fa fa-check"></i><b>1.4</b> Simple vs Easy</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i><b>1.5</b> How to read this book</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#citing-this-book"><i class="fa fa-check"></i><b>1.6</b> Citing this book</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#how-to-contribute-to-this-book"><i class="fa fa-check"></i><b>1.7</b> How to contribute to this book</a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#where-to-find-data-included-in-this-book"><i class="fa fa-check"></i><b>1.8</b> Where to find data included in this book</a></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#where-to-find-code-included-in-this-book"><i class="fa fa-check"></i><b>1.9</b> Where to find code included in this book</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html"><i class="fa fa-check"></i><b>2</b> A soup to nuts project example</a>
<ul>
<li class="chapter" data-level="2.1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#big-picture-data-example"><i class="fa fa-check"></i><b>2.1</b> Big picture data example</a></li>
<li class="chapter" data-level="2.2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#little-picture-data-example"><i class="fa fa-check"></i><b>2.2</b> Little picture data example</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#loading-packages"><i class="fa fa-check"></i><b>2.2.1</b> Loading packages</a></li>
<li class="chapter" data-level="2.2.2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#loading-data"><i class="fa fa-check"></i><b>2.2.2</b> Loading data</a></li>
<li class="chapter" data-level="2.2.3" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#cleaning"><i class="fa fa-check"></i><b>2.2.3</b> Cleaning</a></li>
<li class="chapter" data-level="2.2.4" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#aggregating"><i class="fa fa-check"></i><b>2.2.4</b> Aggregating</a></li>
<li class="chapter" data-level="2.2.5" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#graphing"><i class="fa fa-check"></i><b>2.2.5</b> Graphing</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#reusing-and-modifying-code"><i class="fa fa-check"></i><b>2.3</b> Reusing and modifying code</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>3</b> Introduction to R and RStudio</a>
<ul>
<li class="chapter" data-level="3.1" data-path="intro-to-r.html"><a href="intro-to-r.html#using-rstudio"><i class="fa fa-check"></i><b>3.1</b> Using RStudio</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="intro-to-r.html"><a href="intro-to-r.html#opening-an-r-script"><i class="fa fa-check"></i><b>3.1.1</b> Opening an R Script</a></li>
<li class="chapter" data-level="3.1.2" data-path="intro-to-r.html"><a href="intro-to-r.html#setting-the-working-directory"><i class="fa fa-check"></i><b>3.1.2</b> Setting the working directory</a></li>
<li class="chapter" data-level="3.1.3" data-path="intro-to-r.html"><a href="intro-to-r.html#changing-rstudio"><i class="fa fa-check"></i><b>3.1.3</b> Changing RStudio</a></li>
<li class="chapter" data-level="3.1.4" data-path="intro-to-r.html"><a href="intro-to-r.html#helpful-cheat-sheets"><i class="fa fa-check"></i><b>3.1.4</b> Helpful Cheat Sheets</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="intro-to-r.html"><a href="intro-to-r.html#assignment"><i class="fa fa-check"></i><b>3.2</b> Assigning variables</a></li>
<li class="chapter" data-level="3.3" data-path="intro-to-r.html"><a href="intro-to-r.html#functions-intro"><i class="fa fa-check"></i><b>3.3</b> What are functions (and packages)?</a></li>
<li class="chapter" data-level="3.4" data-path="intro-to-r.html"><a href="intro-to-r.html#reading-data-into-r"><i class="fa fa-check"></i><b>3.4</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="intro-to-r.html"><a href="intro-to-r.html#loading-data-intro"><i class="fa fa-check"></i><b>3.4.1</b> Loading data</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="intro-to-r.html"><a href="intro-to-r.html#first-steps-to-exploring-data"><i class="fa fa-check"></i><b>3.5</b> First steps to exploring data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data_types.html"><a href="data_types.html"><i class="fa fa-check"></i><b>4</b> Data types and structures</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data_types.html"><a href="data_types.html#data-types"><i class="fa fa-check"></i><b>4.1</b> Data types</a></li>
<li class="chapter" data-level="4.2" data-path="data_types.html"><a href="data_types.html#data-structures"><i class="fa fa-check"></i><b>4.2</b> Data structures</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data_types.html"><a href="data_types.html#vectors"><i class="fa fa-check"></i><b>4.2.1</b> Vectors (collections of “things”)</a></li>
<li class="chapter" data-level="4.2.2" data-path="data_types.html"><a href="data_types.html#data.frames"><i class="fa fa-check"></i><b>4.2.2</b> Data.frames</a></li>
<li class="chapter" data-level="4.2.3" data-path="data_types.html"><a href="data_types.html#other-data-structures"><i class="fa fa-check"></i><b>4.2.3</b> Other data structures</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Project Management</b></span></li>
<li class="chapter" data-level="5" data-path="mise-en-place.html"><a href="mise-en-place.html"><i class="fa fa-check"></i><b>5</b> <em>Mise en place</em></a>
<ul>
<li class="chapter" data-level="5.1" data-path="mise-en-place.html"><a href="mise-en-place.html#starting-with-a-pencil-and-paper"><i class="fa fa-check"></i><b>5.1</b> Starting with a pencil and paper</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="mise-en-place.html"><a href="mise-en-place.html#tables-and-graphs"><i class="fa fa-check"></i><b>5.1.1</b> Tables and graphs</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="mise-en-place.html"><a href="mise-en-place.html#r-projects"><i class="fa fa-check"></i><b>5.2</b> R Projects</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="mise-en-place.html"><a href="mise-en-place.html#folders"><i class="fa fa-check"></i><b>5.2.1</b> Folders</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="mise-en-place.html"><a href="mise-en-place.html#modular-r-scripts"><i class="fa fa-check"></i><b>5.3</b> Modular R scripts</a></li>
<li class="chapter" data-level="5.4" data-path="mise-en-place.html"><a href="mise-en-place.html#modular-code"><i class="fa fa-check"></i><b>5.4</b> Modular code</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="mise-en-place.html"><a href="mise-en-place.html#section-labels"><i class="fa fa-check"></i><b>5.4.1</b> Section Labels</a></li>
<li class="chapter" data-level="5.4.2" data-path="mise-en-place.html"><a href="mise-en-place.html#helper-r-scripts"><i class="fa fa-check"></i><b>5.4.2</b> Helper R Scripts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="collaboration.html"><a href="collaboration.html"><i class="fa fa-check"></i><b>6</b> Collaboration</a>
<ul>
<li class="chapter" data-level="6.1" data-path="collaboration.html"><a href="collaboration.html#code-review"><i class="fa fa-check"></i><b>6.1</b> Code review</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="collaboration.html"><a href="collaboration.html#style-guidelines"><i class="fa fa-check"></i><b>6.1.1</b> Style guidelines</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="collaboration.html"><a href="collaboration.html#documentation"><i class="fa fa-check"></i><b>6.2</b> Documentation</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="collaboration.html"><a href="collaboration.html#comments"><i class="fa fa-check"></i><b>6.2.1</b> Comments</a></li>
<li class="chapter" data-level="6.2.2" data-path="collaboration.html"><a href="collaboration.html#vignettes"><i class="fa fa-check"></i><b>6.2.2</b> Vignettes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7</b> R Markdown</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-markdown.html"><a href="r-markdown.html#code-1"><i class="fa fa-check"></i><b>7.1</b> Code</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="r-markdown.html"><a href="r-markdown.html#hiding-code-in-the-output"><i class="fa fa-check"></i><b>7.1.1</b> Hiding code in the output</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="r-markdown.html"><a href="r-markdown.html#inline-code"><i class="fa fa-check"></i><b>7.2</b> Inline Code</a></li>
<li class="chapter" data-level="7.3" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i><b>7.3</b> Tables</a></li>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html#footnotes"><i class="fa fa-check"></i><b>7.4</b> Footnotes</a></li>
<li class="chapter" data-level="7.5" data-path="r-markdown.html"><a href="r-markdown.html#citation"><i class="fa fa-check"></i><b>7.5</b> Citation</a></li>
<li class="chapter" data-level="7.6" data-path="r-markdown.html"><a href="r-markdown.html#spell-check"><i class="fa fa-check"></i><b>7.6</b> Spell check</a></li>
<li class="chapter" data-level="7.7" data-path="r-markdown.html"><a href="r-markdown.html#making-the-output-file"><i class="fa fa-check"></i><b>7.7</b> Making the output file</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tests.html"><a href="tests.html"><i class="fa fa-check"></i><b>8</b> Testing your code</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tests.html"><a href="tests.html#why-test-your-code"><i class="fa fa-check"></i><b>8.1</b> Why test your code?</a></li>
<li class="chapter" data-level="8.2" data-path="tests.html"><a href="tests.html#unit-tests"><i class="fa fa-check"></i><b>8.2</b> Unit tests</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="tests.html"><a href="tests.html#modular-test-scripts"><i class="fa fa-check"></i><b>8.2.1</b> Modular test scripts</a></li>
<li class="chapter" data-level="8.2.2" data-path="tests.html"><a href="tests.html#how-to-write-unit-tests"><i class="fa fa-check"></i><b>8.2.2</b> How to write unit tests</a></li>
<li class="chapter" data-level="8.2.3" data-path="tests.html"><a href="tests.html#what-to-test"><i class="fa fa-check"></i><b>8.2.3</b> What to test</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tests.html"><a href="tests.html#test-driven-development-tdd"><i class="fa fa-check"></i><b>8.3</b> Test-driven development (TDD)</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>9</b> Git</a>
<ul>
<li class="chapter" data-level="9.1" data-path="git.html"><a href="git.html#what-is-git-and-why-do-i-need-it"><i class="fa fa-check"></i><b>9.1</b> What is Git and why do I need it?</a></li>
<li class="chapter" data-level="9.2" data-path="git.html"><a href="git.html#git-basics"><i class="fa fa-check"></i><b>9.2</b> Git basics</a></li>
<li class="chapter" data-level="9.3" data-path="git.html"><a href="git.html#using-git"><i class="fa fa-check"></i><b>9.3</b> Using Git</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="git.html"><a href="git.html#setting-up-git"><i class="fa fa-check"></i><b>9.3.1</b> Setting up Git</a></li>
<li class="chapter" data-level="9.3.2" data-path="git.html"><a href="git.html#setting-up-github"><i class="fa fa-check"></i><b>9.3.2</b> Setting up Github</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="git.html"><a href="git.html#setting-up-git-on-an-already-made-r-project"><i class="fa fa-check"></i><b>9.4</b> Setting up Git on an already made R Project</a></li>
<li class="chapter" data-level="9.5" data-path="git.html"><a href="git.html#using-git-through-rstudio"><i class="fa fa-check"></i><b>9.5</b> Using Git through RStudio</a></li>
<li class="chapter" data-level="9.6" data-path="git.html"><a href="git.html#when-to-commit"><i class="fa fa-check"></i><b>9.6</b> When to commit</a></li>
<li class="chapter" data-level="9.7" data-path="git.html"><a href="git.html#other-resources"><i class="fa fa-check"></i><b>9.7</b> Other resources</a></li>
</ul></li>
<li class="part"><span><b>III Clean</b></span></li>
<li class="chapter" data-level="10" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>10</b> Reading and writing Data</a>
<ul>
<li class="chapter" data-level="10.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-data-into-r-1"><i class="fa fa-check"></i><b>10.1</b> Reading Data into R</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r"><i class="fa fa-check"></i><b>10.1.1</b> R</a></li>
<li class="chapter" data-level="10.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel"><i class="fa fa-check"></i><b>10.1.2</b> Excel</a></li>
<li class="chapter" data-level="10.1.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata"><i class="fa fa-check"></i><b>10.1.3</b> Stata</a></li>
<li class="chapter" data-level="10.1.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas"><i class="fa fa-check"></i><b>10.1.4</b> SAS</a></li>
<li class="chapter" data-level="10.1.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss"><i class="fa fa-check"></i><b>10.1.5</b> SPSS</a></li>
<li class="chapter" data-level="10.1.6" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#fixed-width-ascii"><i class="fa fa-check"></i><b>10.1.6</b> Fixed-width ASCII</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-data"><i class="fa fa-check"></i><b>10.2</b> Writing Data</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-1"><i class="fa fa-check"></i><b>10.2.1</b> R</a></li>
<li class="chapter" data-level="10.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-1"><i class="fa fa-check"></i><b>10.2.2</b> Excel</a></li>
<li class="chapter" data-level="10.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-1"><i class="fa fa-check"></i><b>10.2.3</b> Stata</a></li>
<li class="chapter" data-level="10.2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-1"><i class="fa fa-check"></i><b>10.2.4</b> SAS</a></li>
<li class="chapter" data-level="10.2.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss-1"><i class="fa fa-check"></i><b>10.2.5</b> SPSS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="subsetting-intro.html"><a href="subsetting-intro.html"><i class="fa fa-check"></i><b>11</b> Subsetting: Making big things small</a>
<ul>
<li class="chapter" data-level="11.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-values"><i class="fa fa-check"></i><b>11.1</b> Select specific values</a></li>
<li class="chapter" data-level="11.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#logical-values-and-operations"><i class="fa fa-check"></i><b>11.2</b> Logical values and operations</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-a-single-value"><i class="fa fa-check"></i><b>11.2.1</b> Matching a single value</a></li>
<li class="chapter" data-level="11.2.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-multiple-values"><i class="fa fa-check"></i><b>11.2.2</b> Matching multiple values</a></li>
<li class="chapter" data-level="11.2.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#does-not-match"><i class="fa fa-check"></i><b>11.2.3</b> Does not match</a></li>
<li class="chapter" data-level="11.2.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#greater-than-or-less-than"><i class="fa fa-check"></i><b>11.2.4</b> Greater than or less than</a></li>
<li class="chapter" data-level="11.2.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#combining-conditional-statements---or-and"><i class="fa fa-check"></i><b>11.2.5</b> Combining conditional statements - or, and</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subsetting-a-data.frame"><i class="fa fa-check"></i><b>11.3</b> Subsetting a data.frame</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-columns"><i class="fa fa-check"></i><b>11.3.1</b> Select specific columns</a></li>
<li class="chapter" data-level="11.3.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-rows"><i class="fa fa-check"></i><b>11.3.2</b> Select specific rows</a></li>
<li class="chapter" data-level="11.3.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subset-colorado-data"><i class="fa fa-check"></i><b>11.3.3</b> Subset Colorado data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>12</b> Exploratory data analysis</a>
<ul>
<li class="chapter" data-level="12.1" data-path="explore.html"><a href="explore.html#summary-and-table"><i class="fa fa-check"></i><b>12.1</b> Summary and Table</a></li>
<li class="chapter" data-level="12.2" data-path="explore.html"><a href="explore.html#graphing-1"><i class="fa fa-check"></i><b>12.2</b> Graphing</a></li>
<li class="chapter" data-level="12.3" data-path="explore.html"><a href="explore.html#aggregate"><i class="fa fa-check"></i><b>12.3</b> Aggregating (summaries of groups)</a></li>
<li class="chapter" data-level="12.4" data-path="explore.html"><a href="explore.html#dplyr-pipes"><i class="fa fa-check"></i><b>12.4</b> Pipes in <code>dplyr</code></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>13</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="13.1" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-patterns-in-text-with-grep"><i class="fa fa-check"></i><b>13.1</b> Finding patterns in text with <code>grep()</code></a></li>
<li class="chapter" data-level="13.2" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub"><i class="fa fa-check"></i><b>13.2</b> Finding and replacing patterns in text with <code>gsub()</code></a></li>
<li class="chapter" data-level="13.3" data-path="regular-expressions.html"><a href="regular-expressions.html#useful-special-characters"><i class="fa fa-check"></i><b>13.3</b> Useful special characters</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-characters"><i class="fa fa-check"></i><b>13.3.1</b> Multiple characters <code>[]</code></a></li>
<li class="chapter" data-level="13.3.2" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-of-previous-character-n"><i class="fa fa-check"></i><b>13.3.2</b> n-many of previous character <code>{n}</code></a></li>
<li class="chapter" data-level="13.3.3" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm"><i class="fa fa-check"></i><b>13.3.3</b> n-many to m-many of previous character <code>{n,m}</code></a></li>
<li class="chapter" data-level="13.3.4" data-path="regular-expressions.html"><a href="regular-expressions.html#start-of-string"><i class="fa fa-check"></i><b>13.3.4</b> Start of string</a></li>
<li class="chapter" data-level="13.3.5" data-path="regular-expressions.html"><a href="regular-expressions.html#end-of-string"><i class="fa fa-check"></i><b>13.3.5</b> End of string <code>$</code></a></li>
<li class="chapter" data-level="13.3.6" data-path="regular-expressions.html"><a href="regular-expressions.html#anything-."><i class="fa fa-check"></i><b>13.3.6</b> Anything <code>.</code></a></li>
<li class="chapter" data-level="13.3.7" data-path="regular-expressions.html"><a href="regular-expressions.html#one-or-more-of-previous"><i class="fa fa-check"></i><b>13.3.7</b> One or more of previous <code>+</code></a></li>
<li class="chapter" data-level="13.3.8" data-path="regular-expressions.html"><a href="regular-expressions.html#zero-or-more-of-previous"><i class="fa fa-check"></i><b>13.3.8</b> Zero or more of previous <code>*</code></a></li>
<li class="chapter" data-level="13.3.9" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-patterns"><i class="fa fa-check"></i><b>13.3.9</b> Multiple patterns <code>|</code></a></li>
<li class="chapter" data-level="13.3.10" data-path="regular-expressions.html"><a href="regular-expressions.html#parentheses"><i class="fa fa-check"></i><b>13.3.10</b> Parentheses <code>()</code></a></li>
<li class="chapter" data-level="13.3.11" data-path="regular-expressions.html"><a href="regular-expressions.html#optional-text"><i class="fa fa-check"></i><b>13.3.11</b> Optional text <code>?</code></a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="regular-expressions.html"><a href="regular-expressions.html#changing-capitalization"><i class="fa fa-check"></i><b>13.4</b> Changing capitalization</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="reshaping.html"><a href="reshaping.html"><i class="fa fa-check"></i><b>14</b> Reshaping data</a></li>
<li class="part"><span><b>IV Visualize</b></span></li>
<li class="chapter" data-level="15" data-path="graphing-intro.html"><a href="graphing-intro.html"><i class="fa fa-check"></i><b>15</b> Graphing with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="15.1" data-path="graphing-intro.html"><a href="graphing-intro.html#what-does-the-data-look-like"><i class="fa fa-check"></i><b>15.1</b> What does the data look like?</a></li>
<li class="chapter" data-level="15.2" data-path="graphing-intro.html"><a href="graphing-intro.html#graphing-data"><i class="fa fa-check"></i><b>15.2</b> Graphing data</a></li>
<li class="chapter" data-level="15.3" data-path="graphing-intro.html"><a href="graphing-intro.html#time-series-plots"><i class="fa fa-check"></i><b>15.3</b> Time-Series Plots</a></li>
<li class="chapter" data-level="15.4" data-path="graphing-intro.html"><a href="graphing-intro.html#scatter-plots"><i class="fa fa-check"></i><b>15.4</b> Scatter Plots</a></li>
<li class="chapter" data-level="15.5" data-path="graphing-intro.html"><a href="graphing-intro.html#color-blindness"><i class="fa fa-check"></i><b>15.5</b> Color blindness</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="ois_graphs.html"><a href="ois_graphs.html"><i class="fa fa-check"></i><b>16</b> More graphing with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="16.1" data-path="ois_graphs.html"><a href="ois_graphs.html#exploring-data"><i class="fa fa-check"></i><b>16.1</b> Exploring Data</a></li>
<li class="chapter" data-level="16.2" data-path="ois_graphs.html"><a href="ois_graphs.html#graphing-a-single-numeric-variable"><i class="fa fa-check"></i><b>16.2</b> Graphing a Single Numeric Variable</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="ois_graphs.html"><a href="ois_graphs.html#histogram"><i class="fa fa-check"></i><b>16.2.1</b> Histogram</a></li>
<li class="chapter" data-level="16.2.2" data-path="ois_graphs.html"><a href="ois_graphs.html#density-plot"><i class="fa fa-check"></i><b>16.2.2</b> Density plot</a></li>
<li class="chapter" data-level="16.2.3" data-path="ois_graphs.html"><a href="ois_graphs.html#count-graph"><i class="fa fa-check"></i><b>16.2.3</b> Count Graph</a></li>
<li class="chapter" data-level="16.2.4" data-path="ois_graphs.html"><a href="ois_graphs.html#graphing-a-categorical-variable"><i class="fa fa-check"></i><b>16.2.4</b> Graphing a Categorical Variable</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="ois_graphs.html"><a href="ois_graphs.html#bar-graph"><i class="fa fa-check"></i><b>16.3</b> Bar graph</a></li>
<li class="chapter" data-level="16.4" data-path="ois_graphs.html"><a href="ois_graphs.html#graphing-data-over-time"><i class="fa fa-check"></i><b>16.4</b> Graphing Data Over Time</a></li>
<li class="chapter" data-level="16.5" data-path="ois_graphs.html"><a href="ois_graphs.html#pretty-graphs"><i class="fa fa-check"></i><b>16.5</b> Pretty Graphs</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="ois_graphs.html"><a href="ois_graphs.html#themes"><i class="fa fa-check"></i><b>16.5.1</b> Themes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="hotspot-maps.html"><a href="hotspot-maps.html"><i class="fa fa-check"></i><b>17</b> Hotspot maps</a>
<ul>
<li class="chapter" data-level="17.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#a-simple-map"><i class="fa fa-check"></i><b>17.1</b> A simple map</a></li>
<li class="chapter" data-level="17.2" data-path="hotspot-maps.html"><a href="hotspot-maps.html#what-really-are-maps"><i class="fa fa-check"></i><b>17.2</b> What really are maps?</a></li>
<li class="chapter" data-level="17.3" data-path="hotspot-maps.html"><a href="hotspot-maps.html#making-a-hotspot-map"><i class="fa fa-check"></i><b>17.3</b> Making a hotspot map</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#colors"><i class="fa fa-check"></i><b>17.3.1</b> Colors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="choropleth-maps.html"><a href="choropleth-maps.html"><i class="fa fa-check"></i><b>18</b> Choropleth maps</a>
<ul>
<li class="chapter" data-level="18.1" data-path="choropleth-maps.html"><a href="choropleth-maps.html#spatial-joins"><i class="fa fa-check"></i><b>18.1</b> Spatial joins</a></li>
<li class="chapter" data-level="18.2" data-path="choropleth-maps.html"><a href="choropleth-maps.html#making-choropleth-maps"><i class="fa fa-check"></i><b>18.2</b> Making choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>19</b> Interactive maps</a>
<ul>
<li class="chapter" data-level="19.1" data-path="interactive-maps.html"><a href="interactive-maps.html#why-do-interactive-graphs-matter"><i class="fa fa-check"></i><b>19.1</b> Why do interactive graphs matter?</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="interactive-maps.html"><a href="interactive-maps.html#understanding-your-data"><i class="fa fa-check"></i><b>19.1.1</b> Understanding your data</a></li>
<li class="chapter" data-level="19.1.2" data-path="interactive-maps.html"><a href="interactive-maps.html#police-departments-use-them"><i class="fa fa-check"></i><b>19.1.2</b> Police departments use them</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="interactive-maps.html"><a href="interactive-maps.html#making-the-interactive-map"><i class="fa fa-check"></i><b>19.2</b> Making the interactive map</a></li>
<li class="chapter" data-level="19.3" data-path="interactive-maps.html"><a href="interactive-maps.html#adding-popup-information"><i class="fa fa-check"></i><b>19.3</b> Adding popup information</a></li>
<li class="chapter" data-level="19.4" data-path="interactive-maps.html"><a href="interactive-maps.html#dealing-with-too-many-markers"><i class="fa fa-check"></i><b>19.4</b> Dealing with too many markers</a></li>
<li class="chapter" data-level="19.5" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-choropleth-maps"><i class="fa fa-check"></i><b>19.5</b> Interactive choropleth maps</a></li>
</ul></li>
<li class="part"><span><b>V Collect</b></span></li>
<li class="chapter" data-level="20" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html"><i class="fa fa-check"></i><b>20</b> Webscraping with <code>rvest</code></a>
<ul>
<li class="chapter" data-level="20.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#scraping-one-page"><i class="fa fa-check"></i><b>20.1</b> Scraping one page</a></li>
<li class="chapter" data-level="20.2" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#cleaning-the-webscraped-data"><i class="fa fa-check"></i><b>20.2</b> Cleaning the webscraped data</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>21</b> Functions</a>
<ul>
<li class="chapter" data-level="21.1" data-path="functions.html"><a href="functions.html#a-simple-function"><i class="fa fa-check"></i><b>21.1</b> A simple function</a></li>
<li class="chapter" data-level="21.2" data-path="functions.html"><a href="functions.html#adding-parameters"><i class="fa fa-check"></i><b>21.2</b> Adding parameters</a></li>
<li class="chapter" data-level="21.3" data-path="functions.html"><a href="functions.html#recipes-function"><i class="fa fa-check"></i><b>21.3</b> Making a function to scrape recipes</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>22</b> For loops</a>
<ul>
<li class="chapter" data-level="22.1" data-path="for-loops.html"><a href="for-loops.html#basic-for-loops"><i class="fa fa-check"></i><b>22.1</b> Basic for loops</a></li>
<li class="chapter" data-level="22.2" data-path="for-loops.html"><a href="for-loops.html#scraping-multiple-recipes"><i class="fa fa-check"></i><b>22.2</b> Scraping multiple recipes</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="scrape-table.html"><a href="scrape-table.html"><i class="fa fa-check"></i><b>23</b> Scraping tables from PDFs</a>
<ul>
<li class="chapter" data-level="23.1" data-path="scrape-table.html"><a href="scrape-table.html#scraping-the-first-table"><i class="fa fa-check"></i><b>23.1</b> Scraping the first table</a></li>
<li class="chapter" data-level="23.2" data-path="scrape-table.html"><a href="scrape-table.html#making-a-function"><i class="fa fa-check"></i><b>23.2</b> Making a function</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="scrape-table2.html"><a href="scrape-table2.html"><i class="fa fa-check"></i><b>24</b> More scraping tables from PDFs</a>
<ul>
<li class="chapter" data-level="24.1" data-path="scrape-table2.html"><a href="scrape-table2.html#pregnant-women-incarcerated"><i class="fa fa-check"></i><b>24.1</b> Pregnant Women Incarcerated</a></li>
<li class="chapter" data-level="24.2" data-path="scrape-table2.html"><a href="scrape-table2.html#making-pdf-scraped-data-available-to-others"><i class="fa fa-check"></i><b>24.2</b> Making PDF-scraped data available to others</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>25</b> Geocoding</a>
<ul>
<li class="chapter" data-level="25.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-a-single-address"><i class="fa fa-check"></i><b>25.1</b> Geocoding a single address</a></li>
<li class="chapter" data-level="25.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-san-francisco-marijuana-dispensary-locations"><i class="fa fa-check"></i><b>25.2</b> Geocoding San Francisco marijuana dispensary locations</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime by the Numbers: A Criminologist’s Guide to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="hotspot-maps" class="section level1" number="17">
<h1><span class="header-section-number">17</span> Hotspot maps</h1>
<p>For this chapter you’ll need the following file, which is available for download <a href="https://github.com/jacobkap/r4crimz/tree/master/data">here</a>: san_francisco_suicide_2003_2017.csv.</p>
<p>Hotspot maps are used to find where events (marijuana dispensaries, crimes, liquors stores) are especially prevalent. These maps are frequently used by police departments, particularly in determining where to do hotspot policing (which is focusing patrols on high-crime areas).</p>
<p>However, there are significant flaws with these kinds of maps. As we’ll see during this lesson, minor changes to how we make the maps can cause significant differences in interpretation. For example, determining the size of the clusters that make up the hotspots can make it seem like there are much larger or smaller areas with hotspots than there actually are. These clusters are also drawn fairly arbitrarily, without considering context such as neighborhoods (In Chapter <a href="choropleth-maps.html#choropleth-maps">18</a> we’ll make maps that try to account for these types of areas). This makes it more difficult to interpret because even though maps give us the context of location, it can combine different areas in an arbitrary way. We’ll explore these issues in more detail throughout the lesson but keep in mind these risks as you make your own hotspot maps.</p>
<p>Here, we will make hotspot maps using data on suicides in San Francisco between 2003 and 2017. First, we need to read the data, which is called “san_francisco_suicide_2003_2017.csv.” We can name the object we make <em>suicide</em>.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="hotspot-maps.html#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb288-2"><a href="hotspot-maps.html#cb288-2" aria-hidden="true" tabindex="-1"></a>suicide <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/san_francisco_suicide_2003_2017.csv&quot;</span>)</span>
<span id="cb288-3"><a href="hotspot-maps.html#cb288-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Rows: 1292 Columns: 14</span></span>
<span id="cb288-4"><a href="hotspot-maps.html#cb288-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -- Column specification --------------------------------</span></span>
<span id="cb288-5"><a href="hotspot-maps.html#cb288-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Delimiter: &quot;,&quot;</span></span>
<span id="cb288-6"><a href="hotspot-maps.html#cb288-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; chr  (8): Category, Descript, DayOfWeek, Date, PdDis...</span></span>
<span id="cb288-7"><a href="hotspot-maps.html#cb288-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; dbl  (5): IncidntNum, X, Y, PdId, year</span></span>
<span id="cb288-8"><a href="hotspot-maps.html#cb288-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; time (1): Time</span></span>
<span id="cb288-9"><a href="hotspot-maps.html#cb288-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb288-10"><a href="hotspot-maps.html#cb288-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; i Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb288-11"><a href="hotspot-maps.html#cb288-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; i Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb288-12"><a href="hotspot-maps.html#cb288-12" aria-hidden="true" tabindex="-1"></a>suicide <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(suicide)</span></code></pre></div>
<p>This data contains information on each crime reported in San Francisco including the type of crime (in our case always suicide), a more detailed crime category, and a number of date and location variables. The columns X and Y are our longitude and latitude columns which we will use to graph the data.</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="hotspot-maps.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(suicide)</span>
<span id="cb289-2"><a href="hotspot-maps.html#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   IncidntNum Category</span></span>
<span id="cb289-3"><a href="hotspot-maps.html#cb289-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  180318931  SUICIDE</span></span>
<span id="cb289-4"><a href="hotspot-maps.html#cb289-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  180315501  SUICIDE</span></span>
<span id="cb289-5"><a href="hotspot-maps.html#cb289-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  180295674  SUICIDE</span></span>
<span id="cb289-6"><a href="hotspot-maps.html#cb289-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  180263659  SUICIDE</span></span>
<span id="cb289-7"><a href="hotspot-maps.html#cb289-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  180235523  SUICIDE</span></span>
<span id="cb289-8"><a href="hotspot-maps.html#cb289-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  180236515  SUICIDE</span></span>
<span id="cb289-9"><a href="hotspot-maps.html#cb289-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                             Descript DayOfWeek</span></span>
<span id="cb289-10"><a href="hotspot-maps.html#cb289-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 ATTEMPTED SUICIDE BY STRANGULATION    Monday</span></span>
<span id="cb289-11"><a href="hotspot-maps.html#cb289-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       ATTEMPTED SUICIDE BY JUMPING  Saturday</span></span>
<span id="cb289-12"><a href="hotspot-maps.html#cb289-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3              SUICIDE BY LACERATION  Saturday</span></span>
<span id="cb289-13"><a href="hotspot-maps.html#cb289-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                            SUICIDE   Tuesday</span></span>
<span id="cb289-14"><a href="hotspot-maps.html#cb289-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     ATTEMPTED SUICIDE BY INGESTION    Friday</span></span>
<span id="cb289-15"><a href="hotspot-maps.html#cb289-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6            SUICIDE BY ASPHYXIATION  Thursday</span></span>
<span id="cb289-16"><a href="hotspot-maps.html#cb289-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Date     Time PdDistrict Resolution</span></span>
<span id="cb289-17"><a href="hotspot-maps.html#cb289-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 04/30/2018 06:30:00    TARAVAL       NONE</span></span>
<span id="cb289-18"><a href="hotspot-maps.html#cb289-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 04/28/2018 17:54:00   NORTHERN       NONE</span></span>
<span id="cb289-19"><a href="hotspot-maps.html#cb289-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 04/21/2018 12:20:00   RICHMOND       NONE</span></span>
<span id="cb289-20"><a href="hotspot-maps.html#cb289-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 04/10/2018 05:13:00    CENTRAL       NONE</span></span>
<span id="cb289-21"><a href="hotspot-maps.html#cb289-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 03/30/2018 09:15:00    TARAVAL       NONE</span></span>
<span id="cb289-22"><a href="hotspot-maps.html#cb289-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 03/29/2018 17:30:00   RICHMOND       NONE</span></span>
<span id="cb289-23"><a href="hotspot-maps.html#cb289-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                   Address         X        Y</span></span>
<span id="cb289-24"><a href="hotspot-maps.html#cb289-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     0 Block of BRUCE AV -122.4517 37.72218</span></span>
<span id="cb289-25"><a href="hotspot-maps.html#cb289-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   700 Block of HAYES ST -122.4288 37.77620</span></span>
<span id="cb289-26"><a href="hotspot-maps.html#cb289-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   3700 Block of CLAY ST -122.4546 37.78818</span></span>
<span id="cb289-27"><a href="hotspot-maps.html#cb289-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     0 Block of DRUMM ST -122.3964 37.79414</span></span>
<span id="cb289-28"><a href="hotspot-maps.html#cb289-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 0 Block of FAIRFIELD WY -122.4632 37.72679</span></span>
<span id="cb289-29"><a href="hotspot-maps.html#cb289-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    300 Block of 29TH AV -122.4893 37.78274</span></span>
<span id="cb289-30"><a href="hotspot-maps.html#cb289-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                         Location</span></span>
<span id="cb289-31"><a href="hotspot-maps.html#cb289-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  POINT (-122.45168059935614 37.72218061554315)</span></span>
<span id="cb289-32"><a href="hotspot-maps.html#cb289-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  POINT (-122.42876060987851 37.77620120112792)</span></span>
<span id="cb289-33"><a href="hotspot-maps.html#cb289-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   POINT (-122.45462091999406 37.7881754224736)</span></span>
<span id="cb289-34"><a href="hotspot-maps.html#cb289-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  POINT (-122.39642194376758 37.79414474237039)</span></span>
<span id="cb289-35"><a href="hotspot-maps.html#cb289-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  POINT (-122.46324153155875 37.72679184368551)</span></span>
<span id="cb289-36"><a href="hotspot-maps.html#cb289-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 POINT (-122.48929119750689 37.782735835121265)</span></span>
<span id="cb289-37"><a href="hotspot-maps.html#cb289-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           PdId year</span></span>
<span id="cb289-38"><a href="hotspot-maps.html#cb289-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1.803189e+13 2018</span></span>
<span id="cb289-39"><a href="hotspot-maps.html#cb289-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1.803155e+13 2018</span></span>
<span id="cb289-40"><a href="hotspot-maps.html#cb289-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1.802957e+13 2018</span></span>
<span id="cb289-41"><a href="hotspot-maps.html#cb289-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1.802637e+13 2018</span></span>
<span id="cb289-42"><a href="hotspot-maps.html#cb289-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 1.802355e+13 2018</span></span>
<span id="cb289-43"><a href="hotspot-maps.html#cb289-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 1.802365e+13 2018</span></span></code></pre></div>
<div id="a-simple-map" class="section level2" number="17.1">
<h2><span class="header-section-number">17.1</span> A simple map</h2>
<p>To make these maps we will use the package <code>ggmap</code>.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="hotspot-maps.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggmap&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="hotspot-maps.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggmap)</span>
<span id="cb291-2"><a href="hotspot-maps.html#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Loading required package: ggplot2</span></span>
<span id="cb291-3"><a href="hotspot-maps.html#cb291-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Google&#39;s Terms of Service: https://cloud.google.com/maps-platform/terms/.</span></span>
<span id="cb291-4"><a href="hotspot-maps.html#cb291-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Please cite ggmap if you use it! See citation(&quot;ggmap&quot;) for details.</span></span></code></pre></div>
<p>We’ll start by making the background to our map, showing San Francisco. We do so by using the <code>get_map()</code> function from <code>ggmap</code> which gets a map background from a number of sources. We’ll set the source to “stamen” since Google no longer allows us to get a map without creating an account. The first parameter in <code>get_map()</code> is simply coordinates for San Francisco’s bounding box to ensure we get a map of the right spot. A bounding box is four coordinates that connect to make a rectangle, used for determining where in the world to show.</p>
<p>An easy way to find the four coordinates for a bounding box is to go to the site <a href="https://boundingbox.klokantech.com/">Bounding Box</a>. This site has a map of the world and a box on the screen. Move the box to the area you want the map of. You may need to resize the box to cover the area you want. Then in the section that says “Copy &amp; Paste,” change the dropdown box to “CSV.” In the section to the right of this are the four numbers that make up the bounding box. You can copy those numbers into <code>get_map()</code></p>
<p><img src="images/bounding_box.PNG" /></p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="hotspot-maps.html#cb292-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="ot">&lt;-</span> <span class="fu">ggmap</span>(<span class="fu">get_map</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="fl">122.530392</span>,<span class="fl">37.698887</span>,<span class="sc">-</span><span class="fl">122.351177</span>,<span class="fl">37.812996</span>), </span>
<span id="cb292-2"><a href="hotspot-maps.html#cb292-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">source =</span> <span class="st">&quot;stamen&quot;</span>))</span>
<span id="cb292-3"><a href="hotspot-maps.html#cb292-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/653/1582.png</span></span>
<span id="cb292-4"><a href="hotspot-maps.html#cb292-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/654/1582.png</span></span>
<span id="cb292-5"><a href="hotspot-maps.html#cb292-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/655/1582.png</span></span>
<span id="cb292-6"><a href="hotspot-maps.html#cb292-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/653/1583.png</span></span>
<span id="cb292-7"><a href="hotspot-maps.html#cb292-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/654/1583.png</span></span>
<span id="cb292-8"><a href="hotspot-maps.html#cb292-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/655/1583.png</span></span>
<span id="cb292-9"><a href="hotspot-maps.html#cb292-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/653/1584.png</span></span>
<span id="cb292-10"><a href="hotspot-maps.html#cb292-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/654/1584.png</span></span>
<span id="cb292-11"><a href="hotspot-maps.html#cb292-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Source : http://tile.stamen.com/terrain/12/655/1584.png</span></span>
<span id="cb292-12"><a href="hotspot-maps.html#cb292-12" aria-hidden="true" tabindex="-1"></a>sf_map</span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-5-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Since we saved the map output into <em>sf_map</em> we can reuse this map background for all the maps we’re making in this lesson. This saves us time as we don’t have to wait to download the map every time. Let’s plot the shootings from our data set. Just as with a scatterplot we use the <code>geom_point()</code> function from the <code>ggplot2</code> package and set our longitude and latitude variables on the x- and y-axis, respectively.</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="hotspot-maps.html#cb293-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb293-2"><a href="hotspot-maps.html#cb293-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb293-3"><a href="hotspot-maps.html#cb293-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data  =</span> suicide)</span>
<span id="cb293-4"><a href="hotspot-maps.html#cb293-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing missing values</span></span>
<span id="cb293-5"><a href="hotspot-maps.html#cb293-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (geom_point).</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-6-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>If we wanted to color the dots, we can use <code>color =</code> and then select a color. Let’s try it with “forestgreen.”</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="hotspot-maps.html#cb294-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb294-2"><a href="hotspot-maps.html#cb294-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb294-3"><a href="hotspot-maps.html#cb294-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data  =</span> suicide,</span>
<span id="cb294-4"><a href="hotspot-maps.html#cb294-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;forestgreen&quot;</span>)</span>
<span id="cb294-5"><a href="hotspot-maps.html#cb294-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing missing values</span></span>
<span id="cb294-6"><a href="hotspot-maps.html#cb294-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (geom_point).</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-7-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>As with other graphs we can change the size of the dot using <code>size =</code>.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="hotspot-maps.html#cb295-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb295-2"><a href="hotspot-maps.html#cb295-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb295-3"><a href="hotspot-maps.html#cb295-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data  =</span> suicide,</span>
<span id="cb295-4"><a href="hotspot-maps.html#cb295-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;forestgreen&quot;</span>,</span>
<span id="cb295-5"><a href="hotspot-maps.html#cb295-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">size  =</span> <span class="fl">0.5</span>)</span>
<span id="cb295-6"><a href="hotspot-maps.html#cb295-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing missing values</span></span>
<span id="cb295-7"><a href="hotspot-maps.html#cb295-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (geom_point).</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-8-1.png" width="90%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="hotspot-maps.html#cb296-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb296-2"><a href="hotspot-maps.html#cb296-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb296-3"><a href="hotspot-maps.html#cb296-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data  =</span> suicide,</span>
<span id="cb296-4"><a href="hotspot-maps.html#cb296-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;forestgreen&quot;</span>,</span>
<span id="cb296-5"><a href="hotspot-maps.html#cb296-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">size  =</span> <span class="dv">2</span>)</span>
<span id="cb296-6"><a href="hotspot-maps.html#cb296-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing missing values</span></span>
<span id="cb296-7"><a href="hotspot-maps.html#cb296-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (geom_point).</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-9-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>For maps like this - with one point per event - it is hard to tell if any events happen on the same, or nearly the same, location as each point is solid green. We want to make the dots semi-transparent so if multiple suicides happen at the same place that dot will be shaded darker than if only one suicide happened there. To do so we use the parameter <code>alpha =</code> which takes an input between 0 and 1 (inclusive). The lower the value the more transparent it is.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="hotspot-maps.html#cb297-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb297-2"><a href="hotspot-maps.html#cb297-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb297-3"><a href="hotspot-maps.html#cb297-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data  =</span> suicide,</span>
<span id="cb297-4"><a href="hotspot-maps.html#cb297-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;forestgreen&quot;</span>,</span>
<span id="cb297-5"><a href="hotspot-maps.html#cb297-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">size  =</span> <span class="dv">2</span>,</span>
<span id="cb297-6"><a href="hotspot-maps.html#cb297-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.5</span>)</span>
<span id="cb297-7"><a href="hotspot-maps.html#cb297-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing missing values</span></span>
<span id="cb297-8"><a href="hotspot-maps.html#cb297-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (geom_point).</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-10-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>This map is useful because it allows us to easily see where each suicide in San Francisco happened between 2003 and 2017. There are some limitations though. This shows all suicides in a single map, meaning that any time trends are lost.</p>
</div>
<div id="what-really-are-maps" class="section level2" number="17.2">
<h2><span class="header-section-number">17.2</span> What really are maps?</h2>
<p>Let’s pause for a moment to think about what a map really is. Below, I made a simple scatterplot of our data with one dot per shooting (minus the one without coordinates). Compare this to the map above and you’ll see that they are the same except the map has a useful background while the plot has a blank background. That is all static maps are (in Chapter <a href="interactive-maps.html#interactive-maps">19</a> we’ll learn about interactive maps), scatterplots of coordinates overlayed on a map background. Basically, they are scatterplots with context. And this context is useful, we can interpret the map to see that there are lots of suicides in the northeast part of San Francisco but not so many elsewhere, for example. The exact same pattern is present in the scatterplot but without the ability to tell “where” a dot is.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="hotspot-maps.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(suicide<span class="sc">$</span>X, suicide<span class="sc">$</span>Y, <span class="at">col =</span> <span class="st">&quot;forestgreen&quot;</span>)</span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-11-1.png" width="90%" style="display: block; margin: auto;" /></p>
</div>
<div id="making-a-hotspot-map" class="section level2" number="17.3">
<h2><span class="header-section-number">17.3</span> Making a hotspot map</h2>
<p>Now we can start making hotspot maps which help to show areas with clusters of events. We’ll do this using hexagonal bins which are an efficient way of showing clusters of events on a map. Our syntax will be similar to the map above but now we want to use the function <code>stat_binhex()</code> rather than <code>geom_point()</code>. It starts the same as before with <code>aes(x = X, y = Y)</code> (or whatever the longitude and latitude columns are called in your data), as well as <code>data = suicide</code> outside of the <code>aes()</code> parameter.</p>
<p>There are two new things we need to make the hotspot map. First, we add the parameter <code>bins = number_of_bins</code> where “number_of_bins” is a number we select. <code>bins</code> essentially says how large or small we want each cluster of events to be. A smaller value for <code>bins</code> says we want more events clustered together, making larger bins. A larger value for bins has each bin be smaller on the map and capture fewer events. This will become clearer with examples.</p>
<p>The second thing is to add the function <code>coord_cartesian()</code> which just tells <code>ggplot()</code> we are going to do some spatial analysis in the making of the bins. We don’t need to add any parameters in this.</p>
<p>Let’s start with 60 bins and then try some other number of bins to see how it changes the map.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="hotspot-maps.html#cb299-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb299-2"><a href="hotspot-maps.html#cb299-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_binhex</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb299-3"><a href="hotspot-maps.html#cb299-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">bins =</span> <span class="dv">60</span>,</span>
<span id="cb299-4"><a href="hotspot-maps.html#cb299-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> suicide) <span class="sc">+</span></span>
<span id="cb299-5"><a href="hotspot-maps.html#cb299-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>() </span>
<span id="cb299-6"><a href="hotspot-maps.html#cb299-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></span>
<span id="cb299-7"><a href="hotspot-maps.html#cb299-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing non-finite values</span></span>
<span id="cb299-8"><a href="hotspot-maps.html#cb299-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (stat_binhex).</span></span>
<span id="cb299-9"><a href="hotspot-maps.html#cb299-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`:</span></span>
<span id="cb299-10"><a href="hotspot-maps.html#cb299-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The `hexbin` package is required for `stat_binhex()`</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-12-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>From this map we can see that most areas in the city had no suicides and that the areas with the most suicides are in downtown San Francisco.</p>
<p>What happens when we drop the number of bins to 30?</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="hotspot-maps.html#cb300-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb300-2"><a href="hotspot-maps.html#cb300-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_binhex</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb300-3"><a href="hotspot-maps.html#cb300-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">bins =</span> <span class="dv">30</span>,</span>
<span id="cb300-4"><a href="hotspot-maps.html#cb300-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> suicide) <span class="sc">+</span></span>
<span id="cb300-5"><a href="hotspot-maps.html#cb300-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>() </span>
<span id="cb300-6"><a href="hotspot-maps.html#cb300-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></span>
<span id="cb300-7"><a href="hotspot-maps.html#cb300-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing non-finite values</span></span>
<span id="cb300-8"><a href="hotspot-maps.html#cb300-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (stat_binhex).</span></span>
<span id="cb300-9"><a href="hotspot-maps.html#cb300-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`:</span></span>
<span id="cb300-10"><a href="hotspot-maps.html#cb300-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The `hexbin` package is required for `stat_binhex()`</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-13-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Each bin is much larger and covers nearly all of San Francisco. Be careful with maps like these! This map is so broad that it appears that suicides are ubiquitous across the city. We know from the map showing each suicide as a dot, and that there are &lt;1,300 suicides, that this is not true. Making maps like this make it easy to mislead the reader, including yourself!</p>
<p>What about looking at 100 bins?</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="hotspot-maps.html#cb301-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb301-2"><a href="hotspot-maps.html#cb301-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_binhex</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb301-3"><a href="hotspot-maps.html#cb301-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">bins =</span> <span class="dv">100</span>,</span>
<span id="cb301-4"><a href="hotspot-maps.html#cb301-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> suicide) <span class="sc">+</span></span>
<span id="cb301-5"><a href="hotspot-maps.html#cb301-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>() </span>
<span id="cb301-6"><a href="hotspot-maps.html#cb301-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></span>
<span id="cb301-7"><a href="hotspot-maps.html#cb301-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing non-finite values</span></span>
<span id="cb301-8"><a href="hotspot-maps.html#cb301-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (stat_binhex).</span></span>
<span id="cb301-9"><a href="hotspot-maps.html#cb301-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`:</span></span>
<span id="cb301-10"><a href="hotspot-maps.html#cb301-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The `hexbin` package is required for `stat_binhex()`</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-14-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Now each bin is very small and a much smaller area in San Francisco has had a suicide. So what is the right number of bins to use? There is no correct universal answer - you must decide what the goal is with the data you are using. This opens up serious issues for manipulation - intentional or not - of the data as the map is so easily changeable without ever changing the data itself.</p>
<div id="colors" class="section level3" number="17.3.1">
<h3><span class="header-section-number">17.3.1</span> Colors</h3>
<p>To change the bin colors we can use the parameter <code>scale_fill_gradient()</code>. This accepts a color for “low” which is when the events are rare and “high” for the bins with frequent events. We’ll use colors from <a href="http://colorbrewer2.org">ColorBrewer</a>, selecting the yellow-reddish theme (“3-class YlOrRd”) from the Multi-hue section of the “sequential” data on the page.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="hotspot-maps.html#cb302-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb302-2"><a href="hotspot-maps.html#cb302-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_binhex</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb302-3"><a href="hotspot-maps.html#cb302-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">bins  =</span> <span class="dv">60</span>,</span>
<span id="cb302-4"><a href="hotspot-maps.html#cb302-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> suicide) <span class="sc">+</span></span>
<span id="cb302-5"><a href="hotspot-maps.html#cb302-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>() <span class="sc">+</span></span>
<span id="cb302-6"><a href="hotspot-maps.html#cb302-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;#ffeda0&quot;</span>,</span>
<span id="cb302-7"><a href="hotspot-maps.html#cb302-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">high =</span> <span class="st">&quot;#f03b20&quot;</span>)</span>
<span id="cb302-8"><a href="hotspot-maps.html#cb302-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></span>
<span id="cb302-9"><a href="hotspot-maps.html#cb302-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing non-finite values</span></span>
<span id="cb302-10"><a href="hotspot-maps.html#cb302-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (stat_binhex).</span></span>
<span id="cb302-11"><a href="hotspot-maps.html#cb302-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`:</span></span>
<span id="cb302-12"><a href="hotspot-maps.html#cb302-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The `hexbin` package is required for `stat_binhex()`</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-15-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p>By default it labels the legend as “count.” Since we know these are counts of suicides let’s relabel that as such.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="hotspot-maps.html#cb303-1" aria-hidden="true" tabindex="-1"></a>sf_map <span class="sc">+</span></span>
<span id="cb303-2"><a href="hotspot-maps.html#cb303-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_binhex</span>(<span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> Y),</span>
<span id="cb303-3"><a href="hotspot-maps.html#cb303-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">bins  =</span> <span class="dv">60</span>,</span>
<span id="cb303-4"><a href="hotspot-maps.html#cb303-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> suicide) <span class="sc">+</span></span>
<span id="cb303-5"><a href="hotspot-maps.html#cb303-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>() <span class="sc">+</span></span>
<span id="cb303-6"><a href="hotspot-maps.html#cb303-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="st">&#39;Suicides&#39;</span>,</span>
<span id="cb303-7"><a href="hotspot-maps.html#cb303-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">low =</span> <span class="st">&quot;#ffeda0&quot;</span>,</span>
<span id="cb303-8"><a href="hotspot-maps.html#cb303-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">high =</span> <span class="st">&quot;#f03b20&quot;</span>)</span>
<span id="cb303-9"><a href="hotspot-maps.html#cb303-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></span>
<span id="cb303-10"><a href="hotspot-maps.html#cb303-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing non-finite values</span></span>
<span id="cb303-11"><a href="hotspot-maps.html#cb303-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; (stat_binhex).</span></span>
<span id="cb303-12"><a href="hotspot-maps.html#cb303-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`:</span></span>
<span id="cb303-13"><a href="hotspot-maps.html#cb303-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The `hexbin` package is required for `stat_binhex()`</span></span></code></pre></div>
<p><img src="hotspot-maps_files/figure-html/unnamed-chunk-16-1.png" width="90%" style="display: block; margin: auto;" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ois_graphs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="choropleth-maps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": true,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacobkap/crimebythenumbers/edit/master/hotspot-maps.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="17 More scraping tables from PDFs | Crime by the Numbers" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://crimebythenumbers.com" />
<meta property="og:image" content="https://crimebythenumbers.comimages/cover.png" />
<meta property="og:description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
<meta name="github-repo" content="jacobkap/crimebythenumbers" />

<meta name="author" content="Jacob Kaplan" />

<meta name="date" content="2020-07-20" />


<meta name="description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets.">

<title>17 More scraping tables from PDFs | Crime by the Numbers</title>

<script src="libs/header-attrs-2.3.2/header-attrs.js"></script>
<script src="libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#welcome">Welcome</a>
<ul>
<li><a href="why-learn-to-program.html#why-learn-to-program">Why learn to program?</a>
<ul>
<li><a href="why-learn-to-program.html#scale">Scale</a></li>
<li><a href="why-learn-to-program.html#reproducibility">Reproducibility</a></li>
</ul></li>
<li><a href="what-you-will-learn.html#what-you-will-learn">What you will learn</a>
<ul>
<li><a href="what-you-will-learn.html#skills">Skills</a></li>
<li><a href="what-you-will-learn.html#data">Data</a></li>
</ul></li>
<li><a href="what-you-wont-learn.html#what-you-wont-learn">What you won’t learn</a></li>
<li><a href="simple-vs-easy.html#simple-vs-easy">Simple vs Easy</a></li>
<li><a href="how-to-contribute.html#how-to-contribute">How to Contribute</a></li>
</ul></li>
<li><a href="about-the-author.html#about-the-author">About the author</a></li>
<li><a href="1-introduction-to-r-and-rstudio.html#introduction-to-r-and-rstudio"><span class="toc-section-number">1</span> Introduction to R and RStudio</a>
<ul>
<li><a href="1-1-using-rstudio.html#using-rstudio"><span class="toc-section-number">1.1</span> Using RStudio</a>
<ul>
<li><a href="1-1-using-rstudio.html#opening-an-r-script"><span class="toc-section-number">1.1.1</span> Opening an R Script</a></li>
<li><a href="1-1-using-rstudio.html#setting-the-working-directory"><span class="toc-section-number">1.1.2</span> Setting the working directory</a></li>
<li><a href="1-1-using-rstudio.html#changing-rstudio"><span class="toc-section-number">1.1.3</span> Changing RStudio</a></li>
<li><a href="1-1-using-rstudio.html#helpful-cheatsheets"><span class="toc-section-number">1.1.4</span> Helpful cheatsheets</a></li>
</ul></li>
<li><a href="1-2-reading-data-into-r.html#reading-data-into-r"><span class="toc-section-number">1.2</span> Reading data into R</a>
<ul>
<li><a href="1-2-reading-data-into-r.html#loading-data"><span class="toc-section-number">1.2.1</span> Loading data</a></li>
</ul></li>
<li><a href="1-3-first-steps-to-exploring-data.html#first-steps-to-exploring-data"><span class="toc-section-number">1.3</span> First steps to exploring data</a></li>
<li><a href="1-4-finding-help-about-functions.html#finding-help-about-functions"><span class="toc-section-number">1.4</span> Finding help about functions</a></li>
</ul></li>
<li class="part"><span><b>I Clean</b></span></li>
<li><a href="2-subsetting-intro.html#subsetting-intro"><span class="toc-section-number">2</span> Subsetting: Making big things small</a>
<ul>
<li><a href="2-1-select-specific-values.html#select-specific-values"><span class="toc-section-number">2.1</span> Select specific values</a></li>
<li><a href="2-2-assignment.html#assignment"><span class="toc-section-number">2.2</span> Assigning values to objects (Making “things”)</a></li>
<li><a href="2-3-vectors.html#vectors"><span class="toc-section-number">2.3</span> Vectors (collections of “things”)</a></li>
<li><a href="2-4-logical-values-and-operations.html#logical-values-and-operations"><span class="toc-section-number">2.4</span> Logical values and operations</a>
<ul>
<li><a href="2-4-logical-values-and-operations.html#matching-a-single-value"><span class="toc-section-number">2.4.1</span> Matching a single value</a></li>
<li><a href="2-4-logical-values-and-operations.html#matching-multiple-values"><span class="toc-section-number">2.4.2</span> Matching multiple values</a></li>
<li><a href="2-4-logical-values-and-operations.html#does-not-match"><span class="toc-section-number">2.4.3</span> Does not match</a></li>
<li><a href="2-4-logical-values-and-operations.html#greater-than-or-less-than"><span class="toc-section-number">2.4.4</span> Greater than or less than</a></li>
<li><a href="2-4-logical-values-and-operations.html#combining-conditional-statements---or-and"><span class="toc-section-number">2.4.5</span> Combining conditional statements - or, and</a></li>
</ul></li>
<li><a href="2-5-subsetting-a-data-frame.html#subsetting-a-data.frame"><span class="toc-section-number">2.5</span> Subsetting a data.frame</a>
<ul>
<li><a href="2-5-subsetting-a-data-frame.html#select-specific-columns"><span class="toc-section-number">2.5.1</span> Select specific columns</a></li>
<li><a href="2-5-subsetting-a-data-frame.html#select-specific-rows"><span class="toc-section-number">2.5.2</span> Select specific rows</a></li>
<li><a href="2-5-subsetting-a-data-frame.html#subset-colorado-data"><span class="toc-section-number">2.5.3</span> Subset Colorado data</a></li>
</ul></li>
</ul></li>
<li><a href="3-explore.html#explore"><span class="toc-section-number">3</span> Exploratory data analysis</a>
<ul>
<li><a href="3-1-summary-and-table.html#summary-and-table"><span class="toc-section-number">3.1</span> Summary and Table</a></li>
<li><a href="3-2-graphing.html#graphing"><span class="toc-section-number">3.2</span> Graphing</a></li>
<li><a href="3-3-aggregate.html#aggregate"><span class="toc-section-number">3.3</span> Aggregating (summaries of groups)</a></li>
</ul></li>
<li><a href="4-regular-expressions.html#regular-expressions"><span class="toc-section-number">4</span> Regular Expressions</a>
<ul>
<li><a href="4-1-finding-patterns-in-text-with-grep.html#finding-patterns-in-text-with-grep"><span class="toc-section-number">4.1</span> Finding patterns in text with <code>grep()</code></a></li>
<li><a href="4-2-finding-and-replacing-patterns-in-text-with-gsub.html#finding-and-replacing-patterns-in-text-with-gsub"><span class="toc-section-number">4.2</span> Finding and replacing patterns in text with <code>gsub()</code></a></li>
<li><a href="4-3-useful-special-characters.html#useful-special-characters"><span class="toc-section-number">4.3</span> Useful special characters</a>
<ul>
<li><a href="4-3-useful-special-characters.html#multiple-characters"><span class="toc-section-number">4.3.1</span> Multiple characters <code>[]</code></a></li>
<li><a href="4-3-useful-special-characters.html#n-many-of-previous-character-n"><span class="toc-section-number">4.3.2</span> n-many of previous character <code>{n}</code></a></li>
<li><a href="4-3-useful-special-characters.html#n-many-to-m-many-of-previous-character-nm"><span class="toc-section-number">4.3.3</span> n-many to m-many of previous character <code>{n,m}</code></a></li>
<li><a href="4-3-useful-special-characters.html#start-of-string"><span class="toc-section-number">4.3.4</span> Start of string</a></li>
<li><a href="4-3-useful-special-characters.html#end-of-string"><span class="toc-section-number">4.3.5</span> End of string <code>$</code></a></li>
<li><a href="4-3-useful-special-characters.html#anything-."><span class="toc-section-number">4.3.6</span> Anything <code>.</code></a></li>
<li><a href="4-3-useful-special-characters.html#one-or-more-of-previous"><span class="toc-section-number">4.3.7</span> One or more of previous <code>+</code></a></li>
<li><a href="4-3-useful-special-characters.html#zero-or-more-of-previous"><span class="toc-section-number">4.3.8</span> Zero or more of previous <code>*</code></a></li>
<li><a href="4-3-useful-special-characters.html#multiple-patterns"><span class="toc-section-number">4.3.9</span> Multiple patterns <code>|</code></a></li>
<li><a href="4-3-useful-special-characters.html#parentheses"><span class="toc-section-number">4.3.10</span> Parentheses <code>()</code></a></li>
<li><a href="4-3-useful-special-characters.html#optional-text"><span class="toc-section-number">4.3.11</span> Optional text <code>?</code></a></li>
</ul></li>
<li><a href="4-4-changing-capitalization.html#changing-capitalization"><span class="toc-section-number">4.4</span> Changing capitalization</a></li>
</ul></li>
<li><a href="5-reading-and-writing-data.html#reading-and-writing-data"><span class="toc-section-number">5</span> Reading and Writing Data</a>
<ul>
<li><a href="1-2-reading-data-into-r.html#reading-data-into-r"><span class="toc-section-number">5.1</span> Reading Data into R</a>
<ul>
<li><a href="5-1-reading-data-into-r.html#r"><span class="toc-section-number">5.1.1</span> R</a></li>
<li><a href="5-1-reading-data-into-r.html#excel"><span class="toc-section-number">5.1.2</span> Excel</a></li>
<li><a href="5-1-reading-data-into-r.html#stata"><span class="toc-section-number">5.1.3</span> Stata</a></li>
<li><a href="5-1-reading-data-into-r.html#sas"><span class="toc-section-number">5.1.4</span> SAS</a></li>
<li><a href="5-1-reading-data-into-r.html#spss"><span class="toc-section-number">5.1.5</span> SPSS</a></li>
</ul></li>
<li><a href="5-2-writing-data.html#writing-data"><span class="toc-section-number">5.2</span> Writing Data</a>
<ul>
<li><a href="5-2-writing-data.html#r-1"><span class="toc-section-number">5.2.1</span> R</a></li>
<li><a href="5-2-writing-data.html#excel-1"><span class="toc-section-number">5.2.2</span> Excel</a></li>
<li><a href="5-2-writing-data.html#stata-1"><span class="toc-section-number">5.2.3</span> Stata</a></li>
<li><a href="5-2-writing-data.html#sas-1"><span class="toc-section-number">5.2.4</span> SAS</a></li>
<li><a href="5-2-writing-data.html#spss-1"><span class="toc-section-number">5.2.5</span> SPSS</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Visualize</b></span></li>
<li><a href="6-graphing-intro.html#graphing-intro"><span class="toc-section-number">6</span> Graphing with <code>ggplot2</code></a>
<ul>
<li><a href="6-1-what-does-the-data-look-like.html#what-does-the-data-look-like"><span class="toc-section-number">6.1</span> What does the data look like?</a></li>
<li><a href="6-2-graphing-data.html#graphing-data"><span class="toc-section-number">6.2</span> Graphing data</a></li>
<li><a href="6-3-time-series-plots.html#time-series-plots"><span class="toc-section-number">6.3</span> Time-Series Plots</a></li>
<li><a href="6-4-scatter-plots.html#scatter-plots"><span class="toc-section-number">6.4</span> Scatter Plots</a></li>
<li><a href="6-5-color-blindness.html#color-blindness"><span class="toc-section-number">6.5</span> Color blindness</a></li>
</ul></li>
<li><a href="7-ois-graphs.html#ois_graphs"><span class="toc-section-number">7</span> More graphing with <code>ggplot2</code></a>
<ul>
<li><a href="7-1-exploring-data.html#exploring-data"><span class="toc-section-number">7.1</span> Exploring Data</a></li>
<li><a href="7-2-graphing-a-single-numeric-variable.html#graphing-a-single-numeric-variable"><span class="toc-section-number">7.2</span> Graphing a Single Numeric Variable</a>
<ul>
<li><a href="7-2-graphing-a-single-numeric-variable.html#histogram"><span class="toc-section-number">7.2.1</span> Histogram</a></li>
<li><a href="7-2-graphing-a-single-numeric-variable.html#density-plot"><span class="toc-section-number">7.2.2</span> Density plot</a></li>
<li><a href="7-2-graphing-a-single-numeric-variable.html#count-graph"><span class="toc-section-number">7.2.3</span> Count Graph</a></li>
</ul></li>
<li><a href="7-3-bar-graph.html#bar-graph"><span class="toc-section-number">7.3</span> Bar graph</a></li>
<li><a href="7-4-graphing-data-over-time.html#graphing-data-over-time"><span class="toc-section-number">7.4</span> Graphing Data Over Time</a></li>
<li><a href="7-5-pretty-graphs.html#pretty-graphs"><span class="toc-section-number">7.5</span> Pretty Graphs</a>
<ul>
<li><a href="7-5-pretty-graphs.html#themes"><span class="toc-section-number">7.5.1</span> Themes</a></li>
</ul></li>
</ul></li>
<li><a href="8-hotspot-maps.html#hotspot-maps"><span class="toc-section-number">8</span> Hotspot maps</a>
<ul>
<li><a href="8-1-a-simple-map.html#a-simple-map"><span class="toc-section-number">8.1</span> A simple map</a></li>
<li><a href="8-2-what-really-are-maps.html#what-really-are-maps"><span class="toc-section-number">8.2</span> What really are maps?</a></li>
<li><a href="8-3-making-a-hotspot-map.html#making-a-hotspot-map"><span class="toc-section-number">8.3</span> Making a hotspot map</a>
<ul>
<li><a href="8-3-making-a-hotspot-map.html#colors"><span class="toc-section-number">8.3.1</span> Colors</a></li>
</ul></li>
</ul></li>
<li><a href="9-choropleth-maps.html#choropleth-maps"><span class="toc-section-number">9</span> Choropleth maps</a>
<ul>
<li><a href="9-1-spatial-joins.html#spatial-joins"><span class="toc-section-number">9.1</span> Spatial joins</a></li>
<li><a href="9-2-making-choropleth-maps.html#making-choropleth-maps"><span class="toc-section-number">9.2</span> Making choropleth maps</a></li>
</ul></li>
<li><a href="10-interactive-maps.html#interactive-maps"><span class="toc-section-number">10</span> Interactive maps</a>
<ul>
<li><a href="10-1-why-do-interactive-graphs-matter.html#why-do-interactive-graphs-matter"><span class="toc-section-number">10.1</span> Why do interactive graphs matter?</a>
<ul>
<li><a href="10-1-why-do-interactive-graphs-matter.html#understanding-your-data"><span class="toc-section-number">10.1.1</span> Understanding your data</a></li>
<li><a href="10-1-why-do-interactive-graphs-matter.html#police-departments-use-them"><span class="toc-section-number">10.1.2</span> Police departments use them</a></li>
</ul></li>
<li><a href="10-2-making-the-interactive-map.html#making-the-interactive-map"><span class="toc-section-number">10.2</span> Making the interactive map</a></li>
<li><a href="10-3-adding-popup-information.html#adding-popup-information"><span class="toc-section-number">10.3</span> Adding popup information</a></li>
<li><a href="10-4-dealing-with-too-many-markers.html#dealing-with-too-many-markers"><span class="toc-section-number">10.4</span> Dealing with too many markers</a></li>
<li><a href="10-5-interactive-choropleth-maps.html#interactive-choropleth-maps"><span class="toc-section-number">10.5</span> Interactive choropleth maps</a></li>
</ul></li>
<li><a href="11-r-markdown.html#r-markdown"><span class="toc-section-number">11</span> R Markdown</a>
<ul>
<li><a href="1-1-using-rstudio.html#code"><span class="toc-section-number">11.1</span> Code</a>
<ul>
<li><a href="11-1-code.html#hiding-code-in-the-output"><span class="toc-section-number">11.1.1</span> Hiding code in the output</a></li>
</ul></li>
<li><a href="11-2-inline-code.html#inline-code"><span class="toc-section-number">11.2</span> Inline Code</a></li>
<li><a href="11-3-tables.html#tables"><span class="toc-section-number">11.3</span> Tables</a></li>
<li><a href="11-4-footnotes.html#footnotes"><span class="toc-section-number">11.4</span> Footnotes</a></li>
<li><a href="11-5-citation.html#citation"><span class="toc-section-number">11.5</span> Citation</a></li>
<li><a href="11-6-spell-check.html#spell-check"><span class="toc-section-number">11.6</span> Spell check</a></li>
<li><a href="11-7-making-the-output-file.html#making-the-output-file"><span class="toc-section-number">11.7</span> Making the output file</a></li>
</ul></li>
<li><a href="12-git.html#git"><span class="toc-section-number">12</span> Git</a>
<ul>
<li><a href="12-1-what-is-git-and-why-do-i-need-it.html#what-is-git-and-why-do-i-need-it"><span class="toc-section-number">12.1</span> What is Git and why do I need it?</a></li>
<li><a href="12-2-git-basics.html#git-basics"><span class="toc-section-number">12.2</span> Git basics</a></li>
<li><a href="12-3-when-to-commit.html#when-to-commit"><span class="toc-section-number">12.3</span> When to commit</a></li>
<li><a href="12-4-code-review.html#code-review"><span class="toc-section-number">12.4</span> Code review</a></li>
</ul></li>
<li class="part"><span><b>III Collect</b></span></li>
<li><a href="13-webscraping-with-rvest.html#webscraping-with-rvest"><span class="toc-section-number">13</span> Webscraping with <code>rvest</code></a>
<ul>
<li><a href="13-1-scraping-one-page.html#scraping-one-page"><span class="toc-section-number">13.1</span> Scraping one page</a></li>
<li><a href="13-2-cleaning-the-webscraped-data.html#cleaning-the-webscraped-data"><span class="toc-section-number">13.2</span> Cleaning the webscraped data</a></li>
</ul></li>
<li><a href="14-functions.html#functions"><span class="toc-section-number">14</span> Functions</a>
<ul>
<li><a href="14-1-a-simple-function.html#a-simple-function"><span class="toc-section-number">14.1</span> A simple function</a></li>
<li><a href="14-2-adding-parameters.html#adding-parameters"><span class="toc-section-number">14.2</span> Adding parameters</a></li>
<li><a href="14-3-recipes-function.html#recipes-function"><span class="toc-section-number">14.3</span> Making a function to scrape recipes</a></li>
</ul></li>
<li><a href="15-for-loops.html#for-loops"><span class="toc-section-number">15</span> For loops</a>
<ul>
<li><a href="15-1-basic-for-loops.html#basic-for-loops"><span class="toc-section-number">15.1</span> Basic for loops</a></li>
<li><a href="15-2-scraping-multiple-recipes.html#scraping-multiple-recipes"><span class="toc-section-number">15.2</span> Scraping multiple recipes</a></li>
</ul></li>
<li><a href="16-scrape-table.html#scrape-table"><span class="toc-section-number">16</span> Scraping tables from PDFs</a>
<ul>
<li><a href="16-1-scraping-the-first-table.html#scraping-the-first-table"><span class="toc-section-number">16.1</span> Scraping the first table</a></li>
<li><a href="16-2-making-a-function.html#making-a-function"><span class="toc-section-number">16.2</span> Making a function</a></li>
</ul></li>
<li><a href="17-scrape-table2.html#scrape-table2"><span class="toc-section-number">17</span> More scraping tables from PDFs</a>
<ul>
<li><a href="17-1-pregnant-women-incarcerated.html#pregnant-women-incarcerated"><span class="toc-section-number">17.1</span> Pregnant Women Incarcerated</a></li>
<li><a href="17-2-making-pdf-scraped-data-available-to-others.html#making-pdf-scraped-data-available-to-others"><span class="toc-section-number">17.2</span> Making PDF-scraped data available to others</a></li>
</ul></li>
<li><a href="18-geocoding.html#geocoding"><span class="toc-section-number">18</span> Geocoding</a>
<ul>
<li><a href="18-1-geocoding-a-single-address.html#geocoding-a-single-address"><span class="toc-section-number">18.1</span> Geocoding a single address</a></li>
<li><a href="16-2-making-a-function.html#making-a-function"><span class="toc-section-number">18.2</span> Making a function</a></li>
<li><a href="18-3-geocoding-san-francisco-marijuana-dispensary-locations.html#geocoding-san-francisco-marijuana-dispensary-locations"><span class="toc-section-number">18.3</span> Geocoding San Francisco marijuana dispensary locations</a></li>
</ul></li>
<li class="part"><span><b>IV Data</b></span></li>
<li><a href="19-introduction.html#introduction"><span class="toc-section-number">19</span> Introduction</a></li>
<li><a href="20-ucr.html#ucr"><span class="toc-section-number">20</span> Uniform Crime Report (UCR) - Offenses Known and Clearances by Arrest</a>
<ul>
<li><a href="20-1-exploring-the-ucr-data.html#exploring-the-ucr-data"><span class="toc-section-number">20.1</span> Exploring the UCR data</a></li>
<li><a href="20-2-oris-unique-agency-identifiers.html#oris---unique-agency-identifiers"><span class="toc-section-number">20.2</span> ORIs - Unique agency identifiers</a></li>
<li><a href="20-3-hierarchy-rule.html#hierarchy-rule"><span class="toc-section-number">20.3</span> Hierarchy Rule</a></li>
<li><a href="20-4-which-crimes-are-included.html#which-crimes-are-included"><span class="toc-section-number">20.4</span> Which crimes are included</a>
<ul>
<li><a href="20-4-which-crimes-are-included.html#index-crimes"><span class="toc-section-number">20.4.1</span> Index Crimes</a></li>
<li><a href="20-4-which-crimes-are-included.html#the-problem-with-using-index-crimes"><span class="toc-section-number">20.4.2</span> The problem with using index crimes</a></li>
<li><a href="20-4-which-crimes-are-included.html#rape-definition-change"><span class="toc-section-number">20.4.3</span> Rape definition change</a></li>
</ul></li>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#actual-offenses-clearances-and-unfounded-offenses"><span class="toc-section-number">20.5</span> Actual offenses, clearances, and unfounded offenses</a>
<ul>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#actual"><span class="toc-section-number">20.5.1</span> Actual</a></li>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#total-cleared"><span class="toc-section-number">20.5.2</span> Total Cleared</a></li>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#cleared-where-all-offenders-are-under-18"><span class="toc-section-number">20.5.3</span> Cleared Where All Offenders Are Under 18</a></li>
<li><a href="20-5-actual-offenses-clearances-and-unfounded-offenses.html#unfounded"><span class="toc-section-number">20.5.4</span> Unfounded</a></li>
</ul></li>
<li><a href="20-6-number-of-months-reported.html#number-of-months-reported"><span class="toc-section-number">20.6</span> Number of months reported</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li><a href="A-useful-resources.html#useful-resources"><span class="toc-section-number">A</span> Useful resources</a>
<ul>
<li><a href="A-1-learning-r-and-coding-issues.html#learning-r-and-coding-issues"><span class="toc-section-number">A.1</span> Learning R and coding issues</a></li>
<li><a href="what-you-will-learn.html#data"><span class="toc-section-number">A.2</span> Data</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="scrape-table2" class="section level1" number="17">
<h1><span class="header-section-number">17</span> More scraping tables from PDFs</h1>
<p>In Chapter <a href="16-scrape-table.html#scrape-table">16</a> we used the package <code>pdftools</code> to scrape tables on arrests/seizures from the United States Border Patrol that were only available in a PDF. Given the importance of PDF scraping - hopefully by the time you read this chapter more data will be available in reasonable formats and not in PDFs - in this chapter we’ll continue working on scraping tables from PDFs. Here we will use the package <code>tabulizer</code> which has a number of features making it especially useful for grabbing tables from PDFs. One issue which we saw in Chapter <a href="16-scrape-table.html#scrape-table">16</a> is that the table may not be the only thing on the page - the page could also have a title, page number etc. When using <code>pdftools</code> we use regular expressions and subsetting to remove all the extra lines. Using <code>tabulizer</code> we can simply say (through a handy function) that we only want a part of the page, so we only scrape the table itself. For more info about the <code>tabulizer</code> package please see their site <a href="https://docs.ropensci.org/tabulizer/">here</a>.</p>
<p>For this chapter we’ll scrape data from the Texas Commission on Jail Standards - Abbreviated Population Report. This is a report that shows monthly data on people incarcerated in jails for counties in Texas and is available <a href="https://github.com/jacobkap/crimebythenumbers/blob/master/data/AbbreRptCurrent.pdf">here</a>. Make sure to download this file and put it in the working directory that you use to follow along.</p>
<p>This PDF is 9 pages long because of how many counties there are in Texas. Lets take a look at what the first page looks like. If you look at the PDF yourself you’ll see that every page follows the format of the 1st page, which greatly simplifies our scrape. The data is in county-month units which means that each row of data has info for a single county in a single month. We know that because the first column is “County” and each row is a single county (this is not true is every case. For example, on page 3 there are the rows ‘Fannin 1(P)’ and ‘Fannin 2(P)’, possibly indicating that there are two jails in that county. It is unclear from this PDF what the ‘(P)’ means.). For knowing that the data is monthly, the title of this document says ‘for 06/01/2020’ indicating that it is for that date, though this doesn’t by itself mean the data is monthly - it could be daily based only on this data.</p>
<p>To know that it’s monthly data we’d have to go to the original source on the Texas Commission on Jail Standards website <a href="https://www.tcjs.state.tx.us/historical-population-reports/#1580454195676-420daca6-0a306">here</a>. On this page it says that ’Monthly population reports are available for review below," which tells us that the data is monthly. It’s important to know the unit so you can understand the data properly - primarily so you know what kinds of questions you can answer. If someone asks whether yearly trends on jail incarceration change in Texas, you can answer that with this data. If they ask whether more people are in jail on a Tuesday than on a Friday, you can’t.</p>
<p>Just to understand what units our data is in we had to look at both the PDF itself and the site it came from. This kind of multi-step process is tedious but often necessary to truly understand your data. And even now we have questions - what does the (P) that’s in some rows mean? For this we’d have to email or call the people who handle the data and ask directly. This is often the easiest way to answer your question, though different organizations have varying speeds in responding - if ever.</p>
<p>Now lets look at what columns are available. It looks like each column is the number of people incarcerated in the jail, broken down into categories of people. For example, the first two columns after County are ‘Pretrial Felons’ and ‘Conv. Felons’ so those are probably how many people are incarcerated who are awaiting trial for a felony and those already convicted of a felony. The other columns seem to follow this same format until the last few ones which describe the jails capacity (i.e. how many people they can hold), what percent of capacity they are at, and specifically how many open beds they have.</p>
<p><img src="images/tabulizer1.PNG" /></p>
<p>Now that we’ve familiarized ourselves with the data, lets begin scraping this data using <code>tabulizer</code>. If you don’t have this package installed you’ll need to install it using <code>install.packages("tabulizer")</code>. Then we’ll need to run <code>library(tabulizer)</code>.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="17-scrape-table2.html#cb341-1"></a><span class="kw">library</span>(tabulizer)</span></code></pre></div>
<p>The main function that we’ll be using from the <code>tabulizer</code> package is <code>extract_tables()</code>. This function basically looks at a PDF page, figures out which part of the page is a table, and then scrapes just that table. As we’ll see, it’s not always perfect at figuring out what part of the page is a table so we can also tell it exactly where to look. You can look at all of the features of <code>extract_tables()</code> by running <code>help(extract_tables)</code>.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="17-scrape-table2.html#cb342-1"></a>data &lt;-<span class="st"> </span><span class="kw">extract_tables</span>(<span class="dt">file =</span> <span class="st">&quot;data/AbbreRptCurrent.pdf&quot;</span>)</span>
<span id="cb342-2"><a href="17-scrape-table2.html#cb342-2"></a><span class="kw">is</span>(data)</span>
<span id="cb342-3"><a href="17-scrape-table2.html#cb342-3"></a><span class="co">#&gt; [1] &quot;list&quot;   &quot;vector&quot;</span></span>
<span id="cb342-4"><a href="17-scrape-table2.html#cb342-4"></a><span class="kw">length</span>(data)</span>
<span id="cb342-5"><a href="17-scrape-table2.html#cb342-5"></a><span class="co">#&gt; [1] 18</span></span>
<span id="cb342-6"><a href="17-scrape-table2.html#cb342-6"></a>data[[<span class="dv">1</span>]]</span>
<span id="cb342-7"><a href="17-scrape-table2.html#cb342-7"></a><span class="co">#&gt;      [,1]     [,2]       [,3]     [,4]           [,5]        [,6]        </span></span>
<span id="cb342-8"><a href="17-scrape-table2.html#cb342-8"></a><span class="co">#&gt; [1,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;Conv. Felons&quot; &quot;&quot;          &quot;Parole&quot;    </span></span>
<span id="cb342-9"><a href="17-scrape-table2.html#cb342-9"></a><span class="co">#&gt; [2,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;Sentenced to&quot; &quot;&quot;          &quot;Violators&quot; </span></span>
<span id="cb342-10"><a href="17-scrape-table2.html#cb342-10"></a><span class="co">#&gt; [3,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;County Jail&quot;  &quot;&quot;          &quot;with a New&quot;</span></span>
<span id="cb342-11"><a href="17-scrape-table2.html#cb342-11"></a><span class="co">#&gt; [4,] &quot;&quot;       &quot;Pretrial&quot; &quot;Conv.&quot;  &quot;&quot;             &quot;Parole&quot;    &quot;&quot;          </span></span>
<span id="cb342-12"><a href="17-scrape-table2.html#cb342-12"></a><span class="co">#&gt; [5,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;time&quot;         &quot;&quot;          &quot;Charge&quot;    </span></span>
<span id="cb342-13"><a href="17-scrape-table2.html#cb342-13"></a><span class="co">#&gt; [6,] &quot;County&quot; &quot;Felons&quot;   &quot;Felons&quot; &quot;&quot;             &quot;Violators&quot; &quot;&quot;          </span></span>
<span id="cb342-14"><a href="17-scrape-table2.html#cb342-14"></a><span class="co">#&gt;      [,7]       [,8]    [,9]       [,10]     [,11]      [,12]        </span></span>
<span id="cb342-15"><a href="17-scrape-table2.html#cb342-15"></a><span class="co">#&gt; [1,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Conv. SJF&quot;  </span></span>
<span id="cb342-16"><a href="17-scrape-table2.html#cb342-16"></a><span class="co">#&gt; [2,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Sentenced&quot;  </span></span>
<span id="cb342-17"><a href="17-scrape-table2.html#cb342-17"></a><span class="co">#&gt; [3,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;to Co. Jail&quot;</span></span>
<span id="cb342-18"><a href="17-scrape-table2.html#cb342-18"></a><span class="co">#&gt; [4,] &quot;Pretrial&quot; &quot;Conv.&quot; &quot;Bench&quot;    &quot;&quot;        &quot;Pretrial&quot; &quot;&quot;           </span></span>
<span id="cb342-19"><a href="17-scrape-table2.html#cb342-19"></a><span class="co">#&gt; [5,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Time&quot;       </span></span>
<span id="cb342-20"><a href="17-scrape-table2.html#cb342-20"></a><span class="co">#&gt; [6,] &quot;Misd.&quot;    &quot;Misd.&quot; &quot;Warrants&quot; &quot;Federal&quot; &quot;SJF&quot;      &quot;&quot;           </span></span>
<span id="cb342-21"><a href="17-scrape-table2.html#cb342-21"></a><span class="co">#&gt;      [,13]           [,14]    [,15]   [,16]      [,17]        [,18]     </span></span>
<span id="cb342-22"><a href="17-scrape-table2.html#cb342-22"></a><span class="co">#&gt; [1,] &quot;Conv.&quot;         &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb342-23"><a href="17-scrape-table2.html#cb342-23"></a><span class="co">#&gt; [2,] &quot;SJF&quot;           &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb342-24"><a href="17-scrape-table2.html#cb342-24"></a><span class="co">#&gt; [3,] &quot;Sentenced&quot;     &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb342-25"><a href="17-scrape-table2.html#cb342-25"></a><span class="co">#&gt; [4,] &quot;&quot;              &quot;Total&quot;  &quot;Total&quot; &quot;Total&quot;    &quot;Total&quot;      &quot;Total&quot;   </span></span>
<span id="cb342-26"><a href="17-scrape-table2.html#cb342-26"></a><span class="co">#&gt; [5,] &quot;to State Jail&quot; &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb342-27"><a href="17-scrape-table2.html#cb342-27"></a><span class="co">#&gt; [6,] &quot;&quot;              &quot;Others&quot; &quot;Local&quot; &quot;Contract&quot; &quot;Population&quot; &quot;Capacity&quot;</span></span>
<span id="cb342-28"><a href="17-scrape-table2.html#cb342-28"></a><span class="co">#&gt;      [,19]      [,20]      </span></span>
<span id="cb342-29"><a href="17-scrape-table2.html#cb342-29"></a><span class="co">#&gt; [1,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb342-30"><a href="17-scrape-table2.html#cb342-30"></a><span class="co">#&gt; [2,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb342-31"><a href="17-scrape-table2.html#cb342-31"></a><span class="co">#&gt; [3,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb342-32"><a href="17-scrape-table2.html#cb342-32"></a><span class="co">#&gt; [4,] &quot;% of&quot;     &quot;Available&quot;</span></span>
<span id="cb342-33"><a href="17-scrape-table2.html#cb342-33"></a><span class="co">#&gt; [5,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb342-34"><a href="17-scrape-table2.html#cb342-34"></a><span class="co">#&gt; [6,] &quot;Capacity&quot; &quot;Beds&quot;</span></span>
<span id="cb342-35"><a href="17-scrape-table2.html#cb342-35"></a><span class="kw">head</span>(data[[<span class="dv">2</span>]])</span>
<span id="cb342-36"><a href="17-scrape-table2.html#cb342-36"></a><span class="co">#&gt;      [,1]        [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]</span></span>
<span id="cb342-37"><a href="17-scrape-table2.html#cb342-37"></a><span class="co">#&gt; [1,] &quot;Anderson&quot;  &quot;81&quot; &quot;13&quot; &quot;3&quot;  &quot;1&quot;  &quot;5&quot;  &quot;12&quot; &quot;1&quot;  &quot;0&quot;  &quot;0&quot;   &quot;21&quot;  &quot;0&quot;  </span></span>
<span id="cb342-38"><a href="17-scrape-table2.html#cb342-38"></a><span class="co">#&gt; [2,] &quot;Andrews&quot;   &quot;23&quot; &quot;11&quot; &quot;0&quot;  &quot;2&quot;  &quot;4&quot;  &quot;11&quot; &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;5&quot;   &quot;0&quot;  </span></span>
<span id="cb342-39"><a href="17-scrape-table2.html#cb342-39"></a><span class="co">#&gt; [3,] &quot;Angelina&quot;  &quot;79&quot; &quot;35&quot; &quot;4&quot;  &quot;6&quot;  &quot;0&quot;  &quot;14&quot; &quot;0&quot;  &quot;3&quot;  &quot;0&quot;   &quot;23&quot;  &quot;0&quot;  </span></span>
<span id="cb342-40"><a href="17-scrape-table2.html#cb342-40"></a><span class="co">#&gt; [4,] &quot;Aransas&quot;   &quot;23&quot; &quot;10&quot; &quot;0&quot;  &quot;2&quot;  &quot;6&quot;  &quot;7&quot;  &quot;0&quot;  &quot;6&quot;  &quot;73&quot;  &quot;2&quot;   &quot;0&quot;  </span></span>
<span id="cb342-41"><a href="17-scrape-table2.html#cb342-41"></a><span class="co">#&gt; [5,] &quot;Archer&quot;    &quot;12&quot; &quot;3&quot;  &quot;0&quot;  &quot;0&quot;  &quot;1&quot;  &quot;3&quot;  &quot;1&quot;  &quot;1&quot;  &quot;2&quot;   &quot;5&quot;   &quot;0&quot;  </span></span>
<span id="cb342-42"><a href="17-scrape-table2.html#cb342-42"></a><span class="co">#&gt; [6,] &quot;Armstrong&quot; &quot;1&quot;  &quot;1&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb342-43"><a href="17-scrape-table2.html#cb342-43"></a><span class="co">#&gt;      [,13] [,14] [,15] [,16] [,17] [,18] [,19]   [,20]</span></span>
<span id="cb342-44"><a href="17-scrape-table2.html#cb342-44"></a><span class="co">#&gt; [1,] &quot;1&quot;   &quot;0&quot;   &quot;138&quot; &quot;0&quot;   &quot;138&quot; &quot;300&quot; &quot;46.00&quot; &quot;132&quot;</span></span>
<span id="cb342-45"><a href="17-scrape-table2.html#cb342-45"></a><span class="co">#&gt; [2,] &quot;6&quot;   &quot;0&quot;   &quot;35&quot;  &quot;0&quot;   &quot;35&quot;  &quot;50&quot;  &quot;70.00&quot; &quot;10&quot; </span></span>
<span id="cb342-46"><a href="17-scrape-table2.html#cb342-46"></a><span class="co">#&gt; [3,] &quot;3&quot;   &quot;1&quot;   &quot;168&quot; &quot;0&quot;   &quot;168&quot; &quot;279&quot; &quot;60.22&quot; &quot;83&quot; </span></span>
<span id="cb342-47"><a href="17-scrape-table2.html#cb342-47"></a><span class="co">#&gt; [4,] &quot;0&quot;   &quot;0&quot;   &quot;56&quot;  &quot;73&quot;  &quot;129&quot; &quot;212&quot; &quot;60.85&quot; &quot;62&quot; </span></span>
<span id="cb342-48"><a href="17-scrape-table2.html#cb342-48"></a><span class="co">#&gt; [5,] &quot;0&quot;   &quot;1&quot;   &quot;26&quot;  &quot;9&quot;   &quot;35&quot;  &quot;48&quot;  &quot;72.92&quot; &quot;0&quot;  </span></span>
<span id="cb342-49"><a href="17-scrape-table2.html#cb342-49"></a><span class="co">#&gt; [6,] &quot;0&quot;   &quot;0&quot;   &quot;2&quot;   &quot;0&quot;   &quot;2&quot;   &quot;8&quot;   &quot;25.00&quot; &quot;0&quot;</span></span></code></pre></div>
<p>Above is scraping code and some output when running <code>extract_tables()</code> on our PDF using all of the default options in that function. The only parameter we put in the function is <code>file = "data/Abbreviated Pop Rpt Dec 2017.pdf"</code>. This is just telling the function where to look for the PDF. I have the PDF in the data folder of my project; you’ll need to change this to have <code>extract_tables()</code> look in the right place for the PDF on your computer.</p>
<p>You can see from the output that the scrape was successful - but our work isn’t done yet. The results from <code>is(data)</code> say that the scrape returned a list, and from <code>length(data)</code> we learn that it’s a list of length 18. Why is this? We have 9 pages so it is reasonable that we would have 9 lists since we have one table per page, but we shouldn’t have 19 tables. Lets look again at just the first table - as it is a list we’ll need double square brackets to pull just the first element in the list.</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="17-scrape-table2.html#cb343-1"></a>data[[<span class="dv">1</span>]]</span>
<span id="cb343-2"><a href="17-scrape-table2.html#cb343-2"></a><span class="co">#&gt;      [,1]     [,2]       [,3]     [,4]           [,5]        [,6]        </span></span>
<span id="cb343-3"><a href="17-scrape-table2.html#cb343-3"></a><span class="co">#&gt; [1,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;Conv. Felons&quot; &quot;&quot;          &quot;Parole&quot;    </span></span>
<span id="cb343-4"><a href="17-scrape-table2.html#cb343-4"></a><span class="co">#&gt; [2,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;Sentenced to&quot; &quot;&quot;          &quot;Violators&quot; </span></span>
<span id="cb343-5"><a href="17-scrape-table2.html#cb343-5"></a><span class="co">#&gt; [3,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;County Jail&quot;  &quot;&quot;          &quot;with a New&quot;</span></span>
<span id="cb343-6"><a href="17-scrape-table2.html#cb343-6"></a><span class="co">#&gt; [4,] &quot;&quot;       &quot;Pretrial&quot; &quot;Conv.&quot;  &quot;&quot;             &quot;Parole&quot;    &quot;&quot;          </span></span>
<span id="cb343-7"><a href="17-scrape-table2.html#cb343-7"></a><span class="co">#&gt; [5,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;time&quot;         &quot;&quot;          &quot;Charge&quot;    </span></span>
<span id="cb343-8"><a href="17-scrape-table2.html#cb343-8"></a><span class="co">#&gt; [6,] &quot;County&quot; &quot;Felons&quot;   &quot;Felons&quot; &quot;&quot;             &quot;Violators&quot; &quot;&quot;          </span></span>
<span id="cb343-9"><a href="17-scrape-table2.html#cb343-9"></a><span class="co">#&gt;      [,7]       [,8]    [,9]       [,10]     [,11]      [,12]        </span></span>
<span id="cb343-10"><a href="17-scrape-table2.html#cb343-10"></a><span class="co">#&gt; [1,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Conv. SJF&quot;  </span></span>
<span id="cb343-11"><a href="17-scrape-table2.html#cb343-11"></a><span class="co">#&gt; [2,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Sentenced&quot;  </span></span>
<span id="cb343-12"><a href="17-scrape-table2.html#cb343-12"></a><span class="co">#&gt; [3,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;to Co. Jail&quot;</span></span>
<span id="cb343-13"><a href="17-scrape-table2.html#cb343-13"></a><span class="co">#&gt; [4,] &quot;Pretrial&quot; &quot;Conv.&quot; &quot;Bench&quot;    &quot;&quot;        &quot;Pretrial&quot; &quot;&quot;           </span></span>
<span id="cb343-14"><a href="17-scrape-table2.html#cb343-14"></a><span class="co">#&gt; [5,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Time&quot;       </span></span>
<span id="cb343-15"><a href="17-scrape-table2.html#cb343-15"></a><span class="co">#&gt; [6,] &quot;Misd.&quot;    &quot;Misd.&quot; &quot;Warrants&quot; &quot;Federal&quot; &quot;SJF&quot;      &quot;&quot;           </span></span>
<span id="cb343-16"><a href="17-scrape-table2.html#cb343-16"></a><span class="co">#&gt;      [,13]           [,14]    [,15]   [,16]      [,17]        [,18]     </span></span>
<span id="cb343-17"><a href="17-scrape-table2.html#cb343-17"></a><span class="co">#&gt; [1,] &quot;Conv.&quot;         &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb343-18"><a href="17-scrape-table2.html#cb343-18"></a><span class="co">#&gt; [2,] &quot;SJF&quot;           &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb343-19"><a href="17-scrape-table2.html#cb343-19"></a><span class="co">#&gt; [3,] &quot;Sentenced&quot;     &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb343-20"><a href="17-scrape-table2.html#cb343-20"></a><span class="co">#&gt; [4,] &quot;&quot;              &quot;Total&quot;  &quot;Total&quot; &quot;Total&quot;    &quot;Total&quot;      &quot;Total&quot;   </span></span>
<span id="cb343-21"><a href="17-scrape-table2.html#cb343-21"></a><span class="co">#&gt; [5,] &quot;to State Jail&quot; &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb343-22"><a href="17-scrape-table2.html#cb343-22"></a><span class="co">#&gt; [6,] &quot;&quot;              &quot;Others&quot; &quot;Local&quot; &quot;Contract&quot; &quot;Population&quot; &quot;Capacity&quot;</span></span>
<span id="cb343-23"><a href="17-scrape-table2.html#cb343-23"></a><span class="co">#&gt;      [,19]      [,20]      </span></span>
<span id="cb343-24"><a href="17-scrape-table2.html#cb343-24"></a><span class="co">#&gt; [1,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb343-25"><a href="17-scrape-table2.html#cb343-25"></a><span class="co">#&gt; [2,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb343-26"><a href="17-scrape-table2.html#cb343-26"></a><span class="co">#&gt; [3,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb343-27"><a href="17-scrape-table2.html#cb343-27"></a><span class="co">#&gt; [4,] &quot;% of&quot;     &quot;Available&quot;</span></span>
<span id="cb343-28"><a href="17-scrape-table2.html#cb343-28"></a><span class="co">#&gt; [5,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb343-29"><a href="17-scrape-table2.html#cb343-29"></a><span class="co">#&gt; [6,] &quot;Capacity&quot; &quot;Beds&quot;</span></span></code></pre></div>
<p>The results from <code>data[[1]]</code> provide some answers. It has the right number of columns but only 6 rows! This is our first table so should be the entire table we can see on page 1. Instead, it appears to be just the column names, with 6 rows because some column names are on multiple rows. Here’s the issue, we can read the table and easily see that the column names may be on multiple rows but belong together, and that they are part of the table. <code>tabulizer</code> can’t see this obvious fact as we can, it must rely on a series of rules to indicate what is part of a table and what isn’t. For example, having white space between columns and thin black lines around rows tells it where each row and column is. Our issue is that the column names appear to just be text until there is a thick black line and (in <code>tabulizer's</code> mind) the table begins, so it keeps the column name part separate from the rest of the table. Now lets look closer at table 2 and see if it is correct for the table on page 1 of our PDF.</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="17-scrape-table2.html#cb344-1"></a><span class="kw">head</span>(data[[<span class="dv">2</span>]])</span>
<span id="cb344-2"><a href="17-scrape-table2.html#cb344-2"></a><span class="co">#&gt;      [,1]        [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]</span></span>
<span id="cb344-3"><a href="17-scrape-table2.html#cb344-3"></a><span class="co">#&gt; [1,] &quot;Anderson&quot;  &quot;81&quot; &quot;13&quot; &quot;3&quot;  &quot;1&quot;  &quot;5&quot;  &quot;12&quot; &quot;1&quot;  &quot;0&quot;  &quot;0&quot;   &quot;21&quot;  &quot;0&quot;  </span></span>
<span id="cb344-4"><a href="17-scrape-table2.html#cb344-4"></a><span class="co">#&gt; [2,] &quot;Andrews&quot;   &quot;23&quot; &quot;11&quot; &quot;0&quot;  &quot;2&quot;  &quot;4&quot;  &quot;11&quot; &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;5&quot;   &quot;0&quot;  </span></span>
<span id="cb344-5"><a href="17-scrape-table2.html#cb344-5"></a><span class="co">#&gt; [3,] &quot;Angelina&quot;  &quot;79&quot; &quot;35&quot; &quot;4&quot;  &quot;6&quot;  &quot;0&quot;  &quot;14&quot; &quot;0&quot;  &quot;3&quot;  &quot;0&quot;   &quot;23&quot;  &quot;0&quot;  </span></span>
<span id="cb344-6"><a href="17-scrape-table2.html#cb344-6"></a><span class="co">#&gt; [4,] &quot;Aransas&quot;   &quot;23&quot; &quot;10&quot; &quot;0&quot;  &quot;2&quot;  &quot;6&quot;  &quot;7&quot;  &quot;0&quot;  &quot;6&quot;  &quot;73&quot;  &quot;2&quot;   &quot;0&quot;  </span></span>
<span id="cb344-7"><a href="17-scrape-table2.html#cb344-7"></a><span class="co">#&gt; [5,] &quot;Archer&quot;    &quot;12&quot; &quot;3&quot;  &quot;0&quot;  &quot;0&quot;  &quot;1&quot;  &quot;3&quot;  &quot;1&quot;  &quot;1&quot;  &quot;2&quot;   &quot;5&quot;   &quot;0&quot;  </span></span>
<span id="cb344-8"><a href="17-scrape-table2.html#cb344-8"></a><span class="co">#&gt; [6,] &quot;Armstrong&quot; &quot;1&quot;  &quot;1&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb344-9"><a href="17-scrape-table2.html#cb344-9"></a><span class="co">#&gt;      [,13] [,14] [,15] [,16] [,17] [,18] [,19]   [,20]</span></span>
<span id="cb344-10"><a href="17-scrape-table2.html#cb344-10"></a><span class="co">#&gt; [1,] &quot;1&quot;   &quot;0&quot;   &quot;138&quot; &quot;0&quot;   &quot;138&quot; &quot;300&quot; &quot;46.00&quot; &quot;132&quot;</span></span>
<span id="cb344-11"><a href="17-scrape-table2.html#cb344-11"></a><span class="co">#&gt; [2,] &quot;6&quot;   &quot;0&quot;   &quot;35&quot;  &quot;0&quot;   &quot;35&quot;  &quot;50&quot;  &quot;70.00&quot; &quot;10&quot; </span></span>
<span id="cb344-12"><a href="17-scrape-table2.html#cb344-12"></a><span class="co">#&gt; [3,] &quot;3&quot;   &quot;1&quot;   &quot;168&quot; &quot;0&quot;   &quot;168&quot; &quot;279&quot; &quot;60.22&quot; &quot;83&quot; </span></span>
<span id="cb344-13"><a href="17-scrape-table2.html#cb344-13"></a><span class="co">#&gt; [4,] &quot;0&quot;   &quot;0&quot;   &quot;56&quot;  &quot;73&quot;  &quot;129&quot; &quot;212&quot; &quot;60.85&quot; &quot;62&quot; </span></span>
<span id="cb344-14"><a href="17-scrape-table2.html#cb344-14"></a><span class="co">#&gt; [5,] &quot;0&quot;   &quot;1&quot;   &quot;26&quot;  &quot;9&quot;   &quot;35&quot;  &quot;48&quot;  &quot;72.92&quot; &quot;0&quot;  </span></span>
<span id="cb344-15"><a href="17-scrape-table2.html#cb344-15"></a><span class="co">#&gt; [6,] &quot;0&quot;   &quot;0&quot;   &quot;2&quot;   &quot;0&quot;   &quot;2&quot;   &quot;8&quot;   &quot;25.00&quot; &quot;0&quot;</span></span>
<span id="cb344-16"><a href="17-scrape-table2.html#cb344-16"></a><span class="kw">tail</span>(data[[<span class="dv">2</span>]])</span>
<span id="cb344-17"><a href="17-scrape-table2.html#cb344-17"></a><span class="co">#&gt;       [,1]         [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]</span></span>
<span id="cb344-18"><a href="17-scrape-table2.html#cb344-18"></a><span class="co">#&gt; [24,] &quot;Brooks&quot;     &quot;15&quot; &quot;1&quot;  &quot;1&quot;  &quot;1&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb344-19"><a href="17-scrape-table2.html#cb344-19"></a><span class="co">#&gt; [25,] &quot;Brooks (P)&quot; &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;164&quot; &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb344-20"><a href="17-scrape-table2.html#cb344-20"></a><span class="co">#&gt; [26,] &quot;Brown&quot;      &quot;70&quot; &quot;20&quot; &quot;0&quot;  &quot;7&quot;  &quot;20&quot; &quot;9&quot;  &quot;0&quot;  &quot;2&quot;  &quot;0&quot;   &quot;0&quot;   &quot;3&quot;  </span></span>
<span id="cb344-21"><a href="17-scrape-table2.html#cb344-21"></a><span class="co">#&gt; [27,] &quot;Burleson&quot;   &quot;19&quot; &quot;2&quot;  &quot;0&quot;  &quot;2&quot;  &quot;0&quot;  &quot;3&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb344-22"><a href="17-scrape-table2.html#cb344-22"></a><span class="co">#&gt; [28,] &quot;Burnet&quot;     &quot;57&quot; &quot;23&quot; &quot;1&quot;  &quot;5&quot;  &quot;9&quot;  &quot;3&quot;  &quot;0&quot;  &quot;1&quot;  &quot;0&quot;   &quot;10&quot;  &quot;1&quot;  </span></span>
<span id="cb344-23"><a href="17-scrape-table2.html#cb344-23"></a><span class="co">#&gt; [29,] &quot;Caldwell&quot;   &quot;89&quot; &quot;4&quot;  &quot;0&quot;  &quot;3&quot;  &quot;2&quot;  &quot;26&quot; &quot;1&quot;  &quot;2&quot;  &quot;19&quot;  &quot;13&quot;  &quot;0&quot;  </span></span>
<span id="cb344-24"><a href="17-scrape-table2.html#cb344-24"></a><span class="co">#&gt;       [,13] [,14] [,15] [,16] [,17] [,18] [,19]   [,20]</span></span>
<span id="cb344-25"><a href="17-scrape-table2.html#cb344-25"></a><span class="co">#&gt; [24,] &quot;0&quot;   &quot;0&quot;   &quot;18&quot;  &quot;0&quot;   &quot;18&quot;  &quot;36&quot;  &quot;50.00&quot; &quot;14&quot; </span></span>
<span id="cb344-26"><a href="17-scrape-table2.html#cb344-26"></a><span class="co">#&gt; [25,] &quot;0&quot;   &quot;0&quot;   &quot;0&quot;   &quot;408&quot; &quot;408&quot; &quot;652&quot; &quot;62.58&quot; &quot;179&quot;</span></span>
<span id="cb344-27"><a href="17-scrape-table2.html#cb344-27"></a><span class="co">#&gt; [26,] &quot;0&quot;   &quot;2&quot;   &quot;133&quot; &quot;7&quot;   &quot;140&quot; &quot;196&quot; &quot;71.43&quot; &quot;36&quot; </span></span>
<span id="cb344-28"><a href="17-scrape-table2.html#cb344-28"></a><span class="co">#&gt; [27,] &quot;0&quot;   &quot;1&quot;   &quot;27&quot;  &quot;0&quot;   &quot;27&quot;  &quot;96&quot;  &quot;28.13&quot; &quot;59&quot; </span></span>
<span id="cb344-29"><a href="17-scrape-table2.html#cb344-29"></a><span class="co">#&gt; [28,] &quot;0&quot;   &quot;0&quot;   &quot;110&quot; &quot;158&quot; &quot;268&quot; &quot;595&quot; &quot;45.04&quot; &quot;268&quot;</span></span>
<span id="cb344-30"><a href="17-scrape-table2.html#cb344-30"></a><span class="co">#&gt; [29,] &quot;3&quot;   &quot;0&quot;   &quot;143&quot; &quot;21&quot;  &quot;164&quot; &quot;301&quot; &quot;54.49&quot; &quot;107&quot;</span></span></code></pre></div>
<p>We’re looking just at the <code>head()</code> and <code>tail()</code> to get the first and 6 six rows as otherwise we’d print out all 29 rows in that table. When you are exploring you own data you’d probably want to be more thorough and ensure that rows around the middle are also correct - but this is a good first pass. If you look at the output the table and compare it to the PDF, you’ll see that the scrape was successful. Every row is where it should be and the columns are correct - unlike using <code>pdftools()</code> we have the results already in proper columns. One thing to note is that this data isn’t in a data.frame format, it’s in a matrix. Matrices are the default output of <code>extract_tables()</code> though you can set it to output a data.frame by setting the parameter <code>output = "data.frame"</code>. In out case we actually wouldn’t want that due to the issue of the column names.</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="17-scrape-table2.html#cb345-1"></a>data &lt;-<span class="st"> </span><span class="kw">extract_tables</span>(<span class="dt">file =</span> <span class="st">&quot;data/AbbreRptCurrent.pdf&quot;</span>, <span class="dt">output =</span> <span class="st">&quot;data.frame&quot;</span>)</span>
<span id="cb345-2"><a href="17-scrape-table2.html#cb345-2"></a><span class="kw">head</span>(data[[<span class="dv">2</span>]])</span>
<span id="cb345-3"><a href="17-scrape-table2.html#cb345-3"></a><span class="co">#&gt;    Anderson X81 X13 X3 X1 X5 X12 X1.1 X0 X0.1 X21 X0.2 X1.2 X0.3 X138 X0.4</span></span>
<span id="cb345-4"><a href="17-scrape-table2.html#cb345-4"></a><span class="co">#&gt; 1   Andrews  23  11  0  2  4  11    0  0    0   5    0    6    0   35    0</span></span>
<span id="cb345-5"><a href="17-scrape-table2.html#cb345-5"></a><span class="co">#&gt; 2  Angelina  79  35  4  6  0  14    0  3    0  23    0    3    1  168    0</span></span>
<span id="cb345-6"><a href="17-scrape-table2.html#cb345-6"></a><span class="co">#&gt; 3   Aransas  23  10  0  2  6   7    0  6   73   2    0    0    0   56   73</span></span>
<span id="cb345-7"><a href="17-scrape-table2.html#cb345-7"></a><span class="co">#&gt; 4    Archer  12   3  0  0  1   3    1  1    2   5    0    0    1   26    9</span></span>
<span id="cb345-8"><a href="17-scrape-table2.html#cb345-8"></a><span class="co">#&gt; 5 Armstrong   1   1  0  0  0   0    0  0    0   0    0    0    0    2    0</span></span>
<span id="cb345-9"><a href="17-scrape-table2.html#cb345-9"></a><span class="co">#&gt; 6  Atascosa  54   2  0  8  4  21    0  5    0  29    0    4    0  127   29</span></span>
<span id="cb345-10"><a href="17-scrape-table2.html#cb345-10"></a><span class="co">#&gt;   X138.1 X300 X46.00 X132</span></span>
<span id="cb345-11"><a href="17-scrape-table2.html#cb345-11"></a><span class="co">#&gt; 1     35   50  70.00   10</span></span>
<span id="cb345-12"><a href="17-scrape-table2.html#cb345-12"></a><span class="co">#&gt; 2    168  279  60.22   83</span></span>
<span id="cb345-13"><a href="17-scrape-table2.html#cb345-13"></a><span class="co">#&gt; 3    129  212  60.85   62</span></span>
<span id="cb345-14"><a href="17-scrape-table2.html#cb345-14"></a><span class="co">#&gt; 4     35   48  72.92    0</span></span>
<span id="cb345-15"><a href="17-scrape-table2.html#cb345-15"></a><span class="co">#&gt; 5      2    8  25.00    0</span></span>
<span id="cb345-16"><a href="17-scrape-table2.html#cb345-16"></a><span class="co">#&gt; 6    156  250  62.40   69</span></span></code></pre></div>
<p>Above we reran the <code>extract_tables()</code> code and just added a parameter to make the output a data.frame instead of a matrix. Now it sets the first row - which should be the columns - as the column name, which is not correct. We’ll have to fix the column names first before we can convert the result from a matrix to a data.frame.</p>
<p>We’ll use the <code>apply()</code> function on our data to create column names from it. The <code>apply()</code> function is actual part of a “family” of similar function which essentially operate as quicker for loops - we could have done a for loop to solve this problem. The <code>apply()</code> function takes as an input a vector or matrix data set, and then performs some function on either its rows or its columns. Our first input is our data, the first element of the <code>data</code> list. Then we put the number 2 to indicate that we want it to perform our function on each column of the matrix - if we put 1, that would perform the function on each row. So now what function to use on this data? We want to combine each row together into a single string per column. To do that we can use the <code>paste()</code> function and use the <code>collapse</code> parameter to combine multiple strings to a single string. So after the 2 we enter <code>paste</code>, and then just add <code>collapse = ""</code> (the "" means that we’re not putting anything between the strings when combining them) separated by a comma. Lets see what it returns.</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="17-scrape-table2.html#cb346-1"></a><span class="kw">apply</span>(data[[<span class="dv">1</span>]], <span class="dv">2</span>, paste, <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb346-2"><a href="17-scrape-table2.html#cb346-2"></a><span class="co">#&gt;                             X                           X.1 </span></span>
<span id="cb346-3"><a href="17-scrape-table2.html#cb346-3"></a><span class="co">#&gt;                      &quot;County&quot;              &quot;PretrialFelons&quot; </span></span>
<span id="cb346-4"><a href="17-scrape-table2.html#cb346-4"></a><span class="co">#&gt;                           X.2                  Conv..Felons </span></span>
<span id="cb346-5"><a href="17-scrape-table2.html#cb346-5"></a><span class="co">#&gt;                 &quot;Conv.Felons&quot; &quot;Sentenced toCounty Jailtime&quot; </span></span>
<span id="cb346-6"><a href="17-scrape-table2.html#cb346-6"></a><span class="co">#&gt;                           X.3                        Parole </span></span>
<span id="cb346-7"><a href="17-scrape-table2.html#cb346-7"></a><span class="co">#&gt;             &quot;ParoleViolators&quot;   &quot;Violatorswith a NewCharge&quot; </span></span>
<span id="cb346-8"><a href="17-scrape-table2.html#cb346-8"></a><span class="co">#&gt;                           X.4                           X.5 </span></span>
<span id="cb346-9"><a href="17-scrape-table2.html#cb346-9"></a><span class="co">#&gt;               &quot;PretrialMisd.&quot;                  &quot;Conv.Misd.&quot; </span></span>
<span id="cb346-10"><a href="17-scrape-table2.html#cb346-10"></a><span class="co">#&gt;                           X.6                           X.7 </span></span>
<span id="cb346-11"><a href="17-scrape-table2.html#cb346-11"></a><span class="co">#&gt;               &quot;BenchWarrants&quot;                     &quot;Federal&quot; </span></span>
<span id="cb346-12"><a href="17-scrape-table2.html#cb346-12"></a><span class="co">#&gt;                           X.8                     Conv..SJF </span></span>
<span id="cb346-13"><a href="17-scrape-table2.html#cb346-13"></a><span class="co">#&gt;                 &quot;PretrialSJF&quot;    &quot;Sentencedto Co. JailTime&quot; </span></span>
<span id="cb346-14"><a href="17-scrape-table2.html#cb346-14"></a><span class="co">#&gt;                         Conv.                           X.9 </span></span>
<span id="cb346-15"><a href="17-scrape-table2.html#cb346-15"></a><span class="co">#&gt;   &quot;SJFSentencedto State Jail&quot;                 &quot;TotalOthers&quot; </span></span>
<span id="cb346-16"><a href="17-scrape-table2.html#cb346-16"></a><span class="co">#&gt;                          X.10                          X.11 </span></span>
<span id="cb346-17"><a href="17-scrape-table2.html#cb346-17"></a><span class="co">#&gt;                  &quot;TotalLocal&quot;               &quot;TotalContract&quot; </span></span>
<span id="cb346-18"><a href="17-scrape-table2.html#cb346-18"></a><span class="co">#&gt;                          X.12                          X.13 </span></span>
<span id="cb346-19"><a href="17-scrape-table2.html#cb346-19"></a><span class="co">#&gt;             &quot;TotalPopulation&quot;               &quot;TotalCapacity&quot; </span></span>
<span id="cb346-20"><a href="17-scrape-table2.html#cb346-20"></a><span class="co">#&gt;                          X.14                          X.15 </span></span>
<span id="cb346-21"><a href="17-scrape-table2.html#cb346-21"></a><span class="co">#&gt;                &quot;% ofCapacity&quot;               &quot;AvailableBeds&quot;</span></span></code></pre></div>
<p>Now we have a vector of 20 strings, one per column in our data. We will use this to name the columns in our data set with the actual info from the scraped table. One helper function first. The column names don’t follow conventional R style for column names - it has spaces, uppercase letters, punctuation other than the underscore. To easily fix this we can use the <code>make_clean_names()</code> function from the <code>janitor</code> package. If you don’t have this package installed, install it using <code>install.packages("janitor")</code>. We’ll first save the results of the above <code>apply()</code> function as a vector we can call <code>column_names</code> and then run the <code>make_clean_names()</code> function on it. The input to <code>make_clean_names()</code> is the vector of strings (our column names) and it’ll return that vector but now with names in R’s common style.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="17-scrape-table2.html#cb347-1"></a><span class="kw">library</span>(janitor)</span>
<span id="cb347-2"><a href="17-scrape-table2.html#cb347-2"></a><span class="co">#&gt; </span></span>
<span id="cb347-3"><a href="17-scrape-table2.html#cb347-3"></a><span class="co">#&gt; Attaching package: &#39;janitor&#39;</span></span>
<span id="cb347-4"><a href="17-scrape-table2.html#cb347-4"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb347-5"><a href="17-scrape-table2.html#cb347-5"></a><span class="co">#&gt; </span></span>
<span id="cb347-6"><a href="17-scrape-table2.html#cb347-6"></a><span class="co">#&gt;     chisq.test, fisher.test</span></span>
<span id="cb347-7"><a href="17-scrape-table2.html#cb347-7"></a>column_names &lt;-<span class="st"> </span><span class="kw">apply</span>(data[[<span class="dv">1</span>]], <span class="dv">2</span>, paste, <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb347-8"><a href="17-scrape-table2.html#cb347-8"></a>column_names &lt;-<span class="st"> </span><span class="kw">make_clean_names</span>(column_names)</span>
<span id="cb347-9"><a href="17-scrape-table2.html#cb347-9"></a>column_names</span>
<span id="cb347-10"><a href="17-scrape-table2.html#cb347-10"></a><span class="co">#&gt;  [1] &quot;county&quot;                       &quot;pretrial_felons&quot;             </span></span>
<span id="cb347-11"><a href="17-scrape-table2.html#cb347-11"></a><span class="co">#&gt;  [3] &quot;conv_felons&quot;                  &quot;sentenced_to_county_jailtime&quot;</span></span>
<span id="cb347-12"><a href="17-scrape-table2.html#cb347-12"></a><span class="co">#&gt;  [5] &quot;parole_violators&quot;             &quot;violatorswith_a_new_charge&quot;  </span></span>
<span id="cb347-13"><a href="17-scrape-table2.html#cb347-13"></a><span class="co">#&gt;  [7] &quot;pretrial_misd&quot;                &quot;conv_misd&quot;                   </span></span>
<span id="cb347-14"><a href="17-scrape-table2.html#cb347-14"></a><span class="co">#&gt;  [9] &quot;bench_warrants&quot;               &quot;federal&quot;                     </span></span>
<span id="cb347-15"><a href="17-scrape-table2.html#cb347-15"></a><span class="co">#&gt; [11] &quot;pretrial_sjf&quot;                 &quot;sentencedto_co_jail_time&quot;    </span></span>
<span id="cb347-16"><a href="17-scrape-table2.html#cb347-16"></a><span class="co">#&gt; [13] &quot;sjf_sentencedto_state_jail&quot;   &quot;total_others&quot;                </span></span>
<span id="cb347-17"><a href="17-scrape-table2.html#cb347-17"></a><span class="co">#&gt; [15] &quot;total_local&quot;                  &quot;total_contract&quot;              </span></span>
<span id="cb347-18"><a href="17-scrape-table2.html#cb347-18"></a><span class="co">#&gt; [17] &quot;total_population&quot;             &quot;total_capacity&quot;              </span></span>
<span id="cb347-19"><a href="17-scrape-table2.html#cb347-19"></a><span class="co">#&gt; [19] &quot;percent_of_capacity&quot;          &quot;available_beds&quot;</span></span></code></pre></div>
<p>Now the column names are in the proper style. And notice the 19th value, it changed from the percent sign to the word “percent”.</p>
<p>We can combine the results from the first table - the column names - with that of the second table - the actual data - to have a complete table from page 1 of our PDF. We do this simply by making table 2 a data.frame and using <code>names()</code> to rename the columns to the ones we made above. Since this is the table from page 1 of the PDF, we’ll call the object <code>page1_table</code>.</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="17-scrape-table2.html#cb348-1"></a>page1_table &lt;-<span class="st"> </span>data[[<span class="dv">2</span>]]</span>
<span id="cb348-2"><a href="17-scrape-table2.html#cb348-2"></a>page1_table &lt;-<span class="st"> </span><span class="kw">data.frame</span>(page1_table)</span>
<span id="cb348-3"><a href="17-scrape-table2.html#cb348-3"></a><span class="kw">names</span>(page1_table) &lt;-<span class="st"> </span>column_names</span>
<span id="cb348-4"><a href="17-scrape-table2.html#cb348-4"></a><span class="kw">head</span>(page1_table)</span>
<span id="cb348-5"><a href="17-scrape-table2.html#cb348-5"></a><span class="co">#&gt;      county pretrial_felons conv_felons sentenced_to_county_jailtime</span></span>
<span id="cb348-6"><a href="17-scrape-table2.html#cb348-6"></a><span class="co">#&gt; 1   Andrews              23          11                            0</span></span>
<span id="cb348-7"><a href="17-scrape-table2.html#cb348-7"></a><span class="co">#&gt; 2  Angelina              79          35                            4</span></span>
<span id="cb348-8"><a href="17-scrape-table2.html#cb348-8"></a><span class="co">#&gt; 3   Aransas              23          10                            0</span></span>
<span id="cb348-9"><a href="17-scrape-table2.html#cb348-9"></a><span class="co">#&gt; 4    Archer              12           3                            0</span></span>
<span id="cb348-10"><a href="17-scrape-table2.html#cb348-10"></a><span class="co">#&gt; 5 Armstrong               1           1                            0</span></span>
<span id="cb348-11"><a href="17-scrape-table2.html#cb348-11"></a><span class="co">#&gt; 6  Atascosa              54           2                            0</span></span>
<span id="cb348-12"><a href="17-scrape-table2.html#cb348-12"></a><span class="co">#&gt;   parole_violators violatorswith_a_new_charge pretrial_misd conv_misd</span></span>
<span id="cb348-13"><a href="17-scrape-table2.html#cb348-13"></a><span class="co">#&gt; 1                2                          4            11         0</span></span>
<span id="cb348-14"><a href="17-scrape-table2.html#cb348-14"></a><span class="co">#&gt; 2                6                          0            14         0</span></span>
<span id="cb348-15"><a href="17-scrape-table2.html#cb348-15"></a><span class="co">#&gt; 3                2                          6             7         0</span></span>
<span id="cb348-16"><a href="17-scrape-table2.html#cb348-16"></a><span class="co">#&gt; 4                0                          1             3         1</span></span>
<span id="cb348-17"><a href="17-scrape-table2.html#cb348-17"></a><span class="co">#&gt; 5                0                          0             0         0</span></span>
<span id="cb348-18"><a href="17-scrape-table2.html#cb348-18"></a><span class="co">#&gt; 6                8                          4            21         0</span></span>
<span id="cb348-19"><a href="17-scrape-table2.html#cb348-19"></a><span class="co">#&gt;   bench_warrants federal pretrial_sjf sentencedto_co_jail_time</span></span>
<span id="cb348-20"><a href="17-scrape-table2.html#cb348-20"></a><span class="co">#&gt; 1              0       0            5                        0</span></span>
<span id="cb348-21"><a href="17-scrape-table2.html#cb348-21"></a><span class="co">#&gt; 2              3       0           23                        0</span></span>
<span id="cb348-22"><a href="17-scrape-table2.html#cb348-22"></a><span class="co">#&gt; 3              6      73            2                        0</span></span>
<span id="cb348-23"><a href="17-scrape-table2.html#cb348-23"></a><span class="co">#&gt; 4              1       2            5                        0</span></span>
<span id="cb348-24"><a href="17-scrape-table2.html#cb348-24"></a><span class="co">#&gt; 5              0       0            0                        0</span></span>
<span id="cb348-25"><a href="17-scrape-table2.html#cb348-25"></a><span class="co">#&gt; 6              5       0           29                        0</span></span>
<span id="cb348-26"><a href="17-scrape-table2.html#cb348-26"></a><span class="co">#&gt;   sjf_sentencedto_state_jail total_others total_local total_contract</span></span>
<span id="cb348-27"><a href="17-scrape-table2.html#cb348-27"></a><span class="co">#&gt; 1                          6            0          35              0</span></span>
<span id="cb348-28"><a href="17-scrape-table2.html#cb348-28"></a><span class="co">#&gt; 2                          3            1         168              0</span></span>
<span id="cb348-29"><a href="17-scrape-table2.html#cb348-29"></a><span class="co">#&gt; 3                          0            0          56             73</span></span>
<span id="cb348-30"><a href="17-scrape-table2.html#cb348-30"></a><span class="co">#&gt; 4                          0            1          26              9</span></span>
<span id="cb348-31"><a href="17-scrape-table2.html#cb348-31"></a><span class="co">#&gt; 5                          0            0           2              0</span></span>
<span id="cb348-32"><a href="17-scrape-table2.html#cb348-32"></a><span class="co">#&gt; 6                          4            0         127             29</span></span>
<span id="cb348-33"><a href="17-scrape-table2.html#cb348-33"></a><span class="co">#&gt;   total_population total_capacity percent_of_capacity available_beds</span></span>
<span id="cb348-34"><a href="17-scrape-table2.html#cb348-34"></a><span class="co">#&gt; 1               35             50               70.00             10</span></span>
<span id="cb348-35"><a href="17-scrape-table2.html#cb348-35"></a><span class="co">#&gt; 2              168            279               60.22             83</span></span>
<span id="cb348-36"><a href="17-scrape-table2.html#cb348-36"></a><span class="co">#&gt; 3              129            212               60.85             62</span></span>
<span id="cb348-37"><a href="17-scrape-table2.html#cb348-37"></a><span class="co">#&gt; 4               35             48               72.92              0</span></span>
<span id="cb348-38"><a href="17-scrape-table2.html#cb348-38"></a><span class="co">#&gt; 5                2              8               25.00              0</span></span>
<span id="cb348-39"><a href="17-scrape-table2.html#cb348-39"></a><span class="co">#&gt; 6              156            250               62.40             69</span></span>
<span id="cb348-40"><a href="17-scrape-table2.html#cb348-40"></a><span class="kw">tail</span>(page1_table)</span>
<span id="cb348-41"><a href="17-scrape-table2.html#cb348-41"></a><span class="co">#&gt;        county pretrial_felons conv_felons sentenced_to_county_jailtime</span></span>
<span id="cb348-42"><a href="17-scrape-table2.html#cb348-42"></a><span class="co">#&gt; 23     Brooks              15           1                            1</span></span>
<span id="cb348-43"><a href="17-scrape-table2.html#cb348-43"></a><span class="co">#&gt; 24 Brooks (P)               0           0                            0</span></span>
<span id="cb348-44"><a href="17-scrape-table2.html#cb348-44"></a><span class="co">#&gt; 25      Brown              70          20                            0</span></span>
<span id="cb348-45"><a href="17-scrape-table2.html#cb348-45"></a><span class="co">#&gt; 26   Burleson              19           2                            0</span></span>
<span id="cb348-46"><a href="17-scrape-table2.html#cb348-46"></a><span class="co">#&gt; 27     Burnet              57          23                            1</span></span>
<span id="cb348-47"><a href="17-scrape-table2.html#cb348-47"></a><span class="co">#&gt; 28   Caldwell              89           4                            0</span></span>
<span id="cb348-48"><a href="17-scrape-table2.html#cb348-48"></a><span class="co">#&gt;    parole_violators violatorswith_a_new_charge pretrial_misd conv_misd</span></span>
<span id="cb348-49"><a href="17-scrape-table2.html#cb348-49"></a><span class="co">#&gt; 23                1                          0             0         0</span></span>
<span id="cb348-50"><a href="17-scrape-table2.html#cb348-50"></a><span class="co">#&gt; 24                0                          0             0         0</span></span>
<span id="cb348-51"><a href="17-scrape-table2.html#cb348-51"></a><span class="co">#&gt; 25                7                         20             9         0</span></span>
<span id="cb348-52"><a href="17-scrape-table2.html#cb348-52"></a><span class="co">#&gt; 26                2                          0             3         0</span></span>
<span id="cb348-53"><a href="17-scrape-table2.html#cb348-53"></a><span class="co">#&gt; 27                5                          9             3         0</span></span>
<span id="cb348-54"><a href="17-scrape-table2.html#cb348-54"></a><span class="co">#&gt; 28                3                          2            26         1</span></span>
<span id="cb348-55"><a href="17-scrape-table2.html#cb348-55"></a><span class="co">#&gt;    bench_warrants federal pretrial_sjf sentencedto_co_jail_time</span></span>
<span id="cb348-56"><a href="17-scrape-table2.html#cb348-56"></a><span class="co">#&gt; 23              0       0            0                        0</span></span>
<span id="cb348-57"><a href="17-scrape-table2.html#cb348-57"></a><span class="co">#&gt; 24              0     164            0                        0</span></span>
<span id="cb348-58"><a href="17-scrape-table2.html#cb348-58"></a><span class="co">#&gt; 25              2       0            0                        3</span></span>
<span id="cb348-59"><a href="17-scrape-table2.html#cb348-59"></a><span class="co">#&gt; 26              0       0            0                        0</span></span>
<span id="cb348-60"><a href="17-scrape-table2.html#cb348-60"></a><span class="co">#&gt; 27              1       0           10                        1</span></span>
<span id="cb348-61"><a href="17-scrape-table2.html#cb348-61"></a><span class="co">#&gt; 28              2      19           13                        0</span></span>
<span id="cb348-62"><a href="17-scrape-table2.html#cb348-62"></a><span class="co">#&gt;    sjf_sentencedto_state_jail total_others total_local total_contract</span></span>
<span id="cb348-63"><a href="17-scrape-table2.html#cb348-63"></a><span class="co">#&gt; 23                          0            0          18              0</span></span>
<span id="cb348-64"><a href="17-scrape-table2.html#cb348-64"></a><span class="co">#&gt; 24                          0            0           0            408</span></span>
<span id="cb348-65"><a href="17-scrape-table2.html#cb348-65"></a><span class="co">#&gt; 25                          0            2         133              7</span></span>
<span id="cb348-66"><a href="17-scrape-table2.html#cb348-66"></a><span class="co">#&gt; 26                          0            1          27              0</span></span>
<span id="cb348-67"><a href="17-scrape-table2.html#cb348-67"></a><span class="co">#&gt; 27                          0            0         110            158</span></span>
<span id="cb348-68"><a href="17-scrape-table2.html#cb348-68"></a><span class="co">#&gt; 28                          3            0         143             21</span></span>
<span id="cb348-69"><a href="17-scrape-table2.html#cb348-69"></a><span class="co">#&gt;    total_population total_capacity percent_of_capacity available_beds</span></span>
<span id="cb348-70"><a href="17-scrape-table2.html#cb348-70"></a><span class="co">#&gt; 23               18             36               50.00             14</span></span>
<span id="cb348-71"><a href="17-scrape-table2.html#cb348-71"></a><span class="co">#&gt; 24              408            652               62.58            179</span></span>
<span id="cb348-72"><a href="17-scrape-table2.html#cb348-72"></a><span class="co">#&gt; 25              140            196               71.43             36</span></span>
<span id="cb348-73"><a href="17-scrape-table2.html#cb348-73"></a><span class="co">#&gt; 26               27             96               28.13             59</span></span>
<span id="cb348-74"><a href="17-scrape-table2.html#cb348-74"></a><span class="co">#&gt; 27              268            595               45.04            268</span></span>
<span id="cb348-75"><a href="17-scrape-table2.html#cb348-75"></a><span class="co">#&gt; 28              164            301               54.49            107</span></span></code></pre></div>
<p>Looking at the results of <code>head()</code> and <code>tail()</code> (if this was data you’d use in your own project you’d want to look closer than just these checks) shows that we’ve done this correctly. The values are right and the column names are correct. Complete the rest of the PDF on your own. You can follow the same steps as above but now that we’ve made the <code>column_names</code> object you can reuse that for the other tables. This is only true because each page has the same column names. Otherwise you’d have to fix the column names for each page of the PDF.</p>
<p>So why did I choose this example when it highlights a limitation of an otherwise very effective R package? A lot of the work you do with the is going to be like the example we went through - there are tools to solve <em>most</em> of the data problems but you’ll need to spend time fixing the extra issues. And since a lot of problems are fairly unique (at least insofar as there are differences in your exact problem even if problems are generally similar) there’s usually not a R function to solve everything. Below is another (brief) example of the <code>tabulizer</code> package working perfectly - but with a few issues just due to how the data is arranged on the PDF.</p>
</div>
<p style="text-align: center;">
<a href="16-2-making-a-function.html"><button class="btn btn-default">Previous</button></a>
<a href="17-1-pregnant-women-incarcerated.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>

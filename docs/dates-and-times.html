<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Dates and times | R 4 Criminology</title>
  <meta name="description" content="These notes introduce the programming language R and are meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information such as cleaning the data, graphing it, or running statistical tests on the data. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Dates and times | R 4 Criminology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://r4crim.com" />
  <meta property="og:image" content="https://r4crim.comRuby-throated_HummingBird.jpg" />
  <meta property="og:description" content="These notes introduce the programming language R and are meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information such as cleaning the data, graphing it, or running statistical tests on the data. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="github-repo" content="jacobkap/r4crim" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Dates and times | R 4 Criminology" />
  
  <meta name="twitter:description" content="These notes introduce the programming language R and are meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information such as cleaning the data, graphing it, or running statistical tests on the data. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="twitter:image" content="https://r4crim.comRuby-throated_HummingBird.jpg" />

<meta name="author" content="Jacob Kaplan" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="explore.html">
<link rel="next" href="regular-expressions.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99359926-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99359926-6');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Criminology</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-will-learn"><i class="fa fa-check"></i>What you will learn</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i>Skills</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i>Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-wont-learn"><i class="fa fa-check"></i>What you won’t learn</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#simple-vs-easy"><i class="fa fa-check"></i>Simple vs Easy</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contribute"><i class="fa fa-check"></i>How to Contribute</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Introduction to R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#why-learn-to-program"><i class="fa fa-check"></i><b>1.1</b> Why learn to program?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#scale"><i class="fa fa-check"></i><b>1.1.1</b> Scale</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#reproducibility"><i class="fa fa-check"></i><b>1.1.2</b> Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-rstudio"><i class="fa fa-check"></i><b>1.2</b> Using RStudio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#opening-an-r-script"><i class="fa fa-check"></i><b>1.2.1</b> Opening an R Script</a></li>
<li class="chapter" data-level="1.2.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#setting-the-working-directory"><i class="fa fa-check"></i><b>1.2.2</b> Setting the working directory</a></li>
<li class="chapter" data-level="1.2.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#changing-rstudio"><i class="fa fa-check"></i><b>1.2.3</b> Changing RStudio</a></li>
<li class="chapter" data-level="1.2.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#helpful-cheatsheets"><i class="fa fa-check"></i><b>1.2.4</b> Helpful cheatsheets</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#reading-data-into-r"><i class="fa fa-check"></i><b>1.3</b> Reading data into R</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#loading-data"><i class="fa fa-check"></i><b>1.3.1</b> Loading data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#first-steps-to-exploring-data"><i class="fa fa-check"></i><b>1.4</b> First steps to exploring data</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#finding-help-about-functions"><i class="fa fa-check"></i><b>1.5</b> Finding help about functions</a></li>
</ul></li>
<li class="part"><span><b>I Clean</b></span></li>
<li class="chapter" data-level="2" data-path="subsetting-intro.html"><a href="subsetting-intro.html"><i class="fa fa-check"></i><b>2</b> Subsetting: Making big things small</a><ul>
<li class="chapter" data-level="2.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-values"><i class="fa fa-check"></i><b>2.1</b> Select specific values</a></li>
<li class="chapter" data-level="2.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#assignment"><i class="fa fa-check"></i><b>2.2</b> Assignment values to objects (Making “things”)</a></li>
<li class="chapter" data-level="2.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#vectors"><i class="fa fa-check"></i><b>2.3</b> Vectors (collections of “things”)</a></li>
<li class="chapter" data-level="2.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#logical-values-and-operations"><i class="fa fa-check"></i><b>2.4</b> Logical values and operations</a><ul>
<li class="chapter" data-level="2.4.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-a-single-value"><i class="fa fa-check"></i><b>2.4.1</b> Matching a single value</a></li>
<li class="chapter" data-level="2.4.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-multiple-values"><i class="fa fa-check"></i><b>2.4.2</b> Matching multiple values</a></li>
<li class="chapter" data-level="2.4.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#does-not-match"><i class="fa fa-check"></i><b>2.4.3</b> Does not match</a></li>
<li class="chapter" data-level="2.4.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#greater-than-or-less-than"><i class="fa fa-check"></i><b>2.4.4</b> Greater than or less than</a></li>
<li class="chapter" data-level="2.4.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#combining-conditional-statements---or-and"><i class="fa fa-check"></i><b>2.4.5</b> Combining conditional statements - or, and</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subsetting-a-data.frame"><i class="fa fa-check"></i><b>2.5</b> Subsetting a data.frame</a><ul>
<li class="chapter" data-level="2.5.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-columns"><i class="fa fa-check"></i><b>2.5.1</b> Select specific columns</a></li>
<li class="chapter" data-level="2.5.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-rows"><i class="fa fa-check"></i><b>2.5.2</b> Select specific rows</a></li>
<li class="chapter" data-level="2.5.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#battleships"><i class="fa fa-check"></i><b>2.5.3</b> Battleships</a></li>
<li class="chapter" data-level="2.5.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subset-colorado-data"><i class="fa fa-check"></i><b>2.5.4</b> Subset Colorado data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>3</b> Exploratory data analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="explore.html"><a href="explore.html#summary-and-table"><i class="fa fa-check"></i><b>3.1</b> Summary and Table</a></li>
<li class="chapter" data-level="3.2" data-path="explore.html"><a href="explore.html#graphing"><i class="fa fa-check"></i><b>3.2</b> Graphing</a></li>
<li class="chapter" data-level="3.3" data-path="explore.html"><a href="explore.html#aggregate"><i class="fa fa-check"></i><b>3.3</b> Aggregating (summaries of groups)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>4</b> Dates and times</a><ul>
<li class="chapter" data-level="4.1" data-path="dates-and-times.html"><a href="dates-and-times.html#why-do-dates-and-times-matter"><i class="fa fa-check"></i><b>4.1</b> Why do dates and times matter?</a></li>
<li class="chapter" data-level="4.2" data-path="dates-and-times.html"><a href="dates-and-times.html#lubridate"><i class="fa fa-check"></i><b>4.2</b> <code>lubridate</code></a></li>
<li class="chapter" data-level="4.3" data-path="dates-and-times.html"><a href="dates-and-times.html#working-with-dates"><i class="fa fa-check"></i><b>4.3</b> Working with dates</a></li>
<li class="chapter" data-level="4.4" data-path="dates-and-times.html"><a href="dates-and-times.html#chicago-crime-data"><i class="fa fa-check"></i><b>4.4</b> Chicago crime data</a><ul>
<li class="chapter" data-level="4.4.1" data-path="dates-and-times.html"><a href="dates-and-times.html#exercises"><i class="fa fa-check"></i><b>4.4.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>5</b> Regular Expressions</a><ul>
<li class="chapter" data-level="5.1" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-patterns-in-text-with-grep"><i class="fa fa-check"></i><b>5.1</b> Finding patterns in text with <code>grep()</code></a></li>
<li class="chapter" data-level="5.2" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub"><i class="fa fa-check"></i><b>5.2</b> Finding and replacing patterns in text with <code>gsub()</code></a></li>
<li class="chapter" data-level="5.3" data-path="regular-expressions.html"><a href="regular-expressions.html#useful-special-characters"><i class="fa fa-check"></i><b>5.3</b> Useful special characters</a><ul>
<li class="chapter" data-level="5.3.1" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-characters"><i class="fa fa-check"></i><b>5.3.1</b> Multiple characters <code>[]</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-of-previous-character-n"><i class="fa fa-check"></i><b>5.3.2</b> n-many of previous character <code>{n}</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm"><i class="fa fa-check"></i><b>5.3.3</b> n-many to m-many of previous character <code>{n,m}</code></a></li>
<li class="chapter" data-level="5.3.4" data-path="regular-expressions.html"><a href="regular-expressions.html#start-of-string-and-not"><i class="fa fa-check"></i><b>5.3.4</b> Start of string and “not” <code>^</code></a></li>
<li class="chapter" data-level="5.3.5" data-path="regular-expressions.html"><a href="regular-expressions.html#end-of-string"><i class="fa fa-check"></i><b>5.3.5</b> End of string <code>$</code></a></li>
<li class="chapter" data-level="5.3.6" data-path="regular-expressions.html"><a href="regular-expressions.html#anything-."><i class="fa fa-check"></i><b>5.3.6</b> Anything <code>.</code></a></li>
<li class="chapter" data-level="5.3.7" data-path="regular-expressions.html"><a href="regular-expressions.html#one-or-more-of-previous"><i class="fa fa-check"></i><b>5.3.7</b> One or more of previous <code>+</code></a></li>
<li class="chapter" data-level="5.3.8" data-path="regular-expressions.html"><a href="regular-expressions.html#zero-or-more-of-previous"><i class="fa fa-check"></i><b>5.3.8</b> Zero or more of previous <code>*</code></a></li>
<li class="chapter" data-level="5.3.9" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-patterns"><i class="fa fa-check"></i><b>5.3.9</b> Multiple patterns <code>|</code></a></li>
<li class="chapter" data-level="5.3.10" data-path="regular-expressions.html"><a href="regular-expressions.html#parentheses"><i class="fa fa-check"></i><b>5.3.10</b> Parentheses <code>()</code></a></li>
<li class="chapter" data-level="5.3.11" data-path="regular-expressions.html"><a href="regular-expressions.html#optional-text"><i class="fa fa-check"></i><b>5.3.11</b> Optional text <code>?</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="regular-expressions.html"><a href="regular-expressions.html#changing-capitalization"><i class="fa fa-check"></i><b>5.4</b> Changing capitalization</a></li>
</ul></li>
<li class="part"><span><b>II Collect</b></span></li>
<li class="chapter" data-level="6" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html"><i class="fa fa-check"></i><b>6</b> Webscraping with <code>rvest</code></a><ul>
<li class="chapter" data-level="6.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#scraping-one-page"><i class="fa fa-check"></i><b>6.1</b> Scraping one page</a></li>
<li class="chapter" data-level="6.2" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#cleaning-the-webscraped-data"><i class="fa fa-check"></i><b>6.2</b> Cleaning the webscraped data</a></li>
<li class="chapter" data-level="6.3" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#fixing-names"><i class="fa fa-check"></i><b>6.3</b> Fixing names</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>7</b> Functions</a><ul>
<li class="chapter" data-level="7.1" data-path="functions.html"><a href="functions.html#a-simple-function"><i class="fa fa-check"></i><b>7.1</b> A simple function</a></li>
<li class="chapter" data-level="7.2" data-path="functions.html"><a href="functions.html#adding-parameters"><i class="fa fa-check"></i><b>7.2</b> Adding parameters</a></li>
<li class="chapter" data-level="7.3" data-path="functions.html"><a href="functions.html#movie-function"><i class="fa fa-check"></i><b>7.3</b> Making a function to scrape movie data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>8</b> For loops</a><ul>
<li class="chapter" data-level="8.1" data-path="for-loops.html"><a href="for-loops.html#basic-for-loops"><i class="fa fa-check"></i><b>8.1</b> Basic for loops</a></li>
<li class="chapter" data-level="8.2" data-path="for-loops.html"><a href="for-loops.html#scraping-multiple-days-of-movie-data"><i class="fa fa-check"></i><b>8.2</b> Scraping multiple days of movie data</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>9</b> Reading and Writing Data</a><ul>
<li class="chapter" data-level="9.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-data-into-r-1"><i class="fa fa-check"></i><b>9.1</b> Reading Data into R</a><ul>
<li class="chapter" data-level="9.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r"><i class="fa fa-check"></i><b>9.1.1</b> R</a></li>
<li class="chapter" data-level="9.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel"><i class="fa fa-check"></i><b>9.1.2</b> Excel</a></li>
<li class="chapter" data-level="9.1.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata"><i class="fa fa-check"></i><b>9.1.3</b> Stata</a></li>
<li class="chapter" data-level="9.1.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas"><i class="fa fa-check"></i><b>9.1.4</b> SAS</a></li>
<li class="chapter" data-level="9.1.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss"><i class="fa fa-check"></i><b>9.1.5</b> SPSS</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-data"><i class="fa fa-check"></i><b>9.2</b> Writing Data</a><ul>
<li class="chapter" data-level="9.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-1"><i class="fa fa-check"></i><b>9.2.1</b> R</a></li>
<li class="chapter" data-level="9.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-1"><i class="fa fa-check"></i><b>9.2.2</b> Excel</a></li>
<li class="chapter" data-level="9.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-1"><i class="fa fa-check"></i><b>9.2.3</b> Stata</a></li>
<li class="chapter" data-level="9.2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-1"><i class="fa fa-check"></i><b>9.2.4</b> SAS</a></li>
<li class="chapter" data-level="9.2.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss-1"><i class="fa fa-check"></i><b>9.2.5</b> SPSS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html"><i class="fa fa-check"></i><b>10</b> Scraping data from PDFs</a><ul>
<li class="chapter" data-level="10.1" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#downloading-officer-involved-shooting-files"><i class="fa fa-check"></i><b>10.1</b> Downloading officer-involved Shooting Files</a></li>
<li class="chapter" data-level="10.2" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#scraping-information-from-the-page"><i class="fa fa-check"></i><b>10.2</b> Scraping information from the page</a><ul>
<li class="chapter" data-level="10.2.1" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#combining-the-data-sets"><i class="fa fa-check"></i><b>10.2.1</b> Combining the data sets</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#extracting-data-from-pdfs"><i class="fa fa-check"></i><b>10.3</b> Extracting data from PDFs</a><ul>
<li class="chapter" data-level="10.3.1" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#scraping-a-single-pdf"><i class="fa fa-check"></i><b>10.3.1</b> Scraping a single PDF</a></li>
<li class="chapter" data-level="10.3.2" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#making-a-function"><i class="fa fa-check"></i><b>10.3.2</b> Making a function</a></li>
<li class="chapter" data-level="10.3.3" data-path="scraping-data-from-pdfs.html"><a href="scraping-data-from-pdfs.html#looping-through-every-pdf"><i class="fa fa-check"></i><b>10.3.3</b> Looping through every PDF</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="scrape-table.html"><a href="scrape-table.html"><i class="fa fa-check"></i><b>11</b> Scraping Tables from PDFs</a><ul>
<li class="chapter" data-level="11.1" data-path="scrape-table.html"><a href="scrape-table.html#scraping-the-first-table"><i class="fa fa-check"></i><b>11.1</b> Scraping the first table</a></li>
<li class="chapter" data-level="11.2" data-path="scrape-table.html"><a href="scrape-table.html#making-a-function-1"><i class="fa fa-check"></i><b>11.2</b> Making a function</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>12</b> Geocoding</a><ul>
<li class="chapter" data-level="12.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-a-single-address"><i class="fa fa-check"></i><b>12.1</b> Geocoding a single address</a></li>
<li class="chapter" data-level="12.2" data-path="geocoding.html"><a href="geocoding.html#making-a-function-2"><i class="fa fa-check"></i><b>12.2</b> Making a function</a></li>
<li class="chapter" data-level="12.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-officer-shooting-locations"><i class="fa fa-check"></i><b>12.3</b> Geocoding officer shooting locations</a></li>
</ul></li>
<li class="part"><span><b>III Visualize</b></span></li>
<li class="chapter" data-level="13" data-path="graphing-intro.html"><a href="graphing-intro.html"><i class="fa fa-check"></i><b>13</b> Graphing with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="13.1" data-path="graphing-intro.html"><a href="graphing-intro.html#what-does-the-data-look-like"><i class="fa fa-check"></i><b>13.1</b> What does the data look like?</a></li>
<li class="chapter" data-level="13.2" data-path="graphing-intro.html"><a href="graphing-intro.html#graphing-data"><i class="fa fa-check"></i><b>13.2</b> Graphing data</a></li>
<li class="chapter" data-level="13.3" data-path="graphing-intro.html"><a href="graphing-intro.html#time-series-plots"><i class="fa fa-check"></i><b>13.3</b> Time-Series Plots</a></li>
<li class="chapter" data-level="13.4" data-path="graphing-intro.html"><a href="graphing-intro.html#color-blindness"><i class="fa fa-check"></i><b>13.4</b> Color blindness</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="hotspot-maps.html"><a href="hotspot-maps.html"><i class="fa fa-check"></i><b>14</b> Hotspot maps</a><ul>
<li class="chapter" data-level="14.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#a-simple-map"><i class="fa fa-check"></i><b>14.1</b> A simple map</a></li>
<li class="chapter" data-level="14.2" data-path="hotspot-maps.html"><a href="hotspot-maps.html#what-really-are-maps"><i class="fa fa-check"></i><b>14.2</b> What really are maps?</a></li>
<li class="chapter" data-level="14.3" data-path="hotspot-maps.html"><a href="hotspot-maps.html#making-a-hotspot-map"><i class="fa fa-check"></i><b>14.3</b> Making a hotspot map</a><ul>
<li class="chapter" data-level="14.3.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#colors"><i class="fa fa-check"></i><b>14.3.1</b> Colors</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="hotspot-maps.html"><a href="hotspot-maps.html#looping-through-each-year"><i class="fa fa-check"></i><b>14.4</b> Looping through each year</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="choropleth-maps.html"><a href="choropleth-maps.html"><i class="fa fa-check"></i><b>15</b> Choropleth maps</a><ul>
<li class="chapter" data-level="15.1" data-path="choropleth-maps.html"><a href="choropleth-maps.html#spatial-joins"><i class="fa fa-check"></i><b>15.1</b> Spatial joins</a></li>
<li class="chapter" data-level="15.2" data-path="choropleth-maps.html"><a href="choropleth-maps.html#making-choropleth-maps"><i class="fa fa-check"></i><b>15.2</b> Making choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>16</b> Interactive maps</a><ul>
<li class="chapter" data-level="16.1" data-path="interactive-maps.html"><a href="interactive-maps.html#why-do-interactive-graphs-matter"><i class="fa fa-check"></i><b>16.1</b> Why do interactive graphs matter?</a><ul>
<li class="chapter" data-level="16.1.1" data-path="interactive-maps.html"><a href="interactive-maps.html#understanding-your-data"><i class="fa fa-check"></i><b>16.1.1</b> Understanding your data</a></li>
<li class="chapter" data-level="16.1.2" data-path="interactive-maps.html"><a href="interactive-maps.html#police-departments-use-them"><i class="fa fa-check"></i><b>16.1.2</b> Police departments use them</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="interactive-maps.html"><a href="interactive-maps.html#making-the-interactive-map"><i class="fa fa-check"></i><b>16.2</b> Making the interactive map</a></li>
<li class="chapter" data-level="16.3" data-path="interactive-maps.html"><a href="interactive-maps.html#adding-popup-information"><i class="fa fa-check"></i><b>16.3</b> Adding popup information</a></li>
<li class="chapter" data-level="16.4" data-path="interactive-maps.html"><a href="interactive-maps.html#dealing-with-too-many-markers"><i class="fa fa-check"></i><b>16.4</b> Dealing with too many markers</a></li>
<li class="chapter" data-level="16.5" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-choropleth-maps"><i class="fa fa-check"></i><b>16.5</b> Interactive choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>17</b> R Markdown</a><ul>
<li class="chapter" data-level="17.1" data-path="r-markdown.html"><a href="r-markdown.html#code-1"><i class="fa fa-check"></i><b>17.1</b> Code</a><ul>
<li class="chapter" data-level="17.1.1" data-path="r-markdown.html"><a href="r-markdown.html#hiding-code-in-the-output"><i class="fa fa-check"></i><b>17.1.1</b> Hiding code in the output</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i><b>17.2</b> Tables</a></li>
<li class="chapter" data-level="17.3" data-path="r-markdown.html"><a href="r-markdown.html#making-the-output-file"><i class="fa fa-check"></i><b>17.3</b> Making the output file</a></li>
</ul></li>
<li class="part"><span><b>IV Data</b></span></li>
<li class="chapter" data-level="18" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>18</b> Introduction</a></li>
<li class="chapter" data-level="19" data-path="ucr.html"><a href="ucr.html"><i class="fa fa-check"></i><b>19</b> Uniform Crime Report (UCR) - Offenses Known and Clearances by Arrest</a><ul>
<li class="chapter" data-level="19.1" data-path="ucr.html"><a href="ucr.html#exploring-the-ucr-data"><i class="fa fa-check"></i><b>19.1</b> Exploring the UCR data</a></li>
<li class="chapter" data-level="19.2" data-path="ucr.html"><a href="ucr.html#oris---unique-agency-identifiers"><i class="fa fa-check"></i><b>19.2</b> ORIs - Unique agency identifiers</a></li>
<li class="chapter" data-level="19.3" data-path="ucr.html"><a href="ucr.html#hierarchy-rule"><i class="fa fa-check"></i><b>19.3</b> Hierarchy Rule</a></li>
<li class="chapter" data-level="19.4" data-path="ucr.html"><a href="ucr.html#which-crimes-are-included"><i class="fa fa-check"></i><b>19.4</b> Which crimes are included</a><ul>
<li class="chapter" data-level="19.4.1" data-path="ucr.html"><a href="ucr.html#index-crimes"><i class="fa fa-check"></i><b>19.4.1</b> Index Crimes</a></li>
<li class="chapter" data-level="19.4.2" data-path="ucr.html"><a href="ucr.html#the-problem-with-using-index-crimes"><i class="fa fa-check"></i><b>19.4.2</b> The problem with using index crimes</a></li>
<li class="chapter" data-level="19.4.3" data-path="ucr.html"><a href="ucr.html#rape-definition-change"><i class="fa fa-check"></i><b>19.4.3</b> Rape definition change</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="ucr.html"><a href="ucr.html#actual-offenses-clearances-and-unfounded-offenses"><i class="fa fa-check"></i><b>19.5</b> Actual offenses, clearances, and unfounded offenses</a><ul>
<li class="chapter" data-level="19.5.1" data-path="ucr.html"><a href="ucr.html#actual"><i class="fa fa-check"></i><b>19.5.1</b> Actual</a></li>
<li class="chapter" data-level="19.5.2" data-path="ucr.html"><a href="ucr.html#total-cleared"><i class="fa fa-check"></i><b>19.5.2</b> Total Cleared</a></li>
<li class="chapter" data-level="19.5.3" data-path="ucr.html"><a href="ucr.html#cleared-where-all-offenders-are-under-18"><i class="fa fa-check"></i><b>19.5.3</b> Cleared Where All Offenders Are Under 18</a></li>
<li class="chapter" data-level="19.5.4" data-path="ucr.html"><a href="ucr.html#unfounded"><i class="fa fa-check"></i><b>19.5.4</b> Unfounded</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="ucr.html"><a href="ucr.html#number-of-months-reported"><i class="fa fa-check"></i><b>19.6</b> Number of months reported</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="useful-resources.html"><a href="useful-resources.html"><i class="fa fa-check"></i><b>A</b> Useful resources</a><ul>
<li class="chapter" data-level="A.1" data-path="useful-resources.html"><a href="useful-resources.html#learning-r-and-coding-issues"><i class="fa fa-check"></i><b>A.1</b> Learning R and coding issues</a></li>
<li class="chapter" data-level="A.2" data-path="useful-resources.html"><a href="useful-resources.html#data-1"><i class="fa fa-check"></i><b>A.2</b> Data</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 4 Criminology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dates-and-times" class="section level1">
<h1><span class="header-section-number">4</span> Dates and times</h1>
<div id="why-do-dates-and-times-matter" class="section level2">
<h2><span class="header-section-number">4.1</span> Why do dates and times matter?</h2>
<p>Before we get started with any code, let’s think about why we should care about dates and times in data. Like most things you’ll use R for in this book (and for your own research), the data you have isn’t in the format you want it to be. For simple questions like “what day has the most crime?” you’ll need to know what day each crime occurred on. For more complex questions like “did marijuana legalization affect murder?” you need to know how many crimes occurred on months or years before and after marijuana legalization. In almost every case where time matters for research (and it matters in many studies) you will have data in the <strong>wrong</strong> format to answer you question. You’ll likely want to group all the days in a month together or just take crimes that happened at a certain time (as is common in studies of outdoor lighting).</p>
<p>Many research studies are policy analyses comparing some outcome (e.g. number of crimes) in a state before and after a policy change compared to a similar locations without that change. In these cases you want to think about what time unit your data should be in (crimes per month, crime per year) and use the following tools to get the data into the right format.</p>
</div>
<div id="lubridate" class="section level2">
<h2><span class="header-section-number">4.2</span> <code>lubridate</code></h2>
<p>To work with dates and times we will use the <code>lubridate</code> package. For a useful cheatsheet for this package click <a href="https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf">here</a> To install this package run</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;lubridate&quot;</span>)</code></pre>
<p>and R will download the package, allowing you to use it.</p>
<p>Some Mac users have issues installing packages so if you run into an issue try changing the parameter <code>type</code> to “mac.binary” in the <code>install.packages()</code> function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;lubridate&quot;</span>, <span class="dt">type =</span> <span class="st">&quot;mac.binary&quot;</span>)</code></pre>
<p>When you use a new package you will always need to download it using <code>install.packages("package_name")</code> the first time. You only need to do it once however every session you use it (i.e. time without restarting R) you will need to run <code>library("package_name")</code> to tell R you want to use this package. Since some packages have functions with the same name as other packages this is useful so you don’t accidentally use a function you didn’t intend to use.</p>
<p>In our case we’ll run <code>library(lubridate)</code> to be able to use the package. Note that <code>install.package()</code> has the package name in quotes and <code>library()</code> does not.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: &#39;lubridate&#39;</span>
<span class="co">#&gt; The following object is masked from &#39;package:base&#39;:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     date</span></code></pre>
</div>
<div id="working-with-dates" class="section level2">
<h2><span class="header-section-number">4.3</span> Working with dates</h2>
<p>Before using real data, we’ll start with defining useful functions and using a toy example. Below we have made the object called <em>dates</em> with three character values showing the dates August 7th for the years 2010-2012. Please note that Dates (capital D) are a special type of value that R understands and just putting what we can read as a date in quotes doesn’t make it so.</p>
<pre class="sourceCode r"><code class="sourceCode r">dates &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;2010-08-07&quot;</span>, <span class="st">&quot;2011-08-07&quot;</span>, <span class="st">&quot;2012-08-07&quot;</span>)</code></pre>
<p>When we look at these dates we can see that it starts with the year, then has the month, then the day. R doesn’t know that. We have to tell R what order the year, month, and day are in. This is the key part of the <code>lubridate</code> package. The functions below are the ones we’ll use to tell R which order the date is in and to convert it to a Date type.</p>
<ul>
<li><code>ymd()</code> Order is year-month-day</li>
<li><code>mdy()</code> Order is month-day-year (common in crime data)</li>
<li><code>dmy()</code> Order is day-month-year</li>
</ul>
<p>Year, month, and day are all abbreviated to the first letter and all lowercase. Inside the parentheses we will put the date(s) we want to convert to a Date type. Since our date are in year-month-day order, we will use <code>ymd()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ymd</span>(dates)
<span class="co">#&gt; [1] &quot;2010-08-07&quot; &quot;2011-08-07&quot; &quot;2012-08-07&quot;</span></code></pre>
<p>If you tell R the wrong order, it will not be able to read the data and will return NAs.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">myd</span>(dates)
<span class="co">#&gt; Warning: All formats failed to parse. No formats found.</span>
<span class="co">#&gt; [1] NA NA NA</span></code></pre>
<p>Some dates come with hour, minutes, and even seconds telling exactly when the event happened. In those cases you must add <code>_hm</code> to the end of your code to indicate that there are hour and minute information in the data. If there are also seconds, use <code>_hms</code>.</p>
<ul>
<li><code>ymd_hm()</code></li>
<li><code>mdy_hm()</code></li>
<li><code>dmy_hm()</code></li>
<li><code>ymd_hms()</code></li>
<li><code>mdy_hms()</code></li>
<li><code>dmy_hms()</code></li>
</ul>
<p>Like before, telling R the wrong order will return all NAs. If the date has hours and minutes (and seconds) you must have <code>_hm</code> or it won’t work right, and if it doesn’t you must not include it.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ymd_hms</span>(dates)
<span class="co">#&gt; Warning: All formats failed to parse. No formats found.</span>
<span class="co">#&gt; [1] NA NA NA</span></code></pre>
<p>Once you have the dates in the Date format, you can use a number of useful functions to extract information from these dates such as the year or month of the date, the hour if hours are available, and even the day of the month or week.</p>
<ul>
<li><code>year()</code></li>
<li><code>month()</code></li>
<li><code>day()</code> Day of year</li>
<li><code>mday()</code> Day of month</li>
<li><code>wday()</code> Day of week</li>
<li><code>hour()</code></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">year</span>(dates)
<span class="co">#&gt; [1] 2010 2011 2012</span></code></pre>
<p>This gives us an error. Why? When we ran the code <code>ymd(dates)</code> it changed the value in <em>dates</em> to Date type and printed out those new values. But it didn’t save it anywhere so our <em>dates</em> object is still a vector of characters rather than Dates. We need to run <code>ymd(dates)</code> again and save the result somewhere. Generally, to reduce the number of objects created when you’re making a change you just save it back in the original object, overwriting it. <strong>This doesn’t change the raw data found in .csv or .rda files, only the data that is read into R. This is important because we always want to keep the raw data unchanged and have all our changes recorded in code.</strong></p>
<pre class="sourceCode r"><code class="sourceCode r">dates &lt;-<span class="st"> </span><span class="kw">ymd</span>(dates)</code></pre>
<p>Now that we have saved our changes in the <em>dates</em> object, lets try again.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">year</span>(dates)
<span class="co">#&gt; [1] 2010 2011 2012</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">month</span>(dates)
<span class="co">#&gt; [1] 8 8 8</span></code></pre>
<p>By default <code>month()</code> gives the month number rather than the name of the month. We need to set the parameter <code>label</code> to TRUE to get the month name.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">month</span>(dates, <span class="dt">label =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] Aug Aug Aug</span>
<span class="co">#&gt; 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</span></code></pre>
<p>We can also set the parameter <code>abbr</code> to FALSE if we want the full month name rather than the abbreviation.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">month</span>(dates, <span class="dt">label =</span> <span class="ot">TRUE</span>, <span class="dt">abbr =</span> <span class="ot">FALSE</span>)
<span class="co">#&gt; [1] August August August</span>
<span class="co">#&gt; 12 Levels: January &lt; February &lt; March &lt; April &lt; May &lt; June &lt; ... &lt; December</span></code></pre>
<p>The final useful function we will discuss is <code>floor_date()</code> which rounds down the date to the first day of the unit given. There are a number of possible units, the most common for our purposes will be “year”, “month” “week”, and “day”.</p>
<ul>
<li><code>floor_date()</code></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">floor_date</span>(dates, <span class="dt">unit =</span> <span class="st">&quot;month&quot;</span>)
<span class="co">#&gt; [1] &quot;2010-08-01&quot; &quot;2011-08-01&quot; &quot;2012-08-01&quot;</span></code></pre>
<p>If we change the unit to “year” it’ll change the date to the first date in the year.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">floor_date</span>(dates, <span class="dt">unit =</span> <span class="st">&quot;year&quot;</span>)
<span class="co">#&gt; [1] &quot;2010-01-01&quot; &quot;2011-01-01&quot; &quot;2012-01-01&quot;</span></code></pre>
<p>Using <code>floor_date()</code> will be very useful when you want to find the number of crimes in each month/year/week/day as you can do this to get a single date for each time period and aggregate crimes in that time period.</p>
</div>
<div id="chicago-crime-data" class="section level2">
<h2><span class="header-section-number">4.4</span> Chicago crime data</h2>
<p>Let’s use some sample data from Chicago to be able to work with real data.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;data/chicago.rda&quot;</span>)</code></pre>
<p>We can use <code>head()</code> to look at the first 6 rows of dates</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(chicago<span class="op">$</span>Date)
<span class="co">#&gt; [1] &quot;12/09/2014 11:54:00 PM&quot; &quot;12/09/2014 11:45:00 PM&quot;</span>
<span class="co">#&gt; [3] &quot;12/09/2014 11:42:00 PM&quot; &quot;12/09/2014 11:42:00 PM&quot;</span>
<span class="co">#&gt; [5] &quot;12/09/2014 11:40:00 PM&quot; &quot;12/09/2014 11:37:00 PM&quot;</span></code></pre>
<p>Now let’s use the square bracket <code>[]</code> indexing to also see the first 6 rows of dates. Remember, we’re going to want a vector of numbers 1 through 6 for this. Since these numbers are sequential without any missing we can use 1:6 instead of manually making a vector <code>c(1, 2, 3, 4, 5, 6)</code>. Since we already specify we want the Date column, we don’t need any commas after the vector of numbers.</p>
<pre class="sourceCode r"><code class="sourceCode r">chicago<span class="op">$</span>Date[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>]
<span class="co">#&gt; [1] &quot;12/09/2014 11:54:00 PM&quot; &quot;12/09/2014 11:45:00 PM&quot;</span>
<span class="co">#&gt; [3] &quot;12/09/2014 11:42:00 PM&quot; &quot;12/09/2014 11:42:00 PM&quot;</span>
<span class="co">#&gt; [5] &quot;12/09/2014 11:40:00 PM&quot; &quot;12/09/2014 11:37:00 PM&quot;</span></code></pre>
<p>As you can see, the dates include the date in month-day-year format and the time includes hours, minutes, and seconds. So we must read in the data using <code>mdy_hms()</code> to tell R the proper order of the date and that it includes time up to the second. Lets save the results in a new column called “real_date”. It’s often useful when changing a column to save it as a new column in case you make a mistake in the code - that way you don’t have to reload the data to fix it.</p>
<pre class="sourceCode r"><code class="sourceCode r">chicago<span class="op">$</span>real_date &lt;-<span class="st"> </span><span class="kw">mdy_hms</span>(chicago<span class="op">$</span>Date)</code></pre>
<p>Now lets use <code>head()</code> again on our new column to see what we made.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(chicago<span class="op">$</span>real_date)
<span class="co">#&gt; [1] &quot;2014-12-09 23:54:00 UTC&quot; &quot;2014-12-09 23:45:00 UTC&quot;</span>
<span class="co">#&gt; [3] &quot;2014-12-09 23:42:00 UTC&quot; &quot;2014-12-09 23:42:00 UTC&quot;</span>
<span class="co">#&gt; [5] &quot;2014-12-09 23:40:00 UTC&quot; &quot;2014-12-09 23:37:00 UTC&quot;</span></code></pre>
<p>Lets make new columns for the year, month, and weekday for each date and then do some basic exploring on these new variables.</p>
<pre class="sourceCode r"><code class="sourceCode r">chicago<span class="op">$</span>year &lt;-<span class="st"> </span><span class="kw">year</span>(chicago<span class="op">$</span>real_date)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">chicago<span class="op">$</span>month &lt;-<span class="st"> </span><span class="kw">month</span>(chicago<span class="op">$</span>real_date,<span class="dt">label =</span> <span class="ot">TRUE</span>, <span class="dt">abbr =</span> <span class="ot">FALSE</span>)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">chicago<span class="op">$</span>weekday &lt;-<span class="st"> </span><span class="kw">wday</span>(chicago<span class="op">$</span>real_date, <span class="dt">label =</span> <span class="ot">TRUE</span>, <span class="dt">abbr =</span> <span class="ot">FALSE</span>)</code></pre>
<p>First we can use <code>table()</code> on each of these new columns to see how frequently each value in the category appears in our data.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(chicago<span class="op">$</span>year)
<span class="co">#&gt; </span>
<span class="co">#&gt;  2014 </span>
<span class="co">#&gt; 10000</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(chicago<span class="op">$</span>month)
<span class="co">#&gt; </span>
<span class="co">#&gt;   January  February     March     April       May      June      July </span>
<span class="co">#&gt;         0         0         0         0         0         0         0 </span>
<span class="co">#&gt;    August September   October  November  December </span>
<span class="co">#&gt;         0         0         0      4179      5821</span></code></pre>
<p>Our data comes entirely from November and December in 2014. This certainly limits our ability to see if crime changes across seasons or over years.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(chicago<span class="op">$</span>weekday)
<span class="co">#&gt; </span>
<span class="co">#&gt;    Sunday    Monday   Tuesday Wednesday  Thursday    Friday  Saturday </span>
<span class="co">#&gt;      1260      1855      1832      1341      1092      1312      1308</span></code></pre>
<p>It looks like there’s a difference in which days have the most crime with Monday and Tuesday being the most dangerous days. For easier interpretation let’s turn these counts into percents. A simple way is to divide the results by the total number of rows in our data.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(chicago<span class="op">$</span>weekday) <span class="op">/</span><span class="st"> </span><span class="kw">nrow</span>(chicago)
<span class="co">#&gt; </span>
<span class="co">#&gt;    Sunday    Monday   Tuesday Wednesday  Thursday    Friday  Saturday </span>
<span class="co">#&gt;    0.1260    0.1855    0.1832    0.1341    0.1092    0.1312    0.1308</span></code></pre>
<p>This gives us proportions - we can multiple by 100 to get percents.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(chicago<span class="op">$</span>weekday) <span class="op">/</span><span class="st"> </span><span class="kw">nrow</span>(chicago) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    Sunday    Monday   Tuesday Wednesday  Thursday    Friday  Saturday </span>
<span class="co">#&gt;     12.60     18.55     18.32     13.41     10.92     13.12     13.08</span></code></pre>
<p>Now we see that indeed Monday and Tuesday have a much higher percent of crime in the data than other days. Is this reasonable? Most studies find that weekends have the highest amount of crime and that Mondays and Tuesdays have relatively low crime. But remember that we’re only using a sample of 10,000 crimes across two months in a single year from Chicago. Our data is likely not representative and we shouldn’t believe it too much.</p>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What is the most common crime on Fridays?</li>
<li>How many assaults happened on Fridays?</li>
<li>Which weekday had the fewest assaults?
<ul>
<li>How many fewer assaults did it have than on Fridays?</li>
</ul></li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="explore.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regular-expressions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacobkap/r4crim/edit/master/dates-and-times.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>

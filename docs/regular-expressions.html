<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Regular Expressions | Crime by the Numbers</title>
  <meta name="description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Regular Expressions | Crime by the Numbers" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://crimebythenumbers.com" />
  <meta property="og:image" content="https://crimebythenumbers.comRuby-throated_HummingBird.jpg" />
  <meta property="og:description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="github-repo" content="jacobkap/crimebythenumbers" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Regular Expressions | Crime by the Numbers" />
  
  <meta name="twitter:description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="twitter:image" content="https://crimebythenumbers.comRuby-throated_HummingBird.jpg" />

<meta name="author" content="Jacob Kaplan" />


<meta name="date" content="2019-09-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="explore.html">
<link rel="next" href="reading-and-writing-data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99359926-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99359926-6');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Crime by the Numbers</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-learn-to-program"><i class="fa fa-check"></i>Why learn to program?</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#scale"><i class="fa fa-check"></i>Scale</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i>Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-will-learn"><i class="fa fa-check"></i>What you will learn</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i>Skills</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i>Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-wont-learn"><i class="fa fa-check"></i>What you won’t learn</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#simple-vs-easy"><i class="fa fa-check"></i>Simple vs Easy</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contribute"><i class="fa fa-check"></i>How to Contribute</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Introduction to R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-rstudio"><i class="fa fa-check"></i><b>1.1</b> Using RStudio</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#opening-an-r-script"><i class="fa fa-check"></i><b>1.1.1</b> Opening an R Script</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#setting-the-working-directory"><i class="fa fa-check"></i><b>1.1.2</b> Setting the working directory</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#changing-rstudio"><i class="fa fa-check"></i><b>1.1.3</b> Changing RStudio</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#helpful-cheatsheets"><i class="fa fa-check"></i><b>1.1.4</b> Helpful cheatsheets</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#reading-data-into-r"><i class="fa fa-check"></i><b>1.2</b> Reading data into R</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#loading-data"><i class="fa fa-check"></i><b>1.2.1</b> Loading data</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#first-steps-to-exploring-data"><i class="fa fa-check"></i><b>1.3</b> First steps to exploring data</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#finding-help-about-functions"><i class="fa fa-check"></i><b>1.4</b> Finding help about functions</a></li>
</ul></li>
<li class="part"><span><b>I Clean</b></span></li>
<li class="chapter" data-level="2" data-path="subsetting-intro.html"><a href="subsetting-intro.html"><i class="fa fa-check"></i><b>2</b> Subsetting: Making big things small</a><ul>
<li class="chapter" data-level="2.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-values"><i class="fa fa-check"></i><b>2.1</b> Select specific values</a></li>
<li class="chapter" data-level="2.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#assignment"><i class="fa fa-check"></i><b>2.2</b> Assignment values to objects (Making “things”)</a></li>
<li class="chapter" data-level="2.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#vectors"><i class="fa fa-check"></i><b>2.3</b> Vectors (collections of “things”)</a></li>
<li class="chapter" data-level="2.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#logical-values-and-operations"><i class="fa fa-check"></i><b>2.4</b> Logical values and operations</a><ul>
<li class="chapter" data-level="2.4.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-a-single-value"><i class="fa fa-check"></i><b>2.4.1</b> Matching a single value</a></li>
<li class="chapter" data-level="2.4.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-multiple-values"><i class="fa fa-check"></i><b>2.4.2</b> Matching multiple values</a></li>
<li class="chapter" data-level="2.4.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#does-not-match"><i class="fa fa-check"></i><b>2.4.3</b> Does not match</a></li>
<li class="chapter" data-level="2.4.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#greater-than-or-less-than"><i class="fa fa-check"></i><b>2.4.4</b> Greater than or less than</a></li>
<li class="chapter" data-level="2.4.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#combining-conditional-statements---or-and"><i class="fa fa-check"></i><b>2.4.5</b> Combining conditional statements - or, and</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subsetting-a-data.frame"><i class="fa fa-check"></i><b>2.5</b> Subsetting a data.frame</a><ul>
<li class="chapter" data-level="2.5.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-columns"><i class="fa fa-check"></i><b>2.5.1</b> Select specific columns</a></li>
<li class="chapter" data-level="2.5.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-rows"><i class="fa fa-check"></i><b>2.5.2</b> Select specific rows</a></li>
<li class="chapter" data-level="2.5.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subset-colorado-data"><i class="fa fa-check"></i><b>2.5.3</b> Subset Colorado data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>3</b> Exploratory data analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="explore.html"><a href="explore.html#summary-and-table"><i class="fa fa-check"></i><b>3.1</b> Summary and Table</a></li>
<li class="chapter" data-level="3.2" data-path="explore.html"><a href="explore.html#graphing"><i class="fa fa-check"></i><b>3.2</b> Graphing</a></li>
<li class="chapter" data-level="3.3" data-path="explore.html"><a href="explore.html#aggregate"><i class="fa fa-check"></i><b>3.3</b> Aggregating (summaries of groups)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>4</b> Regular Expressions</a><ul>
<li class="chapter" data-level="4.1" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-patterns-in-text-with-grep"><i class="fa fa-check"></i><b>4.1</b> Finding patterns in text with <code>grep()</code></a></li>
<li class="chapter" data-level="4.2" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub"><i class="fa fa-check"></i><b>4.2</b> Finding and replacing patterns in text with <code>gsub()</code></a></li>
<li class="chapter" data-level="4.3" data-path="regular-expressions.html"><a href="regular-expressions.html#useful-special-characters"><i class="fa fa-check"></i><b>4.3</b> Useful special characters</a><ul>
<li class="chapter" data-level="4.3.1" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-characters"><i class="fa fa-check"></i><b>4.3.1</b> Multiple characters <code>[]</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-of-previous-character-n"><i class="fa fa-check"></i><b>4.3.2</b> n-many of previous character <code>{n}</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm"><i class="fa fa-check"></i><b>4.3.3</b> n-many to m-many of previous character <code>{n,m}</code></a></li>
<li class="chapter" data-level="4.3.4" data-path="regular-expressions.html"><a href="regular-expressions.html#start-of-string"><i class="fa fa-check"></i><b>4.3.4</b> Start of string</a></li>
<li class="chapter" data-level="4.3.5" data-path="regular-expressions.html"><a href="regular-expressions.html#end-of-string"><i class="fa fa-check"></i><b>4.3.5</b> End of string <code>$</code></a></li>
<li class="chapter" data-level="4.3.6" data-path="regular-expressions.html"><a href="regular-expressions.html#anything-."><i class="fa fa-check"></i><b>4.3.6</b> Anything <code>.</code></a></li>
<li class="chapter" data-level="4.3.7" data-path="regular-expressions.html"><a href="regular-expressions.html#one-or-more-of-previous"><i class="fa fa-check"></i><b>4.3.7</b> One or more of previous <code>+</code></a></li>
<li class="chapter" data-level="4.3.8" data-path="regular-expressions.html"><a href="regular-expressions.html#zero-or-more-of-previous"><i class="fa fa-check"></i><b>4.3.8</b> Zero or more of previous <code>*</code></a></li>
<li class="chapter" data-level="4.3.9" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-patterns"><i class="fa fa-check"></i><b>4.3.9</b> Multiple patterns <code>|</code></a></li>
<li class="chapter" data-level="4.3.10" data-path="regular-expressions.html"><a href="regular-expressions.html#parentheses"><i class="fa fa-check"></i><b>4.3.10</b> Parentheses <code>()</code></a></li>
<li class="chapter" data-level="4.3.11" data-path="regular-expressions.html"><a href="regular-expressions.html#optional-text"><i class="fa fa-check"></i><b>4.3.11</b> Optional text <code>?</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="regular-expressions.html"><a href="regular-expressions.html#changing-capitalization"><i class="fa fa-check"></i><b>4.4</b> Changing capitalization</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>5</b> Reading and Writing Data</a><ul>
<li class="chapter" data-level="5.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-data-into-r-1"><i class="fa fa-check"></i><b>5.1</b> Reading Data into R</a><ul>
<li class="chapter" data-level="5.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r"><i class="fa fa-check"></i><b>5.1.1</b> R</a></li>
<li class="chapter" data-level="5.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel"><i class="fa fa-check"></i><b>5.1.2</b> Excel</a></li>
<li class="chapter" data-level="5.1.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata"><i class="fa fa-check"></i><b>5.1.3</b> Stata</a></li>
<li class="chapter" data-level="5.1.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas"><i class="fa fa-check"></i><b>5.1.4</b> SAS</a></li>
<li class="chapter" data-level="5.1.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss"><i class="fa fa-check"></i><b>5.1.5</b> SPSS</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-data"><i class="fa fa-check"></i><b>5.2</b> Writing Data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-1"><i class="fa fa-check"></i><b>5.2.1</b> R</a></li>
<li class="chapter" data-level="5.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-1"><i class="fa fa-check"></i><b>5.2.2</b> Excel</a></li>
<li class="chapter" data-level="5.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-1"><i class="fa fa-check"></i><b>5.2.3</b> Stata</a></li>
<li class="chapter" data-level="5.2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-1"><i class="fa fa-check"></i><b>5.2.4</b> SAS</a></li>
<li class="chapter" data-level="5.2.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss-1"><i class="fa fa-check"></i><b>5.2.5</b> SPSS</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Visualize</b></span></li>
<li class="chapter" data-level="6" data-path="graphing-intro.html"><a href="graphing-intro.html"><i class="fa fa-check"></i><b>6</b> Graphing with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="6.1" data-path="graphing-intro.html"><a href="graphing-intro.html#what-does-the-data-look-like"><i class="fa fa-check"></i><b>6.1</b> What does the data look like?</a></li>
<li class="chapter" data-level="6.2" data-path="graphing-intro.html"><a href="graphing-intro.html#graphing-data"><i class="fa fa-check"></i><b>6.2</b> Graphing data</a></li>
<li class="chapter" data-level="6.3" data-path="graphing-intro.html"><a href="graphing-intro.html#time-series-plots"><i class="fa fa-check"></i><b>6.3</b> Time-Series Plots</a></li>
<li class="chapter" data-level="6.4" data-path="graphing-intro.html"><a href="graphing-intro.html#color-blindness"><i class="fa fa-check"></i><b>6.4</b> Color blindness</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="hotspot-maps.html"><a href="hotspot-maps.html"><i class="fa fa-check"></i><b>7</b> Hotspot maps</a><ul>
<li class="chapter" data-level="7.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#a-simple-map"><i class="fa fa-check"></i><b>7.1</b> A simple map</a></li>
<li class="chapter" data-level="7.2" data-path="hotspot-maps.html"><a href="hotspot-maps.html#what-really-are-maps"><i class="fa fa-check"></i><b>7.2</b> What really are maps?</a></li>
<li class="chapter" data-level="7.3" data-path="hotspot-maps.html"><a href="hotspot-maps.html#making-a-hotspot-map"><i class="fa fa-check"></i><b>7.3</b> Making a hotspot map</a><ul>
<li class="chapter" data-level="7.3.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#colors"><i class="fa fa-check"></i><b>7.3.1</b> Colors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="choropleth-maps.html"><a href="choropleth-maps.html"><i class="fa fa-check"></i><b>8</b> Choropleth maps</a><ul>
<li class="chapter" data-level="8.1" data-path="choropleth-maps.html"><a href="choropleth-maps.html#spatial-joins"><i class="fa fa-check"></i><b>8.1</b> Spatial joins</a></li>
<li class="chapter" data-level="8.2" data-path="choropleth-maps.html"><a href="choropleth-maps.html#making-choropleth-maps"><i class="fa fa-check"></i><b>8.2</b> Making choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>9</b> Interactive maps</a><ul>
<li class="chapter" data-level="9.1" data-path="interactive-maps.html"><a href="interactive-maps.html#why-do-interactive-graphs-matter"><i class="fa fa-check"></i><b>9.1</b> Why do interactive graphs matter?</a><ul>
<li class="chapter" data-level="9.1.1" data-path="interactive-maps.html"><a href="interactive-maps.html#understanding-your-data"><i class="fa fa-check"></i><b>9.1.1</b> Understanding your data</a></li>
<li class="chapter" data-level="9.1.2" data-path="interactive-maps.html"><a href="interactive-maps.html#police-departments-use-them"><i class="fa fa-check"></i><b>9.1.2</b> Police departments use them</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="interactive-maps.html"><a href="interactive-maps.html#making-the-interactive-map"><i class="fa fa-check"></i><b>9.2</b> Making the interactive map</a></li>
<li class="chapter" data-level="9.3" data-path="interactive-maps.html"><a href="interactive-maps.html#adding-popup-information"><i class="fa fa-check"></i><b>9.3</b> Adding popup information</a></li>
<li class="chapter" data-level="9.4" data-path="interactive-maps.html"><a href="interactive-maps.html#dealing-with-too-many-markers"><i class="fa fa-check"></i><b>9.4</b> Dealing with too many markers</a></li>
<li class="chapter" data-level="9.5" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-choropleth-maps"><i class="fa fa-check"></i><b>9.5</b> Interactive choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>10</b> R Markdown</a><ul>
<li class="chapter" data-level="10.1" data-path="r-markdown.html"><a href="r-markdown.html#code-1"><i class="fa fa-check"></i><b>10.1</b> Code</a><ul>
<li class="chapter" data-level="10.1.1" data-path="r-markdown.html"><a href="r-markdown.html#hiding-code-in-the-output"><i class="fa fa-check"></i><b>10.1.1</b> Hiding code in the output</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i><b>10.2</b> Tables</a></li>
<li class="chapter" data-level="10.3" data-path="r-markdown.html"><a href="r-markdown.html#making-the-output-file"><i class="fa fa-check"></i><b>10.3</b> Making the output file</a></li>
</ul></li>
<li class="part"><span><b>III Collect</b></span></li>
<li class="chapter" data-level="11" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html"><i class="fa fa-check"></i><b>11</b> Webscraping with <code>rvest</code></a><ul>
<li class="chapter" data-level="11.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#scraping-one-page"><i class="fa fa-check"></i><b>11.1</b> Scraping one page</a></li>
<li class="chapter" data-level="11.2" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#cleaning-the-webscraped-data"><i class="fa fa-check"></i><b>11.2</b> Cleaning the webscraped data</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>12</b> Functions</a><ul>
<li class="chapter" data-level="12.1" data-path="functions.html"><a href="functions.html#a-simple-function"><i class="fa fa-check"></i><b>12.1</b> A simple function</a></li>
<li class="chapter" data-level="12.2" data-path="functions.html"><a href="functions.html#adding-parameters"><i class="fa fa-check"></i><b>12.2</b> Adding parameters</a></li>
<li class="chapter" data-level="12.3" data-path="functions.html"><a href="functions.html#recipes-function"><i class="fa fa-check"></i><b>12.3</b> Making a function to scrape recipes</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>13</b> For loops</a><ul>
<li class="chapter" data-level="13.1" data-path="for-loops.html"><a href="for-loops.html#basic-for-loops"><i class="fa fa-check"></i><b>13.1</b> Basic for loops</a></li>
<li class="chapter" data-level="13.2" data-path="for-loops.html"><a href="for-loops.html#scraping-multiple-recipes"><i class="fa fa-check"></i><b>13.2</b> Scraping multiple recipes</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="scrape-table.html"><a href="scrape-table.html"><i class="fa fa-check"></i><b>14</b> Scraping tables from PDFs</a><ul>
<li class="chapter" data-level="14.1" data-path="scrape-table.html"><a href="scrape-table.html#scraping-the-first-table"><i class="fa fa-check"></i><b>14.1</b> Scraping the first table</a></li>
<li class="chapter" data-level="14.2" data-path="scrape-table.html"><a href="scrape-table.html#making-a-function"><i class="fa fa-check"></i><b>14.2</b> Making a function</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>15</b> Geocoding</a><ul>
<li class="chapter" data-level="15.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-a-single-address"><i class="fa fa-check"></i><b>15.1</b> Geocoding a single address</a></li>
<li class="chapter" data-level="15.2" data-path="geocoding.html"><a href="geocoding.html#making-a-function-1"><i class="fa fa-check"></i><b>15.2</b> Making a function</a></li>
<li class="chapter" data-level="15.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-san-francisco-marijuana-dispensary-locations"><i class="fa fa-check"></i><b>15.3</b> Geocoding San Francisco marijuana dispensary locations</a></li>
</ul></li>
<li class="part"><span><b>IV Data</b></span></li>
<li class="chapter" data-level="16" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>16</b> Introduction</a></li>
<li class="chapter" data-level="17" data-path="ucr.html"><a href="ucr.html"><i class="fa fa-check"></i><b>17</b> Uniform Crime Report (UCR) - Offenses Known and Clearances by Arrest</a><ul>
<li class="chapter" data-level="17.1" data-path="ucr.html"><a href="ucr.html#exploring-the-ucr-data"><i class="fa fa-check"></i><b>17.1</b> Exploring the UCR data</a></li>
<li class="chapter" data-level="17.2" data-path="ucr.html"><a href="ucr.html#oris---unique-agency-identifiers"><i class="fa fa-check"></i><b>17.2</b> ORIs - Unique agency identifiers</a></li>
<li class="chapter" data-level="17.3" data-path="ucr.html"><a href="ucr.html#hierarchy-rule"><i class="fa fa-check"></i><b>17.3</b> Hierarchy Rule</a></li>
<li class="chapter" data-level="17.4" data-path="ucr.html"><a href="ucr.html#which-crimes-are-included"><i class="fa fa-check"></i><b>17.4</b> Which crimes are included</a><ul>
<li class="chapter" data-level="17.4.1" data-path="ucr.html"><a href="ucr.html#index-crimes"><i class="fa fa-check"></i><b>17.4.1</b> Index Crimes</a></li>
<li class="chapter" data-level="17.4.2" data-path="ucr.html"><a href="ucr.html#the-problem-with-using-index-crimes"><i class="fa fa-check"></i><b>17.4.2</b> The problem with using index crimes</a></li>
<li class="chapter" data-level="17.4.3" data-path="ucr.html"><a href="ucr.html#rape-definition-change"><i class="fa fa-check"></i><b>17.4.3</b> Rape definition change</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="ucr.html"><a href="ucr.html#actual-offenses-clearances-and-unfounded-offenses"><i class="fa fa-check"></i><b>17.5</b> Actual offenses, clearances, and unfounded offenses</a><ul>
<li class="chapter" data-level="17.5.1" data-path="ucr.html"><a href="ucr.html#actual"><i class="fa fa-check"></i><b>17.5.1</b> Actual</a></li>
<li class="chapter" data-level="17.5.2" data-path="ucr.html"><a href="ucr.html#total-cleared"><i class="fa fa-check"></i><b>17.5.2</b> Total Cleared</a></li>
<li class="chapter" data-level="17.5.3" data-path="ucr.html"><a href="ucr.html#cleared-where-all-offenders-are-under-18"><i class="fa fa-check"></i><b>17.5.3</b> Cleared Where All Offenders Are Under 18</a></li>
<li class="chapter" data-level="17.5.4" data-path="ucr.html"><a href="ucr.html#unfounded"><i class="fa fa-check"></i><b>17.5.4</b> Unfounded</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="ucr.html"><a href="ucr.html#number-of-months-reported"><i class="fa fa-check"></i><b>17.6</b> Number of months reported</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="useful-resources.html"><a href="useful-resources.html"><i class="fa fa-check"></i><b>A</b> Useful resources</a><ul>
<li class="chapter" data-level="A.1" data-path="useful-resources.html"><a href="useful-resources.html#learning-r-and-coding-issues"><i class="fa fa-check"></i><b>A.1</b> Learning R and coding issues</a></li>
<li class="chapter" data-level="A.2" data-path="useful-resources.html"><a href="useful-resources.html#data-1"><i class="fa fa-check"></i><b>A.2</b> Data</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime by the Numbers</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regular-expressions" class="section level1">
<h1><span class="header-section-number">4</span> Regular Expressions</h1>
<p>Many word processing programs like Microsoft Word or Google Docs let you search for a pattern - usually a word or phrase - and it will show you where on the page that pattern appears. It also lets you replace that word or phrase with something new. R does the same using the function <code>grep()</code> to search for a pattern and tell you where in the data it appears, and <code>gsub()</code> which lets you search for a pattern and then replace it with a new pattern.</p>
<ul>
<li><code>grep()</code> - Find</li>
<li><code>gsub()</code> - Find and Replace</li>
</ul>
<p>The <code>grep()</code> function lets you find a pattern in the text and it will return a number saying which element has the pattern (basically which row has a match). <code>gsub()</code> lets you input a pattern to find and a pattern to replace it with, just like Find and Replace features elsewhere. You can remember the difference because <code>gsub()</code> has the word “sub” in it and what it does is substitute text with new text.</p>
<p>A useful cheat sheet on regular expressions is available <a href="https://www.rstudio.com/wp-content/uploads/2016/09/RegExCheatsheet.pdf">here</a>.</p>
<p>For this lesson we will use a vector of 50 crime categories. These are all of the crimes in San Francisco Police data. As you’ll see, there are some issues with the crime names that we need to fix.</p>
<pre class="sourceCode r"><code class="sourceCode r">crimes &lt;-<span class="st"> </span><span class="kw">c</span>(
  <span class="st">&quot;Arson&quot;</span>,
  <span class="st">&quot;Assault&quot;</span>,                                  
  <span class="st">&quot;Burglary&quot;</span>,                                 
  <span class="st">&quot;Case Closure&quot;</span>,                             
  <span class="st">&quot;Civil Sidewalks&quot;</span>,                          
  <span class="st">&quot;Courtesy Report&quot;</span>,                          
  <span class="st">&quot;Disorderly Conduct&quot;</span>,                       
  <span class="st">&quot;Drug Offense&quot;</span>,                             
  <span class="st">&quot;Drug Violation&quot;</span>,                           
  <span class="st">&quot;Embezzlement&quot;</span>,                             
  <span class="st">&quot;Family Offense&quot;</span>,                           
  <span class="st">&quot;Fire Report&quot;</span>,                              
  <span class="st">&quot;Forgery And Counterfeiting&quot;</span>,               
  <span class="st">&quot;Fraud&quot;</span>,                                    
  <span class="st">&quot;Gambling&quot;</span>,                                 
  <span class="st">&quot;Homicide&quot;</span>,                                 
  <span class="st">&quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>,
  <span class="st">&quot;Human Trafficking, Commercial Sex Acts&quot;</span>,   
  <span class="st">&quot;Juvenile Offenses&quot;</span>,                        
  <span class="st">&quot;Larceny Theft&quot;</span>,                            
  <span class="st">&quot;Liquor Laws&quot;</span>,                              
  <span class="st">&quot;Lost Property&quot;</span>,                            
  <span class="st">&quot;Malicious Mischief&quot;</span>,                       
  <span class="st">&quot;Miscellaneous Investigation&quot;</span>,              
  <span class="st">&quot;Missing Person&quot;</span>,                           
  <span class="st">&quot;Motor Vehicle Theft&quot;</span>,                      
  <span class="st">&quot;Motor Vehicle Theft?&quot;</span>,                     
  <span class="st">&quot;Non-Criminal&quot;</span>,                             
  <span class="st">&quot;Offences Against The Family And Children&quot;</span>, 
  <span class="st">&quot;Other&quot;</span>,                                    
  <span class="st">&quot;Other Miscellaneous&quot;</span>,                      
  <span class="st">&quot;Other Offenses&quot;</span>,                           
  <span class="st">&quot;Prostitution&quot;</span>,                             
  <span class="st">&quot;Rape&quot;</span>,                                     
  <span class="st">&quot;Recovered Vehicle&quot;</span>,                        
  <span class="st">&quot;Robbery&quot;</span>,                                  
  <span class="st">&quot;Sex Offense&quot;</span>,                              
  <span class="st">&quot;Stolen Property&quot;</span>,                          
  <span class="st">&quot;Suicide&quot;</span>,                                  
  <span class="st">&quot;Suspicious&quot;</span>,                               
  <span class="st">&quot;Suspicious Occ&quot;</span>,                           
  <span class="st">&quot;Traffic Collision&quot;</span>,                        
  <span class="st">&quot;Traffic Violation Arrest&quot;</span>,                 
  <span class="st">&quot;Vandalism&quot;</span>,                                
  <span class="st">&quot;Vehicle Impounded&quot;</span>,                        
  <span class="st">&quot;Vehicle Misplaced&quot;</span>,                        
  <span class="st">&quot;Warrant&quot;</span>,                                  
  <span class="st">&quot;Weapons Carrying Etc&quot;</span>,                     
  <span class="st">&quot;Weapons Offence&quot;</span>,                          
  <span class="st">&quot;Weapons Offense&quot;</span>
)</code></pre>
<p>When looking closely at these crimes it is clear that some may overlap in certain categories such as theft, and there are several duplicates with slight differences in spelling. For example the last two crimes are “Weapons Offence” and “Weapons Offense”. These should be the same crime but the first one spelled “offense” wrong. And take a look at “motor vehicle theft”. There are two crimes here because one of them adds a question mark at the end for some reason.</p>
<div id="finding-patterns-in-text-with-grep" class="section level2">
<h2><span class="header-section-number">4.1</span> Finding patterns in text with <code>grep()</code></h2>
<p>We’ll start with <code>grep()</code> which allows us to search a vector of data (in R columns in a data.frame operate the same as a vector) and find where there is a match for the pattern we want to look for.</p>
<p>The syntax for <code>grep()</code> is</p>
<p><code>grep("pattern", data)</code></p>
<p>Where pattern is the pattern you are searching for, such as “a” if you want to find all values with the letter a. The pattern must always be in quotes. data is a vector of strings (such as “crimes” we made above or a column in a data.frame) that you are searching in to find the pattern.</p>
<p>The output of this function is a number which says which element(s) in the vector the pattern was found in. If it returns, for example, the numbers 1 and 3 you know that the first and third element in your vector has the pattern - and no other elements do. It is essentially returning the index where the conditional statement “is this pattern present” is true.</p>
<p>So since our data is “crimes” our <code>grep()</code> function will be <code>grep("", crimes)</code>. What we put in the "" is the pattern we want to search for.</p>
<p>Let’s start with the letter “a”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;a&quot;</span>, crimes)
<span class="co">#&gt;  [1]  2  3  4  5  9 11 14 15 17 18 20 21 23 24 28 29 31 34 42 43 44 46 47</span>
<span class="co">#&gt; [24] 48 49 50</span></code></pre>
<p>It gives us a bunch of numbers where the letter “a” is present in that element of “crimes”. What this is useful for is subsetting. We can use <code>grep()</code> to find all values that match a pattern we want and subset to keep just those values.</p>
<pre class="sourceCode r"><code class="sourceCode r">crimes[<span class="kw">grep</span>(<span class="st">&quot;a&quot;</span>, crimes)]
<span class="co">#&gt;  [1] &quot;Assault&quot;                                   </span>
<span class="co">#&gt;  [2] &quot;Burglary&quot;                                  </span>
<span class="co">#&gt;  [3] &quot;Case Closure&quot;                              </span>
<span class="co">#&gt;  [4] &quot;Civil Sidewalks&quot;                           </span>
<span class="co">#&gt;  [5] &quot;Drug Violation&quot;                            </span>
<span class="co">#&gt;  [6] &quot;Family Offense&quot;                            </span>
<span class="co">#&gt;  [7] &quot;Fraud&quot;                                     </span>
<span class="co">#&gt;  [8] &quot;Gambling&quot;                                  </span>
<span class="co">#&gt;  [9] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt; [10] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt; [11] &quot;Larceny Theft&quot;                             </span>
<span class="co">#&gt; [12] &quot;Liquor Laws&quot;                               </span>
<span class="co">#&gt; [13] &quot;Malicious Mischief&quot;                        </span>
<span class="co">#&gt; [14] &quot;Miscellaneous Investigation&quot;               </span>
<span class="co">#&gt; [15] &quot;Non-Criminal&quot;                              </span>
<span class="co">#&gt; [16] &quot;Offences Against The Family And Children&quot;  </span>
<span class="co">#&gt; [17] &quot;Other Miscellaneous&quot;                       </span>
<span class="co">#&gt; [18] &quot;Rape&quot;                                      </span>
<span class="co">#&gt; [19] &quot;Traffic Collision&quot;                         </span>
<span class="co">#&gt; [20] &quot;Traffic Violation Arrest&quot;                  </span>
<span class="co">#&gt; [21] &quot;Vandalism&quot;                                 </span>
<span class="co">#&gt; [22] &quot;Vehicle Misplaced&quot;                         </span>
<span class="co">#&gt; [23] &quot;Warrant&quot;                                   </span>
<span class="co">#&gt; [24] &quot;Weapons Carrying Etc&quot;                      </span>
<span class="co">#&gt; [25] &quot;Weapons Offence&quot;                           </span>
<span class="co">#&gt; [26] &quot;Weapons Offense&quot;</span></code></pre>
<p>Searching for the letter “a” isn’t that useful. Let’s say we want to subset the data to only include theft related crimes. From reading the list of crimes we can see there are multiple theft crimes - “Larceny Theft”, “Motor Vehicle Theft”, and “Motor Vehicle Theft?”. We may also want to include “Stolen Property” in this search but we’ll wait until later in this lesson for how to search for multiple patterns. Since those three crimes all have the word “Theft” in the name we can search for the pattern and it will return only those crimes</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;Theft&quot;</span>, crimes)
<span class="co">#&gt; [1] 20 26 27</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r">crimes[<span class="kw">grep</span>(<span class="st">&quot;Theft&quot;</span>, crimes)]
<span class="co">#&gt; [1] &quot;Larceny Theft&quot;        &quot;Motor Vehicle Theft&quot;  &quot;Motor Vehicle Theft?&quot;</span></code></pre>
<p>A very useful parameter is <code>value</code>. When we set <code>value</code> to TRUE, it will print out the actual strings that are a match rather than the element number. While this prevents us from using it to subset (since R no longer knows which rows are a match), it is an excellent tool to check if the <code>grep()</code> was successful as we can visually confirm it returns what we want. When we start to learn about special characters which make the patterns more complicated, this will be important.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;Theft&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Larceny Theft&quot;        &quot;Motor Vehicle Theft&quot;  &quot;Motor Vehicle Theft?&quot;</span></code></pre>
<p>Note that <code>grep()</code> (and <code>gsub()</code>) is case sensitive so you must capitalize properly.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;theft&quot;</span>, <span class="dt">value =</span> <span class="ot">TRUE</span>, crimes)
<span class="co">#&gt; character(0)</span></code></pre>
<p>Setting the parameter <code>ignore.case</code> to be TRUE makes <code>grep()</code> ignore capitalization.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;theft&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Larceny Theft&quot;        &quot;Motor Vehicle Theft&quot;  &quot;Motor Vehicle Theft?&quot;</span></code></pre>
<p>If we want to find values which do <em>not</em> match with “theft”, we can set the parameter <code>invert</code> to TRUE.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;theft&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>, <span class="dt">invert =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;  [1] &quot;Arson&quot;                                     </span>
<span class="co">#&gt;  [2] &quot;Assault&quot;                                   </span>
<span class="co">#&gt;  [3] &quot;Burglary&quot;                                  </span>
<span class="co">#&gt;  [4] &quot;Case Closure&quot;                              </span>
<span class="co">#&gt;  [5] &quot;Civil Sidewalks&quot;                           </span>
<span class="co">#&gt;  [6] &quot;Courtesy Report&quot;                           </span>
<span class="co">#&gt;  [7] &quot;Disorderly Conduct&quot;                        </span>
<span class="co">#&gt;  [8] &quot;Drug Offense&quot;                              </span>
<span class="co">#&gt;  [9] &quot;Drug Violation&quot;                            </span>
<span class="co">#&gt; [10] &quot;Embezzlement&quot;                              </span>
<span class="co">#&gt; [11] &quot;Family Offense&quot;                            </span>
<span class="co">#&gt; [12] &quot;Fire Report&quot;                               </span>
<span class="co">#&gt; [13] &quot;Forgery And Counterfeiting&quot;                </span>
<span class="co">#&gt; [14] &quot;Fraud&quot;                                     </span>
<span class="co">#&gt; [15] &quot;Gambling&quot;                                  </span>
<span class="co">#&gt; [16] &quot;Homicide&quot;                                  </span>
<span class="co">#&gt; [17] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt; [18] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt; [19] &quot;Juvenile Offenses&quot;                         </span>
<span class="co">#&gt; [20] &quot;Liquor Laws&quot;                               </span>
<span class="co">#&gt; [21] &quot;Lost Property&quot;                             </span>
<span class="co">#&gt; [22] &quot;Malicious Mischief&quot;                        </span>
<span class="co">#&gt; [23] &quot;Miscellaneous Investigation&quot;               </span>
<span class="co">#&gt; [24] &quot;Missing Person&quot;                            </span>
<span class="co">#&gt; [25] &quot;Non-Criminal&quot;                              </span>
<span class="co">#&gt; [26] &quot;Offences Against The Family And Children&quot;  </span>
<span class="co">#&gt; [27] &quot;Other&quot;                                     </span>
<span class="co">#&gt; [28] &quot;Other Miscellaneous&quot;                       </span>
<span class="co">#&gt; [29] &quot;Other Offenses&quot;                            </span>
<span class="co">#&gt; [30] &quot;Prostitution&quot;                              </span>
<span class="co">#&gt; [31] &quot;Rape&quot;                                      </span>
<span class="co">#&gt; [32] &quot;Recovered Vehicle&quot;                         </span>
<span class="co">#&gt; [33] &quot;Robbery&quot;                                   </span>
<span class="co">#&gt; [34] &quot;Sex Offense&quot;                               </span>
<span class="co">#&gt; [35] &quot;Stolen Property&quot;                           </span>
<span class="co">#&gt; [36] &quot;Suicide&quot;                                   </span>
<span class="co">#&gt; [37] &quot;Suspicious&quot;                                </span>
<span class="co">#&gt; [38] &quot;Suspicious Occ&quot;                            </span>
<span class="co">#&gt; [39] &quot;Traffic Collision&quot;                         </span>
<span class="co">#&gt; [40] &quot;Traffic Violation Arrest&quot;                  </span>
<span class="co">#&gt; [41] &quot;Vandalism&quot;                                 </span>
<span class="co">#&gt; [42] &quot;Vehicle Impounded&quot;                         </span>
<span class="co">#&gt; [43] &quot;Vehicle Misplaced&quot;                         </span>
<span class="co">#&gt; [44] &quot;Warrant&quot;                                   </span>
<span class="co">#&gt; [45] &quot;Weapons Carrying Etc&quot;                      </span>
<span class="co">#&gt; [46] &quot;Weapons Offence&quot;                           </span>
<span class="co">#&gt; [47] &quot;Weapons Offense&quot;</span></code></pre>
</div>
<div id="finding-and-replacing-patterns-in-text-with-gsub" class="section level2">
<h2><span class="header-section-number">4.2</span> Finding and replacing patterns in text with <code>gsub()</code></h2>
<p><code>gsub()</code> takes patterns and replaces them with other patterns. An important use in criminology for <code>gsub()</code> is to fix spelling mistakes in the text such as the way “offense” was spelled wrong in our data. This will be a standard part of your data cleaning process and is important as a misspelled word can cause significant issues. For example if our previous example of marijuana legalization in Colorado had half of agencies misspelling the name “Colorado”, aggregating the data by the state (or simply subsetting to just Colorado agencies) would give completely different results as you’d lose half your data.</p>
<p><code>gsub()</code> is also useful when you want to take subcategories and change the value to larger categories. For example we could take any crime with the word “Theft” in it and change the whole crime name to “Theft”. In our data that would take 3 subcategories of thefts and turn it into a larger category we could aggregate to. This will be useful in city-level data where you may only care about a certain type of crime but it has many subcategories that you need to aggregate.</p>
<p>The syntax of <code>gsub()</code> is similar to <code>grep()</code> with the addition of a pattern to replace the pattern we found.</p>
<p><code>gsub("find_pattern", "replace_pattern", data)</code></p>
<p>Let’s start with a simple example of finding the letter “a” and replacing it with “z”. Our data will be the word “cat”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;cat&quot;</span>)
<span class="co">#&gt; [1] &quot;czt&quot;</span></code></pre>
<p>Like <code>grep()</code>, <code>gsub()</code> is case sensitive and has the parameter <code>ignore.case</code> to ignore capitalization.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;cat&quot;</span>)
<span class="co">#&gt; [1] &quot;cat&quot;</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;cat&quot;</span>, <span class="dt">ignore.case =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;czt&quot;</span></code></pre>
<p><code>gsub()</code> returns the same data you input but with the pattern already replaced. Above you can see that when using capital A, it returns “cat” unchanged as it never found the pattern. When <code>ignore.case</code> was set to TRUE it returned “czt” as it then matched to letter “A”.</p>
<p>We can use <code>gsub()</code> to replace some issues in the crimes data such as “Offense” being spelled “Offence”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;Offence&quot;</span>, <span class="st">&quot;Offense&quot;</span>, crimes)
<span class="co">#&gt;  [1] &quot;Arson&quot;                                     </span>
<span class="co">#&gt;  [2] &quot;Assault&quot;                                   </span>
<span class="co">#&gt;  [3] &quot;Burglary&quot;                                  </span>
<span class="co">#&gt;  [4] &quot;Case Closure&quot;                              </span>
<span class="co">#&gt;  [5] &quot;Civil Sidewalks&quot;                           </span>
<span class="co">#&gt;  [6] &quot;Courtesy Report&quot;                           </span>
<span class="co">#&gt;  [7] &quot;Disorderly Conduct&quot;                        </span>
<span class="co">#&gt;  [8] &quot;Drug Offense&quot;                              </span>
<span class="co">#&gt;  [9] &quot;Drug Violation&quot;                            </span>
<span class="co">#&gt; [10] &quot;Embezzlement&quot;                              </span>
<span class="co">#&gt; [11] &quot;Family Offense&quot;                            </span>
<span class="co">#&gt; [12] &quot;Fire Report&quot;                               </span>
<span class="co">#&gt; [13] &quot;Forgery And Counterfeiting&quot;                </span>
<span class="co">#&gt; [14] &quot;Fraud&quot;                                     </span>
<span class="co">#&gt; [15] &quot;Gambling&quot;                                  </span>
<span class="co">#&gt; [16] &quot;Homicide&quot;                                  </span>
<span class="co">#&gt; [17] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt; [18] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt; [19] &quot;Juvenile Offenses&quot;                         </span>
<span class="co">#&gt; [20] &quot;Larceny Theft&quot;                             </span>
<span class="co">#&gt; [21] &quot;Liquor Laws&quot;                               </span>
<span class="co">#&gt; [22] &quot;Lost Property&quot;                             </span>
<span class="co">#&gt; [23] &quot;Malicious Mischief&quot;                        </span>
<span class="co">#&gt; [24] &quot;Miscellaneous Investigation&quot;               </span>
<span class="co">#&gt; [25] &quot;Missing Person&quot;                            </span>
<span class="co">#&gt; [26] &quot;Motor Vehicle Theft&quot;                       </span>
<span class="co">#&gt; [27] &quot;Motor Vehicle Theft?&quot;                      </span>
<span class="co">#&gt; [28] &quot;Non-Criminal&quot;                              </span>
<span class="co">#&gt; [29] &quot;Offenses Against The Family And Children&quot;  </span>
<span class="co">#&gt; [30] &quot;Other&quot;                                     </span>
<span class="co">#&gt; [31] &quot;Other Miscellaneous&quot;                       </span>
<span class="co">#&gt; [32] &quot;Other Offenses&quot;                            </span>
<span class="co">#&gt; [33] &quot;Prostitution&quot;                              </span>
<span class="co">#&gt; [34] &quot;Rape&quot;                                      </span>
<span class="co">#&gt; [35] &quot;Recovered Vehicle&quot;                         </span>
<span class="co">#&gt; [36] &quot;Robbery&quot;                                   </span>
<span class="co">#&gt; [37] &quot;Sex Offense&quot;                               </span>
<span class="co">#&gt; [38] &quot;Stolen Property&quot;                           </span>
<span class="co">#&gt; [39] &quot;Suicide&quot;                                   </span>
<span class="co">#&gt; [40] &quot;Suspicious&quot;                                </span>
<span class="co">#&gt; [41] &quot;Suspicious Occ&quot;                            </span>
<span class="co">#&gt; [42] &quot;Traffic Collision&quot;                         </span>
<span class="co">#&gt; [43] &quot;Traffic Violation Arrest&quot;                  </span>
<span class="co">#&gt; [44] &quot;Vandalism&quot;                                 </span>
<span class="co">#&gt; [45] &quot;Vehicle Impounded&quot;                         </span>
<span class="co">#&gt; [46] &quot;Vehicle Misplaced&quot;                         </span>
<span class="co">#&gt; [47] &quot;Warrant&quot;                                   </span>
<span class="co">#&gt; [48] &quot;Weapons Carrying Etc&quot;                      </span>
<span class="co">#&gt; [49] &quot;Weapons Offense&quot;                           </span>
<span class="co">#&gt; [50] &quot;Weapons Offense&quot;</span></code></pre>
<p>A useful pattern is an empty string "" which says replace whatever the find_pattern is with nothing, deleting it. Let’s delete the letter “a” from the data.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;&quot;</span>, crimes)
<span class="co">#&gt;  [1] &quot;Arson&quot;                                  </span>
<span class="co">#&gt;  [2] &quot;Assult&quot;                                 </span>
<span class="co">#&gt;  [3] &quot;Burglry&quot;                                </span>
<span class="co">#&gt;  [4] &quot;Cse Closure&quot;                            </span>
<span class="co">#&gt;  [5] &quot;Civil Sidewlks&quot;                         </span>
<span class="co">#&gt;  [6] &quot;Courtesy Report&quot;                        </span>
<span class="co">#&gt;  [7] &quot;Disorderly Conduct&quot;                     </span>
<span class="co">#&gt;  [8] &quot;Drug Offense&quot;                           </span>
<span class="co">#&gt;  [9] &quot;Drug Violtion&quot;                          </span>
<span class="co">#&gt; [10] &quot;Embezzlement&quot;                           </span>
<span class="co">#&gt; [11] &quot;Fmily Offense&quot;                          </span>
<span class="co">#&gt; [12] &quot;Fire Report&quot;                            </span>
<span class="co">#&gt; [13] &quot;Forgery And Counterfeiting&quot;             </span>
<span class="co">#&gt; [14] &quot;Frud&quot;                                   </span>
<span class="co">#&gt; [15] &quot;Gmbling&quot;                                </span>
<span class="co">#&gt; [16] &quot;Homicide&quot;                               </span>
<span class="co">#&gt; [17] &quot;Humn Trfficking (A), Commercil Sex Acts&quot;</span>
<span class="co">#&gt; [18] &quot;Humn Trfficking, Commercil Sex Acts&quot;    </span>
<span class="co">#&gt; [19] &quot;Juvenile Offenses&quot;                      </span>
<span class="co">#&gt; [20] &quot;Lrceny Theft&quot;                           </span>
<span class="co">#&gt; [21] &quot;Liquor Lws&quot;                             </span>
<span class="co">#&gt; [22] &quot;Lost Property&quot;                          </span>
<span class="co">#&gt; [23] &quot;Mlicious Mischief&quot;                      </span>
<span class="co">#&gt; [24] &quot;Miscellneous Investigtion&quot;              </span>
<span class="co">#&gt; [25] &quot;Missing Person&quot;                         </span>
<span class="co">#&gt; [26] &quot;Motor Vehicle Theft&quot;                    </span>
<span class="co">#&gt; [27] &quot;Motor Vehicle Theft?&quot;                   </span>
<span class="co">#&gt; [28] &quot;Non-Criminl&quot;                            </span>
<span class="co">#&gt; [29] &quot;Offences Aginst The Fmily And Children&quot; </span>
<span class="co">#&gt; [30] &quot;Other&quot;                                  </span>
<span class="co">#&gt; [31] &quot;Other Miscellneous&quot;                     </span>
<span class="co">#&gt; [32] &quot;Other Offenses&quot;                         </span>
<span class="co">#&gt; [33] &quot;Prostitution&quot;                           </span>
<span class="co">#&gt; [34] &quot;Rpe&quot;                                    </span>
<span class="co">#&gt; [35] &quot;Recovered Vehicle&quot;                      </span>
<span class="co">#&gt; [36] &quot;Robbery&quot;                                </span>
<span class="co">#&gt; [37] &quot;Sex Offense&quot;                            </span>
<span class="co">#&gt; [38] &quot;Stolen Property&quot;                        </span>
<span class="co">#&gt; [39] &quot;Suicide&quot;                                </span>
<span class="co">#&gt; [40] &quot;Suspicious&quot;                             </span>
<span class="co">#&gt; [41] &quot;Suspicious Occ&quot;                         </span>
<span class="co">#&gt; [42] &quot;Trffic Collision&quot;                       </span>
<span class="co">#&gt; [43] &quot;Trffic Violtion Arrest&quot;                 </span>
<span class="co">#&gt; [44] &quot;Vndlism&quot;                                </span>
<span class="co">#&gt; [45] &quot;Vehicle Impounded&quot;                      </span>
<span class="co">#&gt; [46] &quot;Vehicle Misplced&quot;                       </span>
<span class="co">#&gt; [47] &quot;Wrrnt&quot;                                  </span>
<span class="co">#&gt; [48] &quot;Wepons Crrying Etc&quot;                     </span>
<span class="co">#&gt; [49] &quot;Wepons Offence&quot;                         </span>
<span class="co">#&gt; [50] &quot;Wepons Offense&quot;</span></code></pre>
</div>
<div id="useful-special-characters" class="section level2">
<h2><span class="header-section-number">4.3</span> Useful special characters</h2>
<p>So far we have just searched for a single character or word and expected a return only if an exact match was found. Now we’ll discuss a number of characters called “special characters” that allow us to make more complex <code>grep()</code> and <code>gsub()</code> pattern searches.</p>
<div id="multiple-characters" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Multiple characters <code>[]</code></h3>
<p>To search for multiple matches we can put the pattern we want to search for inside square brackets <code>[]</code> (note that we use the same square brackets for subsetting but they operate very differently in this context). For example, we can find all the crimes that contain vowels.</p>
<p>The <code>grep()</code> searches if any of the letters inside of the <code>[]</code> are present in our “crimes” vector.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[xyz]&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;  [1] &quot;Burglary&quot;                                  </span>
<span class="co">#&gt;  [2] &quot;Courtesy Report&quot;                           </span>
<span class="co">#&gt;  [3] &quot;Disorderly Conduct&quot;                        </span>
<span class="co">#&gt;  [4] &quot;Embezzlement&quot;                              </span>
<span class="co">#&gt;  [5] &quot;Family Offense&quot;                            </span>
<span class="co">#&gt;  [6] &quot;Forgery And Counterfeiting&quot;                </span>
<span class="co">#&gt;  [7] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt;  [8] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt;  [9] &quot;Larceny Theft&quot;                             </span>
<span class="co">#&gt; [10] &quot;Lost Property&quot;                             </span>
<span class="co">#&gt; [11] &quot;Offences Against The Family And Children&quot;  </span>
<span class="co">#&gt; [12] &quot;Robbery&quot;                                   </span>
<span class="co">#&gt; [13] &quot;Sex Offense&quot;                               </span>
<span class="co">#&gt; [14] &quot;Stolen Property&quot;                           </span>
<span class="co">#&gt; [15] &quot;Weapons Carrying Etc&quot;</span></code></pre>
<p>As it searches for any letter inside of the square brackets, the order does not matter.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[zyx]&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;  [1] &quot;Burglary&quot;                                  </span>
<span class="co">#&gt;  [2] &quot;Courtesy Report&quot;                           </span>
<span class="co">#&gt;  [3] &quot;Disorderly Conduct&quot;                        </span>
<span class="co">#&gt;  [4] &quot;Embezzlement&quot;                              </span>
<span class="co">#&gt;  [5] &quot;Family Offense&quot;                            </span>
<span class="co">#&gt;  [6] &quot;Forgery And Counterfeiting&quot;                </span>
<span class="co">#&gt;  [7] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt;  [8] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt;  [9] &quot;Larceny Theft&quot;                             </span>
<span class="co">#&gt; [10] &quot;Lost Property&quot;                             </span>
<span class="co">#&gt; [11] &quot;Offences Against The Family And Children&quot;  </span>
<span class="co">#&gt; [12] &quot;Robbery&quot;                                   </span>
<span class="co">#&gt; [13] &quot;Sex Offense&quot;                               </span>
<span class="co">#&gt; [14] &quot;Stolen Property&quot;                           </span>
<span class="co">#&gt; [15] &quot;Weapons Carrying Etc&quot;</span></code></pre>
<p>This also works for numbers though we do not have any numbers in the data.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[01234567890]&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; character(0)</span></code></pre>
<p>If we wanted to search for a pattern, such as vowels, that is repeated we could put multiple <code>[]</code> patterns together. We will see another way to search for a repeated pattern soon.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[aeiou][aeiou][aeiou]&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span>
<span class="co">#&gt; [3] &quot;Other Miscellaneous&quot;         &quot;Suspicious&quot;                 </span>
<span class="co">#&gt; [5] &quot;Suspicious Occ&quot;</span></code></pre>
<p>Inside the <code>[]</code> we can also use the - to make intervals between certain values. For numbers, n-m means any number between n and m (inclusive). For letters, a-z means all lowercase letters and A-Z means all uppercase letters in that range (inclusive).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[x-z]&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;  [1] &quot;Burglary&quot;                                  </span>
<span class="co">#&gt;  [2] &quot;Courtesy Report&quot;                           </span>
<span class="co">#&gt;  [3] &quot;Disorderly Conduct&quot;                        </span>
<span class="co">#&gt;  [4] &quot;Embezzlement&quot;                              </span>
<span class="co">#&gt;  [5] &quot;Family Offense&quot;                            </span>
<span class="co">#&gt;  [6] &quot;Forgery And Counterfeiting&quot;                </span>
<span class="co">#&gt;  [7] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt;  [8] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt;  [9] &quot;Larceny Theft&quot;                             </span>
<span class="co">#&gt; [10] &quot;Lost Property&quot;                             </span>
<span class="co">#&gt; [11] &quot;Offences Against The Family And Children&quot;  </span>
<span class="co">#&gt; [12] &quot;Robbery&quot;                                   </span>
<span class="co">#&gt; [13] &quot;Sex Offense&quot;                               </span>
<span class="co">#&gt; [14] &quot;Stolen Property&quot;                           </span>
<span class="co">#&gt; [15] &quot;Weapons Carrying Etc&quot;</span></code></pre>
</div>
<div id="n-many-of-previous-character-n" class="section level3">
<h3><span class="header-section-number">4.3.2</span> n-many of previous character <code>{n}</code></h3>
<p><code>{n}</code> means the preceding item will be matched exactly n times.</p>
<p>We can use it to rewrite the above <code>grep()</code> to saw the values in the <code>[]</code> should be repeated three times.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[aeiou]{3}&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span>
<span class="co">#&gt; [3] &quot;Other Miscellaneous&quot;         &quot;Suspicious&quot;                 </span>
<span class="co">#&gt; [5] &quot;Suspicious Occ&quot;</span></code></pre>
</div>
<div id="n-many-to-m-many-of-previous-character-nm" class="section level3">
<h3><span class="header-section-number">4.3.3</span> n-many to m-many of previous character <code>{n,m}</code></h3>
<p>While <code>{n}</code> says “the previous character (or characters inside a <code>[]</code>) must be present exactly n times”, we can allow a range by using <code>{n,m}</code>. Here the previous character must be present between n and m times.</p>
<p>We can check for values where there are 2-3 vowels in a row. Note that there cannot be a space before or after the comma.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[aeiou]{2,3}&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;  [1] &quot;Assault&quot;                                   </span>
<span class="co">#&gt;  [2] &quot;Courtesy Report&quot;                           </span>
<span class="co">#&gt;  [3] &quot;Drug Violation&quot;                            </span>
<span class="co">#&gt;  [4] &quot;Forgery And Counterfeiting&quot;                </span>
<span class="co">#&gt;  [5] &quot;Fraud&quot;                                     </span>
<span class="co">#&gt;  [6] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt;  [7] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt;  [8] &quot;Liquor Laws&quot;                               </span>
<span class="co">#&gt;  [9] &quot;Malicious Mischief&quot;                        </span>
<span class="co">#&gt; [10] &quot;Miscellaneous Investigation&quot;               </span>
<span class="co">#&gt; [11] &quot;Offences Against The Family And Children&quot;  </span>
<span class="co">#&gt; [12] &quot;Other Miscellaneous&quot;                       </span>
<span class="co">#&gt; [13] &quot;Prostitution&quot;                              </span>
<span class="co">#&gt; [14] &quot;Suicide&quot;                                   </span>
<span class="co">#&gt; [15] &quot;Suspicious&quot;                                </span>
<span class="co">#&gt; [16] &quot;Suspicious Occ&quot;                            </span>
<span class="co">#&gt; [17] &quot;Traffic Collision&quot;                         </span>
<span class="co">#&gt; [18] &quot;Traffic Violation Arrest&quot;                  </span>
<span class="co">#&gt; [19] &quot;Vehicle Impounded&quot;                         </span>
<span class="co">#&gt; [20] &quot;Weapons Carrying Etc&quot;                      </span>
<span class="co">#&gt; [21] &quot;Weapons Offence&quot;                           </span>
<span class="co">#&gt; [22] &quot;Weapons Offense&quot;</span></code></pre>
<p>If we wanted only crimes with exactly three vowels in a row we’d use <code>{3,3}</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[aeiou]{3,3}&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span>
<span class="co">#&gt; [3] &quot;Other Miscellaneous&quot;         &quot;Suspicious&quot;                 </span>
<span class="co">#&gt; [5] &quot;Suspicious Occ&quot;</span></code></pre>
<p>If we leave n blank, such as <code>{,m}</code> it says “previous character must be present up to m times”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[aeiou]{,3}&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;  [1] &quot;Arson&quot;                                     </span>
<span class="co">#&gt;  [2] &quot;Assault&quot;                                   </span>
<span class="co">#&gt;  [3] &quot;Burglary&quot;                                  </span>
<span class="co">#&gt;  [4] &quot;Case Closure&quot;                              </span>
<span class="co">#&gt;  [5] &quot;Civil Sidewalks&quot;                           </span>
<span class="co">#&gt;  [6] &quot;Courtesy Report&quot;                           </span>
<span class="co">#&gt;  [7] &quot;Disorderly Conduct&quot;                        </span>
<span class="co">#&gt;  [8] &quot;Drug Offense&quot;                              </span>
<span class="co">#&gt;  [9] &quot;Drug Violation&quot;                            </span>
<span class="co">#&gt; [10] &quot;Embezzlement&quot;                              </span>
<span class="co">#&gt; [11] &quot;Family Offense&quot;                            </span>
<span class="co">#&gt; [12] &quot;Fire Report&quot;                               </span>
<span class="co">#&gt; [13] &quot;Forgery And Counterfeiting&quot;                </span>
<span class="co">#&gt; [14] &quot;Fraud&quot;                                     </span>
<span class="co">#&gt; [15] &quot;Gambling&quot;                                  </span>
<span class="co">#&gt; [16] &quot;Homicide&quot;                                  </span>
<span class="co">#&gt; [17] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt; [18] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt; [19] &quot;Juvenile Offenses&quot;                         </span>
<span class="co">#&gt; [20] &quot;Larceny Theft&quot;                             </span>
<span class="co">#&gt; [21] &quot;Liquor Laws&quot;                               </span>
<span class="co">#&gt; [22] &quot;Lost Property&quot;                             </span>
<span class="co">#&gt; [23] &quot;Malicious Mischief&quot;                        </span>
<span class="co">#&gt; [24] &quot;Miscellaneous Investigation&quot;               </span>
<span class="co">#&gt; [25] &quot;Missing Person&quot;                            </span>
<span class="co">#&gt; [26] &quot;Motor Vehicle Theft&quot;                       </span>
<span class="co">#&gt; [27] &quot;Motor Vehicle Theft?&quot;                      </span>
<span class="co">#&gt; [28] &quot;Non-Criminal&quot;                              </span>
<span class="co">#&gt; [29] &quot;Offences Against The Family And Children&quot;  </span>
<span class="co">#&gt; [30] &quot;Other&quot;                                     </span>
<span class="co">#&gt; [31] &quot;Other Miscellaneous&quot;                       </span>
<span class="co">#&gt; [32] &quot;Other Offenses&quot;                            </span>
<span class="co">#&gt; [33] &quot;Prostitution&quot;                              </span>
<span class="co">#&gt; [34] &quot;Rape&quot;                                      </span>
<span class="co">#&gt; [35] &quot;Recovered Vehicle&quot;                         </span>
<span class="co">#&gt; [36] &quot;Robbery&quot;                                   </span>
<span class="co">#&gt; [37] &quot;Sex Offense&quot;                               </span>
<span class="co">#&gt; [38] &quot;Stolen Property&quot;                           </span>
<span class="co">#&gt; [39] &quot;Suicide&quot;                                   </span>
<span class="co">#&gt; [40] &quot;Suspicious&quot;                                </span>
<span class="co">#&gt; [41] &quot;Suspicious Occ&quot;                            </span>
<span class="co">#&gt; [42] &quot;Traffic Collision&quot;                         </span>
<span class="co">#&gt; [43] &quot;Traffic Violation Arrest&quot;                  </span>
<span class="co">#&gt; [44] &quot;Vandalism&quot;                                 </span>
<span class="co">#&gt; [45] &quot;Vehicle Impounded&quot;                         </span>
<span class="co">#&gt; [46] &quot;Vehicle Misplaced&quot;                         </span>
<span class="co">#&gt; [47] &quot;Warrant&quot;                                   </span>
<span class="co">#&gt; [48] &quot;Weapons Carrying Etc&quot;                      </span>
<span class="co">#&gt; [49] &quot;Weapons Offence&quot;                           </span>
<span class="co">#&gt; [50] &quot;Weapons Offense&quot;</span></code></pre>
<p>This returns every crime as “up to m times” includes zero times.</p>
<p>And the same works for leaving m blank but it will be “present at least n times”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;[aeiou]{3,}&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span>
<span class="co">#&gt; [3] &quot;Other Miscellaneous&quot;         &quot;Suspicious&quot;                 </span>
<span class="co">#&gt; [5] &quot;Suspicious Occ&quot;</span></code></pre>
</div>
<div id="start-of-string" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Start of string</h3>
<p>The <code>^</code> symbol (called a caret) signifies that what follows it is the start of the string. We put the <code>^</code> at the beginning of the quotes and then anything that follows it must be the very start of the string. As an example let’s search for “Family”. Our data has both the “Family Offense” crime and the “Offences Against The Family And Children” crime (which likely are the same crime written differently). If we use <code>^</code> then we should only have the first one returned.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;^Family&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Family Offense&quot;</span></code></pre>
</div>
<div id="end-of-string" class="section level3">
<h3><span class="header-section-number">4.3.5</span> End of string <code>$</code></h3>
<p>The dollar sign <code>$</code> acts similar to the caret <code>^</code> except that it signifies that the value before it is the <strong>end</strong> of the string. We put the <code>$</code> at the very end of our search pattern and whatever character is before it is the end of the string. For example, let’s search for all crimes that end with the word “Theft”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;Theft$&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Larceny Theft&quot;       &quot;Motor Vehicle Theft&quot;</span></code></pre>
<p>Note that the crime “Motor Vehicle Theft?” doesn’t get selected as it ends with a question mark.</p>
</div>
<div id="anything-." class="section level3">
<h3><span class="header-section-number">4.3.6</span> Anything <code>.</code></h3>
<p>The <code>.</code> symbol is a stand-in for any value. This is useful when you aren’t sure about every part of the pattern you are searching. It can also be used when there are slight differences in words such as our incorrect “Offence” and “Offense”. We can replace the “c” and “s” with the <code>.</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;Weapons Offen.e&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Weapons Offence&quot; &quot;Weapons Offense&quot;</span></code></pre>
</div>
<div id="one-or-more-of-previous" class="section level3">
<h3><span class="header-section-number">4.3.7</span> One or more of previous <code>+</code></h3>
<p>The <code>+</code> means that the character immediately before it is present at least one time. This is the same as writing <code>{1,}</code>. If we wanted to find all values with only two words we would start with some number of letters followed by a space followed by some more letters and the string would end.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;^[A-Za-z]+ [A-Za-z]+$&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;  [1] &quot;Case Closure&quot;                &quot;Civil Sidewalks&quot;            </span>
<span class="co">#&gt;  [3] &quot;Courtesy Report&quot;             &quot;Disorderly Conduct&quot;         </span>
<span class="co">#&gt;  [5] &quot;Drug Offense&quot;                &quot;Drug Violation&quot;             </span>
<span class="co">#&gt;  [7] &quot;Family Offense&quot;              &quot;Fire Report&quot;                </span>
<span class="co">#&gt;  [9] &quot;Juvenile Offenses&quot;           &quot;Larceny Theft&quot;              </span>
<span class="co">#&gt; [11] &quot;Liquor Laws&quot;                 &quot;Lost Property&quot;              </span>
<span class="co">#&gt; [13] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span>
<span class="co">#&gt; [15] &quot;Missing Person&quot;              &quot;Other Miscellaneous&quot;        </span>
<span class="co">#&gt; [17] &quot;Other Offenses&quot;              &quot;Recovered Vehicle&quot;          </span>
<span class="co">#&gt; [19] &quot;Sex Offense&quot;                 &quot;Stolen Property&quot;            </span>
<span class="co">#&gt; [21] &quot;Suspicious Occ&quot;              &quot;Traffic Collision&quot;          </span>
<span class="co">#&gt; [23] &quot;Vehicle Impounded&quot;           &quot;Vehicle Misplaced&quot;          </span>
<span class="co">#&gt; [25] &quot;Weapons Offence&quot;             &quot;Weapons Offense&quot;</span></code></pre>
</div>
<div id="zero-or-more-of-previous" class="section level3">
<h3><span class="header-section-number">4.3.8</span> Zero or more of previous <code>*</code></h3>
<p>The <code>*</code> special character says match zero or more of the previous character and is the same as <code>{0,}</code>. Combining <code>.</code> with <code>*</code> is powerful when used in <code>gsub()</code> to delete text before or after a pattern. Let’s write a pattern that searches the text for the word “Weapons” and then deletes any text after that.</p>
<p>Our pattern would be "Weapons.*" which is the word “Weapons” followed by anything zero or more times.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;Weapons.*&quot;</span>, <span class="st">&quot;Weapons&quot;</span>, crimes)
<span class="co">#&gt;  [1] &quot;Arson&quot;                                     </span>
<span class="co">#&gt;  [2] &quot;Assault&quot;                                   </span>
<span class="co">#&gt;  [3] &quot;Burglary&quot;                                  </span>
<span class="co">#&gt;  [4] &quot;Case Closure&quot;                              </span>
<span class="co">#&gt;  [5] &quot;Civil Sidewalks&quot;                           </span>
<span class="co">#&gt;  [6] &quot;Courtesy Report&quot;                           </span>
<span class="co">#&gt;  [7] &quot;Disorderly Conduct&quot;                        </span>
<span class="co">#&gt;  [8] &quot;Drug Offense&quot;                              </span>
<span class="co">#&gt;  [9] &quot;Drug Violation&quot;                            </span>
<span class="co">#&gt; [10] &quot;Embezzlement&quot;                              </span>
<span class="co">#&gt; [11] &quot;Family Offense&quot;                            </span>
<span class="co">#&gt; [12] &quot;Fire Report&quot;                               </span>
<span class="co">#&gt; [13] &quot;Forgery And Counterfeiting&quot;                </span>
<span class="co">#&gt; [14] &quot;Fraud&quot;                                     </span>
<span class="co">#&gt; [15] &quot;Gambling&quot;                                  </span>
<span class="co">#&gt; [16] &quot;Homicide&quot;                                  </span>
<span class="co">#&gt; [17] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>
<span class="co">#&gt; [18] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span>
<span class="co">#&gt; [19] &quot;Juvenile Offenses&quot;                         </span>
<span class="co">#&gt; [20] &quot;Larceny Theft&quot;                             </span>
<span class="co">#&gt; [21] &quot;Liquor Laws&quot;                               </span>
<span class="co">#&gt; [22] &quot;Lost Property&quot;                             </span>
<span class="co">#&gt; [23] &quot;Malicious Mischief&quot;                        </span>
<span class="co">#&gt; [24] &quot;Miscellaneous Investigation&quot;               </span>
<span class="co">#&gt; [25] &quot;Missing Person&quot;                            </span>
<span class="co">#&gt; [26] &quot;Motor Vehicle Theft&quot;                       </span>
<span class="co">#&gt; [27] &quot;Motor Vehicle Theft?&quot;                      </span>
<span class="co">#&gt; [28] &quot;Non-Criminal&quot;                              </span>
<span class="co">#&gt; [29] &quot;Offences Against The Family And Children&quot;  </span>
<span class="co">#&gt; [30] &quot;Other&quot;                                     </span>
<span class="co">#&gt; [31] &quot;Other Miscellaneous&quot;                       </span>
<span class="co">#&gt; [32] &quot;Other Offenses&quot;                            </span>
<span class="co">#&gt; [33] &quot;Prostitution&quot;                              </span>
<span class="co">#&gt; [34] &quot;Rape&quot;                                      </span>
<span class="co">#&gt; [35] &quot;Recovered Vehicle&quot;                         </span>
<span class="co">#&gt; [36] &quot;Robbery&quot;                                   </span>
<span class="co">#&gt; [37] &quot;Sex Offense&quot;                               </span>
<span class="co">#&gt; [38] &quot;Stolen Property&quot;                           </span>
<span class="co">#&gt; [39] &quot;Suicide&quot;                                   </span>
<span class="co">#&gt; [40] &quot;Suspicious&quot;                                </span>
<span class="co">#&gt; [41] &quot;Suspicious Occ&quot;                            </span>
<span class="co">#&gt; [42] &quot;Traffic Collision&quot;                         </span>
<span class="co">#&gt; [43] &quot;Traffic Violation Arrest&quot;                  </span>
<span class="co">#&gt; [44] &quot;Vandalism&quot;                                 </span>
<span class="co">#&gt; [45] &quot;Vehicle Impounded&quot;                         </span>
<span class="co">#&gt; [46] &quot;Vehicle Misplaced&quot;                         </span>
<span class="co">#&gt; [47] &quot;Warrant&quot;                                   </span>
<span class="co">#&gt; [48] &quot;Weapons&quot;                                   </span>
<span class="co">#&gt; [49] &quot;Weapons&quot;                                   </span>
<span class="co">#&gt; [50] &quot;Weapons&quot;</span></code></pre>
<p>And now our last three crimes are all identical.</p>
</div>
<div id="multiple-patterns" class="section level3">
<h3><span class="header-section-number">4.3.9</span> Multiple patterns <code>|</code></h3>
<p>The vertical bar <code>|</code> special character allows us to check for multiple patterns. It essentially functions as “pattern A or Pattern B” with the <code>|</code> symbol replacing the word “or” (and making sure to not have any space between patterns.). To check our crimes for the word “Drug” or the word “Weapons” we could write “Drug|Weapon” which searches for “Drug” or “Weapons” in the text.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;Drug|Weapons&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Drug Offense&quot;         &quot;Drug Violation&quot;       &quot;Weapons Carrying Etc&quot;</span>
<span class="co">#&gt; [4] &quot;Weapons Offence&quot;      &quot;Weapons Offense&quot;</span></code></pre>
</div>
<div id="parentheses" class="section level3">
<h3><span class="header-section-number">4.3.10</span> Parentheses <code>()</code></h3>
<p>Parentheses act similar to the square brackets <code>[]</code> where we want everything inside but with parentheses the values must be in the proper order.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;(Offense)&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Drug Offense&quot;      &quot;Family Offense&quot;    &quot;Juvenile Offenses&quot;</span>
<span class="co">#&gt; [4] &quot;Other Offenses&quot;    &quot;Sex Offense&quot;       &quot;Weapons Offense&quot;</span></code></pre>
<p>Running the above code returns the same results as if we didn’t include the parentheses. The usefulness of parentheses comes when combining it with the <code>|</code> symbol to be able to check “(X|Y) Z”), which says, “look for either X or Y which must be followed by Z”.</p>
<p>Running just “(Offense)” returns values for multiple types of offenses. Let’s say we just care about Drug and Weapon Offenses. We can search for “Offense” normally and combine <code>()</code> and <code>|</code> to say “search for either the word”Drug" or the word “Family” and they should be followed by the word “Offense”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;(Drug|Weapons) Offense&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Drug Offense&quot;    &quot;Weapons Offense&quot;</span></code></pre>
</div>
<div id="optional-text" class="section level3">
<h3><span class="header-section-number">4.3.11</span> Optional text <code>?</code></h3>
<p>The question mark indicates that the character immediately before the <code>?</code> is optional.</p>
<p>Let’s search for the term “offens” and add a ? at the end. This says search for the pattern “offen” and we expect an exact match for that pattern. And if the letter “s” follows “offen” return that too, but it isn’t required to be there.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;Offens?&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Drug Offense&quot;                            </span>
<span class="co">#&gt; [2] &quot;Family Offense&quot;                          </span>
<span class="co">#&gt; [3] &quot;Juvenile Offenses&quot;                       </span>
<span class="co">#&gt; [4] &quot;Offences Against The Family And Children&quot;</span>
<span class="co">#&gt; [5] &quot;Other Offenses&quot;                          </span>
<span class="co">#&gt; [6] &quot;Sex Offense&quot;                             </span>
<span class="co">#&gt; [7] &quot;Weapons Offence&quot;                         </span>
<span class="co">#&gt; [8] &quot;Weapons Offense&quot;</span></code></pre>
<p>We can further combine it with <code>()</code> and <code>|</code> to get both spellings of Weapon Offense.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;(Drug|Weapons) Offens?&quot;</span>, crimes, <span class="dt">value =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt; [1] &quot;Drug Offense&quot;    &quot;Weapons Offence&quot; &quot;Weapons Offense&quot;</span></code></pre>
</div>
</div>
<div id="changing-capitalization" class="section level2">
<h2><span class="header-section-number">4.4</span> Changing capitalization</h2>
<p>If you’re dealing with data where the only difference is capitalization (as is common in crime data) instead of using <code>gsub()</code> to change individual values, you can use the functions <code>toupper()</code> and <code>tolower()</code> to change every letter’s capitalization. These functions take as an input a vector of strings (or a column from a data.frame) and return those strings either upper or lowercase.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">toupper</span>(crimes)
<span class="co">#&gt;  [1] &quot;ARSON&quot;                                     </span>
<span class="co">#&gt;  [2] &quot;ASSAULT&quot;                                   </span>
<span class="co">#&gt;  [3] &quot;BURGLARY&quot;                                  </span>
<span class="co">#&gt;  [4] &quot;CASE CLOSURE&quot;                              </span>
<span class="co">#&gt;  [5] &quot;CIVIL SIDEWALKS&quot;                           </span>
<span class="co">#&gt;  [6] &quot;COURTESY REPORT&quot;                           </span>
<span class="co">#&gt;  [7] &quot;DISORDERLY CONDUCT&quot;                        </span>
<span class="co">#&gt;  [8] &quot;DRUG OFFENSE&quot;                              </span>
<span class="co">#&gt;  [9] &quot;DRUG VIOLATION&quot;                            </span>
<span class="co">#&gt; [10] &quot;EMBEZZLEMENT&quot;                              </span>
<span class="co">#&gt; [11] &quot;FAMILY OFFENSE&quot;                            </span>
<span class="co">#&gt; [12] &quot;FIRE REPORT&quot;                               </span>
<span class="co">#&gt; [13] &quot;FORGERY AND COUNTERFEITING&quot;                </span>
<span class="co">#&gt; [14] &quot;FRAUD&quot;                                     </span>
<span class="co">#&gt; [15] &quot;GAMBLING&quot;                                  </span>
<span class="co">#&gt; [16] &quot;HOMICIDE&quot;                                  </span>
<span class="co">#&gt; [17] &quot;HUMAN TRAFFICKING (A), COMMERCIAL SEX ACTS&quot;</span>
<span class="co">#&gt; [18] &quot;HUMAN TRAFFICKING, COMMERCIAL SEX ACTS&quot;    </span>
<span class="co">#&gt; [19] &quot;JUVENILE OFFENSES&quot;                         </span>
<span class="co">#&gt; [20] &quot;LARCENY THEFT&quot;                             </span>
<span class="co">#&gt; [21] &quot;LIQUOR LAWS&quot;                               </span>
<span class="co">#&gt; [22] &quot;LOST PROPERTY&quot;                             </span>
<span class="co">#&gt; [23] &quot;MALICIOUS MISCHIEF&quot;                        </span>
<span class="co">#&gt; [24] &quot;MISCELLANEOUS INVESTIGATION&quot;               </span>
<span class="co">#&gt; [25] &quot;MISSING PERSON&quot;                            </span>
<span class="co">#&gt; [26] &quot;MOTOR VEHICLE THEFT&quot;                       </span>
<span class="co">#&gt; [27] &quot;MOTOR VEHICLE THEFT?&quot;                      </span>
<span class="co">#&gt; [28] &quot;NON-CRIMINAL&quot;                              </span>
<span class="co">#&gt; [29] &quot;OFFENCES AGAINST THE FAMILY AND CHILDREN&quot;  </span>
<span class="co">#&gt; [30] &quot;OTHER&quot;                                     </span>
<span class="co">#&gt; [31] &quot;OTHER MISCELLANEOUS&quot;                       </span>
<span class="co">#&gt; [32] &quot;OTHER OFFENSES&quot;                            </span>
<span class="co">#&gt; [33] &quot;PROSTITUTION&quot;                              </span>
<span class="co">#&gt; [34] &quot;RAPE&quot;                                      </span>
<span class="co">#&gt; [35] &quot;RECOVERED VEHICLE&quot;                         </span>
<span class="co">#&gt; [36] &quot;ROBBERY&quot;                                   </span>
<span class="co">#&gt; [37] &quot;SEX OFFENSE&quot;                               </span>
<span class="co">#&gt; [38] &quot;STOLEN PROPERTY&quot;                           </span>
<span class="co">#&gt; [39] &quot;SUICIDE&quot;                                   </span>
<span class="co">#&gt; [40] &quot;SUSPICIOUS&quot;                                </span>
<span class="co">#&gt; [41] &quot;SUSPICIOUS OCC&quot;                            </span>
<span class="co">#&gt; [42] &quot;TRAFFIC COLLISION&quot;                         </span>
<span class="co">#&gt; [43] &quot;TRAFFIC VIOLATION ARREST&quot;                  </span>
<span class="co">#&gt; [44] &quot;VANDALISM&quot;                                 </span>
<span class="co">#&gt; [45] &quot;VEHICLE IMPOUNDED&quot;                         </span>
<span class="co">#&gt; [46] &quot;VEHICLE MISPLACED&quot;                         </span>
<span class="co">#&gt; [47] &quot;WARRANT&quot;                                   </span>
<span class="co">#&gt; [48] &quot;WEAPONS CARRYING ETC&quot;                      </span>
<span class="co">#&gt; [49] &quot;WEAPONS OFFENCE&quot;                           </span>
<span class="co">#&gt; [50] &quot;WEAPONS OFFENSE&quot;</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tolower</span>(crimes)
<span class="co">#&gt;  [1] &quot;arson&quot;                                     </span>
<span class="co">#&gt;  [2] &quot;assault&quot;                                   </span>
<span class="co">#&gt;  [3] &quot;burglary&quot;                                  </span>
<span class="co">#&gt;  [4] &quot;case closure&quot;                              </span>
<span class="co">#&gt;  [5] &quot;civil sidewalks&quot;                           </span>
<span class="co">#&gt;  [6] &quot;courtesy report&quot;                           </span>
<span class="co">#&gt;  [7] &quot;disorderly conduct&quot;                        </span>
<span class="co">#&gt;  [8] &quot;drug offense&quot;                              </span>
<span class="co">#&gt;  [9] &quot;drug violation&quot;                            </span>
<span class="co">#&gt; [10] &quot;embezzlement&quot;                              </span>
<span class="co">#&gt; [11] &quot;family offense&quot;                            </span>
<span class="co">#&gt; [12] &quot;fire report&quot;                               </span>
<span class="co">#&gt; [13] &quot;forgery and counterfeiting&quot;                </span>
<span class="co">#&gt; [14] &quot;fraud&quot;                                     </span>
<span class="co">#&gt; [15] &quot;gambling&quot;                                  </span>
<span class="co">#&gt; [16] &quot;homicide&quot;                                  </span>
<span class="co">#&gt; [17] &quot;human trafficking (a), commercial sex acts&quot;</span>
<span class="co">#&gt; [18] &quot;human trafficking, commercial sex acts&quot;    </span>
<span class="co">#&gt; [19] &quot;juvenile offenses&quot;                         </span>
<span class="co">#&gt; [20] &quot;larceny theft&quot;                             </span>
<span class="co">#&gt; [21] &quot;liquor laws&quot;                               </span>
<span class="co">#&gt; [22] &quot;lost property&quot;                             </span>
<span class="co">#&gt; [23] &quot;malicious mischief&quot;                        </span>
<span class="co">#&gt; [24] &quot;miscellaneous investigation&quot;               </span>
<span class="co">#&gt; [25] &quot;missing person&quot;                            </span>
<span class="co">#&gt; [26] &quot;motor vehicle theft&quot;                       </span>
<span class="co">#&gt; [27] &quot;motor vehicle theft?&quot;                      </span>
<span class="co">#&gt; [28] &quot;non-criminal&quot;                              </span>
<span class="co">#&gt; [29] &quot;offences against the family and children&quot;  </span>
<span class="co">#&gt; [30] &quot;other&quot;                                     </span>
<span class="co">#&gt; [31] &quot;other miscellaneous&quot;                       </span>
<span class="co">#&gt; [32] &quot;other offenses&quot;                            </span>
<span class="co">#&gt; [33] &quot;prostitution&quot;                              </span>
<span class="co">#&gt; [34] &quot;rape&quot;                                      </span>
<span class="co">#&gt; [35] &quot;recovered vehicle&quot;                         </span>
<span class="co">#&gt; [36] &quot;robbery&quot;                                   </span>
<span class="co">#&gt; [37] &quot;sex offense&quot;                               </span>
<span class="co">#&gt; [38] &quot;stolen property&quot;                           </span>
<span class="co">#&gt; [39] &quot;suicide&quot;                                   </span>
<span class="co">#&gt; [40] &quot;suspicious&quot;                                </span>
<span class="co">#&gt; [41] &quot;suspicious occ&quot;                            </span>
<span class="co">#&gt; [42] &quot;traffic collision&quot;                         </span>
<span class="co">#&gt; [43] &quot;traffic violation arrest&quot;                  </span>
<span class="co">#&gt; [44] &quot;vandalism&quot;                                 </span>
<span class="co">#&gt; [45] &quot;vehicle impounded&quot;                         </span>
<span class="co">#&gt; [46] &quot;vehicle misplaced&quot;                         </span>
<span class="co">#&gt; [47] &quot;warrant&quot;                                   </span>
<span class="co">#&gt; [48] &quot;weapons carrying etc&quot;                      </span>
<span class="co">#&gt; [49] &quot;weapons offence&quot;                           </span>
<span class="co">#&gt; [50] &quot;weapons offense&quot;</span></code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="explore.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reading-and-writing-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacobkap/crimebythenumbers/edit/master/regular-expressions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>12 Regular Expressions | Crime by the Numbers: A Criminologist’s Guide to R</title>
  <meta name="description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="12 Regular Expressions | Crime by the Numbers: A Criminologist’s Guide to R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  <meta name="github-repo" content="jacobkap/crimebythenumbers" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="12 Regular Expressions | Crime by the Numbers: A Criminologist’s Guide to R" />
  
  <meta name="twitter:description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  

<meta name="author" content="Jacob Kaplan" />


<meta name="date" content="2023-01-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="explore.html"/>
<link rel="next" href="reshaping.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99359926-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99359926-6');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Crime by the Numbers: A Criminologist's Guide to R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-learn-to-program"><i class="fa fa-check"></i>Why learn to program?</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#scale"><i class="fa fa-check"></i>Scale</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i>Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-will-learn"><i class="fa fa-check"></i>What you will learn</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i>Skills</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-wont-learn"><i class="fa fa-check"></i>What you won’t learn</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#simple-vs-easy"><i class="fa fa-check"></i>Simple vs easy</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i>How to read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#citing-this-book"><i class="fa fa-check"></i>Citing this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contribute-to-this-book"><i class="fa fa-check"></i>How to contribute to this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#where-to-find-data-included-in-this-book"><i class="fa fa-check"></i>Where to find data included in this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#where-to-find-code-included-in-this-book"><i class="fa fa-check"></i>Where to find code included in this book</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html"><i class="fa fa-check"></i><b>1</b> A soup to nuts project example</a>
<ul>
<li class="chapter" data-level="1.1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#big-picture-data-example"><i class="fa fa-check"></i><b>1.1</b> Big picture data example</a></li>
<li class="chapter" data-level="1.2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#little-picture-data-example"><i class="fa fa-check"></i><b>1.2</b> Little picture data example</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#loading-packages"><i class="fa fa-check"></i><b>1.2.1</b> Loading packages</a></li>
<li class="chapter" data-level="1.2.2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#loading-data"><i class="fa fa-check"></i><b>1.2.2</b> Loading data</a></li>
<li class="chapter" data-level="1.2.3" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#cleaning"><i class="fa fa-check"></i><b>1.2.3</b> Cleaning</a></li>
<li class="chapter" data-level="1.2.4" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#aggregating"><i class="fa fa-check"></i><b>1.2.4</b> Aggregating</a></li>
<li class="chapter" data-level="1.2.5" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#graphing"><i class="fa fa-check"></i><b>1.2.5</b> Graphing</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#reusing-and-modifying-code"><i class="fa fa-check"></i><b>1.3</b> Reusing and modifying code</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#using-rstudio"><i class="fa fa-check"></i><b>2.1</b> Using RStudio</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro-to-r.html"><a href="intro-to-r.html#opening-an-r-script"><i class="fa fa-check"></i><b>2.1.1</b> Opening an R Script</a></li>
<li class="chapter" data-level="2.1.2" data-path="intro-to-r.html"><a href="intro-to-r.html#setting-the-working-directory"><i class="fa fa-check"></i><b>2.1.2</b> Setting the working directory</a></li>
<li class="chapter" data-level="2.1.3" data-path="intro-to-r.html"><a href="intro-to-r.html#changing-rstudio"><i class="fa fa-check"></i><b>2.1.3</b> Changing RStudio</a></li>
<li class="chapter" data-level="2.1.4" data-path="intro-to-r.html"><a href="intro-to-r.html#helpful-cheat-sheets"><i class="fa fa-check"></i><b>2.1.4</b> Helpful cheat sheets</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro-to-r.html"><a href="intro-to-r.html#assignment"><i class="fa fa-check"></i><b>2.2</b> Assigning variables</a></li>
<li class="chapter" data-level="2.3" data-path="intro-to-r.html"><a href="intro-to-r.html#functions-intro"><i class="fa fa-check"></i><b>2.3</b> What are functions (and packages)?</a></li>
<li class="chapter" data-level="2.4" data-path="intro-to-r.html"><a href="intro-to-r.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro-to-r.html"><a href="intro-to-r.html#loading-data-intro"><i class="fa fa-check"></i><b>2.4.1</b> Loading data</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-to-r.html"><a href="intro-to-r.html#first-steps-to-exploring-data"><i class="fa fa-check"></i><b>2.5</b> First steps to exploring data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>3</b> Data types and structures</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-types.html"><a href="data-types.html#section-data-types"><i class="fa fa-check"></i><b>3.1</b> Data types</a></li>
<li class="chapter" data-level="3.2" data-path="data-types.html"><a href="data-types.html#numeric-character-and-logical-boolean"><i class="fa fa-check"></i><b>3.2</b> Numeric, character, and logical (boolean)</a></li>
<li class="chapter" data-level="3.3" data-path="data-types.html"><a href="data-types.html#data-structures"><i class="fa fa-check"></i><b>3.3</b> Data structures</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-types.html"><a href="data-types.html#vectors"><i class="fa fa-check"></i><b>3.3.1</b> Vectors (collections of “things”)</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-types.html"><a href="data-types.html#dataframes"><i class="fa fa-check"></i><b>3.3.2</b> Data.frames</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-types.html"><a href="data-types.html#other-data-structures"><i class="fa fa-check"></i><b>3.3.3</b> Other data structures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>4</b> Reading and writing data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-data-into-r-1"><i class="fa fa-check"></i><b>4.1</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r"><i class="fa fa-check"></i><b>4.1.1</b> R</a></li>
<li class="chapter" data-level="4.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel"><i class="fa fa-check"></i><b>4.1.2</b> Excel</a></li>
<li class="chapter" data-level="4.1.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata"><i class="fa fa-check"></i><b>4.1.3</b> Stata</a></li>
<li class="chapter" data-level="4.1.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas"><i class="fa fa-check"></i><b>4.1.4</b> SAS</a></li>
<li class="chapter" data-level="4.1.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss"><i class="fa fa-check"></i><b>4.1.5</b> SPSS</a></li>
<li class="chapter" data-level="4.1.6" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#fixed-width-ascii"><i class="fa fa-check"></i><b>4.1.6</b> Fixed-width ASCII</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-data"><i class="fa fa-check"></i><b>4.2</b> Writing data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-1"><i class="fa fa-check"></i><b>4.2.1</b> R</a></li>
<li class="chapter" data-level="4.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-1"><i class="fa fa-check"></i><b>4.2.2</b> Excel</a></li>
<li class="chapter" data-level="4.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-1"><i class="fa fa-check"></i><b>4.2.3</b> Stata</a></li>
<li class="chapter" data-level="4.2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-1"><i class="fa fa-check"></i><b>4.2.4</b> SAS</a></li>
<li class="chapter" data-level="4.2.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss-1"><i class="fa fa-check"></i><b>4.2.5</b> SPSS</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Project Management</b></span></li>
<li class="chapter" data-level="5" data-path="mise-en-place.html"><a href="mise-en-place.html"><i class="fa fa-check"></i><b>5</b> <em>Mise en place</em></a>
<ul>
<li class="chapter" data-level="5.1" data-path="mise-en-place.html"><a href="mise-en-place.html#starting-with-a-pencil-and-paper"><i class="fa fa-check"></i><b>5.1</b> Starting with a pencil and paper</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="mise-en-place.html"><a href="mise-en-place.html#tables-and-graphs"><i class="fa fa-check"></i><b>5.1.1</b> Tables and graphs</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="mise-en-place.html"><a href="mise-en-place.html#r-projects"><i class="fa fa-check"></i><b>5.2</b> R Projects</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="mise-en-place.html"><a href="mise-en-place.html#folders"><i class="fa fa-check"></i><b>5.2.1</b> Folders</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="mise-en-place.html"><a href="mise-en-place.html#modular-r-scripts"><i class="fa fa-check"></i><b>5.3</b> Modular R scripts</a></li>
<li class="chapter" data-level="5.4" data-path="mise-en-place.html"><a href="mise-en-place.html#modular-code"><i class="fa fa-check"></i><b>5.4</b> Modular code</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="mise-en-place.html"><a href="mise-en-place.html#section-labels"><i class="fa fa-check"></i><b>5.4.1</b> Section labels</a></li>
<li class="chapter" data-level="5.4.2" data-path="mise-en-place.html"><a href="mise-en-place.html#helper-r-scripts"><i class="fa fa-check"></i><b>5.4.2</b> Helper R scripts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="collaboration.html"><a href="collaboration.html"><i class="fa fa-check"></i><b>6</b> Collaboration</a>
<ul>
<li class="chapter" data-level="6.1" data-path="collaboration.html"><a href="collaboration.html#code-review"><i class="fa fa-check"></i><b>6.1</b> Code review</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="collaboration.html"><a href="collaboration.html#style-guidelines"><i class="fa fa-check"></i><b>6.1.1</b> Style guidelines</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="collaboration.html"><a href="collaboration.html#documentation"><i class="fa fa-check"></i><b>6.2</b> Documentation</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="collaboration.html"><a href="collaboration.html#comments"><i class="fa fa-check"></i><b>6.2.1</b> Comments</a></li>
<li class="chapter" data-level="6.2.2" data-path="collaboration.html"><a href="collaboration.html#vignettes"><i class="fa fa-check"></i><b>6.2.2</b> Vignettes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7</b> R Markdown</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-markdown.html"><a href="r-markdown.html#code-1"><i class="fa fa-check"></i><b>7.1</b> Code</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="r-markdown.html"><a href="r-markdown.html#hiding-code-in-the-output"><i class="fa fa-check"></i><b>7.1.1</b> Hiding code in the output</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="r-markdown.html"><a href="r-markdown.html#inline-code"><i class="fa fa-check"></i><b>7.2</b> Inline Code</a></li>
<li class="chapter" data-level="7.3" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i><b>7.3</b> Tables</a></li>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html#footnotes"><i class="fa fa-check"></i><b>7.4</b> Footnotes</a></li>
<li class="chapter" data-level="7.5" data-path="r-markdown.html"><a href="r-markdown.html#citation"><i class="fa fa-check"></i><b>7.5</b> Citation</a></li>
<li class="chapter" data-level="7.6" data-path="r-markdown.html"><a href="r-markdown.html#spell-check"><i class="fa fa-check"></i><b>7.6</b> Spell check</a></li>
<li class="chapter" data-level="7.7" data-path="r-markdown.html"><a href="r-markdown.html#making-the-output-file"><i class="fa fa-check"></i><b>7.7</b> Making the output file</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tests.html"><a href="tests.html"><i class="fa fa-check"></i><b>8</b> Testing your code</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tests.html"><a href="tests.html#why-test-your-code"><i class="fa fa-check"></i><b>8.1</b> Why test your code?</a></li>
<li class="chapter" data-level="8.2" data-path="tests.html"><a href="tests.html#unit-tests"><i class="fa fa-check"></i><b>8.2</b> Unit tests</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="tests.html"><a href="tests.html#modular-test-scripts"><i class="fa fa-check"></i><b>8.2.1</b> Modular test scripts</a></li>
<li class="chapter" data-level="8.2.2" data-path="tests.html"><a href="tests.html#how-to-write-unit-tests"><i class="fa fa-check"></i><b>8.2.2</b> How to write unit tests</a></li>
<li class="chapter" data-level="8.2.3" data-path="tests.html"><a href="tests.html#what-to-test"><i class="fa fa-check"></i><b>8.2.3</b> What to test</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tests.html"><a href="tests.html#test-driven-development-tdd"><i class="fa fa-check"></i><b>8.3</b> Test-driven development (TDD)</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>9</b> Git</a>
<ul>
<li class="chapter" data-level="9.1" data-path="git.html"><a href="git.html#what-is-git-and-why-do-i-need-it"><i class="fa fa-check"></i><b>9.1</b> What is Git, and why do I need it?</a></li>
<li class="chapter" data-level="9.2" data-path="git.html"><a href="git.html#git-basics"><i class="fa fa-check"></i><b>9.2</b> Git basics</a></li>
<li class="chapter" data-level="9.3" data-path="git.html"><a href="git.html#using-git"><i class="fa fa-check"></i><b>9.3</b> Using Git</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="git.html"><a href="git.html#setting-up-git"><i class="fa fa-check"></i><b>9.3.1</b> Setting up Git</a></li>
<li class="chapter" data-level="9.3.2" data-path="git.html"><a href="git.html#setting-up-github"><i class="fa fa-check"></i><b>9.3.2</b> Setting up GitHub</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="git.html"><a href="git.html#setting-up-git-on-an-already-made-r-project"><i class="fa fa-check"></i><b>9.4</b> Setting up Git on an already-made R Project</a></li>
<li class="chapter" data-level="9.5" data-path="git.html"><a href="git.html#using-git-through-rstudio"><i class="fa fa-check"></i><b>9.5</b> Using Git through RStudio</a></li>
<li class="chapter" data-level="9.6" data-path="git.html"><a href="git.html#when-to-commit"><i class="fa fa-check"></i><b>9.6</b> When to commit</a></li>
<li class="chapter" data-level="9.7" data-path="git.html"><a href="git.html#other-resources"><i class="fa fa-check"></i><b>9.7</b> Other resources</a></li>
</ul></li>
<li class="part"><span><b>III Clean</b></span></li>
<li class="chapter" data-level="10" data-path="subsetting-intro.html"><a href="subsetting-intro.html"><i class="fa fa-check"></i><b>10</b> Subsetting: Making big things small</a>
<ul>
<li class="chapter" data-level="10.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-values"><i class="fa fa-check"></i><b>10.1</b> Select specific values</a></li>
<li class="chapter" data-level="10.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#logical-values-and-operations"><i class="fa fa-check"></i><b>10.2</b> Logical values and operations</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-a-single-value"><i class="fa fa-check"></i><b>10.2.1</b> Matching a single value</a></li>
<li class="chapter" data-level="10.2.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-multiple-values"><i class="fa fa-check"></i><b>10.2.2</b> Matching multiple values</a></li>
<li class="chapter" data-level="10.2.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#does-not-match"><i class="fa fa-check"></i><b>10.2.3</b> Does not match</a></li>
<li class="chapter" data-level="10.2.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#greater-than-or-less-than"><i class="fa fa-check"></i><b>10.2.4</b> Greater than or less than</a></li>
<li class="chapter" data-level="10.2.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#combining-conditional-statements---or-and"><i class="fa fa-check"></i><b>10.2.5</b> Combining conditional statements - or, and</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subsetting-a-data.frame"><i class="fa fa-check"></i><b>10.3</b> Subsetting a data.frame</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-columns"><i class="fa fa-check"></i><b>10.3.1</b> Select specific columns</a></li>
<li class="chapter" data-level="10.3.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-rows"><i class="fa fa-check"></i><b>10.3.2</b> Select specific rows</a></li>
<li class="chapter" data-level="10.3.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subset-colorado-data"><i class="fa fa-check"></i><b>10.3.3</b> Subset Colorado data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>11</b> Exploratory data analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="explore.html"><a href="explore.html#summary-and-table"><i class="fa fa-check"></i><b>11.1</b> Summary and Table</a></li>
<li class="chapter" data-level="11.2" data-path="explore.html"><a href="explore.html#graphing-1"><i class="fa fa-check"></i><b>11.2</b> Graphing</a></li>
<li class="chapter" data-level="11.3" data-path="explore.html"><a href="explore.html#aggregate"><i class="fa fa-check"></i><b>11.3</b> Aggregating (summaries of groups)</a></li>
<li class="chapter" data-level="11.4" data-path="explore.html"><a href="explore.html#dplyr-pipes"><i class="fa fa-check"></i><b>11.4</b> Pipes in <code>dplyr</code></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>12</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-patterns-in-text-with-grep"><i class="fa fa-check"></i><b>12.1</b> Finding patterns in text with <code>grep()</code></a></li>
<li class="chapter" data-level="12.2" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub"><i class="fa fa-check"></i><b>12.2</b> Finding and replacing patterns in text with <code>gsub()</code></a></li>
<li class="chapter" data-level="12.3" data-path="regular-expressions.html"><a href="regular-expressions.html#useful-special-characters"><i class="fa fa-check"></i><b>12.3</b> Useful special characters</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-characters"><i class="fa fa-check"></i><b>12.3.1</b> Multiple characters <code>[]</code></a></li>
<li class="chapter" data-level="12.3.2" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-of-previous-character-n"><i class="fa fa-check"></i><b>12.3.2</b> n-many of previous character <code>{n}</code></a></li>
<li class="chapter" data-level="12.3.3" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm"><i class="fa fa-check"></i><b>12.3.3</b> n-many to m-many of previous character <code>{n,m}</code></a></li>
<li class="chapter" data-level="12.3.4" data-path="regular-expressions.html"><a href="regular-expressions.html#start-of-string"><i class="fa fa-check"></i><b>12.3.4</b> Start of string</a></li>
<li class="chapter" data-level="12.3.5" data-path="regular-expressions.html"><a href="regular-expressions.html#end-of-string"><i class="fa fa-check"></i><b>12.3.5</b> End of string <code>$</code></a></li>
<li class="chapter" data-level="12.3.6" data-path="regular-expressions.html"><a href="regular-expressions.html#anything-."><i class="fa fa-check"></i><b>12.3.6</b> Anything <code>.</code></a></li>
<li class="chapter" data-level="12.3.7" data-path="regular-expressions.html"><a href="regular-expressions.html#one-or-more-of-previous"><i class="fa fa-check"></i><b>12.3.7</b> One or more of previous <code>+</code></a></li>
<li class="chapter" data-level="12.3.8" data-path="regular-expressions.html"><a href="regular-expressions.html#zero-or-more-of-previous"><i class="fa fa-check"></i><b>12.3.8</b> Zero or more of previous <code>*</code></a></li>
<li class="chapter" data-level="12.3.9" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-patterns"><i class="fa fa-check"></i><b>12.3.9</b> Multiple patterns <code>|</code></a></li>
<li class="chapter" data-level="12.3.10" data-path="regular-expressions.html"><a href="regular-expressions.html#parentheses"><i class="fa fa-check"></i><b>12.3.10</b> Parentheses <code>()</code></a></li>
<li class="chapter" data-level="12.3.11" data-path="regular-expressions.html"><a href="regular-expressions.html#optional-text"><i class="fa fa-check"></i><b>12.3.11</b> Optional text <code>?</code></a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="regular-expressions.html"><a href="regular-expressions.html#changing-capitalization"><i class="fa fa-check"></i><b>12.4</b> Changing capitalization</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="reshaping.html"><a href="reshaping.html"><i class="fa fa-check"></i><b>13</b> Reshaping data</a>
<ul>
<li class="chapter" data-level="13.1" data-path="reshaping.html"><a href="reshaping.html#reshaping-a-single-column"><i class="fa fa-check"></i><b>13.1</b> Reshaping a single column</a></li>
<li class="chapter" data-level="13.2" data-path="reshaping.html"><a href="reshaping.html#reshaping-multiple-columns"><i class="fa fa-check"></i><b>13.2</b> Reshaping multiple columns</a></li>
</ul></li>
<li class="part"><span><b>IV Visualize</b></span></li>
<li class="chapter" data-level="14" data-path="graphing-intro.html"><a href="graphing-intro.html"><i class="fa fa-check"></i><b>14</b> Graphing with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="14.1" data-path="graphing-intro.html"><a href="graphing-intro.html#what-does-the-data-look-like"><i class="fa fa-check"></i><b>14.1</b> What does the data look like?</a></li>
<li class="chapter" data-level="14.2" data-path="graphing-intro.html"><a href="graphing-intro.html#graphing-data"><i class="fa fa-check"></i><b>14.2</b> Graphing data</a></li>
<li class="chapter" data-level="14.3" data-path="graphing-intro.html"><a href="graphing-intro.html#time-series-plots"><i class="fa fa-check"></i><b>14.3</b> Time-series plots</a></li>
<li class="chapter" data-level="14.4" data-path="graphing-intro.html"><a href="graphing-intro.html#scatter-plots"><i class="fa fa-check"></i><b>14.4</b> Scatter plots</a></li>
<li class="chapter" data-level="14.5" data-path="graphing-intro.html"><a href="graphing-intro.html#color-blindness"><i class="fa fa-check"></i><b>14.5</b> Color blindness</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ois-graphs.html"><a href="ois-graphs.html"><i class="fa fa-check"></i><b>15</b> More graphing with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="15.1" data-path="ois-graphs.html"><a href="ois-graphs.html#exploring-data"><i class="fa fa-check"></i><b>15.1</b> Exploring data</a></li>
<li class="chapter" data-level="15.2" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-a-single-numeric-variable"><i class="fa fa-check"></i><b>15.2</b> Graphing a single numeric variable</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="ois-graphs.html"><a href="ois-graphs.html#histogram"><i class="fa fa-check"></i><b>15.2.1</b> Histogram</a></li>
<li class="chapter" data-level="15.2.2" data-path="ois-graphs.html"><a href="ois-graphs.html#density-plot"><i class="fa fa-check"></i><b>15.2.2</b> Density plot</a></li>
<li class="chapter" data-level="15.2.3" data-path="ois-graphs.html"><a href="ois-graphs.html#count-graph"><i class="fa fa-check"></i><b>15.2.3</b> Count graph</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-a-categorical-variable"><i class="fa fa-check"></i><b>15.3</b> Graphing a categorical variable</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="ois-graphs.html"><a href="ois-graphs.html#bar-graph"><i class="fa fa-check"></i><b>15.3.1</b> Bar graph</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-data-over-time"><i class="fa fa-check"></i><b>15.4</b> Graphing data over time</a></li>
<li class="chapter" data-level="15.5" data-path="ois-graphs.html"><a href="ois-graphs.html#pretty-graphs"><i class="fa fa-check"></i><b>15.5</b> Pretty graphs</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="ois-graphs.html"><a href="ois-graphs.html#themes"><i class="fa fa-check"></i><b>15.5.1</b> Themes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="hotspot-maps.html"><a href="hotspot-maps.html"><i class="fa fa-check"></i><b>16</b> Hotspot maps</a>
<ul>
<li class="chapter" data-level="16.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#a-simple-map"><i class="fa fa-check"></i><b>16.1</b> A simple map</a></li>
<li class="chapter" data-level="16.2" data-path="hotspot-maps.html"><a href="hotspot-maps.html#what-really-are-maps"><i class="fa fa-check"></i><b>16.2</b> What really are maps?</a></li>
<li class="chapter" data-level="16.3" data-path="hotspot-maps.html"><a href="hotspot-maps.html#making-a-hotspot-map"><i class="fa fa-check"></i><b>16.3</b> Making a hotspot map</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#colors"><i class="fa fa-check"></i><b>16.3.1</b> Colors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="choropleth-maps.html"><a href="choropleth-maps.html"><i class="fa fa-check"></i><b>17</b> Choropleth maps</a>
<ul>
<li class="chapter" data-level="17.1" data-path="choropleth-maps.html"><a href="choropleth-maps.html#spatial-joins"><i class="fa fa-check"></i><b>17.1</b> Spatial joins</a></li>
<li class="chapter" data-level="17.2" data-path="choropleth-maps.html"><a href="choropleth-maps.html#making-choropleth-maps"><i class="fa fa-check"></i><b>17.2</b> Making choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>18</b> Interactive maps</a>
<ul>
<li class="chapter" data-level="18.1" data-path="interactive-maps.html"><a href="interactive-maps.html#why-do-interactive-graphs-matter"><i class="fa fa-check"></i><b>18.1</b> Why do interactive graphs matter?</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="interactive-maps.html"><a href="interactive-maps.html#understanding-your-data"><i class="fa fa-check"></i><b>18.1.1</b> Understanding your data</a></li>
<li class="chapter" data-level="18.1.2" data-path="interactive-maps.html"><a href="interactive-maps.html#police-departments-use-them"><i class="fa fa-check"></i><b>18.1.2</b> Police departments use them</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="interactive-maps.html"><a href="interactive-maps.html#making-the-interactive-map"><i class="fa fa-check"></i><b>18.2</b> Making the interactive map</a></li>
<li class="chapter" data-level="18.3" data-path="interactive-maps.html"><a href="interactive-maps.html#adding-popup-information"><i class="fa fa-check"></i><b>18.3</b> Adding popup information</a></li>
<li class="chapter" data-level="18.4" data-path="interactive-maps.html"><a href="interactive-maps.html#dealing-with-too-many-markers"><i class="fa fa-check"></i><b>18.4</b> Dealing with too many markers</a></li>
<li class="chapter" data-level="18.5" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-choropleth-maps"><i class="fa fa-check"></i><b>18.5</b> Interactive choropleth maps</a></li>
</ul></li>
<li class="part"><span><b>V Collect</b></span></li>
<li class="chapter" data-level="19" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html"><i class="fa fa-check"></i><b>19</b> Webscraping with <code>rvest</code></a>
<ul>
<li class="chapter" data-level="19.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#scraping-one-page"><i class="fa fa-check"></i><b>19.1</b> Scraping one page</a></li>
<li class="chapter" data-level="19.2" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#cleaning-the-webscraped-data"><i class="fa fa-check"></i><b>19.2</b> Cleaning the webscraped data</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>20</b> Functions</a>
<ul>
<li class="chapter" data-level="20.1" data-path="functions.html"><a href="functions.html#a-simple-function"><i class="fa fa-check"></i><b>20.1</b> A simple function</a></li>
<li class="chapter" data-level="20.2" data-path="functions.html"><a href="functions.html#adding-parameters"><i class="fa fa-check"></i><b>20.2</b> Adding parameters</a></li>
<li class="chapter" data-level="20.3" data-path="functions.html"><a href="functions.html#recipes-function"><i class="fa fa-check"></i><b>20.3</b> Making a function to scrape recipes</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>21</b> For loops</a>
<ul>
<li class="chapter" data-level="21.1" data-path="for-loops.html"><a href="for-loops.html#basic-for-loops"><i class="fa fa-check"></i><b>21.1</b> Basic for loops</a></li>
<li class="chapter" data-level="21.2" data-path="for-loops.html"><a href="for-loops.html#scraping-multiple-recipes"><i class="fa fa-check"></i><b>21.2</b> Scraping multiple recipes</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="scrape-table.html"><a href="scrape-table.html"><i class="fa fa-check"></i><b>22</b> Scraping tables from PDFs</a>
<ul>
<li class="chapter" data-level="22.1" data-path="scrape-table.html"><a href="scrape-table.html#scraping-the-first-table"><i class="fa fa-check"></i><b>22.1</b> Scraping the first table</a></li>
<li class="chapter" data-level="22.2" data-path="scrape-table.html"><a href="scrape-table.html#making-a-function"><i class="fa fa-check"></i><b>22.2</b> Making a function</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="scrape-table2.html"><a href="scrape-table2.html"><i class="fa fa-check"></i><b>23</b> More scraping tables from PDFs</a>
<ul>
<li class="chapter" data-level="23.1" data-path="scrape-table2.html"><a href="scrape-table2.html#texas-jail-data"><i class="fa fa-check"></i><b>23.1</b> Texas jail data</a></li>
<li class="chapter" data-level="23.2" data-path="scrape-table2.html"><a href="scrape-table2.html#pregnant-women-incarcerated"><i class="fa fa-check"></i><b>23.2</b> Pregnant women incarcerated</a></li>
<li class="chapter" data-level="23.3" data-path="scrape-table2.html"><a href="scrape-table2.html#making-pdf-scraped-data-available-to-others"><i class="fa fa-check"></i><b>23.3</b> Making PDF-scraped data available to others</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>24</b> Geocoding</a>
<ul>
<li class="chapter" data-level="24.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-a-single-address"><i class="fa fa-check"></i><b>24.1</b> Geocoding a single address</a></li>
<li class="chapter" data-level="24.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-san-francisco-marijuana-dispensary-locations"><i class="fa fa-check"></i><b>24.2</b> Geocoding San Francisco marijuana dispensary locations</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime by the Numbers: A Criminologist’s Guide to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regular-expressions" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">12</span> Regular Expressions<a href="regular-expressions.html#regular-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Many word processing programs like Microsoft Word or Google Docs let you search for a pattern - usually a word or phrase - and it will show you where on the page that pattern appears. It also lets you replace that word or phrase with something new. R does the same using the function <code>grep()</code> to search for a pattern and tell you where in the data it appears, and <code>gsub()</code>, which lets you search for a pattern and then replace it with a new pattern.</p>
<ul>
<li><code>grep()</code> - Find</li>
<li><code>gsub()</code> - Find and Replace</li>
</ul>
<p>The <code>grep()</code> function lets you find a pattern in the text and it will return a number saying which element has the pattern (in a data.frame this tells you which row has a match). <code>gsub()</code> lets you input a pattern to find and a pattern to replace it with, just like Find and Replace features elsewhere. You can remember the difference because <code>gsub()</code> has the word “sub” in it, and what it does is <strong>sub</strong>stitute text with new text.</p>
<p>A useful cheat sheet on regular expressions is available <a href="https://www.rstudio.com/wp-content/uploads/2016/09/RegExCheatsheet.pdf">here</a>.</p>
<p>For this lesson we will use a vector of 50 crime categories. These are all of the crimes in San Francisco Police data. As we’ll see, there are some issues with the crime names that we need to fix.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="regular-expressions.html#cb174-1" aria-hidden="true" tabindex="-1"></a>crimes <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb174-2"><a href="regular-expressions.html#cb174-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Arson&quot;</span>,</span>
<span id="cb174-3"><a href="regular-expressions.html#cb174-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Assault&quot;</span>,                                  </span>
<span id="cb174-4"><a href="regular-expressions.html#cb174-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Burglary&quot;</span>,                                 </span>
<span id="cb174-5"><a href="regular-expressions.html#cb174-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Case Closure&quot;</span>,                             </span>
<span id="cb174-6"><a href="regular-expressions.html#cb174-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Civil Sidewalks&quot;</span>,                          </span>
<span id="cb174-7"><a href="regular-expressions.html#cb174-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Courtesy Report&quot;</span>,                          </span>
<span id="cb174-8"><a href="regular-expressions.html#cb174-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Disorderly Conduct&quot;</span>,                       </span>
<span id="cb174-9"><a href="regular-expressions.html#cb174-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Drug Offense&quot;</span>,                             </span>
<span id="cb174-10"><a href="regular-expressions.html#cb174-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Drug Violation&quot;</span>,                           </span>
<span id="cb174-11"><a href="regular-expressions.html#cb174-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Embezzlement&quot;</span>,                             </span>
<span id="cb174-12"><a href="regular-expressions.html#cb174-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Family Offense&quot;</span>,                           </span>
<span id="cb174-13"><a href="regular-expressions.html#cb174-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Fire Report&quot;</span>,                              </span>
<span id="cb174-14"><a href="regular-expressions.html#cb174-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Forgery And Counterfeiting&quot;</span>,               </span>
<span id="cb174-15"><a href="regular-expressions.html#cb174-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Fraud&quot;</span>,                                    </span>
<span id="cb174-16"><a href="regular-expressions.html#cb174-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Gambling&quot;</span>,                                 </span>
<span id="cb174-17"><a href="regular-expressions.html#cb174-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Homicide&quot;</span>,                                 </span>
<span id="cb174-18"><a href="regular-expressions.html#cb174-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Human Trafficking (A), Commercial Sex Acts&quot;</span>,</span>
<span id="cb174-19"><a href="regular-expressions.html#cb174-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Human Trafficking, Commercial Sex Acts&quot;</span>,   </span>
<span id="cb174-20"><a href="regular-expressions.html#cb174-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Juvenile Offenses&quot;</span>,                        </span>
<span id="cb174-21"><a href="regular-expressions.html#cb174-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Larceny Theft&quot;</span>,                            </span>
<span id="cb174-22"><a href="regular-expressions.html#cb174-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Liquor Laws&quot;</span>,                              </span>
<span id="cb174-23"><a href="regular-expressions.html#cb174-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Lost Property&quot;</span>,                            </span>
<span id="cb174-24"><a href="regular-expressions.html#cb174-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Malicious Mischief&quot;</span>,                       </span>
<span id="cb174-25"><a href="regular-expressions.html#cb174-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Miscellaneous Investigation&quot;</span>,              </span>
<span id="cb174-26"><a href="regular-expressions.html#cb174-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Missing Person&quot;</span>,                           </span>
<span id="cb174-27"><a href="regular-expressions.html#cb174-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Motor Vehicle Theft&quot;</span>,                      </span>
<span id="cb174-28"><a href="regular-expressions.html#cb174-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Motor Vehicle Theft?&quot;</span>,                     </span>
<span id="cb174-29"><a href="regular-expressions.html#cb174-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Non-Criminal&quot;</span>,                             </span>
<span id="cb174-30"><a href="regular-expressions.html#cb174-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Offences Against The Family And Children&quot;</span>, </span>
<span id="cb174-31"><a href="regular-expressions.html#cb174-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Other&quot;</span>,                                    </span>
<span id="cb174-32"><a href="regular-expressions.html#cb174-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Other Miscellaneous&quot;</span>,                      </span>
<span id="cb174-33"><a href="regular-expressions.html#cb174-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Other Offenses&quot;</span>,                           </span>
<span id="cb174-34"><a href="regular-expressions.html#cb174-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Prostitution&quot;</span>,                             </span>
<span id="cb174-35"><a href="regular-expressions.html#cb174-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Rape&quot;</span>,                                     </span>
<span id="cb174-36"><a href="regular-expressions.html#cb174-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Recovered Vehicle&quot;</span>,                        </span>
<span id="cb174-37"><a href="regular-expressions.html#cb174-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Robbery&quot;</span>,                                  </span>
<span id="cb174-38"><a href="regular-expressions.html#cb174-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Sex Offense&quot;</span>,                              </span>
<span id="cb174-39"><a href="regular-expressions.html#cb174-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Stolen Property&quot;</span>,                          </span>
<span id="cb174-40"><a href="regular-expressions.html#cb174-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Suicide&quot;</span>,                                  </span>
<span id="cb174-41"><a href="regular-expressions.html#cb174-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Suspicious&quot;</span>,                               </span>
<span id="cb174-42"><a href="regular-expressions.html#cb174-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Suspicious Occ&quot;</span>,                           </span>
<span id="cb174-43"><a href="regular-expressions.html#cb174-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Traffic Collision&quot;</span>,                        </span>
<span id="cb174-44"><a href="regular-expressions.html#cb174-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Traffic Violation Arrest&quot;</span>,                 </span>
<span id="cb174-45"><a href="regular-expressions.html#cb174-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Vandalism&quot;</span>,                                </span>
<span id="cb174-46"><a href="regular-expressions.html#cb174-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Vehicle Impounded&quot;</span>,                        </span>
<span id="cb174-47"><a href="regular-expressions.html#cb174-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Vehicle Misplaced&quot;</span>,                        </span>
<span id="cb174-48"><a href="regular-expressions.html#cb174-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Warrant&quot;</span>,                                  </span>
<span id="cb174-49"><a href="regular-expressions.html#cb174-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Weapons Carrying Etc&quot;</span>,                     </span>
<span id="cb174-50"><a href="regular-expressions.html#cb174-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Weapons Offence&quot;</span>,                          </span>
<span id="cb174-51"><a href="regular-expressions.html#cb174-51" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Weapons Offense&quot;</span></span>
<span id="cb174-52"><a href="regular-expressions.html#cb174-52" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>When looking closely at these crimes it is clear that some may overlap in certain categories such as theft, and there are several duplicates with slight differences in spelling. For example the last two crimes are “Weapons Offence” and “Weapons Offense.” These should be the same crime but the first one spelled “offense” wrong. And take a look at “motor vehicle theft.” There are two crimes here because one of them adds a question mark at the end for some reason.</p>
<div id="finding-patterns-in-text-with-grep" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Finding patterns in text with <code>grep()</code><a href="regular-expressions.html#finding-patterns-in-text-with-grep" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We’ll start with <code>grep()</code> which allows us to search a vector of data (in R, columns in a data.frame operate the same as a vector) and find where there is a match for the pattern we want to look for.</p>
<p>The syntax for <code>grep()</code> is</p>
<p><code>grep("pattern", data)</code></p>
<p>where pattern is the pattern you are searching for, such as “a” if you want to find all values with the letter a. The pattern must always be in quotes. data is a vector of strings (such as <em>crimes</em> we made above or a column in a data.frame) that you are searching in to find the pattern.</p>
<p>The output of this function is a number that says which element(s) in the vector the pattern was found in. If it returns, for example, the numbers 1 and 3 you know that the first and third element in your vector has the pattern - and that no other elements do. It is essentially returning the index where the conditional statement “is this pattern present” is true.</p>
<p>So since our data is <em>crimes</em> our <code>grep()</code> function will be <code>grep("", crimes)</code>. What we put in the “” is the pattern we want to search for.</p>
<p>Let’s start with the letter “a”.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="regular-expressions.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;a&quot;</span>, crimes)</span>
<span id="cb175-2"><a href="regular-expressions.html#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1]  2  3  4  5  9 11 14 15 17 18 20 21 23 24 28 29 31 34 42 43 44 46 47 48 49</span></span>
<span id="cb175-3"><a href="regular-expressions.html#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] 50</span></span></code></pre></div>
<p>It gives us a bunch of numbers where the letter “a” is present in that element of <em>crimes</em>. This is useful for subsetting. We can use <code>grep()</code> to find all values that match a pattern we want and subset to keep just those values.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="regular-expressions.html#cb176-1" aria-hidden="true" tabindex="-1"></a>crimes[<span class="fu">grep</span>(<span class="st">&quot;a&quot;</span>, crimes)]</span>
<span id="cb176-2"><a href="regular-expressions.html#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Assault&quot;                                   </span></span>
<span id="cb176-3"><a href="regular-expressions.html#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Burglary&quot;                                  </span></span>
<span id="cb176-4"><a href="regular-expressions.html#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Case Closure&quot;                              </span></span>
<span id="cb176-5"><a href="regular-expressions.html#cb176-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Civil Sidewalks&quot;                           </span></span>
<span id="cb176-6"><a href="regular-expressions.html#cb176-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Drug Violation&quot;                            </span></span>
<span id="cb176-7"><a href="regular-expressions.html#cb176-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Family Offense&quot;                            </span></span>
<span id="cb176-8"><a href="regular-expressions.html#cb176-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Fraud&quot;                                     </span></span>
<span id="cb176-9"><a href="regular-expressions.html#cb176-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Gambling&quot;                                  </span></span>
<span id="cb176-10"><a href="regular-expressions.html#cb176-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb176-11"><a href="regular-expressions.html#cb176-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb176-12"><a href="regular-expressions.html#cb176-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Larceny Theft&quot;                             </span></span>
<span id="cb176-13"><a href="regular-expressions.html#cb176-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Liquor Laws&quot;                               </span></span>
<span id="cb176-14"><a href="regular-expressions.html#cb176-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Malicious Mischief&quot;                        </span></span>
<span id="cb176-15"><a href="regular-expressions.html#cb176-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Miscellaneous Investigation&quot;               </span></span>
<span id="cb176-16"><a href="regular-expressions.html#cb176-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Non-Criminal&quot;                              </span></span>
<span id="cb176-17"><a href="regular-expressions.html#cb176-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;Offences Against The Family And Children&quot;  </span></span>
<span id="cb176-18"><a href="regular-expressions.html#cb176-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;Other Miscellaneous&quot;                       </span></span>
<span id="cb176-19"><a href="regular-expressions.html#cb176-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;Rape&quot;                                      </span></span>
<span id="cb176-20"><a href="regular-expressions.html#cb176-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;Traffic Collision&quot;                         </span></span>
<span id="cb176-21"><a href="regular-expressions.html#cb176-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;Traffic Violation Arrest&quot;                  </span></span>
<span id="cb176-22"><a href="regular-expressions.html#cb176-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;Vandalism&quot;                                 </span></span>
<span id="cb176-23"><a href="regular-expressions.html#cb176-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;Vehicle Misplaced&quot;                         </span></span>
<span id="cb176-24"><a href="regular-expressions.html#cb176-24" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;Warrant&quot;                                   </span></span>
<span id="cb176-25"><a href="regular-expressions.html#cb176-25" aria-hidden="true" tabindex="-1"></a><span class="co"># [24] &quot;Weapons Carrying Etc&quot;                      </span></span>
<span id="cb176-26"><a href="regular-expressions.html#cb176-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;Weapons Offence&quot;                           </span></span>
<span id="cb176-27"><a href="regular-expressions.html#cb176-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] &quot;Weapons Offense&quot;</span></span></code></pre></div>
<p>Searching for the letter “a” isn’t that useful. Let’s say we want to subset the data to only include theft-related crimes. From reading the list of crimes we can see there are multiple theft crimes - “Larceny Theft”, “Motor Vehicle Theft”, and “Motor Vehicle Theft?”. We may also want to include “Stolen Property” in this search, but we’ll wait until later in this lesson for how to search for multiple patterns. Since those three crimes all have the word “Theft” in the name we can search for that pattern, and it will return only those crimes.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="regular-expressions.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Theft&quot;</span>, crimes)</span>
<span id="cb177-2"><a href="regular-expressions.html#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] 20 26 27</span></span></code></pre></div>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="regular-expressions.html#cb178-1" aria-hidden="true" tabindex="-1"></a>crimes[<span class="fu">grep</span>(<span class="st">&quot;Theft&quot;</span>, crimes)]</span>
<span id="cb178-2"><a href="regular-expressions.html#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Larceny Theft&quot;        &quot;Motor Vehicle Theft&quot;  &quot;Motor Vehicle Theft?&quot;</span></span></code></pre></div>
<p>A very useful parameter in <code>grep()</code> is <code>value</code>. When we set <code>value</code> to TRUE, it will print out the actual strings that are a match rather than the element number. While this prevents us from using it to subset (since R no longer knows which rows are a match), it is an excellent tool to check if the <code>grep()</code> was successful as we can visually confirm it returns what we want. When we start to learn about special characters that make the patterns more complicated, this will be important.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="regular-expressions.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Theft&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb179-2"><a href="regular-expressions.html#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Larceny Theft&quot;        &quot;Motor Vehicle Theft&quot;  &quot;Motor Vehicle Theft?&quot;</span></span></code></pre></div>
<p>Note that <code>grep()</code> (and <code>gsub()</code>) is case sensitive so you must capitalize properly.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="regular-expressions.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;theft&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb180-2"><a href="regular-expressions.html#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="co"># character(0)</span></span></code></pre></div>
<p>Setting the parameter <code>ignore.case</code> to be TRUE makes <code>grep()</code> ignore capitalization.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="regular-expressions.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;theft&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb181-2"><a href="regular-expressions.html#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Larceny Theft&quot;        &quot;Motor Vehicle Theft&quot;  &quot;Motor Vehicle Theft?&quot;</span></span></code></pre></div>
<p>If we want to find values that do <em>not</em> match with “theft”, we can set the parameter <code>invert</code> to TRUE.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="regular-expressions.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;theft&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>, <span class="at">invert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb182-2"><a href="regular-expressions.html#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Arson&quot;                                     </span></span>
<span id="cb182-3"><a href="regular-expressions.html#cb182-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Assault&quot;                                   </span></span>
<span id="cb182-4"><a href="regular-expressions.html#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Burglary&quot;                                  </span></span>
<span id="cb182-5"><a href="regular-expressions.html#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Case Closure&quot;                              </span></span>
<span id="cb182-6"><a href="regular-expressions.html#cb182-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Civil Sidewalks&quot;                           </span></span>
<span id="cb182-7"><a href="regular-expressions.html#cb182-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Courtesy Report&quot;                           </span></span>
<span id="cb182-8"><a href="regular-expressions.html#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Disorderly Conduct&quot;                        </span></span>
<span id="cb182-9"><a href="regular-expressions.html#cb182-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Drug Offense&quot;                              </span></span>
<span id="cb182-10"><a href="regular-expressions.html#cb182-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Drug Violation&quot;                            </span></span>
<span id="cb182-11"><a href="regular-expressions.html#cb182-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Embezzlement&quot;                              </span></span>
<span id="cb182-12"><a href="regular-expressions.html#cb182-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Family Offense&quot;                            </span></span>
<span id="cb182-13"><a href="regular-expressions.html#cb182-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Fire Report&quot;                               </span></span>
<span id="cb182-14"><a href="regular-expressions.html#cb182-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Forgery And Counterfeiting&quot;                </span></span>
<span id="cb182-15"><a href="regular-expressions.html#cb182-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Fraud&quot;                                     </span></span>
<span id="cb182-16"><a href="regular-expressions.html#cb182-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Gambling&quot;                                  </span></span>
<span id="cb182-17"><a href="regular-expressions.html#cb182-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;Homicide&quot;                                  </span></span>
<span id="cb182-18"><a href="regular-expressions.html#cb182-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb182-19"><a href="regular-expressions.html#cb182-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb182-20"><a href="regular-expressions.html#cb182-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;Juvenile Offenses&quot;                         </span></span>
<span id="cb182-21"><a href="regular-expressions.html#cb182-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;Liquor Laws&quot;                               </span></span>
<span id="cb182-22"><a href="regular-expressions.html#cb182-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;Lost Property&quot;                             </span></span>
<span id="cb182-23"><a href="regular-expressions.html#cb182-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;Malicious Mischief&quot;                        </span></span>
<span id="cb182-24"><a href="regular-expressions.html#cb182-24" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;Miscellaneous Investigation&quot;               </span></span>
<span id="cb182-25"><a href="regular-expressions.html#cb182-25" aria-hidden="true" tabindex="-1"></a><span class="co"># [24] &quot;Missing Person&quot;                            </span></span>
<span id="cb182-26"><a href="regular-expressions.html#cb182-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;Non-Criminal&quot;                              </span></span>
<span id="cb182-27"><a href="regular-expressions.html#cb182-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] &quot;Offences Against The Family And Children&quot;  </span></span>
<span id="cb182-28"><a href="regular-expressions.html#cb182-28" aria-hidden="true" tabindex="-1"></a><span class="co"># [27] &quot;Other&quot;                                     </span></span>
<span id="cb182-29"><a href="regular-expressions.html#cb182-29" aria-hidden="true" tabindex="-1"></a><span class="co"># [28] &quot;Other Miscellaneous&quot;                       </span></span>
<span id="cb182-30"><a href="regular-expressions.html#cb182-30" aria-hidden="true" tabindex="-1"></a><span class="co"># [29] &quot;Other Offenses&quot;                            </span></span>
<span id="cb182-31"><a href="regular-expressions.html#cb182-31" aria-hidden="true" tabindex="-1"></a><span class="co"># [30] &quot;Prostitution&quot;                              </span></span>
<span id="cb182-32"><a href="regular-expressions.html#cb182-32" aria-hidden="true" tabindex="-1"></a><span class="co"># [31] &quot;Rape&quot;                                      </span></span>
<span id="cb182-33"><a href="regular-expressions.html#cb182-33" aria-hidden="true" tabindex="-1"></a><span class="co"># [32] &quot;Recovered Vehicle&quot;                         </span></span>
<span id="cb182-34"><a href="regular-expressions.html#cb182-34" aria-hidden="true" tabindex="-1"></a><span class="co"># [33] &quot;Robbery&quot;                                   </span></span>
<span id="cb182-35"><a href="regular-expressions.html#cb182-35" aria-hidden="true" tabindex="-1"></a><span class="co"># [34] &quot;Sex Offense&quot;                               </span></span>
<span id="cb182-36"><a href="regular-expressions.html#cb182-36" aria-hidden="true" tabindex="-1"></a><span class="co"># [35] &quot;Stolen Property&quot;                           </span></span>
<span id="cb182-37"><a href="regular-expressions.html#cb182-37" aria-hidden="true" tabindex="-1"></a><span class="co"># [36] &quot;Suicide&quot;                                   </span></span>
<span id="cb182-38"><a href="regular-expressions.html#cb182-38" aria-hidden="true" tabindex="-1"></a><span class="co"># [37] &quot;Suspicious&quot;                                </span></span>
<span id="cb182-39"><a href="regular-expressions.html#cb182-39" aria-hidden="true" tabindex="-1"></a><span class="co"># [38] &quot;Suspicious Occ&quot;                            </span></span>
<span id="cb182-40"><a href="regular-expressions.html#cb182-40" aria-hidden="true" tabindex="-1"></a><span class="co"># [39] &quot;Traffic Collision&quot;                         </span></span>
<span id="cb182-41"><a href="regular-expressions.html#cb182-41" aria-hidden="true" tabindex="-1"></a><span class="co"># [40] &quot;Traffic Violation Arrest&quot;                  </span></span>
<span id="cb182-42"><a href="regular-expressions.html#cb182-42" aria-hidden="true" tabindex="-1"></a><span class="co"># [41] &quot;Vandalism&quot;                                 </span></span>
<span id="cb182-43"><a href="regular-expressions.html#cb182-43" aria-hidden="true" tabindex="-1"></a><span class="co"># [42] &quot;Vehicle Impounded&quot;                         </span></span>
<span id="cb182-44"><a href="regular-expressions.html#cb182-44" aria-hidden="true" tabindex="-1"></a><span class="co"># [43] &quot;Vehicle Misplaced&quot;                         </span></span>
<span id="cb182-45"><a href="regular-expressions.html#cb182-45" aria-hidden="true" tabindex="-1"></a><span class="co"># [44] &quot;Warrant&quot;                                   </span></span>
<span id="cb182-46"><a href="regular-expressions.html#cb182-46" aria-hidden="true" tabindex="-1"></a><span class="co"># [45] &quot;Weapons Carrying Etc&quot;                      </span></span>
<span id="cb182-47"><a href="regular-expressions.html#cb182-47" aria-hidden="true" tabindex="-1"></a><span class="co"># [46] &quot;Weapons Offence&quot;                           </span></span>
<span id="cb182-48"><a href="regular-expressions.html#cb182-48" aria-hidden="true" tabindex="-1"></a><span class="co"># [47] &quot;Weapons Offense&quot;</span></span></code></pre></div>
</div>
<div id="finding-and-replacing-patterns-in-text-with-gsub" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Finding and replacing patterns in text with <code>gsub()</code><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>gsub()</code> takes patterns and replaces them with other patterns. An important use in criminology for <code>gsub()</code> is to fix spelling mistakes in the text, such as the way “offense” was spelled wrong in our data. This will be a standard part of your data cleaning process and is important as a misspelled word can cause significant issues. For example if our previous example of marijuana legalization in Colorado had half of agencies misspelling the name “Colorado”, aggregating the data by the state (or simply subsetting to just Colorado agencies) would give completely different results as you’d lose half your data.</p>
<p><code>gsub()</code> is also useful when you want to take subcategories and change the value to larger categories. For example we could take any crime with the word “Theft” in it and change the whole crime name to “Theft”. In our data that would take 3 subcategories of thefts and turn it into a larger category we could aggregate to. This will be useful in city-level data where you may only care about a certain type of crime but it has many subcategories that you need to aggregate.</p>
<p>The syntax of <code>gsub()</code> is similar to <code>grep()</code> with the addition of a pattern to replace the pattern we found.</p>
<p><code>gsub("find_pattern", "replace_pattern", data)</code></p>
<p>Let’s start with a simple example of finding the letter “a” and replacing it with “z”. Our data will be the word “cat”.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="regular-expressions.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;cat&quot;</span>)</span>
<span id="cb183-2"><a href="regular-expressions.html#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;czt&quot;</span></span></code></pre></div>
<p>Like <code>grep()</code>, <code>gsub()</code> is case sensitive and has the parameter <code>ignore.case</code> to ignore capitalization.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="regular-expressions.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;cat&quot;</span>)</span>
<span id="cb184-2"><a href="regular-expressions.html#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;cat&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="regular-expressions.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;z&quot;</span>, <span class="st">&quot;cat&quot;</span>, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb185-2"><a href="regular-expressions.html#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;czt&quot;</span></span></code></pre></div>
<p><code>gsub()</code> returns the same data you input but with the pattern already replaced. Above you can see that when using capital A, it returns “cat” unchanged as it never found the pattern. When <code>ignore.case</code> was set to TRUE it returned “czt” as it then matched to letter “A”.</p>
<p>We can use <code>gsub()</code> to replace some issues in the crimes data, such as “Offense” being spelled “Offence”.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="regular-expressions.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;Offence&quot;</span>, <span class="st">&quot;Offense&quot;</span>, crimes)</span>
<span id="cb186-2"><a href="regular-expressions.html#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Arson&quot;                                     </span></span>
<span id="cb186-3"><a href="regular-expressions.html#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Assault&quot;                                   </span></span>
<span id="cb186-4"><a href="regular-expressions.html#cb186-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Burglary&quot;                                  </span></span>
<span id="cb186-5"><a href="regular-expressions.html#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Case Closure&quot;                              </span></span>
<span id="cb186-6"><a href="regular-expressions.html#cb186-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Civil Sidewalks&quot;                           </span></span>
<span id="cb186-7"><a href="regular-expressions.html#cb186-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Courtesy Report&quot;                           </span></span>
<span id="cb186-8"><a href="regular-expressions.html#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Disorderly Conduct&quot;                        </span></span>
<span id="cb186-9"><a href="regular-expressions.html#cb186-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Drug Offense&quot;                              </span></span>
<span id="cb186-10"><a href="regular-expressions.html#cb186-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Drug Violation&quot;                            </span></span>
<span id="cb186-11"><a href="regular-expressions.html#cb186-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Embezzlement&quot;                              </span></span>
<span id="cb186-12"><a href="regular-expressions.html#cb186-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Family Offense&quot;                            </span></span>
<span id="cb186-13"><a href="regular-expressions.html#cb186-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Fire Report&quot;                               </span></span>
<span id="cb186-14"><a href="regular-expressions.html#cb186-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Forgery And Counterfeiting&quot;                </span></span>
<span id="cb186-15"><a href="regular-expressions.html#cb186-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Fraud&quot;                                     </span></span>
<span id="cb186-16"><a href="regular-expressions.html#cb186-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Gambling&quot;                                  </span></span>
<span id="cb186-17"><a href="regular-expressions.html#cb186-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;Homicide&quot;                                  </span></span>
<span id="cb186-18"><a href="regular-expressions.html#cb186-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb186-19"><a href="regular-expressions.html#cb186-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb186-20"><a href="regular-expressions.html#cb186-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;Juvenile Offenses&quot;                         </span></span>
<span id="cb186-21"><a href="regular-expressions.html#cb186-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;Larceny Theft&quot;                             </span></span>
<span id="cb186-22"><a href="regular-expressions.html#cb186-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;Liquor Laws&quot;                               </span></span>
<span id="cb186-23"><a href="regular-expressions.html#cb186-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;Lost Property&quot;                             </span></span>
<span id="cb186-24"><a href="regular-expressions.html#cb186-24" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;Malicious Mischief&quot;                        </span></span>
<span id="cb186-25"><a href="regular-expressions.html#cb186-25" aria-hidden="true" tabindex="-1"></a><span class="co"># [24] &quot;Miscellaneous Investigation&quot;               </span></span>
<span id="cb186-26"><a href="regular-expressions.html#cb186-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;Missing Person&quot;                            </span></span>
<span id="cb186-27"><a href="regular-expressions.html#cb186-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] &quot;Motor Vehicle Theft&quot;                       </span></span>
<span id="cb186-28"><a href="regular-expressions.html#cb186-28" aria-hidden="true" tabindex="-1"></a><span class="co"># [27] &quot;Motor Vehicle Theft?&quot;                      </span></span>
<span id="cb186-29"><a href="regular-expressions.html#cb186-29" aria-hidden="true" tabindex="-1"></a><span class="co"># [28] &quot;Non-Criminal&quot;                              </span></span>
<span id="cb186-30"><a href="regular-expressions.html#cb186-30" aria-hidden="true" tabindex="-1"></a><span class="co"># [29] &quot;Offenses Against The Family And Children&quot;  </span></span>
<span id="cb186-31"><a href="regular-expressions.html#cb186-31" aria-hidden="true" tabindex="-1"></a><span class="co"># [30] &quot;Other&quot;                                     </span></span>
<span id="cb186-32"><a href="regular-expressions.html#cb186-32" aria-hidden="true" tabindex="-1"></a><span class="co"># [31] &quot;Other Miscellaneous&quot;                       </span></span>
<span id="cb186-33"><a href="regular-expressions.html#cb186-33" aria-hidden="true" tabindex="-1"></a><span class="co"># [32] &quot;Other Offenses&quot;                            </span></span>
<span id="cb186-34"><a href="regular-expressions.html#cb186-34" aria-hidden="true" tabindex="-1"></a><span class="co"># [33] &quot;Prostitution&quot;                              </span></span>
<span id="cb186-35"><a href="regular-expressions.html#cb186-35" aria-hidden="true" tabindex="-1"></a><span class="co"># [34] &quot;Rape&quot;                                      </span></span>
<span id="cb186-36"><a href="regular-expressions.html#cb186-36" aria-hidden="true" tabindex="-1"></a><span class="co"># [35] &quot;Recovered Vehicle&quot;                         </span></span>
<span id="cb186-37"><a href="regular-expressions.html#cb186-37" aria-hidden="true" tabindex="-1"></a><span class="co"># [36] &quot;Robbery&quot;                                   </span></span>
<span id="cb186-38"><a href="regular-expressions.html#cb186-38" aria-hidden="true" tabindex="-1"></a><span class="co"># [37] &quot;Sex Offense&quot;                               </span></span>
<span id="cb186-39"><a href="regular-expressions.html#cb186-39" aria-hidden="true" tabindex="-1"></a><span class="co"># [38] &quot;Stolen Property&quot;                           </span></span>
<span id="cb186-40"><a href="regular-expressions.html#cb186-40" aria-hidden="true" tabindex="-1"></a><span class="co"># [39] &quot;Suicide&quot;                                   </span></span>
<span id="cb186-41"><a href="regular-expressions.html#cb186-41" aria-hidden="true" tabindex="-1"></a><span class="co"># [40] &quot;Suspicious&quot;                                </span></span>
<span id="cb186-42"><a href="regular-expressions.html#cb186-42" aria-hidden="true" tabindex="-1"></a><span class="co"># [41] &quot;Suspicious Occ&quot;                            </span></span>
<span id="cb186-43"><a href="regular-expressions.html#cb186-43" aria-hidden="true" tabindex="-1"></a><span class="co"># [42] &quot;Traffic Collision&quot;                         </span></span>
<span id="cb186-44"><a href="regular-expressions.html#cb186-44" aria-hidden="true" tabindex="-1"></a><span class="co"># [43] &quot;Traffic Violation Arrest&quot;                  </span></span>
<span id="cb186-45"><a href="regular-expressions.html#cb186-45" aria-hidden="true" tabindex="-1"></a><span class="co"># [44] &quot;Vandalism&quot;                                 </span></span>
<span id="cb186-46"><a href="regular-expressions.html#cb186-46" aria-hidden="true" tabindex="-1"></a><span class="co"># [45] &quot;Vehicle Impounded&quot;                         </span></span>
<span id="cb186-47"><a href="regular-expressions.html#cb186-47" aria-hidden="true" tabindex="-1"></a><span class="co"># [46] &quot;Vehicle Misplaced&quot;                         </span></span>
<span id="cb186-48"><a href="regular-expressions.html#cb186-48" aria-hidden="true" tabindex="-1"></a><span class="co"># [47] &quot;Warrant&quot;                                   </span></span>
<span id="cb186-49"><a href="regular-expressions.html#cb186-49" aria-hidden="true" tabindex="-1"></a><span class="co"># [48] &quot;Weapons Carrying Etc&quot;                      </span></span>
<span id="cb186-50"><a href="regular-expressions.html#cb186-50" aria-hidden="true" tabindex="-1"></a><span class="co"># [49] &quot;Weapons Offense&quot;                           </span></span>
<span id="cb186-51"><a href="regular-expressions.html#cb186-51" aria-hidden="true" tabindex="-1"></a><span class="co"># [50] &quot;Weapons Offense&quot;</span></span></code></pre></div>
<p>A useful pattern is an empty string “” which says replace whatever the find_pattern is with nothing, deleting it. Let’s delete the letter “a” (lowercase only) from the data.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="regular-expressions.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;&quot;</span>, crimes)</span>
<span id="cb187-2"><a href="regular-expressions.html#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Arson&quot;                                  </span></span>
<span id="cb187-3"><a href="regular-expressions.html#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Assult&quot;                                 </span></span>
<span id="cb187-4"><a href="regular-expressions.html#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Burglry&quot;                                </span></span>
<span id="cb187-5"><a href="regular-expressions.html#cb187-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Cse Closure&quot;                            </span></span>
<span id="cb187-6"><a href="regular-expressions.html#cb187-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Civil Sidewlks&quot;                         </span></span>
<span id="cb187-7"><a href="regular-expressions.html#cb187-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Courtesy Report&quot;                        </span></span>
<span id="cb187-8"><a href="regular-expressions.html#cb187-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Disorderly Conduct&quot;                     </span></span>
<span id="cb187-9"><a href="regular-expressions.html#cb187-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Drug Offense&quot;                           </span></span>
<span id="cb187-10"><a href="regular-expressions.html#cb187-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Drug Violtion&quot;                          </span></span>
<span id="cb187-11"><a href="regular-expressions.html#cb187-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Embezzlement&quot;                           </span></span>
<span id="cb187-12"><a href="regular-expressions.html#cb187-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Fmily Offense&quot;                          </span></span>
<span id="cb187-13"><a href="regular-expressions.html#cb187-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Fire Report&quot;                            </span></span>
<span id="cb187-14"><a href="regular-expressions.html#cb187-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Forgery And Counterfeiting&quot;             </span></span>
<span id="cb187-15"><a href="regular-expressions.html#cb187-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Frud&quot;                                   </span></span>
<span id="cb187-16"><a href="regular-expressions.html#cb187-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Gmbling&quot;                                </span></span>
<span id="cb187-17"><a href="regular-expressions.html#cb187-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;Homicide&quot;                               </span></span>
<span id="cb187-18"><a href="regular-expressions.html#cb187-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;Humn Trfficking (A), Commercil Sex Acts&quot;</span></span>
<span id="cb187-19"><a href="regular-expressions.html#cb187-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;Humn Trfficking, Commercil Sex Acts&quot;    </span></span>
<span id="cb187-20"><a href="regular-expressions.html#cb187-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;Juvenile Offenses&quot;                      </span></span>
<span id="cb187-21"><a href="regular-expressions.html#cb187-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;Lrceny Theft&quot;                           </span></span>
<span id="cb187-22"><a href="regular-expressions.html#cb187-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;Liquor Lws&quot;                             </span></span>
<span id="cb187-23"><a href="regular-expressions.html#cb187-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;Lost Property&quot;                          </span></span>
<span id="cb187-24"><a href="regular-expressions.html#cb187-24" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;Mlicious Mischief&quot;                      </span></span>
<span id="cb187-25"><a href="regular-expressions.html#cb187-25" aria-hidden="true" tabindex="-1"></a><span class="co"># [24] &quot;Miscellneous Investigtion&quot;              </span></span>
<span id="cb187-26"><a href="regular-expressions.html#cb187-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;Missing Person&quot;                         </span></span>
<span id="cb187-27"><a href="regular-expressions.html#cb187-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] &quot;Motor Vehicle Theft&quot;                    </span></span>
<span id="cb187-28"><a href="regular-expressions.html#cb187-28" aria-hidden="true" tabindex="-1"></a><span class="co"># [27] &quot;Motor Vehicle Theft?&quot;                   </span></span>
<span id="cb187-29"><a href="regular-expressions.html#cb187-29" aria-hidden="true" tabindex="-1"></a><span class="co"># [28] &quot;Non-Criminl&quot;                            </span></span>
<span id="cb187-30"><a href="regular-expressions.html#cb187-30" aria-hidden="true" tabindex="-1"></a><span class="co"># [29] &quot;Offences Aginst The Fmily And Children&quot; </span></span>
<span id="cb187-31"><a href="regular-expressions.html#cb187-31" aria-hidden="true" tabindex="-1"></a><span class="co"># [30] &quot;Other&quot;                                  </span></span>
<span id="cb187-32"><a href="regular-expressions.html#cb187-32" aria-hidden="true" tabindex="-1"></a><span class="co"># [31] &quot;Other Miscellneous&quot;                     </span></span>
<span id="cb187-33"><a href="regular-expressions.html#cb187-33" aria-hidden="true" tabindex="-1"></a><span class="co"># [32] &quot;Other Offenses&quot;                         </span></span>
<span id="cb187-34"><a href="regular-expressions.html#cb187-34" aria-hidden="true" tabindex="-1"></a><span class="co"># [33] &quot;Prostitution&quot;                           </span></span>
<span id="cb187-35"><a href="regular-expressions.html#cb187-35" aria-hidden="true" tabindex="-1"></a><span class="co"># [34] &quot;Rpe&quot;                                    </span></span>
<span id="cb187-36"><a href="regular-expressions.html#cb187-36" aria-hidden="true" tabindex="-1"></a><span class="co"># [35] &quot;Recovered Vehicle&quot;                      </span></span>
<span id="cb187-37"><a href="regular-expressions.html#cb187-37" aria-hidden="true" tabindex="-1"></a><span class="co"># [36] &quot;Robbery&quot;                                </span></span>
<span id="cb187-38"><a href="regular-expressions.html#cb187-38" aria-hidden="true" tabindex="-1"></a><span class="co"># [37] &quot;Sex Offense&quot;                            </span></span>
<span id="cb187-39"><a href="regular-expressions.html#cb187-39" aria-hidden="true" tabindex="-1"></a><span class="co"># [38] &quot;Stolen Property&quot;                        </span></span>
<span id="cb187-40"><a href="regular-expressions.html#cb187-40" aria-hidden="true" tabindex="-1"></a><span class="co"># [39] &quot;Suicide&quot;                                </span></span>
<span id="cb187-41"><a href="regular-expressions.html#cb187-41" aria-hidden="true" tabindex="-1"></a><span class="co"># [40] &quot;Suspicious&quot;                             </span></span>
<span id="cb187-42"><a href="regular-expressions.html#cb187-42" aria-hidden="true" tabindex="-1"></a><span class="co"># [41] &quot;Suspicious Occ&quot;                         </span></span>
<span id="cb187-43"><a href="regular-expressions.html#cb187-43" aria-hidden="true" tabindex="-1"></a><span class="co"># [42] &quot;Trffic Collision&quot;                       </span></span>
<span id="cb187-44"><a href="regular-expressions.html#cb187-44" aria-hidden="true" tabindex="-1"></a><span class="co"># [43] &quot;Trffic Violtion Arrest&quot;                 </span></span>
<span id="cb187-45"><a href="regular-expressions.html#cb187-45" aria-hidden="true" tabindex="-1"></a><span class="co"># [44] &quot;Vndlism&quot;                                </span></span>
<span id="cb187-46"><a href="regular-expressions.html#cb187-46" aria-hidden="true" tabindex="-1"></a><span class="co"># [45] &quot;Vehicle Impounded&quot;                      </span></span>
<span id="cb187-47"><a href="regular-expressions.html#cb187-47" aria-hidden="true" tabindex="-1"></a><span class="co"># [46] &quot;Vehicle Misplced&quot;                       </span></span>
<span id="cb187-48"><a href="regular-expressions.html#cb187-48" aria-hidden="true" tabindex="-1"></a><span class="co"># [47] &quot;Wrrnt&quot;                                  </span></span>
<span id="cb187-49"><a href="regular-expressions.html#cb187-49" aria-hidden="true" tabindex="-1"></a><span class="co"># [48] &quot;Wepons Crrying Etc&quot;                     </span></span>
<span id="cb187-50"><a href="regular-expressions.html#cb187-50" aria-hidden="true" tabindex="-1"></a><span class="co"># [49] &quot;Wepons Offence&quot;                         </span></span>
<span id="cb187-51"><a href="regular-expressions.html#cb187-51" aria-hidden="true" tabindex="-1"></a><span class="co"># [50] &quot;Wepons Offense&quot;</span></span></code></pre></div>
</div>
<div id="useful-special-characters" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Useful special characters<a href="regular-expressions.html#useful-special-characters" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far, we have just searched for a single character or word and expected a return only if an exact match was found. Now we’ll discuss a number of characters called “special characters” that allow us to make more complex <code>grep()</code> and <code>gsub()</code> pattern searches.</p>
<div id="multiple-characters" class="section level3 hasAnchor" number="12.3.1">
<h3><span class="header-section-number">12.3.1</span> Multiple characters <code>[]</code><a href="regular-expressions.html#multiple-characters" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To search for multiple matches we can put the pattern we want to search for inside square brackets <code>[]</code> (note that we use the same square brackets for subsetting, but they operate very differently in this context). For example, we can find all the crimes that contain the letters “x”, “y”, or “z”.</p>
<p>The <code>grep()</code> searches if any of the letters inside of the <code>[]</code> are present in our <em>crimes</em> vector.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="regular-expressions.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[xyz]&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb188-2"><a href="regular-expressions.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Burglary&quot;                                  </span></span>
<span id="cb188-3"><a href="regular-expressions.html#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Courtesy Report&quot;                           </span></span>
<span id="cb188-4"><a href="regular-expressions.html#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Disorderly Conduct&quot;                        </span></span>
<span id="cb188-5"><a href="regular-expressions.html#cb188-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Embezzlement&quot;                              </span></span>
<span id="cb188-6"><a href="regular-expressions.html#cb188-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Family Offense&quot;                            </span></span>
<span id="cb188-7"><a href="regular-expressions.html#cb188-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Forgery And Counterfeiting&quot;                </span></span>
<span id="cb188-8"><a href="regular-expressions.html#cb188-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb188-9"><a href="regular-expressions.html#cb188-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb188-10"><a href="regular-expressions.html#cb188-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Larceny Theft&quot;                             </span></span>
<span id="cb188-11"><a href="regular-expressions.html#cb188-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Lost Property&quot;                             </span></span>
<span id="cb188-12"><a href="regular-expressions.html#cb188-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Offences Against The Family And Children&quot;  </span></span>
<span id="cb188-13"><a href="regular-expressions.html#cb188-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Robbery&quot;                                   </span></span>
<span id="cb188-14"><a href="regular-expressions.html#cb188-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Sex Offense&quot;                               </span></span>
<span id="cb188-15"><a href="regular-expressions.html#cb188-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Stolen Property&quot;                           </span></span>
<span id="cb188-16"><a href="regular-expressions.html#cb188-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Weapons Carrying Etc&quot;</span></span></code></pre></div>
<p>As it searches for any letter inside of the square brackets, the order does not matter.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="regular-expressions.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[zyx]&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb189-2"><a href="regular-expressions.html#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Burglary&quot;                                  </span></span>
<span id="cb189-3"><a href="regular-expressions.html#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Courtesy Report&quot;                           </span></span>
<span id="cb189-4"><a href="regular-expressions.html#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Disorderly Conduct&quot;                        </span></span>
<span id="cb189-5"><a href="regular-expressions.html#cb189-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Embezzlement&quot;                              </span></span>
<span id="cb189-6"><a href="regular-expressions.html#cb189-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Family Offense&quot;                            </span></span>
<span id="cb189-7"><a href="regular-expressions.html#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Forgery And Counterfeiting&quot;                </span></span>
<span id="cb189-8"><a href="regular-expressions.html#cb189-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb189-9"><a href="regular-expressions.html#cb189-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb189-10"><a href="regular-expressions.html#cb189-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Larceny Theft&quot;                             </span></span>
<span id="cb189-11"><a href="regular-expressions.html#cb189-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Lost Property&quot;                             </span></span>
<span id="cb189-12"><a href="regular-expressions.html#cb189-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Offences Against The Family And Children&quot;  </span></span>
<span id="cb189-13"><a href="regular-expressions.html#cb189-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Robbery&quot;                                   </span></span>
<span id="cb189-14"><a href="regular-expressions.html#cb189-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Sex Offense&quot;                               </span></span>
<span id="cb189-15"><a href="regular-expressions.html#cb189-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Stolen Property&quot;                           </span></span>
<span id="cb189-16"><a href="regular-expressions.html#cb189-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Weapons Carrying Etc&quot;</span></span></code></pre></div>
<p>This also works for numbers though we do not have any numbers in the data.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="regular-expressions.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[01234567890]&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb190-2"><a href="regular-expressions.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="co"># character(0)</span></span></code></pre></div>
<p>If we wanted to search for a pattern, such as vowels, that is repeated we could put multiple <code>[]</code> patterns together. We will see another way to search for a repeated pattern soon.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="regular-expressions.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[aeiou][aeiou][aeiou]&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb191-2"><a href="regular-expressions.html#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span></span>
<span id="cb191-3"><a href="regular-expressions.html#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [3] &quot;Other Miscellaneous&quot;         &quot;Suspicious&quot;                 </span></span>
<span id="cb191-4"><a href="regular-expressions.html#cb191-4" aria-hidden="true" tabindex="-1"></a><span class="co"># [5] &quot;Suspicious Occ&quot;</span></span></code></pre></div>
<p>Inside the <code>[]</code> we can also use the dash sign <code>-</code> to make intervals between certain values. For numbers, n-m means any number between n and m (inclusive). For letters, a-z means all lowercase letters and A-Z means all uppercase letters in that range (inclusive).</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="regular-expressions.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[x-z]&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb192-2"><a href="regular-expressions.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Burglary&quot;                                  </span></span>
<span id="cb192-3"><a href="regular-expressions.html#cb192-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Courtesy Report&quot;                           </span></span>
<span id="cb192-4"><a href="regular-expressions.html#cb192-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Disorderly Conduct&quot;                        </span></span>
<span id="cb192-5"><a href="regular-expressions.html#cb192-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Embezzlement&quot;                              </span></span>
<span id="cb192-6"><a href="regular-expressions.html#cb192-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Family Offense&quot;                            </span></span>
<span id="cb192-7"><a href="regular-expressions.html#cb192-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Forgery And Counterfeiting&quot;                </span></span>
<span id="cb192-8"><a href="regular-expressions.html#cb192-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb192-9"><a href="regular-expressions.html#cb192-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb192-10"><a href="regular-expressions.html#cb192-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Larceny Theft&quot;                             </span></span>
<span id="cb192-11"><a href="regular-expressions.html#cb192-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Lost Property&quot;                             </span></span>
<span id="cb192-12"><a href="regular-expressions.html#cb192-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Offences Against The Family And Children&quot;  </span></span>
<span id="cb192-13"><a href="regular-expressions.html#cb192-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Robbery&quot;                                   </span></span>
<span id="cb192-14"><a href="regular-expressions.html#cb192-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Sex Offense&quot;                               </span></span>
<span id="cb192-15"><a href="regular-expressions.html#cb192-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Stolen Property&quot;                           </span></span>
<span id="cb192-16"><a href="regular-expressions.html#cb192-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Weapons Carrying Etc&quot;</span></span></code></pre></div>
</div>
<div id="n-many-of-previous-character-n" class="section level3 hasAnchor" number="12.3.2">
<h3><span class="header-section-number">12.3.2</span> n-many of previous character <code>{n}</code><a href="regular-expressions.html#n-many-of-previous-character-n" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>{n}</code> means the preceding item will be matched exactly n times.</p>
<p>We can use it to rewrite the above <code>grep()</code> to say the values in the <code>[]</code> should be repeated three times.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="regular-expressions.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[aeiou]{3}&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb193-2"><a href="regular-expressions.html#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span></span>
<span id="cb193-3"><a href="regular-expressions.html#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [3] &quot;Other Miscellaneous&quot;         &quot;Suspicious&quot;                 </span></span>
<span id="cb193-4"><a href="regular-expressions.html#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="co"># [5] &quot;Suspicious Occ&quot;</span></span></code></pre></div>
</div>
<div id="n-many-to-m-many-of-previous-character-nm" class="section level3 hasAnchor" number="12.3.3">
<h3><span class="header-section-number">12.3.3</span> n-many to m-many of previous character <code>{n,m}</code><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While <code>{n}</code> says “the previous character (or characters inside a <code>[]</code>) must be present exactly n times”, we can allow a range by using <code>{n,m}</code>. Here the previous character must be present between n and m times (inclusive).</p>
<p>We can check for values where there are 2-3 vowels in a row. Note that there cannot be a space before or after the comma.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="regular-expressions.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[aeiou]{2,3}&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb194-2"><a href="regular-expressions.html#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Assault&quot;                                   </span></span>
<span id="cb194-3"><a href="regular-expressions.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Courtesy Report&quot;                           </span></span>
<span id="cb194-4"><a href="regular-expressions.html#cb194-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Drug Violation&quot;                            </span></span>
<span id="cb194-5"><a href="regular-expressions.html#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Forgery And Counterfeiting&quot;                </span></span>
<span id="cb194-6"><a href="regular-expressions.html#cb194-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Fraud&quot;                                     </span></span>
<span id="cb194-7"><a href="regular-expressions.html#cb194-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb194-8"><a href="regular-expressions.html#cb194-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb194-9"><a href="regular-expressions.html#cb194-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Liquor Laws&quot;                               </span></span>
<span id="cb194-10"><a href="regular-expressions.html#cb194-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Malicious Mischief&quot;                        </span></span>
<span id="cb194-11"><a href="regular-expressions.html#cb194-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Miscellaneous Investigation&quot;               </span></span>
<span id="cb194-12"><a href="regular-expressions.html#cb194-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Offences Against The Family And Children&quot;  </span></span>
<span id="cb194-13"><a href="regular-expressions.html#cb194-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Other Miscellaneous&quot;                       </span></span>
<span id="cb194-14"><a href="regular-expressions.html#cb194-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Prostitution&quot;                              </span></span>
<span id="cb194-15"><a href="regular-expressions.html#cb194-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Suicide&quot;                                   </span></span>
<span id="cb194-16"><a href="regular-expressions.html#cb194-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Suspicious&quot;                                </span></span>
<span id="cb194-17"><a href="regular-expressions.html#cb194-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;Suspicious Occ&quot;                            </span></span>
<span id="cb194-18"><a href="regular-expressions.html#cb194-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;Traffic Collision&quot;                         </span></span>
<span id="cb194-19"><a href="regular-expressions.html#cb194-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;Traffic Violation Arrest&quot;                  </span></span>
<span id="cb194-20"><a href="regular-expressions.html#cb194-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;Vehicle Impounded&quot;                         </span></span>
<span id="cb194-21"><a href="regular-expressions.html#cb194-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;Weapons Carrying Etc&quot;                      </span></span>
<span id="cb194-22"><a href="regular-expressions.html#cb194-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;Weapons Offence&quot;                           </span></span>
<span id="cb194-23"><a href="regular-expressions.html#cb194-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;Weapons Offense&quot;</span></span></code></pre></div>
<p>If we wanted only crimes with exactly three vowels in a row we’d use <code>{3,3}</code>.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="regular-expressions.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[aeiou]{3,3}&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb195-2"><a href="regular-expressions.html#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span></span>
<span id="cb195-3"><a href="regular-expressions.html#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [3] &quot;Other Miscellaneous&quot;         &quot;Suspicious&quot;                 </span></span>
<span id="cb195-4"><a href="regular-expressions.html#cb195-4" aria-hidden="true" tabindex="-1"></a><span class="co"># [5] &quot;Suspicious Occ&quot;</span></span></code></pre></div>
<p>If we leave n blank, such as <code>{,m}</code>, it says, “previous character must be present up to m times.”</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="regular-expressions.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[aeiou]{,3}&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb196-2"><a href="regular-expressions.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Arson&quot;                                     </span></span>
<span id="cb196-3"><a href="regular-expressions.html#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Assault&quot;                                   </span></span>
<span id="cb196-4"><a href="regular-expressions.html#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Burglary&quot;                                  </span></span>
<span id="cb196-5"><a href="regular-expressions.html#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Case Closure&quot;                              </span></span>
<span id="cb196-6"><a href="regular-expressions.html#cb196-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Civil Sidewalks&quot;                           </span></span>
<span id="cb196-7"><a href="regular-expressions.html#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Courtesy Report&quot;                           </span></span>
<span id="cb196-8"><a href="regular-expressions.html#cb196-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Disorderly Conduct&quot;                        </span></span>
<span id="cb196-9"><a href="regular-expressions.html#cb196-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Drug Offense&quot;                              </span></span>
<span id="cb196-10"><a href="regular-expressions.html#cb196-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Drug Violation&quot;                            </span></span>
<span id="cb196-11"><a href="regular-expressions.html#cb196-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Embezzlement&quot;                              </span></span>
<span id="cb196-12"><a href="regular-expressions.html#cb196-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Family Offense&quot;                            </span></span>
<span id="cb196-13"><a href="regular-expressions.html#cb196-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Fire Report&quot;                               </span></span>
<span id="cb196-14"><a href="regular-expressions.html#cb196-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Forgery And Counterfeiting&quot;                </span></span>
<span id="cb196-15"><a href="regular-expressions.html#cb196-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Fraud&quot;                                     </span></span>
<span id="cb196-16"><a href="regular-expressions.html#cb196-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Gambling&quot;                                  </span></span>
<span id="cb196-17"><a href="regular-expressions.html#cb196-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;Homicide&quot;                                  </span></span>
<span id="cb196-18"><a href="regular-expressions.html#cb196-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb196-19"><a href="regular-expressions.html#cb196-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb196-20"><a href="regular-expressions.html#cb196-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;Juvenile Offenses&quot;                         </span></span>
<span id="cb196-21"><a href="regular-expressions.html#cb196-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;Larceny Theft&quot;                             </span></span>
<span id="cb196-22"><a href="regular-expressions.html#cb196-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;Liquor Laws&quot;                               </span></span>
<span id="cb196-23"><a href="regular-expressions.html#cb196-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;Lost Property&quot;                             </span></span>
<span id="cb196-24"><a href="regular-expressions.html#cb196-24" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;Malicious Mischief&quot;                        </span></span>
<span id="cb196-25"><a href="regular-expressions.html#cb196-25" aria-hidden="true" tabindex="-1"></a><span class="co"># [24] &quot;Miscellaneous Investigation&quot;               </span></span>
<span id="cb196-26"><a href="regular-expressions.html#cb196-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;Missing Person&quot;                            </span></span>
<span id="cb196-27"><a href="regular-expressions.html#cb196-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] &quot;Motor Vehicle Theft&quot;                       </span></span>
<span id="cb196-28"><a href="regular-expressions.html#cb196-28" aria-hidden="true" tabindex="-1"></a><span class="co"># [27] &quot;Motor Vehicle Theft?&quot;                      </span></span>
<span id="cb196-29"><a href="regular-expressions.html#cb196-29" aria-hidden="true" tabindex="-1"></a><span class="co"># [28] &quot;Non-Criminal&quot;                              </span></span>
<span id="cb196-30"><a href="regular-expressions.html#cb196-30" aria-hidden="true" tabindex="-1"></a><span class="co"># [29] &quot;Offences Against The Family And Children&quot;  </span></span>
<span id="cb196-31"><a href="regular-expressions.html#cb196-31" aria-hidden="true" tabindex="-1"></a><span class="co"># [30] &quot;Other&quot;                                     </span></span>
<span id="cb196-32"><a href="regular-expressions.html#cb196-32" aria-hidden="true" tabindex="-1"></a><span class="co"># [31] &quot;Other Miscellaneous&quot;                       </span></span>
<span id="cb196-33"><a href="regular-expressions.html#cb196-33" aria-hidden="true" tabindex="-1"></a><span class="co"># [32] &quot;Other Offenses&quot;                            </span></span>
<span id="cb196-34"><a href="regular-expressions.html#cb196-34" aria-hidden="true" tabindex="-1"></a><span class="co"># [33] &quot;Prostitution&quot;                              </span></span>
<span id="cb196-35"><a href="regular-expressions.html#cb196-35" aria-hidden="true" tabindex="-1"></a><span class="co"># [34] &quot;Rape&quot;                                      </span></span>
<span id="cb196-36"><a href="regular-expressions.html#cb196-36" aria-hidden="true" tabindex="-1"></a><span class="co"># [35] &quot;Recovered Vehicle&quot;                         </span></span>
<span id="cb196-37"><a href="regular-expressions.html#cb196-37" aria-hidden="true" tabindex="-1"></a><span class="co"># [36] &quot;Robbery&quot;                                   </span></span>
<span id="cb196-38"><a href="regular-expressions.html#cb196-38" aria-hidden="true" tabindex="-1"></a><span class="co"># [37] &quot;Sex Offense&quot;                               </span></span>
<span id="cb196-39"><a href="regular-expressions.html#cb196-39" aria-hidden="true" tabindex="-1"></a><span class="co"># [38] &quot;Stolen Property&quot;                           </span></span>
<span id="cb196-40"><a href="regular-expressions.html#cb196-40" aria-hidden="true" tabindex="-1"></a><span class="co"># [39] &quot;Suicide&quot;                                   </span></span>
<span id="cb196-41"><a href="regular-expressions.html#cb196-41" aria-hidden="true" tabindex="-1"></a><span class="co"># [40] &quot;Suspicious&quot;                                </span></span>
<span id="cb196-42"><a href="regular-expressions.html#cb196-42" aria-hidden="true" tabindex="-1"></a><span class="co"># [41] &quot;Suspicious Occ&quot;                            </span></span>
<span id="cb196-43"><a href="regular-expressions.html#cb196-43" aria-hidden="true" tabindex="-1"></a><span class="co"># [42] &quot;Traffic Collision&quot;                         </span></span>
<span id="cb196-44"><a href="regular-expressions.html#cb196-44" aria-hidden="true" tabindex="-1"></a><span class="co"># [43] &quot;Traffic Violation Arrest&quot;                  </span></span>
<span id="cb196-45"><a href="regular-expressions.html#cb196-45" aria-hidden="true" tabindex="-1"></a><span class="co"># [44] &quot;Vandalism&quot;                                 </span></span>
<span id="cb196-46"><a href="regular-expressions.html#cb196-46" aria-hidden="true" tabindex="-1"></a><span class="co"># [45] &quot;Vehicle Impounded&quot;                         </span></span>
<span id="cb196-47"><a href="regular-expressions.html#cb196-47" aria-hidden="true" tabindex="-1"></a><span class="co"># [46] &quot;Vehicle Misplaced&quot;                         </span></span>
<span id="cb196-48"><a href="regular-expressions.html#cb196-48" aria-hidden="true" tabindex="-1"></a><span class="co"># [47] &quot;Warrant&quot;                                   </span></span>
<span id="cb196-49"><a href="regular-expressions.html#cb196-49" aria-hidden="true" tabindex="-1"></a><span class="co"># [48] &quot;Weapons Carrying Etc&quot;                      </span></span>
<span id="cb196-50"><a href="regular-expressions.html#cb196-50" aria-hidden="true" tabindex="-1"></a><span class="co"># [49] &quot;Weapons Offence&quot;                           </span></span>
<span id="cb196-51"><a href="regular-expressions.html#cb196-51" aria-hidden="true" tabindex="-1"></a><span class="co"># [50] &quot;Weapons Offense&quot;</span></span></code></pre></div>
<p>This returns every crime as “up to m times” includes zero times.</p>
<p>And the same works for leaving m blank, but it will be “present at least n times”.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="regular-expressions.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;[aeiou]{3,}&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb197-2"><a href="regular-expressions.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span></span>
<span id="cb197-3"><a href="regular-expressions.html#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [3] &quot;Other Miscellaneous&quot;         &quot;Suspicious&quot;                 </span></span>
<span id="cb197-4"><a href="regular-expressions.html#cb197-4" aria-hidden="true" tabindex="-1"></a><span class="co"># [5] &quot;Suspicious Occ&quot;</span></span></code></pre></div>
</div>
<div id="start-of-string" class="section level3 hasAnchor" number="12.3.4">
<h3><span class="header-section-number">12.3.4</span> Start of string<a href="regular-expressions.html#start-of-string" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>^</code> symbol (called a caret) signifies that what follows it is the start of the string. We put the <code>^</code> at the beginning of the quotes and then anything that follows it must be the very start of the string. As an example let’s search for “Family”. Our data has both the “Family Offense” crime and the “Offences Against The Family And Children” crime (which likely are the same crime written differently). If we use <code>^</code> then we should only have the first one returned.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="regular-expressions.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;^Family&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb198-2"><a href="regular-expressions.html#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Family Offense&quot;</span></span></code></pre></div>
</div>
<div id="end-of-string" class="section level3 hasAnchor" number="12.3.5">
<h3><span class="header-section-number">12.3.5</span> End of string <code>$</code><a href="regular-expressions.html#end-of-string" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The dollar sign <code>$</code> acts similar to the caret <code>^</code> except that it signifies that the value before it is the <strong>end</strong> of the string. We put the <code>$</code> at the very end of our search pattern and whatever character is before it is the end of the string. For example, let’s search for all crimes that end with the word “Theft”.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="regular-expressions.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Theft$&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb199-2"><a href="regular-expressions.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Larceny Theft&quot;       &quot;Motor Vehicle Theft&quot;</span></span></code></pre></div>
<p>Note that the crime “Motor Vehicle Theft?” doesn’t get selected as it ends with a question mark.</p>
</div>
<div id="anything-." class="section level3 hasAnchor" number="12.3.6">
<h3><span class="header-section-number">12.3.6</span> Anything <code>.</code><a href="regular-expressions.html#anything-." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>.</code> symbol is a stand-in for any value. This is useful when you aren’t sure about every part of the pattern you are searching. It can also be used when there are slight differences in words such as our incorrect “Offence” and “Offense”. We can replace the “c” and “s” with the <code>.</code>.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="regular-expressions.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Weapons Offen.e&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb200-2"><a href="regular-expressions.html#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Weapons Offence&quot; &quot;Weapons Offense&quot;</span></span></code></pre></div>
</div>
<div id="one-or-more-of-previous" class="section level3 hasAnchor" number="12.3.7">
<h3><span class="header-section-number">12.3.7</span> One or more of previous <code>+</code><a href="regular-expressions.html#one-or-more-of-previous" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>+</code> means that the character immediately before it is present at least one time. This is the same as writing <code>{1,}</code>. If we wanted to find all values with only two words, we would start with some number of letters followed by a space followed by some more letters and the string would end.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="regular-expressions.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;^[A-Za-z]+ [A-Za-z]+$&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb201-2"><a href="regular-expressions.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Case Closure&quot;                &quot;Civil Sidewalks&quot;            </span></span>
<span id="cb201-3"><a href="regular-expressions.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Courtesy Report&quot;             &quot;Disorderly Conduct&quot;         </span></span>
<span id="cb201-4"><a href="regular-expressions.html#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Drug Offense&quot;                &quot;Drug Violation&quot;             </span></span>
<span id="cb201-5"><a href="regular-expressions.html#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Family Offense&quot;              &quot;Fire Report&quot;                </span></span>
<span id="cb201-6"><a href="regular-expressions.html#cb201-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Juvenile Offenses&quot;           &quot;Larceny Theft&quot;              </span></span>
<span id="cb201-7"><a href="regular-expressions.html#cb201-7" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Liquor Laws&quot;                 &quot;Lost Property&quot;              </span></span>
<span id="cb201-8"><a href="regular-expressions.html#cb201-8" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Malicious Mischief&quot;          &quot;Miscellaneous Investigation&quot;</span></span>
<span id="cb201-9"><a href="regular-expressions.html#cb201-9" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Missing Person&quot;              &quot;Other Miscellaneous&quot;        </span></span>
<span id="cb201-10"><a href="regular-expressions.html#cb201-10" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;Other Offenses&quot;              &quot;Recovered Vehicle&quot;          </span></span>
<span id="cb201-11"><a href="regular-expressions.html#cb201-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;Sex Offense&quot;                 &quot;Stolen Property&quot;            </span></span>
<span id="cb201-12"><a href="regular-expressions.html#cb201-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;Suspicious Occ&quot;              &quot;Traffic Collision&quot;          </span></span>
<span id="cb201-13"><a href="regular-expressions.html#cb201-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;Vehicle Impounded&quot;           &quot;Vehicle Misplaced&quot;          </span></span>
<span id="cb201-14"><a href="regular-expressions.html#cb201-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;Weapons Offence&quot;             &quot;Weapons Offense&quot;</span></span></code></pre></div>
</div>
<div id="zero-or-more-of-previous" class="section level3 hasAnchor" number="12.3.8">
<h3><span class="header-section-number">12.3.8</span> Zero or more of previous <code>*</code><a href="regular-expressions.html#zero-or-more-of-previous" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>*</code> special character says match zero or more of the previous character and is the same as <code>{0,}</code>. Combining <code>.</code> with <code>*</code> is powerful when used in <code>gsub()</code> to delete text before or after a pattern. Let’s write a pattern that searches the text for the word “Weapons” and then deletes any text after that.</p>
<p>Our pattern would be “Weapons.*” which is the word “Weapons” followed by anything zero or more times.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="regular-expressions.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">&quot;Weapons.*&quot;</span>, <span class="st">&quot;Weapons&quot;</span>, crimes)</span>
<span id="cb202-2"><a href="regular-expressions.html#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;Arson&quot;                                     </span></span>
<span id="cb202-3"><a href="regular-expressions.html#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;Assault&quot;                                   </span></span>
<span id="cb202-4"><a href="regular-expressions.html#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;Burglary&quot;                                  </span></span>
<span id="cb202-5"><a href="regular-expressions.html#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;Case Closure&quot;                              </span></span>
<span id="cb202-6"><a href="regular-expressions.html#cb202-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;Civil Sidewalks&quot;                           </span></span>
<span id="cb202-7"><a href="regular-expressions.html#cb202-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;Courtesy Report&quot;                           </span></span>
<span id="cb202-8"><a href="regular-expressions.html#cb202-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;Disorderly Conduct&quot;                        </span></span>
<span id="cb202-9"><a href="regular-expressions.html#cb202-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;Drug Offense&quot;                              </span></span>
<span id="cb202-10"><a href="regular-expressions.html#cb202-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;Drug Violation&quot;                            </span></span>
<span id="cb202-11"><a href="regular-expressions.html#cb202-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;Embezzlement&quot;                              </span></span>
<span id="cb202-12"><a href="regular-expressions.html#cb202-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;Family Offense&quot;                            </span></span>
<span id="cb202-13"><a href="regular-expressions.html#cb202-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;Fire Report&quot;                               </span></span>
<span id="cb202-14"><a href="regular-expressions.html#cb202-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;Forgery And Counterfeiting&quot;                </span></span>
<span id="cb202-15"><a href="regular-expressions.html#cb202-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;Fraud&quot;                                     </span></span>
<span id="cb202-16"><a href="regular-expressions.html#cb202-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;Gambling&quot;                                  </span></span>
<span id="cb202-17"><a href="regular-expressions.html#cb202-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;Homicide&quot;                                  </span></span>
<span id="cb202-18"><a href="regular-expressions.html#cb202-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;Human Trafficking (A), Commercial Sex Acts&quot;</span></span>
<span id="cb202-19"><a href="regular-expressions.html#cb202-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;Human Trafficking, Commercial Sex Acts&quot;    </span></span>
<span id="cb202-20"><a href="regular-expressions.html#cb202-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;Juvenile Offenses&quot;                         </span></span>
<span id="cb202-21"><a href="regular-expressions.html#cb202-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;Larceny Theft&quot;                             </span></span>
<span id="cb202-22"><a href="regular-expressions.html#cb202-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;Liquor Laws&quot;                               </span></span>
<span id="cb202-23"><a href="regular-expressions.html#cb202-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;Lost Property&quot;                             </span></span>
<span id="cb202-24"><a href="regular-expressions.html#cb202-24" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;Malicious Mischief&quot;                        </span></span>
<span id="cb202-25"><a href="regular-expressions.html#cb202-25" aria-hidden="true" tabindex="-1"></a><span class="co"># [24] &quot;Miscellaneous Investigation&quot;               </span></span>
<span id="cb202-26"><a href="regular-expressions.html#cb202-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;Missing Person&quot;                            </span></span>
<span id="cb202-27"><a href="regular-expressions.html#cb202-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] &quot;Motor Vehicle Theft&quot;                       </span></span>
<span id="cb202-28"><a href="regular-expressions.html#cb202-28" aria-hidden="true" tabindex="-1"></a><span class="co"># [27] &quot;Motor Vehicle Theft?&quot;                      </span></span>
<span id="cb202-29"><a href="regular-expressions.html#cb202-29" aria-hidden="true" tabindex="-1"></a><span class="co"># [28] &quot;Non-Criminal&quot;                              </span></span>
<span id="cb202-30"><a href="regular-expressions.html#cb202-30" aria-hidden="true" tabindex="-1"></a><span class="co"># [29] &quot;Offences Against The Family And Children&quot;  </span></span>
<span id="cb202-31"><a href="regular-expressions.html#cb202-31" aria-hidden="true" tabindex="-1"></a><span class="co"># [30] &quot;Other&quot;                                     </span></span>
<span id="cb202-32"><a href="regular-expressions.html#cb202-32" aria-hidden="true" tabindex="-1"></a><span class="co"># [31] &quot;Other Miscellaneous&quot;                       </span></span>
<span id="cb202-33"><a href="regular-expressions.html#cb202-33" aria-hidden="true" tabindex="-1"></a><span class="co"># [32] &quot;Other Offenses&quot;                            </span></span>
<span id="cb202-34"><a href="regular-expressions.html#cb202-34" aria-hidden="true" tabindex="-1"></a><span class="co"># [33] &quot;Prostitution&quot;                              </span></span>
<span id="cb202-35"><a href="regular-expressions.html#cb202-35" aria-hidden="true" tabindex="-1"></a><span class="co"># [34] &quot;Rape&quot;                                      </span></span>
<span id="cb202-36"><a href="regular-expressions.html#cb202-36" aria-hidden="true" tabindex="-1"></a><span class="co"># [35] &quot;Recovered Vehicle&quot;                         </span></span>
<span id="cb202-37"><a href="regular-expressions.html#cb202-37" aria-hidden="true" tabindex="-1"></a><span class="co"># [36] &quot;Robbery&quot;                                   </span></span>
<span id="cb202-38"><a href="regular-expressions.html#cb202-38" aria-hidden="true" tabindex="-1"></a><span class="co"># [37] &quot;Sex Offense&quot;                               </span></span>
<span id="cb202-39"><a href="regular-expressions.html#cb202-39" aria-hidden="true" tabindex="-1"></a><span class="co"># [38] &quot;Stolen Property&quot;                           </span></span>
<span id="cb202-40"><a href="regular-expressions.html#cb202-40" aria-hidden="true" tabindex="-1"></a><span class="co"># [39] &quot;Suicide&quot;                                   </span></span>
<span id="cb202-41"><a href="regular-expressions.html#cb202-41" aria-hidden="true" tabindex="-1"></a><span class="co"># [40] &quot;Suspicious&quot;                                </span></span>
<span id="cb202-42"><a href="regular-expressions.html#cb202-42" aria-hidden="true" tabindex="-1"></a><span class="co"># [41] &quot;Suspicious Occ&quot;                            </span></span>
<span id="cb202-43"><a href="regular-expressions.html#cb202-43" aria-hidden="true" tabindex="-1"></a><span class="co"># [42] &quot;Traffic Collision&quot;                         </span></span>
<span id="cb202-44"><a href="regular-expressions.html#cb202-44" aria-hidden="true" tabindex="-1"></a><span class="co"># [43] &quot;Traffic Violation Arrest&quot;                  </span></span>
<span id="cb202-45"><a href="regular-expressions.html#cb202-45" aria-hidden="true" tabindex="-1"></a><span class="co"># [44] &quot;Vandalism&quot;                                 </span></span>
<span id="cb202-46"><a href="regular-expressions.html#cb202-46" aria-hidden="true" tabindex="-1"></a><span class="co"># [45] &quot;Vehicle Impounded&quot;                         </span></span>
<span id="cb202-47"><a href="regular-expressions.html#cb202-47" aria-hidden="true" tabindex="-1"></a><span class="co"># [46] &quot;Vehicle Misplaced&quot;                         </span></span>
<span id="cb202-48"><a href="regular-expressions.html#cb202-48" aria-hidden="true" tabindex="-1"></a><span class="co"># [47] &quot;Warrant&quot;                                   </span></span>
<span id="cb202-49"><a href="regular-expressions.html#cb202-49" aria-hidden="true" tabindex="-1"></a><span class="co"># [48] &quot;Weapons&quot;                                   </span></span>
<span id="cb202-50"><a href="regular-expressions.html#cb202-50" aria-hidden="true" tabindex="-1"></a><span class="co"># [49] &quot;Weapons&quot;                                   </span></span>
<span id="cb202-51"><a href="regular-expressions.html#cb202-51" aria-hidden="true" tabindex="-1"></a><span class="co"># [50] &quot;Weapons&quot;</span></span></code></pre></div>
<p>And now our last three crimes are all the same.</p>
</div>
<div id="multiple-patterns" class="section level3 hasAnchor" number="12.3.9">
<h3><span class="header-section-number">12.3.9</span> Multiple patterns <code>|</code><a href="regular-expressions.html#multiple-patterns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The vertical bar <code>|</code> special character allows us to check for multiple patterns. It essentially functions as “pattern A or Pattern B” with the <code>|</code> symbol replacing the word “or” (and making sure to not have any space between patterns.). To check our crimes for the word “Drug” or the word “Weapons”, we could write “Drug|Weapon”, which searches for “Drug” or “Weapons” in the text.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="regular-expressions.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Drug|Weapons&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb203-2"><a href="regular-expressions.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Drug Offense&quot;         &quot;Drug Violation&quot;       &quot;Weapons Carrying Etc&quot;</span></span>
<span id="cb203-3"><a href="regular-expressions.html#cb203-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [4] &quot;Weapons Offence&quot;      &quot;Weapons Offense&quot;</span></span></code></pre></div>
</div>
<div id="parentheses" class="section level3 hasAnchor" number="12.3.10">
<h3><span class="header-section-number">12.3.10</span> Parentheses <code>()</code><a href="regular-expressions.html#parentheses" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Parentheses act similar to the square brackets <code>[]</code>, where we want everything inside but with parentheses the values must be in the proper order.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="regular-expressions.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;(Offense)&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb204-2"><a href="regular-expressions.html#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Drug Offense&quot;      &quot;Family Offense&quot;    &quot;Juvenile Offenses&quot;</span></span>
<span id="cb204-3"><a href="regular-expressions.html#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [4] &quot;Other Offenses&quot;    &quot;Sex Offense&quot;       &quot;Weapons Offense&quot;</span></span></code></pre></div>
<p>Running the above code returns the same results as if we didn’t include the parentheses. The usefulness of parentheses comes when combining it with the <code>|</code> symbol to be able to check “(X|Y) Z”), which says, “look for either X or Y which must be followed by Z”.</p>
<p>Running just “(Offense)” returns values for multiple types of offenses. Let’s say we just care about Drug and Weapon Offenses. We can search for “Offense” normally and combine <code>()</code> and <code>|</code> to say, “search for either the word ‘Drug’ or the word ‘Family’ and they should be followed by the word ‘Offense’.”</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="regular-expressions.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;(Drug|Weapons) Offense&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb205-2"><a href="regular-expressions.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Drug Offense&quot;    &quot;Weapons Offense&quot;</span></span></code></pre></div>
</div>
<div id="optional-text" class="section level3 hasAnchor" number="12.3.11">
<h3><span class="header-section-number">12.3.11</span> Optional text <code>?</code><a href="regular-expressions.html#optional-text" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The question mark indicates that the character immediately before the <code>?</code> is optional.</p>
<p>Let’s search for the term “offens” and add a ? at the end. This says search for the pattern “offen”, and we expect an exact match for that pattern. And if the letter “s” follows “offen” return that too, but it isn’t required to be there.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="regular-expressions.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Offens?&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb206-2"><a href="regular-expressions.html#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Drug Offense&quot;                            </span></span>
<span id="cb206-3"><a href="regular-expressions.html#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="co"># [2] &quot;Family Offense&quot;                          </span></span>
<span id="cb206-4"><a href="regular-expressions.html#cb206-4" aria-hidden="true" tabindex="-1"></a><span class="co"># [3] &quot;Juvenile Offenses&quot;                       </span></span>
<span id="cb206-5"><a href="regular-expressions.html#cb206-5" aria-hidden="true" tabindex="-1"></a><span class="co"># [4] &quot;Offences Against The Family And Children&quot;</span></span>
<span id="cb206-6"><a href="regular-expressions.html#cb206-6" aria-hidden="true" tabindex="-1"></a><span class="co"># [5] &quot;Other Offenses&quot;                          </span></span>
<span id="cb206-7"><a href="regular-expressions.html#cb206-7" aria-hidden="true" tabindex="-1"></a><span class="co"># [6] &quot;Sex Offense&quot;                             </span></span>
<span id="cb206-8"><a href="regular-expressions.html#cb206-8" aria-hidden="true" tabindex="-1"></a><span class="co"># [7] &quot;Weapons Offence&quot;                         </span></span>
<span id="cb206-9"><a href="regular-expressions.html#cb206-9" aria-hidden="true" tabindex="-1"></a><span class="co"># [8] &quot;Weapons Offense&quot;</span></span></code></pre></div>
<p>We can further combine it with <code>()</code> and <code>|</code> to get both spellings of Weapon Offense.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="regular-expressions.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;(Drug|Weapons) Offens?&quot;</span>, crimes, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb207-2"><a href="regular-expressions.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;Drug Offense&quot;    &quot;Weapons Offence&quot; &quot;Weapons Offense&quot;</span></span></code></pre></div>
</div>
</div>
<div id="changing-capitalization" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Changing capitalization<a href="regular-expressions.html#changing-capitalization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you’re dealing with data where the only difference is capitalization (as is common in crime data) instead of using <code>gsub()</code> to change individual values, you can use the functions <code>toupper()</code> and <code>tolower()</code> to change every letter’s capitalization. These functions take as an input a vector of strings (or a column from a data.frame) and return those strings either upper or lowercase.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="regular-expressions.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(crimes)</span>
<span id="cb208-2"><a href="regular-expressions.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;ARSON&quot;                                     </span></span>
<span id="cb208-3"><a href="regular-expressions.html#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;ASSAULT&quot;                                   </span></span>
<span id="cb208-4"><a href="regular-expressions.html#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;BURGLARY&quot;                                  </span></span>
<span id="cb208-5"><a href="regular-expressions.html#cb208-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;CASE CLOSURE&quot;                              </span></span>
<span id="cb208-6"><a href="regular-expressions.html#cb208-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;CIVIL SIDEWALKS&quot;                           </span></span>
<span id="cb208-7"><a href="regular-expressions.html#cb208-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;COURTESY REPORT&quot;                           </span></span>
<span id="cb208-8"><a href="regular-expressions.html#cb208-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;DISORDERLY CONDUCT&quot;                        </span></span>
<span id="cb208-9"><a href="regular-expressions.html#cb208-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;DRUG OFFENSE&quot;                              </span></span>
<span id="cb208-10"><a href="regular-expressions.html#cb208-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;DRUG VIOLATION&quot;                            </span></span>
<span id="cb208-11"><a href="regular-expressions.html#cb208-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;EMBEZZLEMENT&quot;                              </span></span>
<span id="cb208-12"><a href="regular-expressions.html#cb208-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;FAMILY OFFENSE&quot;                            </span></span>
<span id="cb208-13"><a href="regular-expressions.html#cb208-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;FIRE REPORT&quot;                               </span></span>
<span id="cb208-14"><a href="regular-expressions.html#cb208-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;FORGERY AND COUNTERFEITING&quot;                </span></span>
<span id="cb208-15"><a href="regular-expressions.html#cb208-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;FRAUD&quot;                                     </span></span>
<span id="cb208-16"><a href="regular-expressions.html#cb208-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;GAMBLING&quot;                                  </span></span>
<span id="cb208-17"><a href="regular-expressions.html#cb208-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;HOMICIDE&quot;                                  </span></span>
<span id="cb208-18"><a href="regular-expressions.html#cb208-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;HUMAN TRAFFICKING (A), COMMERCIAL SEX ACTS&quot;</span></span>
<span id="cb208-19"><a href="regular-expressions.html#cb208-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;HUMAN TRAFFICKING, COMMERCIAL SEX ACTS&quot;    </span></span>
<span id="cb208-20"><a href="regular-expressions.html#cb208-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;JUVENILE OFFENSES&quot;                         </span></span>
<span id="cb208-21"><a href="regular-expressions.html#cb208-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;LARCENY THEFT&quot;                             </span></span>
<span id="cb208-22"><a href="regular-expressions.html#cb208-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;LIQUOR LAWS&quot;                               </span></span>
<span id="cb208-23"><a href="regular-expressions.html#cb208-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;LOST PROPERTY&quot;                             </span></span>
<span id="cb208-24"><a href="regular-expressions.html#cb208-24" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;MALICIOUS MISCHIEF&quot;                        </span></span>
<span id="cb208-25"><a href="regular-expressions.html#cb208-25" aria-hidden="true" tabindex="-1"></a><span class="co"># [24] &quot;MISCELLANEOUS INVESTIGATION&quot;               </span></span>
<span id="cb208-26"><a href="regular-expressions.html#cb208-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;MISSING PERSON&quot;                            </span></span>
<span id="cb208-27"><a href="regular-expressions.html#cb208-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] &quot;MOTOR VEHICLE THEFT&quot;                       </span></span>
<span id="cb208-28"><a href="regular-expressions.html#cb208-28" aria-hidden="true" tabindex="-1"></a><span class="co"># [27] &quot;MOTOR VEHICLE THEFT?&quot;                      </span></span>
<span id="cb208-29"><a href="regular-expressions.html#cb208-29" aria-hidden="true" tabindex="-1"></a><span class="co"># [28] &quot;NON-CRIMINAL&quot;                              </span></span>
<span id="cb208-30"><a href="regular-expressions.html#cb208-30" aria-hidden="true" tabindex="-1"></a><span class="co"># [29] &quot;OFFENCES AGAINST THE FAMILY AND CHILDREN&quot;  </span></span>
<span id="cb208-31"><a href="regular-expressions.html#cb208-31" aria-hidden="true" tabindex="-1"></a><span class="co"># [30] &quot;OTHER&quot;                                     </span></span>
<span id="cb208-32"><a href="regular-expressions.html#cb208-32" aria-hidden="true" tabindex="-1"></a><span class="co"># [31] &quot;OTHER MISCELLANEOUS&quot;                       </span></span>
<span id="cb208-33"><a href="regular-expressions.html#cb208-33" aria-hidden="true" tabindex="-1"></a><span class="co"># [32] &quot;OTHER OFFENSES&quot;                            </span></span>
<span id="cb208-34"><a href="regular-expressions.html#cb208-34" aria-hidden="true" tabindex="-1"></a><span class="co"># [33] &quot;PROSTITUTION&quot;                              </span></span>
<span id="cb208-35"><a href="regular-expressions.html#cb208-35" aria-hidden="true" tabindex="-1"></a><span class="co"># [34] &quot;RAPE&quot;                                      </span></span>
<span id="cb208-36"><a href="regular-expressions.html#cb208-36" aria-hidden="true" tabindex="-1"></a><span class="co"># [35] &quot;RECOVERED VEHICLE&quot;                         </span></span>
<span id="cb208-37"><a href="regular-expressions.html#cb208-37" aria-hidden="true" tabindex="-1"></a><span class="co"># [36] &quot;ROBBERY&quot;                                   </span></span>
<span id="cb208-38"><a href="regular-expressions.html#cb208-38" aria-hidden="true" tabindex="-1"></a><span class="co"># [37] &quot;SEX OFFENSE&quot;                               </span></span>
<span id="cb208-39"><a href="regular-expressions.html#cb208-39" aria-hidden="true" tabindex="-1"></a><span class="co"># [38] &quot;STOLEN PROPERTY&quot;                           </span></span>
<span id="cb208-40"><a href="regular-expressions.html#cb208-40" aria-hidden="true" tabindex="-1"></a><span class="co"># [39] &quot;SUICIDE&quot;                                   </span></span>
<span id="cb208-41"><a href="regular-expressions.html#cb208-41" aria-hidden="true" tabindex="-1"></a><span class="co"># [40] &quot;SUSPICIOUS&quot;                                </span></span>
<span id="cb208-42"><a href="regular-expressions.html#cb208-42" aria-hidden="true" tabindex="-1"></a><span class="co"># [41] &quot;SUSPICIOUS OCC&quot;                            </span></span>
<span id="cb208-43"><a href="regular-expressions.html#cb208-43" aria-hidden="true" tabindex="-1"></a><span class="co"># [42] &quot;TRAFFIC COLLISION&quot;                         </span></span>
<span id="cb208-44"><a href="regular-expressions.html#cb208-44" aria-hidden="true" tabindex="-1"></a><span class="co"># [43] &quot;TRAFFIC VIOLATION ARREST&quot;                  </span></span>
<span id="cb208-45"><a href="regular-expressions.html#cb208-45" aria-hidden="true" tabindex="-1"></a><span class="co"># [44] &quot;VANDALISM&quot;                                 </span></span>
<span id="cb208-46"><a href="regular-expressions.html#cb208-46" aria-hidden="true" tabindex="-1"></a><span class="co"># [45] &quot;VEHICLE IMPOUNDED&quot;                         </span></span>
<span id="cb208-47"><a href="regular-expressions.html#cb208-47" aria-hidden="true" tabindex="-1"></a><span class="co"># [46] &quot;VEHICLE MISPLACED&quot;                         </span></span>
<span id="cb208-48"><a href="regular-expressions.html#cb208-48" aria-hidden="true" tabindex="-1"></a><span class="co"># [47] &quot;WARRANT&quot;                                   </span></span>
<span id="cb208-49"><a href="regular-expressions.html#cb208-49" aria-hidden="true" tabindex="-1"></a><span class="co"># [48] &quot;WEAPONS CARRYING ETC&quot;                      </span></span>
<span id="cb208-50"><a href="regular-expressions.html#cb208-50" aria-hidden="true" tabindex="-1"></a><span class="co"># [49] &quot;WEAPONS OFFENCE&quot;                           </span></span>
<span id="cb208-51"><a href="regular-expressions.html#cb208-51" aria-hidden="true" tabindex="-1"></a><span class="co"># [50] &quot;WEAPONS OFFENSE&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="regular-expressions.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(crimes)</span>
<span id="cb209-2"><a href="regular-expressions.html#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  [1] &quot;arson&quot;                                     </span></span>
<span id="cb209-3"><a href="regular-expressions.html#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  [2] &quot;assault&quot;                                   </span></span>
<span id="cb209-4"><a href="regular-expressions.html#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  [3] &quot;burglary&quot;                                  </span></span>
<span id="cb209-5"><a href="regular-expressions.html#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  [4] &quot;case closure&quot;                              </span></span>
<span id="cb209-6"><a href="regular-expressions.html#cb209-6" aria-hidden="true" tabindex="-1"></a><span class="co">#  [5] &quot;civil sidewalks&quot;                           </span></span>
<span id="cb209-7"><a href="regular-expressions.html#cb209-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  [6] &quot;courtesy report&quot;                           </span></span>
<span id="cb209-8"><a href="regular-expressions.html#cb209-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  [7] &quot;disorderly conduct&quot;                        </span></span>
<span id="cb209-9"><a href="regular-expressions.html#cb209-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  [8] &quot;drug offense&quot;                              </span></span>
<span id="cb209-10"><a href="regular-expressions.html#cb209-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  [9] &quot;drug violation&quot;                            </span></span>
<span id="cb209-11"><a href="regular-expressions.html#cb209-11" aria-hidden="true" tabindex="-1"></a><span class="co"># [10] &quot;embezzlement&quot;                              </span></span>
<span id="cb209-12"><a href="regular-expressions.html#cb209-12" aria-hidden="true" tabindex="-1"></a><span class="co"># [11] &quot;family offense&quot;                            </span></span>
<span id="cb209-13"><a href="regular-expressions.html#cb209-13" aria-hidden="true" tabindex="-1"></a><span class="co"># [12] &quot;fire report&quot;                               </span></span>
<span id="cb209-14"><a href="regular-expressions.html#cb209-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [13] &quot;forgery and counterfeiting&quot;                </span></span>
<span id="cb209-15"><a href="regular-expressions.html#cb209-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [14] &quot;fraud&quot;                                     </span></span>
<span id="cb209-16"><a href="regular-expressions.html#cb209-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [15] &quot;gambling&quot;                                  </span></span>
<span id="cb209-17"><a href="regular-expressions.html#cb209-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [16] &quot;homicide&quot;                                  </span></span>
<span id="cb209-18"><a href="regular-expressions.html#cb209-18" aria-hidden="true" tabindex="-1"></a><span class="co"># [17] &quot;human trafficking (a), commercial sex acts&quot;</span></span>
<span id="cb209-19"><a href="regular-expressions.html#cb209-19" aria-hidden="true" tabindex="-1"></a><span class="co"># [18] &quot;human trafficking, commercial sex acts&quot;    </span></span>
<span id="cb209-20"><a href="regular-expressions.html#cb209-20" aria-hidden="true" tabindex="-1"></a><span class="co"># [19] &quot;juvenile offenses&quot;                         </span></span>
<span id="cb209-21"><a href="regular-expressions.html#cb209-21" aria-hidden="true" tabindex="-1"></a><span class="co"># [20] &quot;larceny theft&quot;                             </span></span>
<span id="cb209-22"><a href="regular-expressions.html#cb209-22" aria-hidden="true" tabindex="-1"></a><span class="co"># [21] &quot;liquor laws&quot;                               </span></span>
<span id="cb209-23"><a href="regular-expressions.html#cb209-23" aria-hidden="true" tabindex="-1"></a><span class="co"># [22] &quot;lost property&quot;                             </span></span>
<span id="cb209-24"><a href="regular-expressions.html#cb209-24" aria-hidden="true" tabindex="-1"></a><span class="co"># [23] &quot;malicious mischief&quot;                        </span></span>
<span id="cb209-25"><a href="regular-expressions.html#cb209-25" aria-hidden="true" tabindex="-1"></a><span class="co"># [24] &quot;miscellaneous investigation&quot;               </span></span>
<span id="cb209-26"><a href="regular-expressions.html#cb209-26" aria-hidden="true" tabindex="-1"></a><span class="co"># [25] &quot;missing person&quot;                            </span></span>
<span id="cb209-27"><a href="regular-expressions.html#cb209-27" aria-hidden="true" tabindex="-1"></a><span class="co"># [26] &quot;motor vehicle theft&quot;                       </span></span>
<span id="cb209-28"><a href="regular-expressions.html#cb209-28" aria-hidden="true" tabindex="-1"></a><span class="co"># [27] &quot;motor vehicle theft?&quot;                      </span></span>
<span id="cb209-29"><a href="regular-expressions.html#cb209-29" aria-hidden="true" tabindex="-1"></a><span class="co"># [28] &quot;non-criminal&quot;                              </span></span>
<span id="cb209-30"><a href="regular-expressions.html#cb209-30" aria-hidden="true" tabindex="-1"></a><span class="co"># [29] &quot;offences against the family and children&quot;  </span></span>
<span id="cb209-31"><a href="regular-expressions.html#cb209-31" aria-hidden="true" tabindex="-1"></a><span class="co"># [30] &quot;other&quot;                                     </span></span>
<span id="cb209-32"><a href="regular-expressions.html#cb209-32" aria-hidden="true" tabindex="-1"></a><span class="co"># [31] &quot;other miscellaneous&quot;                       </span></span>
<span id="cb209-33"><a href="regular-expressions.html#cb209-33" aria-hidden="true" tabindex="-1"></a><span class="co"># [32] &quot;other offenses&quot;                            </span></span>
<span id="cb209-34"><a href="regular-expressions.html#cb209-34" aria-hidden="true" tabindex="-1"></a><span class="co"># [33] &quot;prostitution&quot;                              </span></span>
<span id="cb209-35"><a href="regular-expressions.html#cb209-35" aria-hidden="true" tabindex="-1"></a><span class="co"># [34] &quot;rape&quot;                                      </span></span>
<span id="cb209-36"><a href="regular-expressions.html#cb209-36" aria-hidden="true" tabindex="-1"></a><span class="co"># [35] &quot;recovered vehicle&quot;                         </span></span>
<span id="cb209-37"><a href="regular-expressions.html#cb209-37" aria-hidden="true" tabindex="-1"></a><span class="co"># [36] &quot;robbery&quot;                                   </span></span>
<span id="cb209-38"><a href="regular-expressions.html#cb209-38" aria-hidden="true" tabindex="-1"></a><span class="co"># [37] &quot;sex offense&quot;                               </span></span>
<span id="cb209-39"><a href="regular-expressions.html#cb209-39" aria-hidden="true" tabindex="-1"></a><span class="co"># [38] &quot;stolen property&quot;                           </span></span>
<span id="cb209-40"><a href="regular-expressions.html#cb209-40" aria-hidden="true" tabindex="-1"></a><span class="co"># [39] &quot;suicide&quot;                                   </span></span>
<span id="cb209-41"><a href="regular-expressions.html#cb209-41" aria-hidden="true" tabindex="-1"></a><span class="co"># [40] &quot;suspicious&quot;                                </span></span>
<span id="cb209-42"><a href="regular-expressions.html#cb209-42" aria-hidden="true" tabindex="-1"></a><span class="co"># [41] &quot;suspicious occ&quot;                            </span></span>
<span id="cb209-43"><a href="regular-expressions.html#cb209-43" aria-hidden="true" tabindex="-1"></a><span class="co"># [42] &quot;traffic collision&quot;                         </span></span>
<span id="cb209-44"><a href="regular-expressions.html#cb209-44" aria-hidden="true" tabindex="-1"></a><span class="co"># [43] &quot;traffic violation arrest&quot;                  </span></span>
<span id="cb209-45"><a href="regular-expressions.html#cb209-45" aria-hidden="true" tabindex="-1"></a><span class="co"># [44] &quot;vandalism&quot;                                 </span></span>
<span id="cb209-46"><a href="regular-expressions.html#cb209-46" aria-hidden="true" tabindex="-1"></a><span class="co"># [45] &quot;vehicle impounded&quot;                         </span></span>
<span id="cb209-47"><a href="regular-expressions.html#cb209-47" aria-hidden="true" tabindex="-1"></a><span class="co"># [46] &quot;vehicle misplaced&quot;                         </span></span>
<span id="cb209-48"><a href="regular-expressions.html#cb209-48" aria-hidden="true" tabindex="-1"></a><span class="co"># [47] &quot;warrant&quot;                                   </span></span>
<span id="cb209-49"><a href="regular-expressions.html#cb209-49" aria-hidden="true" tabindex="-1"></a><span class="co"># [48] &quot;weapons carrying etc&quot;                      </span></span>
<span id="cb209-50"><a href="regular-expressions.html#cb209-50" aria-hidden="true" tabindex="-1"></a><span class="co"># [49] &quot;weapons offence&quot;                           </span></span>
<span id="cb209-51"><a href="regular-expressions.html#cb209-51" aria-hidden="true" tabindex="-1"></a><span class="co"># [50] &quot;weapons offense&quot;</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="explore.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reshaping.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": true,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacobkap/crimebythenumbers/edit/master/regular-expressions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>16 More Scraping tables from PDFs | Crime by the Numbers</title>
  <meta name="description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="16 More Scraping tables from PDFs | Crime by the Numbers" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://crimebythenumbers.com" />
  <meta property="og:image" content="https://crimebythenumbers.comRuby-throated_HummingBird.jpg" />
  <meta property="og:description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="github-repo" content="jacobkap/crimebythenumbers" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="16 More Scraping tables from PDFs | Crime by the Numbers" />
  
  <meta name="twitter:description" content="This book introduces the programming language R and is meant for undergrads or graduate students studying criminology. R is a programming language that is well-suited to the type of work frequently done in criminology - taking messy data and turning it into useful information. While R is a useful tool for many fields of study, this book focuses on the skills criminologists should know and uses crime data for the example data sets." />
  <meta name="twitter:image" content="https://crimebythenumbers.comRuby-throated_HummingBird.jpg" />

<meta name="author" content="Jacob Kaplan" />


<meta name="date" content="2020-07-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="scrape-table.html"/>
<link rel="next" href="geocoding.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99359926-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99359926-6');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Crime by the Numbers</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-learn-to-program"><i class="fa fa-check"></i>Why learn to program?</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#scale"><i class="fa fa-check"></i>Scale</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#reproducibility"><i class="fa fa-check"></i>Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-will-learn"><i class="fa fa-check"></i>What you will learn</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i>Skills</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i>Data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-you-wont-learn"><i class="fa fa-check"></i>What you won’t learn</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#simple-vs-easy"><i class="fa fa-check"></i>Simple vs Easy</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contribute"><i class="fa fa-check"></i>How to Contribute</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Introduction to R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-rstudio"><i class="fa fa-check"></i><b>1.1</b> Using RStudio</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#opening-an-r-script"><i class="fa fa-check"></i><b>1.1.1</b> Opening an R Script</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#setting-the-working-directory"><i class="fa fa-check"></i><b>1.1.2</b> Setting the working directory</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#changing-rstudio"><i class="fa fa-check"></i><b>1.1.3</b> Changing RStudio</a></li>
<li class="chapter" data-level="1.1.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#helpful-cheatsheets"><i class="fa fa-check"></i><b>1.1.4</b> Helpful cheatsheets</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#reading-data-into-r"><i class="fa fa-check"></i><b>1.2</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#loading-data"><i class="fa fa-check"></i><b>1.2.1</b> Loading data</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#first-steps-to-exploring-data"><i class="fa fa-check"></i><b>1.3</b> First steps to exploring data</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#finding-help-about-functions"><i class="fa fa-check"></i><b>1.4</b> Finding help about functions</a></li>
</ul></li>
<li class="part"><span><b>I Clean</b></span></li>
<li class="chapter" data-level="2" data-path="subsetting-intro.html"><a href="subsetting-intro.html"><i class="fa fa-check"></i><b>2</b> Subsetting: Making big things small</a>
<ul>
<li class="chapter" data-level="2.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-values"><i class="fa fa-check"></i><b>2.1</b> Select specific values</a></li>
<li class="chapter" data-level="2.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#assignment"><i class="fa fa-check"></i><b>2.2</b> Assigning values to objects (Making “things”)</a></li>
<li class="chapter" data-level="2.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#vectors"><i class="fa fa-check"></i><b>2.3</b> Vectors (collections of “things”)</a></li>
<li class="chapter" data-level="2.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#logical-values-and-operations"><i class="fa fa-check"></i><b>2.4</b> Logical values and operations</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-a-single-value"><i class="fa fa-check"></i><b>2.4.1</b> Matching a single value</a></li>
<li class="chapter" data-level="2.4.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-multiple-values"><i class="fa fa-check"></i><b>2.4.2</b> Matching multiple values</a></li>
<li class="chapter" data-level="2.4.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#does-not-match"><i class="fa fa-check"></i><b>2.4.3</b> Does not match</a></li>
<li class="chapter" data-level="2.4.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#greater-than-or-less-than"><i class="fa fa-check"></i><b>2.4.4</b> Greater than or less than</a></li>
<li class="chapter" data-level="2.4.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#combining-conditional-statements---or-and"><i class="fa fa-check"></i><b>2.4.5</b> Combining conditional statements - or, and</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subsetting-a-data.frame"><i class="fa fa-check"></i><b>2.5</b> Subsetting a data.frame</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-columns"><i class="fa fa-check"></i><b>2.5.1</b> Select specific columns</a></li>
<li class="chapter" data-level="2.5.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-rows"><i class="fa fa-check"></i><b>2.5.2</b> Select specific rows</a></li>
<li class="chapter" data-level="2.5.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subset-colorado-data"><i class="fa fa-check"></i><b>2.5.3</b> Subset Colorado data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>3</b> Exploratory data analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="explore.html"><a href="explore.html#summary-and-table"><i class="fa fa-check"></i><b>3.1</b> Summary and Table</a></li>
<li class="chapter" data-level="3.2" data-path="explore.html"><a href="explore.html#graphing"><i class="fa fa-check"></i><b>3.2</b> Graphing</a></li>
<li class="chapter" data-level="3.3" data-path="explore.html"><a href="explore.html#aggregate"><i class="fa fa-check"></i><b>3.3</b> Aggregating (summaries of groups)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>4</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-patterns-in-text-with-grep"><i class="fa fa-check"></i><b>4.1</b> Finding patterns in text with <code>grep()</code></a></li>
<li class="chapter" data-level="4.2" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub"><i class="fa fa-check"></i><b>4.2</b> Finding and replacing patterns in text with <code>gsub()</code></a></li>
<li class="chapter" data-level="4.3" data-path="regular-expressions.html"><a href="regular-expressions.html#useful-special-characters"><i class="fa fa-check"></i><b>4.3</b> Useful special characters</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-characters"><i class="fa fa-check"></i><b>4.3.1</b> Multiple characters <code>[]</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-of-previous-character-n"><i class="fa fa-check"></i><b>4.3.2</b> n-many of previous character <code>{n}</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm"><i class="fa fa-check"></i><b>4.3.3</b> n-many to m-many of previous character <code>{n,m}</code></a></li>
<li class="chapter" data-level="4.3.4" data-path="regular-expressions.html"><a href="regular-expressions.html#start-of-string"><i class="fa fa-check"></i><b>4.3.4</b> Start of string</a></li>
<li class="chapter" data-level="4.3.5" data-path="regular-expressions.html"><a href="regular-expressions.html#end-of-string"><i class="fa fa-check"></i><b>4.3.5</b> End of string <code>$</code></a></li>
<li class="chapter" data-level="4.3.6" data-path="regular-expressions.html"><a href="regular-expressions.html#anything-."><i class="fa fa-check"></i><b>4.3.6</b> Anything <code>.</code></a></li>
<li class="chapter" data-level="4.3.7" data-path="regular-expressions.html"><a href="regular-expressions.html#one-or-more-of-previous"><i class="fa fa-check"></i><b>4.3.7</b> One or more of previous <code>+</code></a></li>
<li class="chapter" data-level="4.3.8" data-path="regular-expressions.html"><a href="regular-expressions.html#zero-or-more-of-previous"><i class="fa fa-check"></i><b>4.3.8</b> Zero or more of previous <code>*</code></a></li>
<li class="chapter" data-level="4.3.9" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-patterns"><i class="fa fa-check"></i><b>4.3.9</b> Multiple patterns <code>|</code></a></li>
<li class="chapter" data-level="4.3.10" data-path="regular-expressions.html"><a href="regular-expressions.html#parentheses"><i class="fa fa-check"></i><b>4.3.10</b> Parentheses <code>()</code></a></li>
<li class="chapter" data-level="4.3.11" data-path="regular-expressions.html"><a href="regular-expressions.html#optional-text"><i class="fa fa-check"></i><b>4.3.11</b> Optional text <code>?</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="regular-expressions.html"><a href="regular-expressions.html#changing-capitalization"><i class="fa fa-check"></i><b>4.4</b> Changing capitalization</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>5</b> Reading and Writing Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#reading-data-into-r"><i class="fa fa-check"></i><b>5.1</b> Reading Data into R</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r"><i class="fa fa-check"></i><b>5.1.1</b> R</a></li>
<li class="chapter" data-level="5.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel"><i class="fa fa-check"></i><b>5.1.2</b> Excel</a></li>
<li class="chapter" data-level="5.1.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata"><i class="fa fa-check"></i><b>5.1.3</b> Stata</a></li>
<li class="chapter" data-level="5.1.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas"><i class="fa fa-check"></i><b>5.1.4</b> SAS</a></li>
<li class="chapter" data-level="5.1.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss"><i class="fa fa-check"></i><b>5.1.5</b> SPSS</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-data"><i class="fa fa-check"></i><b>5.2</b> Writing Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-1"><i class="fa fa-check"></i><b>5.2.1</b> R</a></li>
<li class="chapter" data-level="5.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-1"><i class="fa fa-check"></i><b>5.2.2</b> Excel</a></li>
<li class="chapter" data-level="5.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-1"><i class="fa fa-check"></i><b>5.2.3</b> Stata</a></li>
<li class="chapter" data-level="5.2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-1"><i class="fa fa-check"></i><b>5.2.4</b> SAS</a></li>
<li class="chapter" data-level="5.2.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss-1"><i class="fa fa-check"></i><b>5.2.5</b> SPSS</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Visualize</b></span></li>
<li class="chapter" data-level="6" data-path="graphing-intro.html"><a href="graphing-intro.html"><i class="fa fa-check"></i><b>6</b> Graphing with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="6.1" data-path="graphing-intro.html"><a href="graphing-intro.html#what-does-the-data-look-like"><i class="fa fa-check"></i><b>6.1</b> What does the data look like?</a></li>
<li class="chapter" data-level="6.2" data-path="graphing-intro.html"><a href="graphing-intro.html#graphing-data"><i class="fa fa-check"></i><b>6.2</b> Graphing data</a></li>
<li class="chapter" data-level="6.3" data-path="graphing-intro.html"><a href="graphing-intro.html#time-series-plots"><i class="fa fa-check"></i><b>6.3</b> Time-Series Plots</a></li>
<li class="chapter" data-level="6.4" data-path="graphing-intro.html"><a href="graphing-intro.html#scatter-plots"><i class="fa fa-check"></i><b>6.4</b> Scatter Plots</a></li>
<li class="chapter" data-level="6.5" data-path="graphing-intro.html"><a href="graphing-intro.html#color-blindness"><i class="fa fa-check"></i><b>6.5</b> Color blindness</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="hotspot-maps.html"><a href="hotspot-maps.html"><i class="fa fa-check"></i><b>7</b> Hotspot maps</a>
<ul>
<li class="chapter" data-level="7.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#a-simple-map"><i class="fa fa-check"></i><b>7.1</b> A simple map</a></li>
<li class="chapter" data-level="7.2" data-path="hotspot-maps.html"><a href="hotspot-maps.html#what-really-are-maps"><i class="fa fa-check"></i><b>7.2</b> What really are maps?</a></li>
<li class="chapter" data-level="7.3" data-path="hotspot-maps.html"><a href="hotspot-maps.html#making-a-hotspot-map"><i class="fa fa-check"></i><b>7.3</b> Making a hotspot map</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#colors"><i class="fa fa-check"></i><b>7.3.1</b> Colors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="choropleth-maps.html"><a href="choropleth-maps.html"><i class="fa fa-check"></i><b>8</b> Choropleth maps</a>
<ul>
<li class="chapter" data-level="8.1" data-path="choropleth-maps.html"><a href="choropleth-maps.html#spatial-joins"><i class="fa fa-check"></i><b>8.1</b> Spatial joins</a></li>
<li class="chapter" data-level="8.2" data-path="choropleth-maps.html"><a href="choropleth-maps.html#making-choropleth-maps"><i class="fa fa-check"></i><b>8.2</b> Making choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>9</b> Interactive maps</a>
<ul>
<li class="chapter" data-level="9.1" data-path="interactive-maps.html"><a href="interactive-maps.html#why-do-interactive-graphs-matter"><i class="fa fa-check"></i><b>9.1</b> Why do interactive graphs matter?</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="interactive-maps.html"><a href="interactive-maps.html#understanding-your-data"><i class="fa fa-check"></i><b>9.1.1</b> Understanding your data</a></li>
<li class="chapter" data-level="9.1.2" data-path="interactive-maps.html"><a href="interactive-maps.html#police-departments-use-them"><i class="fa fa-check"></i><b>9.1.2</b> Police departments use them</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="interactive-maps.html"><a href="interactive-maps.html#making-the-interactive-map"><i class="fa fa-check"></i><b>9.2</b> Making the interactive map</a></li>
<li class="chapter" data-level="9.3" data-path="interactive-maps.html"><a href="interactive-maps.html#adding-popup-information"><i class="fa fa-check"></i><b>9.3</b> Adding popup information</a></li>
<li class="chapter" data-level="9.4" data-path="interactive-maps.html"><a href="interactive-maps.html#dealing-with-too-many-markers"><i class="fa fa-check"></i><b>9.4</b> Dealing with too many markers</a></li>
<li class="chapter" data-level="9.5" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-choropleth-maps"><i class="fa fa-check"></i><b>9.5</b> Interactive choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>10</b> R Markdown</a>
<ul>
<li class="chapter" data-level="10.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#code"><i class="fa fa-check"></i><b>10.1</b> Code</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="r-markdown.html"><a href="r-markdown.html#hiding-code-in-the-output"><i class="fa fa-check"></i><b>10.1.1</b> Hiding code in the output</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="r-markdown.html"><a href="r-markdown.html#inline-code"><i class="fa fa-check"></i><b>10.2</b> Inline Code</a></li>
<li class="chapter" data-level="10.3" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i><b>10.3</b> Tables</a></li>
<li class="chapter" data-level="10.4" data-path="r-markdown.html"><a href="r-markdown.html#footnotes"><i class="fa fa-check"></i><b>10.4</b> Footnotes</a></li>
<li class="chapter" data-level="10.5" data-path="r-markdown.html"><a href="r-markdown.html#citation"><i class="fa fa-check"></i><b>10.5</b> Citation</a></li>
<li class="chapter" data-level="10.6" data-path="r-markdown.html"><a href="r-markdown.html#spell-check"><i class="fa fa-check"></i><b>10.6</b> Spell check</a></li>
<li class="chapter" data-level="10.7" data-path="r-markdown.html"><a href="r-markdown.html#making-the-output-file"><i class="fa fa-check"></i><b>10.7</b> Making the output file</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>11</b> Git</a>
<ul>
<li class="chapter" data-level="11.1" data-path="git.html"><a href="git.html#what-is-git-and-why-do-i-need-it"><i class="fa fa-check"></i><b>11.1</b> What is Git and why do I need it?</a></li>
<li class="chapter" data-level="11.2" data-path="git.html"><a href="git.html#git-basics"><i class="fa fa-check"></i><b>11.2</b> Git basics</a></li>
<li class="chapter" data-level="11.3" data-path="git.html"><a href="git.html#when-to-commit"><i class="fa fa-check"></i><b>11.3</b> When to commit</a></li>
<li class="chapter" data-level="11.4" data-path="git.html"><a href="git.html#code-review"><i class="fa fa-check"></i><b>11.4</b> Code review</a></li>
</ul></li>
<li class="part"><span><b>III Collect</b></span></li>
<li class="chapter" data-level="12" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html"><i class="fa fa-check"></i><b>12</b> Webscraping with <code>rvest</code></a>
<ul>
<li class="chapter" data-level="12.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#scraping-one-page"><i class="fa fa-check"></i><b>12.1</b> Scraping one page</a></li>
<li class="chapter" data-level="12.2" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#cleaning-the-webscraped-data"><i class="fa fa-check"></i><b>12.2</b> Cleaning the webscraped data</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>13</b> Functions</a>
<ul>
<li class="chapter" data-level="13.1" data-path="functions.html"><a href="functions.html#a-simple-function"><i class="fa fa-check"></i><b>13.1</b> A simple function</a></li>
<li class="chapter" data-level="13.2" data-path="functions.html"><a href="functions.html#adding-parameters"><i class="fa fa-check"></i><b>13.2</b> Adding parameters</a></li>
<li class="chapter" data-level="13.3" data-path="functions.html"><a href="functions.html#recipes-function"><i class="fa fa-check"></i><b>13.3</b> Making a function to scrape recipes</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>14</b> For loops</a>
<ul>
<li class="chapter" data-level="14.1" data-path="for-loops.html"><a href="for-loops.html#basic-for-loops"><i class="fa fa-check"></i><b>14.1</b> Basic for loops</a></li>
<li class="chapter" data-level="14.2" data-path="for-loops.html"><a href="for-loops.html#scraping-multiple-recipes"><i class="fa fa-check"></i><b>14.2</b> Scraping multiple recipes</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="scrape-table.html"><a href="scrape-table.html"><i class="fa fa-check"></i><b>15</b> Scraping tables from PDFs</a>
<ul>
<li class="chapter" data-level="15.1" data-path="scrape-table.html"><a href="scrape-table.html#scraping-the-first-table"><i class="fa fa-check"></i><b>15.1</b> Scraping the first table</a></li>
<li class="chapter" data-level="15.2" data-path="scrape-table.html"><a href="scrape-table.html#making-a-function"><i class="fa fa-check"></i><b>15.2</b> Making a function</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="scrape-table2.html"><a href="scrape-table2.html"><i class="fa fa-check"></i><b>16</b> More Scraping tables from PDFs</a>
<ul>
<li class="chapter" data-level="16.1" data-path="scrape-table2.html"><a href="scrape-table2.html#pregnant-women-incarcerated"><i class="fa fa-check"></i><b>16.1</b> Pregnant Women Incarcerated</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>17</b> Geocoding</a>
<ul>
<li class="chapter" data-level="17.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-a-single-address"><i class="fa fa-check"></i><b>17.1</b> Geocoding a single address</a></li>
<li class="chapter" data-level="17.2" data-path="scrape-table.html"><a href="scrape-table.html#making-a-function"><i class="fa fa-check"></i><b>17.2</b> Making a function</a></li>
<li class="chapter" data-level="17.3" data-path="geocoding.html"><a href="geocoding.html#geocoding-san-francisco-marijuana-dispensary-locations"><i class="fa fa-check"></i><b>17.3</b> Geocoding San Francisco marijuana dispensary locations</a></li>
</ul></li>
<li class="part"><span><b>IV Data</b></span></li>
<li class="chapter" data-level="18" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>18</b> Introduction</a></li>
<li class="chapter" data-level="19" data-path="ucr.html"><a href="ucr.html"><i class="fa fa-check"></i><b>19</b> Uniform Crime Report (UCR) - Offenses Known and Clearances by Arrest</a>
<ul>
<li class="chapter" data-level="19.1" data-path="ucr.html"><a href="ucr.html#exploring-the-ucr-data"><i class="fa fa-check"></i><b>19.1</b> Exploring the UCR data</a></li>
<li class="chapter" data-level="19.2" data-path="ucr.html"><a href="ucr.html#oris---unique-agency-identifiers"><i class="fa fa-check"></i><b>19.2</b> ORIs - Unique agency identifiers</a></li>
<li class="chapter" data-level="19.3" data-path="ucr.html"><a href="ucr.html#hierarchy-rule"><i class="fa fa-check"></i><b>19.3</b> Hierarchy Rule</a></li>
<li class="chapter" data-level="19.4" data-path="ucr.html"><a href="ucr.html#which-crimes-are-included"><i class="fa fa-check"></i><b>19.4</b> Which crimes are included</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="ucr.html"><a href="ucr.html#index-crimes"><i class="fa fa-check"></i><b>19.4.1</b> Index Crimes</a></li>
<li class="chapter" data-level="19.4.2" data-path="ucr.html"><a href="ucr.html#the-problem-with-using-index-crimes"><i class="fa fa-check"></i><b>19.4.2</b> The problem with using index crimes</a></li>
<li class="chapter" data-level="19.4.3" data-path="ucr.html"><a href="ucr.html#rape-definition-change"><i class="fa fa-check"></i><b>19.4.3</b> Rape definition change</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="ucr.html"><a href="ucr.html#actual-offenses-clearances-and-unfounded-offenses"><i class="fa fa-check"></i><b>19.5</b> Actual offenses, clearances, and unfounded offenses</a>
<ul>
<li class="chapter" data-level="19.5.1" data-path="ucr.html"><a href="ucr.html#actual"><i class="fa fa-check"></i><b>19.5.1</b> Actual</a></li>
<li class="chapter" data-level="19.5.2" data-path="ucr.html"><a href="ucr.html#total-cleared"><i class="fa fa-check"></i><b>19.5.2</b> Total Cleared</a></li>
<li class="chapter" data-level="19.5.3" data-path="ucr.html"><a href="ucr.html#cleared-where-all-offenders-are-under-18"><i class="fa fa-check"></i><b>19.5.3</b> Cleared Where All Offenders Are Under 18</a></li>
<li class="chapter" data-level="19.5.4" data-path="ucr.html"><a href="ucr.html#unfounded"><i class="fa fa-check"></i><b>19.5.4</b> Unfounded</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="ucr.html"><a href="ucr.html#number-of-months-reported"><i class="fa fa-check"></i><b>19.6</b> Number of months reported</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="useful-resources.html"><a href="useful-resources.html"><i class="fa fa-check"></i><b>A</b> Useful resources</a>
<ul>
<li class="chapter" data-level="A.1" data-path="useful-resources.html"><a href="useful-resources.html#learning-r-and-coding-issues"><i class="fa fa-check"></i><b>A.1</b> Learning R and coding issues</a></li>
<li class="chapter" data-level="A.2" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>A.2</b> Data</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime by the Numbers</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scrape-table2" class="section level1" number="16">
<h1><span class="header-section-number">16</span> More Scraping tables from PDFs</h1>
<p>In Chapter <a href="scrape-table.html#scrape-table">15</a> we used the package <code>pdftools</code> to scrape tables on arrests/seizures from the United States Border Patrol that were only available in a PDF. Given the importance of PDF scraping - hopefully by the time you read this chapter more data will be available in reasonable formats and not in PDFs - in this chapter we’ll continue working on scraping tables from PDFs. Here we will use the package <code>tabulizer</code> which has a number of features making it especially useful for grabbing tables from PDFs. One issue which we saw in Chapter <a href="scrape-table.html#scrape-table">15</a> is that the table may not be the only thing on the page - the page could also have a title, page number etc. When using <code>pdftools</code> we use regular expressions and subsetting to remove all the extra lines. Using <code>tabulizer</code> we can simply say (through a handy function) that we only want a part of the page, so we only scrape the table itself. For more info about the <code>tabulizer</code> package please see their site <a href="https://docs.ropensci.org/tabulizer/">here</a>.</p>
<p>For this chapter we’ll scrape data from the Texas Commission on Jail Standards - Abbreviated Population Report for xxx. This is a report that shows monthly data on people incarcerated in jails for counties in Texas and is available <a href="https://github.com/jacobkap/crimebythenumbers/blob/master/data/AbbreRptCurrent.pdf">here</a>.</p>
<p>This PDF is 9 pages long because of how many counties there are in Texas. Lets take a look at what the first page looks like. If you look at the PDF yourself you’ll see that every page follows the format of the 1st page, which greatly simplifies our scrape. The data is in county-month units which means that each row of data has info for a single county in a single month. We know that because the first column is “County” and each row is a single county (this is not true is every case. For example, on page 3 there are the rows ‘Fannin 1(P)’ and ‘Fannin 2(P)’, possibly indicating that there are two jails in that county. It is unclear from this PDF what the ‘(P)’ means.). For knowing that the data is monthly, the title of this document says ‘for 06/01/2020’ indicating that it is for that date, though this doesn’t by itself mean the data is monthly - it could be daily based only on this data.</p>
<p>To know that it’s monthly data we’d have to go to the original source on the Texas Commission on Jail Standards website <a href="https://www.tcjs.state.tx.us/historical-population-reports/#1580454195676-420daca6-0a306">here</a>. On this page it says that ’Monthly population reports are available for review below," which tells us that the data is monthly. It’s important to know the unit so you can understand the data properly - primarily so you know what kinds of questions you can answer. If someone asks whether yearly trends on jail incarceration change in Texas, you can answer that with this data. If they ask whether more people are in jail on a Tuesday than on a Friday, you can’t.</p>
<p>Just to understand what units our data is in we had to look at both the PDF itself and the site it came from. This kind of multi-step process is tedious but often necessary to truly understand your data. And even now we have questions - what does the (P) that’s in some rows mean? For this we’d have to email or call the people who handle the data and ask directly. This is often the easiest way to answer your question, though different organizations have varying speeds in responding - if ever.
Now lets look at what columns are available. It looks like each column is the number of people incarcerated in the jail, broken down into categories of people. For example, the first two columns after County are ‘Pretrial Felons’ and ‘Conv. Felons’ so those are probably how many people are incarcerated who are awaiting trial for a felony and those already convicted of a felony. The other columns seem to follow this same format until the last few ones which describe the jails capacity (i.e. how many people they can hold), what percent of capacity they are at, and specifically how many open beds they have.</p>
<p><img src="images/tabulizer1.PNG" /></p>
<p>Now that we’ve familiarized ourselves with the data, lets begin scraping this data using <code>tabulizer</code>. If you don’t have this package installed you’ll need to install it using <code>install.packages("tabulizer")</code>. Then we’ll need to run <code>library(tabulizer)</code>.</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="scrape-table2.html#cb298-1"></a><span class="kw">library</span>(tabulizer)</span></code></pre></div>
<p>The main function that we’ll be using from the <code>tabulizer</code> package is <code>extract_tables()</code>. This function basically looks at a PDF page, figures out which part of the page is a table, and then scrapes just that table. As we’ll see, it’s not always perfect at figuring out what part of the page is a table so we can also tell it exactly where to look. You can look at all of the features of <code>extract_tables()</code> by running <code>help(extract_tables)</code>.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="scrape-table2.html#cb299-1"></a>data &lt;-<span class="st"> </span><span class="kw">extract_tables</span>(<span class="dt">file =</span> <span class="st">&quot;data/Abbreviated Pop Rpt Dec 2017.pdf&quot;</span>)</span>
<span id="cb299-2"><a href="scrape-table2.html#cb299-2"></a><span class="kw">is</span>(data)</span>
<span id="cb299-3"><a href="scrape-table2.html#cb299-3"></a><span class="co">#&gt; [1] &quot;list&quot;   &quot;vector&quot;</span></span>
<span id="cb299-4"><a href="scrape-table2.html#cb299-4"></a><span class="kw">length</span>(data)</span>
<span id="cb299-5"><a href="scrape-table2.html#cb299-5"></a><span class="co">#&gt; [1] 19</span></span>
<span id="cb299-6"><a href="scrape-table2.html#cb299-6"></a>data[[<span class="dv">1</span>]]</span>
<span id="cb299-7"><a href="scrape-table2.html#cb299-7"></a><span class="co">#&gt;      [,1]     [,2]       [,3]     [,4]           [,5]        [,6]        </span></span>
<span id="cb299-8"><a href="scrape-table2.html#cb299-8"></a><span class="co">#&gt; [1,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;Conv. Felons&quot; &quot;&quot;          &quot;Parole&quot;    </span></span>
<span id="cb299-9"><a href="scrape-table2.html#cb299-9"></a><span class="co">#&gt; [2,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;Sentenced to&quot; &quot;&quot;          &quot;Violators&quot; </span></span>
<span id="cb299-10"><a href="scrape-table2.html#cb299-10"></a><span class="co">#&gt; [3,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;County Jail&quot;  &quot;&quot;          &quot;with a New&quot;</span></span>
<span id="cb299-11"><a href="scrape-table2.html#cb299-11"></a><span class="co">#&gt; [4,] &quot;&quot;       &quot;Pretrial&quot; &quot;Conv.&quot;  &quot;&quot;             &quot;Parole&quot;    &quot;&quot;          </span></span>
<span id="cb299-12"><a href="scrape-table2.html#cb299-12"></a><span class="co">#&gt; [5,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;time&quot;         &quot;&quot;          &quot;Charge&quot;    </span></span>
<span id="cb299-13"><a href="scrape-table2.html#cb299-13"></a><span class="co">#&gt; [6,] &quot;County&quot; &quot;Felons&quot;   &quot;Felons&quot; &quot;&quot;             &quot;Violators&quot; &quot;&quot;          </span></span>
<span id="cb299-14"><a href="scrape-table2.html#cb299-14"></a><span class="co">#&gt;      [,7]       [,8]    [,9]       [,10]     [,11]      [,12]        </span></span>
<span id="cb299-15"><a href="scrape-table2.html#cb299-15"></a><span class="co">#&gt; [1,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Conv. SJF&quot;  </span></span>
<span id="cb299-16"><a href="scrape-table2.html#cb299-16"></a><span class="co">#&gt; [2,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Sentenced&quot;  </span></span>
<span id="cb299-17"><a href="scrape-table2.html#cb299-17"></a><span class="co">#&gt; [3,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;to Co. Jail&quot;</span></span>
<span id="cb299-18"><a href="scrape-table2.html#cb299-18"></a><span class="co">#&gt; [4,] &quot;Pretrial&quot; &quot;Conv.&quot; &quot;Bench&quot;    &quot;&quot;        &quot;Pretrial&quot; &quot;&quot;           </span></span>
<span id="cb299-19"><a href="scrape-table2.html#cb299-19"></a><span class="co">#&gt; [5,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Time&quot;       </span></span>
<span id="cb299-20"><a href="scrape-table2.html#cb299-20"></a><span class="co">#&gt; [6,] &quot;Misd.&quot;    &quot;Misd.&quot; &quot;Warrants&quot; &quot;Federal&quot; &quot;SJF&quot;      &quot;&quot;           </span></span>
<span id="cb299-21"><a href="scrape-table2.html#cb299-21"></a><span class="co">#&gt;      [,13]           [,14]    [,15]   [,16]      [,17]        [,18]     </span></span>
<span id="cb299-22"><a href="scrape-table2.html#cb299-22"></a><span class="co">#&gt; [1,] &quot;Conv.&quot;         &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb299-23"><a href="scrape-table2.html#cb299-23"></a><span class="co">#&gt; [2,] &quot;SJF&quot;           &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb299-24"><a href="scrape-table2.html#cb299-24"></a><span class="co">#&gt; [3,] &quot;Sentenced&quot;     &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb299-25"><a href="scrape-table2.html#cb299-25"></a><span class="co">#&gt; [4,] &quot;&quot;              &quot;Total&quot;  &quot;Total&quot; &quot;Total&quot;    &quot;Total&quot;      &quot;Total&quot;   </span></span>
<span id="cb299-26"><a href="scrape-table2.html#cb299-26"></a><span class="co">#&gt; [5,] &quot;to State Jail&quot; &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb299-27"><a href="scrape-table2.html#cb299-27"></a><span class="co">#&gt; [6,] &quot;&quot;              &quot;Others&quot; &quot;Local&quot; &quot;Contract&quot; &quot;Population&quot; &quot;Capacity&quot;</span></span>
<span id="cb299-28"><a href="scrape-table2.html#cb299-28"></a><span class="co">#&gt;      [,19]      [,20]      </span></span>
<span id="cb299-29"><a href="scrape-table2.html#cb299-29"></a><span class="co">#&gt; [1,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb299-30"><a href="scrape-table2.html#cb299-30"></a><span class="co">#&gt; [2,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb299-31"><a href="scrape-table2.html#cb299-31"></a><span class="co">#&gt; [3,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb299-32"><a href="scrape-table2.html#cb299-32"></a><span class="co">#&gt; [4,] &quot;% of&quot;     &quot;Available&quot;</span></span>
<span id="cb299-33"><a href="scrape-table2.html#cb299-33"></a><span class="co">#&gt; [5,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb299-34"><a href="scrape-table2.html#cb299-34"></a><span class="co">#&gt; [6,] &quot;Capacity&quot; &quot;Beds&quot;</span></span>
<span id="cb299-35"><a href="scrape-table2.html#cb299-35"></a><span class="kw">head</span>(data[[<span class="dv">2</span>]])</span>
<span id="cb299-36"><a href="scrape-table2.html#cb299-36"></a><span class="co">#&gt;      [,1]        [,2]  [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]</span></span>
<span id="cb299-37"><a href="scrape-table2.html#cb299-37"></a><span class="co">#&gt; [1,] &quot;Anderson&quot;  &quot;90&quot;  &quot;2&quot;  &quot;2&quot;  &quot;4&quot;  &quot;14&quot; &quot;18&quot; &quot;2&quot;  &quot;1&quot;  &quot;0&quot;   &quot;33&quot;  &quot;2&quot;  </span></span>
<span id="cb299-38"><a href="scrape-table2.html#cb299-38"></a><span class="co">#&gt; [2,] &quot;Andrews&quot;   &quot;20&quot;  &quot;11&quot; &quot;0&quot;  &quot;2&quot;  &quot;6&quot;  &quot;5&quot;  &quot;0&quot;  &quot;1&quot;  &quot;0&quot;   &quot;3&quot;   &quot;0&quot;  </span></span>
<span id="cb299-39"><a href="scrape-table2.html#cb299-39"></a><span class="co">#&gt; [3,] &quot;Angelina&quot;  &quot;105&quot; &quot;26&quot; &quot;1&quot;  &quot;9&quot;  &quot;13&quot; &quot;10&quot; &quot;12&quot; &quot;6&quot;  &quot;0&quot;   &quot;28&quot;  &quot;0&quot;  </span></span>
<span id="cb299-40"><a href="scrape-table2.html#cb299-40"></a><span class="co">#&gt; [4,] &quot;Aransas&quot;   &quot;27&quot;  &quot;6&quot;  &quot;0&quot;  &quot;7&quot;  &quot;9&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;81&quot;  &quot;14&quot;  &quot;0&quot;  </span></span>
<span id="cb299-41"><a href="scrape-table2.html#cb299-41"></a><span class="co">#&gt; [5,] &quot;Archer&quot;    &quot;10&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;2&quot;  &quot;3&quot;  &quot;0&quot;  &quot;2&quot;  &quot;1&quot;   &quot;7&quot;   &quot;0&quot;  </span></span>
<span id="cb299-42"><a href="scrape-table2.html#cb299-42"></a><span class="co">#&gt; [6,] &quot;Armstrong&quot; &quot;0&quot;   &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb299-43"><a href="scrape-table2.html#cb299-43"></a><span class="co">#&gt;      [,13] [,14] [,15] [,16] [,17] [,18] [,19]   [,20]</span></span>
<span id="cb299-44"><a href="scrape-table2.html#cb299-44"></a><span class="co">#&gt; [1,] &quot;0&quot;   &quot;0&quot;   &quot;168&quot; &quot;0&quot;   &quot;168&quot; &quot;300&quot; &quot;56.00&quot; &quot;102&quot;</span></span>
<span id="cb299-45"><a href="scrape-table2.html#cb299-45"></a><span class="co">#&gt; [2,] &quot;2&quot;   &quot;0&quot;   &quot;26&quot;  &quot;0&quot;   &quot;26&quot;  &quot;50&quot;  &quot;52.00&quot; &quot;19&quot; </span></span>
<span id="cb299-46"><a href="scrape-table2.html#cb299-46"></a><span class="co">#&gt; [3,] &quot;2&quot;   &quot;0&quot;   &quot;212&quot; &quot;0&quot;   &quot;212&quot; &quot;279&quot; &quot;75.99&quot; &quot;39&quot; </span></span>
<span id="cb299-47"><a href="scrape-table2.html#cb299-47"></a><span class="co">#&gt; [4,] &quot;3&quot;   &quot;4&quot;   &quot;88&quot;  &quot;81&quot;  &quot;169&quot; &quot;212&quot; &quot;79.72&quot; &quot;22&quot; </span></span>
<span id="cb299-48"><a href="scrape-table2.html#cb299-48"></a><span class="co">#&gt; [5,] &quot;1&quot;   &quot;0&quot;   &quot;25&quot;  &quot;5&quot;   &quot;30&quot;  &quot;48&quot;  &quot;62.50&quot; &quot;13&quot; </span></span>
<span id="cb299-49"><a href="scrape-table2.html#cb299-49"></a><span class="co">#&gt; [6,] &quot;0&quot;   &quot;0&quot;   &quot;0&quot;   &quot;0&quot;   &quot;0&quot;   &quot;8&quot;   &quot;0.00&quot;  &quot;0&quot;</span></span></code></pre></div>
<p>Above is scraping code and some output when running <code>extract_tables()</code> on our PDF using all of the default options in that function. The only parameter we put in the function is <code>file = "data/Abbreviated Pop Rpt Dec 2017.pdf"</code>. This is just telling the function where to look for the PDF. I have the PDF in the data folder of my project; you’ll need to change this to have <code>extract_tables()</code> look in the right place for the PDF on your computer.</p>
<p>You can see from the output that the scrape was successful - but out work isn’t done yet. The results from <code>is(data)</code> say that the scrape returned a list, and from <code>length(data)</code> we learn that it’s a list of length 18. Why is this? We have 9 pages so it is reasonable that we would have 9 lists since we have one table per page, but we shouldn’t have 19 tables. Lets look again at just the first table - as it is a list we’ll need double square brackets to pull just the first element in the list.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="scrape-table2.html#cb300-1"></a>data[[<span class="dv">1</span>]]</span>
<span id="cb300-2"><a href="scrape-table2.html#cb300-2"></a><span class="co">#&gt;      [,1]     [,2]       [,3]     [,4]           [,5]        [,6]        </span></span>
<span id="cb300-3"><a href="scrape-table2.html#cb300-3"></a><span class="co">#&gt; [1,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;Conv. Felons&quot; &quot;&quot;          &quot;Parole&quot;    </span></span>
<span id="cb300-4"><a href="scrape-table2.html#cb300-4"></a><span class="co">#&gt; [2,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;Sentenced to&quot; &quot;&quot;          &quot;Violators&quot; </span></span>
<span id="cb300-5"><a href="scrape-table2.html#cb300-5"></a><span class="co">#&gt; [3,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;County Jail&quot;  &quot;&quot;          &quot;with a New&quot;</span></span>
<span id="cb300-6"><a href="scrape-table2.html#cb300-6"></a><span class="co">#&gt; [4,] &quot;&quot;       &quot;Pretrial&quot; &quot;Conv.&quot;  &quot;&quot;             &quot;Parole&quot;    &quot;&quot;          </span></span>
<span id="cb300-7"><a href="scrape-table2.html#cb300-7"></a><span class="co">#&gt; [5,] &quot;&quot;       &quot;&quot;         &quot;&quot;       &quot;time&quot;         &quot;&quot;          &quot;Charge&quot;    </span></span>
<span id="cb300-8"><a href="scrape-table2.html#cb300-8"></a><span class="co">#&gt; [6,] &quot;County&quot; &quot;Felons&quot;   &quot;Felons&quot; &quot;&quot;             &quot;Violators&quot; &quot;&quot;          </span></span>
<span id="cb300-9"><a href="scrape-table2.html#cb300-9"></a><span class="co">#&gt;      [,7]       [,8]    [,9]       [,10]     [,11]      [,12]        </span></span>
<span id="cb300-10"><a href="scrape-table2.html#cb300-10"></a><span class="co">#&gt; [1,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Conv. SJF&quot;  </span></span>
<span id="cb300-11"><a href="scrape-table2.html#cb300-11"></a><span class="co">#&gt; [2,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Sentenced&quot;  </span></span>
<span id="cb300-12"><a href="scrape-table2.html#cb300-12"></a><span class="co">#&gt; [3,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;to Co. Jail&quot;</span></span>
<span id="cb300-13"><a href="scrape-table2.html#cb300-13"></a><span class="co">#&gt; [4,] &quot;Pretrial&quot; &quot;Conv.&quot; &quot;Bench&quot;    &quot;&quot;        &quot;Pretrial&quot; &quot;&quot;           </span></span>
<span id="cb300-14"><a href="scrape-table2.html#cb300-14"></a><span class="co">#&gt; [5,] &quot;&quot;         &quot;&quot;      &quot;&quot;         &quot;&quot;        &quot;&quot;         &quot;Time&quot;       </span></span>
<span id="cb300-15"><a href="scrape-table2.html#cb300-15"></a><span class="co">#&gt; [6,] &quot;Misd.&quot;    &quot;Misd.&quot; &quot;Warrants&quot; &quot;Federal&quot; &quot;SJF&quot;      &quot;&quot;           </span></span>
<span id="cb300-16"><a href="scrape-table2.html#cb300-16"></a><span class="co">#&gt;      [,13]           [,14]    [,15]   [,16]      [,17]        [,18]     </span></span>
<span id="cb300-17"><a href="scrape-table2.html#cb300-17"></a><span class="co">#&gt; [1,] &quot;Conv.&quot;         &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb300-18"><a href="scrape-table2.html#cb300-18"></a><span class="co">#&gt; [2,] &quot;SJF&quot;           &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb300-19"><a href="scrape-table2.html#cb300-19"></a><span class="co">#&gt; [3,] &quot;Sentenced&quot;     &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb300-20"><a href="scrape-table2.html#cb300-20"></a><span class="co">#&gt; [4,] &quot;&quot;              &quot;Total&quot;  &quot;Total&quot; &quot;Total&quot;    &quot;Total&quot;      &quot;Total&quot;   </span></span>
<span id="cb300-21"><a href="scrape-table2.html#cb300-21"></a><span class="co">#&gt; [5,] &quot;to State Jail&quot; &quot;&quot;       &quot;&quot;      &quot;&quot;         &quot;&quot;           &quot;&quot;        </span></span>
<span id="cb300-22"><a href="scrape-table2.html#cb300-22"></a><span class="co">#&gt; [6,] &quot;&quot;              &quot;Others&quot; &quot;Local&quot; &quot;Contract&quot; &quot;Population&quot; &quot;Capacity&quot;</span></span>
<span id="cb300-23"><a href="scrape-table2.html#cb300-23"></a><span class="co">#&gt;      [,19]      [,20]      </span></span>
<span id="cb300-24"><a href="scrape-table2.html#cb300-24"></a><span class="co">#&gt; [1,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb300-25"><a href="scrape-table2.html#cb300-25"></a><span class="co">#&gt; [2,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb300-26"><a href="scrape-table2.html#cb300-26"></a><span class="co">#&gt; [3,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb300-27"><a href="scrape-table2.html#cb300-27"></a><span class="co">#&gt; [4,] &quot;% of&quot;     &quot;Available&quot;</span></span>
<span id="cb300-28"><a href="scrape-table2.html#cb300-28"></a><span class="co">#&gt; [5,] &quot;&quot;         &quot;&quot;         </span></span>
<span id="cb300-29"><a href="scrape-table2.html#cb300-29"></a><span class="co">#&gt; [6,] &quot;Capacity&quot; &quot;Beds&quot;</span></span></code></pre></div>
<p>The results from <code>data[[1]]</code> provide some answers. It has the right number of columns but only 6 rows! This is our first table so should be the entire table we can see on page 1. Instead, it appears to be just the column names, with 6 rows because some column names are on multiple rows. Here’s the issue, we can read the table and easily see that the column names may be on multiple rows but belong together, and that they are part of the table. <code>tabulizer</code> can’t see this obvious fact as we can, it must rely on a series of rules to indicate what is part of a table and what isn’t. For example, having white space between columns and thin black lines around rows tells it where each row and column is. Our issue is that the column names appear to just be text until there is a thick black line and (in <code>tabulizer's</code> mind) the table begins, so it keeps the column name part separate from the rest of the table. Now lets look closer at table 2 and see if it is correct for the table on page 1 of our PDF.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="scrape-table2.html#cb301-1"></a><span class="kw">head</span>(data[[<span class="dv">2</span>]])</span>
<span id="cb301-2"><a href="scrape-table2.html#cb301-2"></a><span class="co">#&gt;      [,1]        [,2]  [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]</span></span>
<span id="cb301-3"><a href="scrape-table2.html#cb301-3"></a><span class="co">#&gt; [1,] &quot;Anderson&quot;  &quot;90&quot;  &quot;2&quot;  &quot;2&quot;  &quot;4&quot;  &quot;14&quot; &quot;18&quot; &quot;2&quot;  &quot;1&quot;  &quot;0&quot;   &quot;33&quot;  &quot;2&quot;  </span></span>
<span id="cb301-4"><a href="scrape-table2.html#cb301-4"></a><span class="co">#&gt; [2,] &quot;Andrews&quot;   &quot;20&quot;  &quot;11&quot; &quot;0&quot;  &quot;2&quot;  &quot;6&quot;  &quot;5&quot;  &quot;0&quot;  &quot;1&quot;  &quot;0&quot;   &quot;3&quot;   &quot;0&quot;  </span></span>
<span id="cb301-5"><a href="scrape-table2.html#cb301-5"></a><span class="co">#&gt; [3,] &quot;Angelina&quot;  &quot;105&quot; &quot;26&quot; &quot;1&quot;  &quot;9&quot;  &quot;13&quot; &quot;10&quot; &quot;12&quot; &quot;6&quot;  &quot;0&quot;   &quot;28&quot;  &quot;0&quot;  </span></span>
<span id="cb301-6"><a href="scrape-table2.html#cb301-6"></a><span class="co">#&gt; [4,] &quot;Aransas&quot;   &quot;27&quot;  &quot;6&quot;  &quot;0&quot;  &quot;7&quot;  &quot;9&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;81&quot;  &quot;14&quot;  &quot;0&quot;  </span></span>
<span id="cb301-7"><a href="scrape-table2.html#cb301-7"></a><span class="co">#&gt; [5,] &quot;Archer&quot;    &quot;10&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;2&quot;  &quot;3&quot;  &quot;0&quot;  &quot;2&quot;  &quot;1&quot;   &quot;7&quot;   &quot;0&quot;  </span></span>
<span id="cb301-8"><a href="scrape-table2.html#cb301-8"></a><span class="co">#&gt; [6,] &quot;Armstrong&quot; &quot;0&quot;   &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb301-9"><a href="scrape-table2.html#cb301-9"></a><span class="co">#&gt;      [,13] [,14] [,15] [,16] [,17] [,18] [,19]   [,20]</span></span>
<span id="cb301-10"><a href="scrape-table2.html#cb301-10"></a><span class="co">#&gt; [1,] &quot;0&quot;   &quot;0&quot;   &quot;168&quot; &quot;0&quot;   &quot;168&quot; &quot;300&quot; &quot;56.00&quot; &quot;102&quot;</span></span>
<span id="cb301-11"><a href="scrape-table2.html#cb301-11"></a><span class="co">#&gt; [2,] &quot;2&quot;   &quot;0&quot;   &quot;26&quot;  &quot;0&quot;   &quot;26&quot;  &quot;50&quot;  &quot;52.00&quot; &quot;19&quot; </span></span>
<span id="cb301-12"><a href="scrape-table2.html#cb301-12"></a><span class="co">#&gt; [3,] &quot;2&quot;   &quot;0&quot;   &quot;212&quot; &quot;0&quot;   &quot;212&quot; &quot;279&quot; &quot;75.99&quot; &quot;39&quot; </span></span>
<span id="cb301-13"><a href="scrape-table2.html#cb301-13"></a><span class="co">#&gt; [4,] &quot;3&quot;   &quot;4&quot;   &quot;88&quot;  &quot;81&quot;  &quot;169&quot; &quot;212&quot; &quot;79.72&quot; &quot;22&quot; </span></span>
<span id="cb301-14"><a href="scrape-table2.html#cb301-14"></a><span class="co">#&gt; [5,] &quot;1&quot;   &quot;0&quot;   &quot;25&quot;  &quot;5&quot;   &quot;30&quot;  &quot;48&quot;  &quot;62.50&quot; &quot;13&quot; </span></span>
<span id="cb301-15"><a href="scrape-table2.html#cb301-15"></a><span class="co">#&gt; [6,] &quot;0&quot;   &quot;0&quot;   &quot;0&quot;   &quot;0&quot;   &quot;0&quot;   &quot;8&quot;   &quot;0.00&quot;  &quot;0&quot;</span></span>
<span id="cb301-16"><a href="scrape-table2.html#cb301-16"></a><span class="kw">tail</span>(data[[<span class="dv">2</span>]])</span>
<span id="cb301-17"><a href="scrape-table2.html#cb301-17"></a><span class="co">#&gt;       [,1]          [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]</span></span>
<span id="cb301-18"><a href="scrape-table2.html#cb301-18"></a><span class="co">#&gt; [24,] &quot;Brooks&quot;      &quot;14&quot; &quot;3&quot;  &quot;0&quot;  &quot;1&quot;  &quot;1&quot;  &quot;1&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;   &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb301-19"><a href="scrape-table2.html#cb301-19"></a><span class="co">#&gt; [25,] &quot;Brooks (P)&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;0&quot;  &quot;431&quot; &quot;0&quot;   &quot;0&quot;  </span></span>
<span id="cb301-20"><a href="scrape-table2.html#cb301-20"></a><span class="co">#&gt; [26,] &quot;Brown&quot;       &quot;57&quot; &quot;18&quot; &quot;2&quot;  &quot;9&quot;  &quot;15&quot; &quot;7&quot;  &quot;0&quot;  &quot;2&quot;  &quot;0&quot;   &quot;4&quot;   &quot;0&quot;  </span></span>
<span id="cb301-21"><a href="scrape-table2.html#cb301-21"></a><span class="co">#&gt; [27,] &quot;Burleson&quot;    &quot;34&quot; &quot;10&quot; &quot;0&quot;  &quot;1&quot;  &quot;7&quot;  &quot;3&quot;  &quot;0&quot;  &quot;1&quot;  &quot;0&quot;   &quot;5&quot;   &quot;1&quot;  </span></span>
<span id="cb301-22"><a href="scrape-table2.html#cb301-22"></a><span class="co">#&gt; [28,] &quot;Burnet 1(P)&quot; &quot;53&quot; &quot;22&quot; &quot;4&quot;  &quot;2&quot;  &quot;11&quot; &quot;12&quot; &quot;3&quot;  &quot;1&quot;  &quot;0&quot;   &quot;14&quot;  &quot;1&quot;  </span></span>
<span id="cb301-23"><a href="scrape-table2.html#cb301-23"></a><span class="co">#&gt; [29,] &quot;Caldwell&quot;    &quot;52&quot; &quot;7&quot;  &quot;2&quot;  &quot;1&quot;  &quot;5&quot;  &quot;34&quot; &quot;10&quot; &quot;2&quot;  &quot;0&quot;   &quot;15&quot;  &quot;0&quot;  </span></span>
<span id="cb301-24"><a href="scrape-table2.html#cb301-24"></a><span class="co">#&gt;       [,13] [,14] [,15] [,16] [,17] [,18] [,19]   [,20]</span></span>
<span id="cb301-25"><a href="scrape-table2.html#cb301-25"></a><span class="co">#&gt; [24,] &quot;0&quot;   &quot;3&quot;   &quot;23&quot;  &quot;0&quot;   &quot;23&quot;  &quot;36&quot;  &quot;63.89&quot; &quot;0&quot;  </span></span>
<span id="cb301-26"><a href="scrape-table2.html#cb301-26"></a><span class="co">#&gt; [25,] &quot;0&quot;   &quot;0&quot;   &quot;0&quot;   &quot;549&quot; &quot;549&quot; &quot;652&quot; &quot;84.20&quot; &quot;38&quot; </span></span>
<span id="cb301-27"><a href="scrape-table2.html#cb301-27"></a><span class="co">#&gt; [26,] &quot;3&quot;   &quot;8&quot;   &quot;125&quot; &quot;2&quot;   &quot;127&quot; &quot;196&quot; &quot;64.80&quot; &quot;49&quot; </span></span>
<span id="cb301-28"><a href="scrape-table2.html#cb301-28"></a><span class="co">#&gt; [27,] &quot;2&quot;   &quot;17&quot;  &quot;69&quot;  &quot;2&quot;   &quot;71&quot;  &quot;96&quot;  &quot;73.96&quot; &quot;15&quot; </span></span>
<span id="cb301-29"><a href="scrape-table2.html#cb301-29"></a><span class="co">#&gt; [28,] &quot;0&quot;   &quot;1&quot;   &quot;124&quot; &quot;228&quot; &quot;352&quot; &quot;595&quot; &quot;59.16&quot; &quot;184&quot;</span></span>
<span id="cb301-30"><a href="scrape-table2.html#cb301-30"></a><span class="co">#&gt; [29,] &quot;1&quot;   &quot;0&quot;   &quot;129&quot; &quot;25&quot;  &quot;154&quot; &quot;301&quot; &quot;51.16&quot; &quot;117&quot;</span></span></code></pre></div>
<p>We’re looking just at the <code>head()</code> and <code>tail()</code> to get the first and 6 six rows as otherwise we’d print out all 29 rows in that table. When you are exploring you own data you’d probably want to be more thorough and ensure that rows around the middle are also correct - but this is a good first pass. If you look at the output the table and compare it to the PDF, you’ll see that the scrape was successful. Every row is where it should be and the columns are correct - unlike using <code>pdftools()</code> we have the results already in proper columns. One thing to note is that this data isn’t in a data.frame format, it’s in a matrix. Matrices are the default output of <code>extract_tables()</code> though you can set it to output a data.frame by setting the parameter <code>output = "data.frame"</code>. In out case we actually wouldn’t want that due to the issue of the column names.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="scrape-table2.html#cb302-1"></a>data &lt;-<span class="st"> </span><span class="kw">extract_tables</span>(<span class="dt">file =</span> <span class="st">&quot;data/Abbreviated Pop Rpt Dec 2017.pdf&quot;</span>, <span class="dt">output =</span> <span class="st">&quot;data.frame&quot;</span>)</span>
<span id="cb302-2"><a href="scrape-table2.html#cb302-2"></a><span class="kw">head</span>(data[[<span class="dv">2</span>]])</span>
<span id="cb302-3"><a href="scrape-table2.html#cb302-3"></a><span class="co">#&gt;    Anderson X90 X2 X2.1 X4 X14 X18 X2.2 X1 X0 X33 X2.3 X0.1 X0.2 X168 X0.3</span></span>
<span id="cb302-4"><a href="scrape-table2.html#cb302-4"></a><span class="co">#&gt; 1   Andrews  20 11    0  2   6   5    0  1  0   3    0    2    0   26    0</span></span>
<span id="cb302-5"><a href="scrape-table2.html#cb302-5"></a><span class="co">#&gt; 2  Angelina 105 26    1  9  13  10   12  6  0  28    0    2    0  212    0</span></span>
<span id="cb302-6"><a href="scrape-table2.html#cb302-6"></a><span class="co">#&gt; 3   Aransas  27  6    0  7   9   5    6  7 81  14    0    3    4   88   81</span></span>
<span id="cb302-7"><a href="scrape-table2.html#cb302-7"></a><span class="co">#&gt; 4    Archer  10  0    0  0   2   3    0  2  1   7    0    1    0   25    5</span></span>
<span id="cb302-8"><a href="scrape-table2.html#cb302-8"></a><span class="co">#&gt; 5 Armstrong   0  0    0  0   0   0    0  0  0   0    0    0    0    0    0</span></span>
<span id="cb302-9"><a href="scrape-table2.html#cb302-9"></a><span class="co">#&gt; 6  Atascosa  69 11    0  2   2  14    1  1  0  11    0    2    3  116    0</span></span>
<span id="cb302-10"><a href="scrape-table2.html#cb302-10"></a><span class="co">#&gt;   X168.1 X300 X56.00 X102</span></span>
<span id="cb302-11"><a href="scrape-table2.html#cb302-11"></a><span class="co">#&gt; 1     26   50  52.00   19</span></span>
<span id="cb302-12"><a href="scrape-table2.html#cb302-12"></a><span class="co">#&gt; 2    212  279  75.99   39</span></span>
<span id="cb302-13"><a href="scrape-table2.html#cb302-13"></a><span class="co">#&gt; 3    169  212  79.72   22</span></span>
<span id="cb302-14"><a href="scrape-table2.html#cb302-14"></a><span class="co">#&gt; 4     30   48  62.50   13</span></span>
<span id="cb302-15"><a href="scrape-table2.html#cb302-15"></a><span class="co">#&gt; 5      0    8   0.00    0</span></span>
<span id="cb302-16"><a href="scrape-table2.html#cb302-16"></a><span class="co">#&gt; 6    116  138  84.06    0</span></span></code></pre></div>
<p>Above we reran the <code>extract_tables()</code> code and just added a parameter to make the output a data.frame instead of a matrix. Now it sets the first row - which should be the columns - as the column name, which is not correct. We’ll have to fix the column names first before we can convert the result from a matrix to a data.frame.</p>
<p>To attempt to handle this we’ll use the very helpful function <code>locate_areas()</code>. This function will let you choose exactly where on the page to get the table - overriding the function’s automatic detection method.</p>
<p>We’ll use the <code>apply()</code> function on our data to create column names from it. The <code>apply()</code> function is actual part of a “family” of similar function which essentially operate as quicker for loops - we could have done a for loop to solve this problem. The <code>apply()</code> function takes as an input a vector or matrix dataset, and then performs some function on either its rows or its columns. Our first input is our data, the first element of the <code>data</code> list. Then we put the number 2 to indicate that we want it to perform our function on each column of the matrix - if we put 1, that would perform the function on each row. So now what function to use on this data? We want to combine each row together into a single string per column. To do that we can use the <code>paste()</code> function and use the <code>collapse</code> parameter to combine multiple strings to a single string. So after the 2 we enter <code>paste</code>, and then just add <code>collapse = ""</code> (the "" means that we’re not putting anything between the strings when combining them) separated by a comma. Lets see what it returns.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="scrape-table2.html#cb303-1"></a><span class="kw">apply</span>(data[[<span class="dv">1</span>]], <span class="dv">2</span>, paste, <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb303-2"><a href="scrape-table2.html#cb303-2"></a><span class="co">#&gt;                             X                           X.1 </span></span>
<span id="cb303-3"><a href="scrape-table2.html#cb303-3"></a><span class="co">#&gt;                      &quot;County&quot;              &quot;PretrialFelons&quot; </span></span>
<span id="cb303-4"><a href="scrape-table2.html#cb303-4"></a><span class="co">#&gt;                           X.2                  Conv..Felons </span></span>
<span id="cb303-5"><a href="scrape-table2.html#cb303-5"></a><span class="co">#&gt;                 &quot;Conv.Felons&quot; &quot;Sentenced toCounty Jailtime&quot; </span></span>
<span id="cb303-6"><a href="scrape-table2.html#cb303-6"></a><span class="co">#&gt;                           X.3                        Parole </span></span>
<span id="cb303-7"><a href="scrape-table2.html#cb303-7"></a><span class="co">#&gt;             &quot;ParoleViolators&quot;   &quot;Violatorswith a NewCharge&quot; </span></span>
<span id="cb303-8"><a href="scrape-table2.html#cb303-8"></a><span class="co">#&gt;                           X.4                           X.5 </span></span>
<span id="cb303-9"><a href="scrape-table2.html#cb303-9"></a><span class="co">#&gt;               &quot;PretrialMisd.&quot;                  &quot;Conv.Misd.&quot; </span></span>
<span id="cb303-10"><a href="scrape-table2.html#cb303-10"></a><span class="co">#&gt;                           X.6                           X.7 </span></span>
<span id="cb303-11"><a href="scrape-table2.html#cb303-11"></a><span class="co">#&gt;               &quot;BenchWarrants&quot;                     &quot;Federal&quot; </span></span>
<span id="cb303-12"><a href="scrape-table2.html#cb303-12"></a><span class="co">#&gt;                           X.8                     Conv..SJF </span></span>
<span id="cb303-13"><a href="scrape-table2.html#cb303-13"></a><span class="co">#&gt;                 &quot;PretrialSJF&quot;    &quot;Sentencedto Co. JailTime&quot; </span></span>
<span id="cb303-14"><a href="scrape-table2.html#cb303-14"></a><span class="co">#&gt;                         Conv.                           X.9 </span></span>
<span id="cb303-15"><a href="scrape-table2.html#cb303-15"></a><span class="co">#&gt;   &quot;SJFSentencedto State Jail&quot;                 &quot;TotalOthers&quot; </span></span>
<span id="cb303-16"><a href="scrape-table2.html#cb303-16"></a><span class="co">#&gt;                          X.10                          X.11 </span></span>
<span id="cb303-17"><a href="scrape-table2.html#cb303-17"></a><span class="co">#&gt;                  &quot;TotalLocal&quot;               &quot;TotalContract&quot; </span></span>
<span id="cb303-18"><a href="scrape-table2.html#cb303-18"></a><span class="co">#&gt;                          X.12                          X.13 </span></span>
<span id="cb303-19"><a href="scrape-table2.html#cb303-19"></a><span class="co">#&gt;             &quot;TotalPopulation&quot;               &quot;TotalCapacity&quot; </span></span>
<span id="cb303-20"><a href="scrape-table2.html#cb303-20"></a><span class="co">#&gt;                          X.14                          X.15 </span></span>
<span id="cb303-21"><a href="scrape-table2.html#cb303-21"></a><span class="co">#&gt;                &quot;% ofCapacity&quot;               &quot;AvailableBeds&quot;</span></span></code></pre></div>
<p>Now we have a vector of 20 strings, one per column in our data. We will use this to name the columns in our dataset with the actual info from the scraped table. One helper function first. The column names don’t follow conventional R style for column names - it has spaces, uppercased letters, punctuation other than the underscore. To easily fix this we can use the <code>make_clean_names()</code> function from the <code>janitor</code> package. If you don’t have this package installed, install it using <code>install.packages("janitor")</code>. We’ll first save the results of the above <code>apply()</code> function as a vector we can call <code>column_names</code> and then run the <code>make_clean_names()</code> function on it. The input to <code>make_clean_names()</code> is the vector of strings (our column names) and it’ll return that vector but now with names in R’s common style.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="scrape-table2.html#cb304-1"></a><span class="kw">library</span>(janitor)</span>
<span id="cb304-2"><a href="scrape-table2.html#cb304-2"></a><span class="co">#&gt; </span></span>
<span id="cb304-3"><a href="scrape-table2.html#cb304-3"></a><span class="co">#&gt; Attaching package: &#39;janitor&#39;</span></span>
<span id="cb304-4"><a href="scrape-table2.html#cb304-4"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb304-5"><a href="scrape-table2.html#cb304-5"></a><span class="co">#&gt; </span></span>
<span id="cb304-6"><a href="scrape-table2.html#cb304-6"></a><span class="co">#&gt;     chisq.test, fisher.test</span></span>
<span id="cb304-7"><a href="scrape-table2.html#cb304-7"></a>column_names &lt;-<span class="st"> </span><span class="kw">apply</span>(data[[<span class="dv">1</span>]], <span class="dv">2</span>, paste, <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb304-8"><a href="scrape-table2.html#cb304-8"></a>column_names &lt;-<span class="st"> </span><span class="kw">make_clean_names</span>(column_names)</span>
<span id="cb304-9"><a href="scrape-table2.html#cb304-9"></a>column_names</span>
<span id="cb304-10"><a href="scrape-table2.html#cb304-10"></a><span class="co">#&gt;  [1] &quot;county&quot;                       &quot;pretrial_felons&quot;             </span></span>
<span id="cb304-11"><a href="scrape-table2.html#cb304-11"></a><span class="co">#&gt;  [3] &quot;conv_felons&quot;                  &quot;sentenced_to_county_jailtime&quot;</span></span>
<span id="cb304-12"><a href="scrape-table2.html#cb304-12"></a><span class="co">#&gt;  [5] &quot;parole_violators&quot;             &quot;violatorswith_a_new_charge&quot;  </span></span>
<span id="cb304-13"><a href="scrape-table2.html#cb304-13"></a><span class="co">#&gt;  [7] &quot;pretrial_misd&quot;                &quot;conv_misd&quot;                   </span></span>
<span id="cb304-14"><a href="scrape-table2.html#cb304-14"></a><span class="co">#&gt;  [9] &quot;bench_warrants&quot;               &quot;federal&quot;                     </span></span>
<span id="cb304-15"><a href="scrape-table2.html#cb304-15"></a><span class="co">#&gt; [11] &quot;pretrial_sjf&quot;                 &quot;sentencedto_co_jail_time&quot;    </span></span>
<span id="cb304-16"><a href="scrape-table2.html#cb304-16"></a><span class="co">#&gt; [13] &quot;sjf_sentencedto_state_jail&quot;   &quot;total_others&quot;                </span></span>
<span id="cb304-17"><a href="scrape-table2.html#cb304-17"></a><span class="co">#&gt; [15] &quot;total_local&quot;                  &quot;total_contract&quot;              </span></span>
<span id="cb304-18"><a href="scrape-table2.html#cb304-18"></a><span class="co">#&gt; [17] &quot;total_population&quot;             &quot;total_capacity&quot;              </span></span>
<span id="cb304-19"><a href="scrape-table2.html#cb304-19"></a><span class="co">#&gt; [19] &quot;percent_of_capacity&quot;          &quot;available_beds&quot;</span></span></code></pre></div>
<p>Now the column names are in the proper style. And notice the 19th value, it changed from the percent sign to the word “percent”.</p>
<div id="pregnant-women-incarcerated" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> Pregnant Women Incarcerated</h2>
<p>We’ll finish this lesson with another example of data from Texas - this time using data on the number of pregnant women booked in Texas county jails. This data has a unique challenge, it has 10 columns but we want to make it have only 2. In the data (shown below), it starts with a column of county names, then a column of the number of pregnant women booked into that county’s jail. Next is another column of county names - instead of continuing onto another page, this data just makes new columns when it runs out of room. We’ll scrape this PDF using <code>tabulizer()</code> and then work to fix this multiple-column issue.</p>
<p><img src="images/pregnant.PNG" /></p>
<p>Notice that this data doesn’t even have column names. Whereas earlier in this chapter we have to combine multiple rows to form the column names, here we will have to create the names entirely ourselves. This is always a bit risky as maybe next month the table will change and if we hard-code any column names, we’ll either have code that breaks or - much more dangerous - mislabel the columns without noticing. In cases like this we have no other choice, but if you intend to scrape something that recurring - that is, that you’ll scrape a future version of - be careful about situations like this.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="scrape-table.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="geocoding.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacobkap/crimebythenumbers/edit/master/pdf-tables2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>22 Scraping tables from PDFs | Crime by the Numbers: A Criminologist’s Guide to R</title>
  <meta name="description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="22 Scraping tables from PDFs | Crime by the Numbers: A Criminologist’s Guide to R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://crimebythenumbers.com" />
  
  <meta property="og:description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  <meta name="github-repo" content="jacobkap/crimebythenumbers" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="22 Scraping tables from PDFs | Crime by the Numbers: A Criminologist’s Guide to R" />
  
  <meta name="twitter:description" content="A guide to learning R for the purpose of conducting quantitative research. This covers collecting and cleaning data, and visualizing it in graphs and maps." />
  

<meta name="author" content="Jacob Kaplan" />


<meta name="date" content="2022-01-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="for-loops.html"/>
<link rel="next" href="scrape-table2.html"/>
<script src="libs/header-attrs-2.11.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99359926-6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99359926-6');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Crime by the Numbers: A Criminologist's Guide to R</a></strong></li>

<li class="divider"></li>
<li class="part"><span><b>I Introduction<span></span></b></span></li>
<li><a href="index.html#preface">Preface<span></span></a>
<ul>
<li><a href="index.html#why-learn-to-program">Why learn to program?<span></span></a>
<ul>
<li><a href="index.html#scale">Scale<span></span></a></li>
<li><a href="index.html#reproducibility">Reproducibility<span></span></a></li>
</ul></li>
<li><a href="index.html#what-you-will-learn">What you will learn<span></span></a>
<ul>
<li><a href="index.html#skills">Skills<span></span></a></li>
</ul></li>
<li><a href="index.html#what-you-wont-learn">What you won’t learn<span></span></a></li>
<li><a href="index.html#simple-vs-easy">Simple vs Easy<span></span></a></li>
<li><a href="index.html#how-to-read-this-book">How to read this book<span></span></a></li>
<li><a href="index.html#citing-this-book">Citing this book<span></span></a></li>
<li><a href="index.html#how-to-contribute-to-this-book">How to contribute to this book<span></span></a></li>
<li><a href="index.html#where-to-find-data-included-in-this-book">Where to find data included in this book<span></span></a></li>
<li><a href="index.html#where-to-find-code-included-in-this-book">Where to find code included in this book<span></span></a></li>
</ul></li>
<li><a href="about-the-author.html#about-the-author">About the author<span></span></a></li>
<li class="chapter" data-level="1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html"><i class="fa fa-check"></i><b>1</b> A soup to nuts project example<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#big-picture-data-example"><i class="fa fa-check"></i><b>1.1</b> Big picture data example<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#little-picture-data-example"><i class="fa fa-check"></i><b>1.2</b> Little picture data example<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#loading-packages"><i class="fa fa-check"></i><b>1.2.1</b> Loading packages<span></span></a></li>
<li class="chapter" data-level="1.2.2" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#loading-data"><i class="fa fa-check"></i><b>1.2.2</b> Loading data<span></span></a></li>
<li class="chapter" data-level="1.2.3" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#cleaning"><i class="fa fa-check"></i><b>1.2.3</b> Cleaning<span></span></a></li>
<li class="chapter" data-level="1.2.4" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#aggregating"><i class="fa fa-check"></i><b>1.2.4</b> Aggregating<span></span></a></li>
<li class="chapter" data-level="1.2.5" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#graphing"><i class="fa fa-check"></i><b>1.2.5</b> Graphing<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="a-soup-to-nuts-project-example.html"><a href="a-soup-to-nuts-project-example.html#reusing-and-modifying-code"><i class="fa fa-check"></i><b>1.3</b> Reusing and modifying code<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-r.html"><a href="intro-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-r.html"><a href="intro-to-r.html#using-rstudio"><i class="fa fa-check"></i><b>2.1</b> Using RStudio<span></span></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="intro-to-r.html"><a href="intro-to-r.html#opening-an-r-script"><i class="fa fa-check"></i><b>2.1.1</b> Opening an R Script<span></span></a></li>
<li class="chapter" data-level="2.1.2" data-path="intro-to-r.html"><a href="intro-to-r.html#setting-the-working-directory"><i class="fa fa-check"></i><b>2.1.2</b> Setting the working directory<span></span></a></li>
<li class="chapter" data-level="2.1.3" data-path="intro-to-r.html"><a href="intro-to-r.html#changing-rstudio"><i class="fa fa-check"></i><b>2.1.3</b> Changing RStudio<span></span></a></li>
<li class="chapter" data-level="2.1.4" data-path="intro-to-r.html"><a href="intro-to-r.html#helpful-cheat-sheets"><i class="fa fa-check"></i><b>2.1.4</b> Helpful Cheat Sheets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="intro-to-r.html"><a href="intro-to-r.html#assignment"><i class="fa fa-check"></i><b>2.2</b> Assigning variables<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="intro-to-r.html"><a href="intro-to-r.html#functions-intro"><i class="fa fa-check"></i><b>2.3</b> What are functions (and packages)?<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="intro-to-r.html"><a href="intro-to-r.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Reading data into R<span></span></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro-to-r.html"><a href="intro-to-r.html#loading-data-intro"><i class="fa fa-check"></i><b>2.4.1</b> Loading data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro-to-r.html"><a href="intro-to-r.html#first-steps-to-exploring-data"><i class="fa fa-check"></i><b>2.5</b> First steps to exploring data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>3</b> Data types and structures<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-types.html"><a href="data-types.html#section-data-types"><i class="fa fa-check"></i><b>3.1</b> Data types<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="data-types.html"><a href="data-types.html#data-structures"><i class="fa fa-check"></i><b>3.2</b> Data structures<span></span></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-types.html"><a href="data-types.html#vectors"><i class="fa fa-check"></i><b>3.2.1</b> Vectors (collections of “things”)<span></span></a></li>
<li class="chapter" data-level="3.2.2" data-path="data-types.html"><a href="data-types.html#dataframes"><i class="fa fa-check"></i><b>3.2.2</b> Data.frames<span></span></a></li>
<li class="chapter" data-level="3.2.3" data-path="data-types.html"><a href="data-types.html#other-data-structures"><i class="fa fa-check"></i><b>3.2.3</b> Other data structures<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>4</b> Reading and writing Data<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-data-into-r-1"><i class="fa fa-check"></i><b>4.1</b> Reading Data into R<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r"><i class="fa fa-check"></i><b>4.1.1</b> R<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel"><i class="fa fa-check"></i><b>4.1.2</b> Excel<span></span></a></li>
<li class="chapter" data-level="4.1.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata"><i class="fa fa-check"></i><b>4.1.3</b> Stata<span></span></a></li>
<li class="chapter" data-level="4.1.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas"><i class="fa fa-check"></i><b>4.1.4</b> SAS<span></span></a></li>
<li class="chapter" data-level="4.1.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss"><i class="fa fa-check"></i><b>4.1.5</b> SPSS<span></span></a></li>
<li class="chapter" data-level="4.1.6" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#fixed-width-ascii"><i class="fa fa-check"></i><b>4.1.6</b> Fixed-width ASCII<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-data"><i class="fa fa-check"></i><b>4.2</b> Writing Data<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#r-1"><i class="fa fa-check"></i><b>4.2.1</b> R<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#rda-and-.rdata"><i class="fa fa-check"></i><b>4.2.2</b> .rda and .rdata<span></span></a></li>
<li class="chapter" data-level="4.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#rds"><i class="fa fa-check"></i><b>4.2.3</b> .rds<span></span></a></li>
<li class="chapter" data-level="4.2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#excel-1"><i class="fa fa-check"></i><b>4.2.4</b> Excel<span></span></a></li>
<li class="chapter" data-level="4.2.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#stata-1"><i class="fa fa-check"></i><b>4.2.5</b> Stata<span></span></a></li>
<li class="chapter" data-level="4.2.6" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sas-1"><i class="fa fa-check"></i><b>4.2.6</b> SAS<span></span></a></li>
<li class="chapter" data-level="4.2.7" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#spss-1"><i class="fa fa-check"></i><b>4.2.7</b> SPSS<span></span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Project Management<span></span></b></span></li>
<li class="chapter" data-level="5" data-path="mise-en-place.html"><a href="mise-en-place.html"><i class="fa fa-check"></i><b>5</b> <em>Mise en place</em><span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="mise-en-place.html"><a href="mise-en-place.html#starting-with-a-pencil-and-paper"><i class="fa fa-check"></i><b>5.1</b> Starting with a pencil and paper<span></span></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="mise-en-place.html"><a href="mise-en-place.html#tables-and-graphs"><i class="fa fa-check"></i><b>5.1.1</b> Tables and graphs<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="mise-en-place.html"><a href="mise-en-place.html#r-projects"><i class="fa fa-check"></i><b>5.2</b> R Projects<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="mise-en-place.html"><a href="mise-en-place.html#folders"><i class="fa fa-check"></i><b>5.2.1</b> Folders<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="mise-en-place.html"><a href="mise-en-place.html#modular-r-scripts"><i class="fa fa-check"></i><b>5.3</b> Modular R scripts<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="mise-en-place.html"><a href="mise-en-place.html#modular-code"><i class="fa fa-check"></i><b>5.4</b> Modular code<span></span></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="mise-en-place.html"><a href="mise-en-place.html#section-labels"><i class="fa fa-check"></i><b>5.4.1</b> Section Labels<span></span></a></li>
<li class="chapter" data-level="5.4.2" data-path="mise-en-place.html"><a href="mise-en-place.html#helper-r-scripts"><i class="fa fa-check"></i><b>5.4.2</b> Helper R Scripts<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="collaboration.html"><a href="collaboration.html"><i class="fa fa-check"></i><b>6</b> Collaboration<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="collaboration.html"><a href="collaboration.html#code-review"><i class="fa fa-check"></i><b>6.1</b> Code review<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="collaboration.html"><a href="collaboration.html#style-guidelines"><i class="fa fa-check"></i><b>6.1.1</b> Style guidelines<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="collaboration.html"><a href="collaboration.html#documentation"><i class="fa fa-check"></i><b>6.2</b> Documentation<span></span></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="collaboration.html"><a href="collaboration.html#comments"><i class="fa fa-check"></i><b>6.2.1</b> Comments<span></span></a></li>
<li class="chapter" data-level="6.2.2" data-path="collaboration.html"><a href="collaboration.html#vignettes"><i class="fa fa-check"></i><b>6.2.2</b> Vignettes<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7</b> R Markdown<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-markdown.html"><a href="r-markdown.html#code-1"><i class="fa fa-check"></i><b>7.1</b> Code<span></span></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="r-markdown.html"><a href="r-markdown.html#hiding-code-in-the-output"><i class="fa fa-check"></i><b>7.1.1</b> Hiding code in the output<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="r-markdown.html"><a href="r-markdown.html#inline-code"><i class="fa fa-check"></i><b>7.2</b> Inline Code<span></span></a></li>
<li class="chapter" data-level="7.3" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i><b>7.3</b> Tables<span></span></a></li>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html#footnotes"><i class="fa fa-check"></i><b>7.4</b> Footnotes<span></span></a></li>
<li class="chapter" data-level="7.5" data-path="r-markdown.html"><a href="r-markdown.html#citation"><i class="fa fa-check"></i><b>7.5</b> Citation<span></span></a></li>
<li class="chapter" data-level="7.6" data-path="r-markdown.html"><a href="r-markdown.html#spell-check"><i class="fa fa-check"></i><b>7.6</b> Spell check<span></span></a></li>
<li class="chapter" data-level="7.7" data-path="r-markdown.html"><a href="r-markdown.html#making-the-output-file"><i class="fa fa-check"></i><b>7.7</b> Making the output file<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tests.html"><a href="tests.html"><i class="fa fa-check"></i><b>8</b> Testing your code<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="tests.html"><a href="tests.html#why-test-your-code"><i class="fa fa-check"></i><b>8.1</b> Why test your code?<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="tests.html"><a href="tests.html#unit-tests"><i class="fa fa-check"></i><b>8.2</b> Unit tests<span></span></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="tests.html"><a href="tests.html#modular-test-scripts"><i class="fa fa-check"></i><b>8.2.1</b> Modular test scripts<span></span></a></li>
<li class="chapter" data-level="8.2.2" data-path="tests.html"><a href="tests.html#how-to-write-unit-tests"><i class="fa fa-check"></i><b>8.2.2</b> How to write unit tests<span></span></a></li>
<li class="chapter" data-level="8.2.3" data-path="tests.html"><a href="tests.html#what-to-test"><i class="fa fa-check"></i><b>8.2.3</b> What to test<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tests.html"><a href="tests.html#test-driven-development-tdd"><i class="fa fa-check"></i><b>8.3</b> Test-driven development (TDD)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>9</b> Git<span></span></a>
<ul>
<li class="chapter" data-level="9.1" data-path="git.html"><a href="git.html#what-is-git-and-why-do-i-need-it"><i class="fa fa-check"></i><b>9.1</b> What is Git and why do I need it?<span></span></a></li>
<li class="chapter" data-level="9.2" data-path="git.html"><a href="git.html#git-basics"><i class="fa fa-check"></i><b>9.2</b> Git basics<span></span></a></li>
<li class="chapter" data-level="9.3" data-path="git.html"><a href="git.html#using-git"><i class="fa fa-check"></i><b>9.3</b> Using Git<span></span></a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="git.html"><a href="git.html#setting-up-git"><i class="fa fa-check"></i><b>9.3.1</b> Setting up Git<span></span></a></li>
<li class="chapter" data-level="9.3.2" data-path="git.html"><a href="git.html#setting-up-github"><i class="fa fa-check"></i><b>9.3.2</b> Setting up GitHub<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="git.html"><a href="git.html#setting-up-git-on-an-already-made-r-project"><i class="fa fa-check"></i><b>9.4</b> Setting up Git on an already made R Project<span></span></a></li>
<li class="chapter" data-level="9.5" data-path="git.html"><a href="git.html#using-git-through-rstudio"><i class="fa fa-check"></i><b>9.5</b> Using Git through RStudio<span></span></a></li>
<li class="chapter" data-level="9.6" data-path="git.html"><a href="git.html#when-to-commit"><i class="fa fa-check"></i><b>9.6</b> When to commit<span></span></a></li>
<li class="chapter" data-level="9.7" data-path="git.html"><a href="git.html#other-resources"><i class="fa fa-check"></i><b>9.7</b> Other resources<span></span></a></li>
</ul></li>
<li class="part"><span><b>III Clean<span></span></b></span></li>
<li class="chapter" data-level="10" data-path="subsetting-intro.html"><a href="subsetting-intro.html"><i class="fa fa-check"></i><b>10</b> Subsetting: Making big things small<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-values"><i class="fa fa-check"></i><b>10.1</b> Select specific values<span></span></a></li>
<li class="chapter" data-level="10.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#logical-values-and-operations"><i class="fa fa-check"></i><b>10.2</b> Logical values and operations<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-a-single-value"><i class="fa fa-check"></i><b>10.2.1</b> Matching a single value<span></span></a></li>
<li class="chapter" data-level="10.2.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#matching-multiple-values"><i class="fa fa-check"></i><b>10.2.2</b> Matching multiple values<span></span></a></li>
<li class="chapter" data-level="10.2.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#does-not-match"><i class="fa fa-check"></i><b>10.2.3</b> Does not match<span></span></a></li>
<li class="chapter" data-level="10.2.4" data-path="subsetting-intro.html"><a href="subsetting-intro.html#greater-than-or-less-than"><i class="fa fa-check"></i><b>10.2.4</b> Greater than or less than<span></span></a></li>
<li class="chapter" data-level="10.2.5" data-path="subsetting-intro.html"><a href="subsetting-intro.html#combining-conditional-statements---or-and"><i class="fa fa-check"></i><b>10.2.5</b> Combining conditional statements - or, and<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subsetting-a-data.frame"><i class="fa fa-check"></i><b>10.3</b> Subsetting a data.frame<span></span></a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-columns"><i class="fa fa-check"></i><b>10.3.1</b> Select specific columns<span></span></a></li>
<li class="chapter" data-level="10.3.2" data-path="subsetting-intro.html"><a href="subsetting-intro.html#select-specific-rows"><i class="fa fa-check"></i><b>10.3.2</b> Select specific rows<span></span></a></li>
<li class="chapter" data-level="10.3.3" data-path="subsetting-intro.html"><a href="subsetting-intro.html#subset-colorado-data"><i class="fa fa-check"></i><b>10.3.3</b> Subset Colorado data<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>11</b> Exploratory data analysis<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="explore.html"><a href="explore.html#summary-and-table"><i class="fa fa-check"></i><b>11.1</b> Summary and Table<span></span></a></li>
<li class="chapter" data-level="11.2" data-path="explore.html"><a href="explore.html#graphing-1"><i class="fa fa-check"></i><b>11.2</b> Graphing<span></span></a></li>
<li class="chapter" data-level="11.3" data-path="explore.html"><a href="explore.html#aggregate"><i class="fa fa-check"></i><b>11.3</b> Aggregating (summaries of groups)<span></span></a></li>
<li class="chapter" data-level="11.4" data-path="explore.html"><a href="explore.html#dplyr-pipes"><i class="fa fa-check"></i><b>11.4</b> Pipes in <code>dplyr</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>12</b> Regular Expressions<span></span></a>
<ul>
<li class="chapter" data-level="12.1" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-patterns-in-text-with-grep"><i class="fa fa-check"></i><b>12.1</b> Finding patterns in text with <code>grep()</code><span></span></a></li>
<li class="chapter" data-level="12.2" data-path="regular-expressions.html"><a href="regular-expressions.html#finding-and-replacing-patterns-in-text-with-gsub"><i class="fa fa-check"></i><b>12.2</b> Finding and replacing patterns in text with <code>gsub()</code><span></span></a></li>
<li class="chapter" data-level="12.3" data-path="regular-expressions.html"><a href="regular-expressions.html#useful-special-characters"><i class="fa fa-check"></i><b>12.3</b> Useful special characters<span></span></a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-characters"><i class="fa fa-check"></i><b>12.3.1</b> Multiple characters <code>[]</code><span></span></a></li>
<li class="chapter" data-level="12.3.2" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-of-previous-character-n"><i class="fa fa-check"></i><b>12.3.2</b> n-many of previous character <code>{n}</code><span></span></a></li>
<li class="chapter" data-level="12.3.3" data-path="regular-expressions.html"><a href="regular-expressions.html#n-many-to-m-many-of-previous-character-nm"><i class="fa fa-check"></i><b>12.3.3</b> n-many to m-many of previous character <code>{n,m}</code><span></span></a></li>
<li class="chapter" data-level="12.3.4" data-path="regular-expressions.html"><a href="regular-expressions.html#start-of-string"><i class="fa fa-check"></i><b>12.3.4</b> Start of string<span></span></a></li>
<li class="chapter" data-level="12.3.5" data-path="regular-expressions.html"><a href="regular-expressions.html#end-of-string"><i class="fa fa-check"></i><b>12.3.5</b> End of string <code>$</code><span></span></a></li>
<li class="chapter" data-level="12.3.6" data-path="regular-expressions.html"><a href="regular-expressions.html#anything-."><i class="fa fa-check"></i><b>12.3.6</b> Anything <code>.</code><span></span></a></li>
<li class="chapter" data-level="12.3.7" data-path="regular-expressions.html"><a href="regular-expressions.html#one-or-more-of-previous"><i class="fa fa-check"></i><b>12.3.7</b> One or more of previous <code>+</code><span></span></a></li>
<li class="chapter" data-level="12.3.8" data-path="regular-expressions.html"><a href="regular-expressions.html#zero-or-more-of-previous"><i class="fa fa-check"></i><b>12.3.8</b> Zero or more of previous <code>*</code><span></span></a></li>
<li class="chapter" data-level="12.3.9" data-path="regular-expressions.html"><a href="regular-expressions.html#multiple-patterns"><i class="fa fa-check"></i><b>12.3.9</b> Multiple patterns <code>|</code><span></span></a></li>
<li class="chapter" data-level="12.3.10" data-path="regular-expressions.html"><a href="regular-expressions.html#parentheses"><i class="fa fa-check"></i><b>12.3.10</b> Parentheses <code>()</code><span></span></a></li>
<li class="chapter" data-level="12.3.11" data-path="regular-expressions.html"><a href="regular-expressions.html#optional-text"><i class="fa fa-check"></i><b>12.3.11</b> Optional text <code>?</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="regular-expressions.html"><a href="regular-expressions.html#changing-capitalization"><i class="fa fa-check"></i><b>12.4</b> Changing capitalization<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="reshaping.html"><a href="reshaping.html"><i class="fa fa-check"></i><b>13</b> Reshaping data<span></span></a>
<ul>
<li class="chapter" data-level="13.1" data-path="reshaping.html"><a href="reshaping.html#reshaping-a-single-column"><i class="fa fa-check"></i><b>13.1</b> Reshaping a single column<span></span></a></li>
<li class="chapter" data-level="13.2" data-path="reshaping.html"><a href="reshaping.html#reshaping-multiple-columns"><i class="fa fa-check"></i><b>13.2</b> Reshaping multiple columns<span></span></a></li>
</ul></li>
<li class="part"><span><b>IV Visualize<span></span></b></span></li>
<li class="chapter" data-level="14" data-path="graphing-intro.html"><a href="graphing-intro.html"><i class="fa fa-check"></i><b>14</b> Graphing with <code>ggplot2</code><span></span></a>
<ul>
<li class="chapter" data-level="14.1" data-path="graphing-intro.html"><a href="graphing-intro.html#what-does-the-data-look-like"><i class="fa fa-check"></i><b>14.1</b> What does the data look like?<span></span></a></li>
<li class="chapter" data-level="14.2" data-path="graphing-intro.html"><a href="graphing-intro.html#graphing-data"><i class="fa fa-check"></i><b>14.2</b> Graphing data<span></span></a></li>
<li class="chapter" data-level="14.3" data-path="graphing-intro.html"><a href="graphing-intro.html#time-series-plots"><i class="fa fa-check"></i><b>14.3</b> Time-Series Plots<span></span></a></li>
<li class="chapter" data-level="14.4" data-path="graphing-intro.html"><a href="graphing-intro.html#scatter-plots"><i class="fa fa-check"></i><b>14.4</b> Scatter Plots<span></span></a></li>
<li class="chapter" data-level="14.5" data-path="graphing-intro.html"><a href="graphing-intro.html#color-blindness"><i class="fa fa-check"></i><b>14.5</b> Color blindness<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ois-graphs.html"><a href="ois-graphs.html"><i class="fa fa-check"></i><b>15</b> More graphing with <code>ggplot2</code><span></span></a>
<ul>
<li class="chapter" data-level="15.1" data-path="ois-graphs.html"><a href="ois-graphs.html#exploring-data"><i class="fa fa-check"></i><b>15.1</b> Exploring data<span></span></a></li>
<li class="chapter" data-level="15.2" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-a-single-numeric-variable"><i class="fa fa-check"></i><b>15.2</b> Graphing a single numeric variable<span></span></a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="ois-graphs.html"><a href="ois-graphs.html#histogram"><i class="fa fa-check"></i><b>15.2.1</b> Histogram<span></span></a></li>
<li class="chapter" data-level="15.2.2" data-path="ois-graphs.html"><a href="ois-graphs.html#density-plot"><i class="fa fa-check"></i><b>15.2.2</b> Density plot<span></span></a></li>
<li class="chapter" data-level="15.2.3" data-path="ois-graphs.html"><a href="ois-graphs.html#count-graph"><i class="fa fa-check"></i><b>15.2.3</b> Count graph<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-a-categorical-variable"><i class="fa fa-check"></i><b>15.3</b> Graphing a categorical variable<span></span></a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="ois-graphs.html"><a href="ois-graphs.html#bar-graph"><i class="fa fa-check"></i><b>15.3.1</b> Bar graph<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="ois-graphs.html"><a href="ois-graphs.html#graphing-data-over-time"><i class="fa fa-check"></i><b>15.4</b> Graphing data over time<span></span></a></li>
<li class="chapter" data-level="15.5" data-path="ois-graphs.html"><a href="ois-graphs.html#pretty-graphs"><i class="fa fa-check"></i><b>15.5</b> Pretty graphs<span></span></a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="ois-graphs.html"><a href="ois-graphs.html#themes"><i class="fa fa-check"></i><b>15.5.1</b> Themes<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="hotspot-maps.html"><a href="hotspot-maps.html"><i class="fa fa-check"></i><b>16</b> Hotspot maps<span></span></a>
<ul>
<li class="chapter" data-level="16.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#a-simple-map"><i class="fa fa-check"></i><b>16.1</b> A simple map<span></span></a></li>
<li class="chapter" data-level="16.2" data-path="hotspot-maps.html"><a href="hotspot-maps.html#what-really-are-maps"><i class="fa fa-check"></i><b>16.2</b> What really are maps?<span></span></a></li>
<li class="chapter" data-level="16.3" data-path="hotspot-maps.html"><a href="hotspot-maps.html#making-a-hotspot-map"><i class="fa fa-check"></i><b>16.3</b> Making a hotspot map<span></span></a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="hotspot-maps.html"><a href="hotspot-maps.html#colors"><i class="fa fa-check"></i><b>16.3.1</b> Colors<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="choropleth-maps.html"><a href="choropleth-maps.html"><i class="fa fa-check"></i><b>17</b> Choropleth maps<span></span></a>
<ul>
<li class="chapter" data-level="17.1" data-path="choropleth-maps.html"><a href="choropleth-maps.html#spatial-joins"><i class="fa fa-check"></i><b>17.1</b> Spatial joins<span></span></a></li>
<li class="chapter" data-level="17.2" data-path="choropleth-maps.html"><a href="choropleth-maps.html#making-choropleth-maps"><i class="fa fa-check"></i><b>17.2</b> Making choropleth maps<span></span></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i><b>18</b> Interactive maps<span></span></a>
<ul>
<li class="chapter" data-level="18.1" data-path="interactive-maps.html"><a href="interactive-maps.html#why-do-interactive-graphs-matter"><i class="fa fa-check"></i><b>18.1</b> Why do interactive graphs matter?<span></span></a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="interactive-maps.html"><a href="interactive-maps.html#understanding-your-data"><i class="fa fa-check"></i><b>18.1.1</b> Understanding your data<span></span></a></li>
<li class="chapter" data-level="18.1.2" data-path="interactive-maps.html"><a href="interactive-maps.html#police-departments-use-them"><i class="fa fa-check"></i><b>18.1.2</b> Police departments use them<span></span></a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="interactive-maps.html"><a href="interactive-maps.html#making-the-interactive-map"><i class="fa fa-check"></i><b>18.2</b> Making the interactive map<span></span></a></li>
<li class="chapter" data-level="18.3" data-path="interactive-maps.html"><a href="interactive-maps.html#adding-popup-information"><i class="fa fa-check"></i><b>18.3</b> Adding popup information<span></span></a></li>
<li class="chapter" data-level="18.4" data-path="interactive-maps.html"><a href="interactive-maps.html#dealing-with-too-many-markers"><i class="fa fa-check"></i><b>18.4</b> Dealing with too many markers<span></span></a></li>
<li class="chapter" data-level="18.5" data-path="interactive-maps.html"><a href="interactive-maps.html#interactive-choropleth-maps"><i class="fa fa-check"></i><b>18.5</b> Interactive choropleth maps<span></span></a></li>
</ul></li>
<li class="part"><span><b>V Collect<span></span></b></span></li>
<li class="chapter" data-level="19" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html"><i class="fa fa-check"></i><b>19</b> Webscraping with <code>rvest</code><span></span></a>
<ul>
<li class="chapter" data-level="19.1" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#scraping-one-page"><i class="fa fa-check"></i><b>19.1</b> Scraping one page<span></span></a></li>
<li class="chapter" data-level="19.2" data-path="webscraping-with-rvest.html"><a href="webscraping-with-rvest.html#cleaning-the-webscraped-data"><i class="fa fa-check"></i><b>19.2</b> Cleaning the webscraped data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>20</b> Functions<span></span></a>
<ul>
<li class="chapter" data-level="20.1" data-path="functions.html"><a href="functions.html#a-simple-function"><i class="fa fa-check"></i><b>20.1</b> A simple function<span></span></a></li>
<li class="chapter" data-level="20.2" data-path="functions.html"><a href="functions.html#adding-parameters"><i class="fa fa-check"></i><b>20.2</b> Adding parameters<span></span></a></li>
<li class="chapter" data-level="20.3" data-path="functions.html"><a href="functions.html#recipes-function"><i class="fa fa-check"></i><b>20.3</b> Making a function to scrape recipes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>21</b> For loops<span></span></a>
<ul>
<li class="chapter" data-level="21.1" data-path="for-loops.html"><a href="for-loops.html#basic-for-loops"><i class="fa fa-check"></i><b>21.1</b> Basic for loops<span></span></a></li>
<li class="chapter" data-level="21.2" data-path="for-loops.html"><a href="for-loops.html#scraping-multiple-recipes"><i class="fa fa-check"></i><b>21.2</b> Scraping multiple recipes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="scrape-table.html"><a href="scrape-table.html"><i class="fa fa-check"></i><b>22</b> Scraping tables from PDFs<span></span></a>
<ul>
<li class="chapter" data-level="22.1" data-path="scrape-table.html"><a href="scrape-table.html#scraping-the-first-table"><i class="fa fa-check"></i><b>22.1</b> Scraping the first table<span></span></a></li>
<li class="chapter" data-level="22.2" data-path="scrape-table.html"><a href="scrape-table.html#making-a-function"><i class="fa fa-check"></i><b>22.2</b> Making a function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="scrape-table2.html"><a href="scrape-table2.html"><i class="fa fa-check"></i><b>23</b> More scraping tables from PDFs<span></span></a>
<ul>
<li class="chapter" data-level="23.1" data-path="scrape-table2.html"><a href="scrape-table2.html#texas-jail-data"><i class="fa fa-check"></i><b>23.1</b> Texas jail data<span></span></a></li>
<li class="chapter" data-level="23.2" data-path="scrape-table2.html"><a href="scrape-table2.html#pregnant-women-incarcerated"><i class="fa fa-check"></i><b>23.2</b> Pregnant women incarcerated<span></span></a></li>
<li class="chapter" data-level="23.3" data-path="scrape-table2.html"><a href="scrape-table2.html#making-pdf-scraped-data-available-to-others"><i class="fa fa-check"></i><b>23.3</b> Making PDF-scraped data available to others<span></span></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="geocoding.html"><a href="geocoding.html"><i class="fa fa-check"></i><b>24</b> Geocoding<span></span></a>
<ul>
<li class="chapter" data-level="24.1" data-path="geocoding.html"><a href="geocoding.html#geocoding-a-single-address"><i class="fa fa-check"></i><b>24.1</b> Geocoding a single address<span></span></a></li>
<li class="chapter" data-level="24.2" data-path="geocoding.html"><a href="geocoding.html#geocoding-san-francisco-marijuana-dispensary-locations"><i class="fa fa-check"></i><b>24.2</b> Geocoding San Francisco marijuana dispensary locations<span></span></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Crime by the Numbers: A Criminologist’s Guide to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scrape-table" class="section level1 hasAnchor" number="22">
<h1><span class="header-section-number">22</span> Scraping tables from PDFs<a href="scrape-table.html#scrape-table" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>For this chapter you’ll need the following file, which is available for download <a href="https://github.com/jacobkap/r4crimz/tree/master/data">here</a>: usbp_stats_fy2017_sector_profile.pdf.</p>
<p>Government agencies in particular like to release their data in long PDFs which often have the data we want in a table on one of the pages. To use this data we need to scrape it from the PDF into R. In the majority of cases when you want data from a PDF it will be in a table. Essentially the data will be an Excel file inside of a PDF. This format is not altogether different than what we’ve done before.</p>
<p>Let’s first take a look at the data we will be scraping. The first step in any PDF scraping should be to look at the PDF and try to think about the best way to approach this particular problem. While all PDF scraping follows a general format, you cannot necessarily reuse your old code as each situation is likely slightly different. Our data is from the US Customs and Border Protection (CBP) and contains a wealth of information about apprehensions and contraband seizures in border sectors.</p>
<p>We will be using the Sector Profile 2017 PDF which has information in four tables, three of which we’ll scrape and then combine together. The data was downloaded from the US Customs and Border Protection “Stats and Summaries” page <a href="https://www.cbp.gov/newsroom/media-resources/stats">here</a>. If you’re interested in using more of their data, some of it has been cleaned and made available <a href="https://www.openicpsr.org/openicpsr/project/109522/version/V2/view">here</a>.</p>
<p>The file we want to use is called “usbp_stats_fy2017_sector_profile.pdf” and has four tables in the PDF. Let’s take a look at them one at a time, understanding what variables are available, and what units each row is in. Then we’ll start scraping the tables.</p>
<p>The first table is “Sector Profile - Fiscal Year 2017 (Oct. 1st through Sept. 30th).” Before we even look down more at the table, the title is important. It is for fiscal year 2017, not calendar year 2017 which is more common in the data we usually use. This is important if we ever want to merge this data with other data sets. If possible, we would have to get data that is monthly so we can just use October 2016 through September 2017 to match up properly.</p>
<p><img src="images/pdf_table_1.PNG" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<p>Now if we look more at the table, we can see that each row is a section of the US border. There are three main sections - Coastal, Northern, and Southwest, with subsections of each also included. The bottom row is the sum of all these sections and gives us nationwide data. Many government data sets will be like this form with sections and subsections in the same table. Watch out when doing mathematical operations! Just summing any of these columns will give you triple the true value due to the presence of nationwide, sectional, and subsectional data.</p>
<p>There are 9 columns in the data other than the border section identifier. We have total apprehensions, apprehensions for people who are not Mexican citizens, marijuana and cocaine seizures (in pounds), the number of accepted prosecutions (presumably of those apprehended), and the number of CBP agents assaulted. The last two columns have the number of people rescued by CBP and the number of people who died (it is unclear from this data alone if this is solely people in custody or deaths during crossing the border). These two columns are also special as they only have data for the Southwest border.</p>
<p>Table 2 has a similar format with each row being a section or subsection. The columns now have the number of juveniles apprehended, subdivided by if they were accompanied by an adult or not, and the number of adults apprehended. The last column is total apprehensions which is also in Table 1.</p>
<p><img src="images/pdf_table_2.PNG" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<p>Table 3 follows the same format and the new columns are number of apprehensions by gender.</p>
<p><img src="images/pdf_table_3.PNG" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<p>Finally, Table 4 is a bit different in its format. The rows are now variables and the columns are the locations. In this table it doesn’t include subsections, only border sections and the nationwide total. The data it has available are partially a repeat of Table 1 but with more drug types and the addition of the number of drug seizures and some firearm seizure information. As this table is formatted differently than the others, we won’t scrape it in this lesson - but you can use the skills you’ll learn to do so yourself.</p>
<p><img src="images/pdf_table_4.PNG" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<div id="scraping-the-first-table" class="section level2 hasAnchor" number="22.1">
<h2><span class="header-section-number">22.1</span> Scraping the first table<a href="scrape-table.html#scraping-the-first-table" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We’ve now seen all three of the tables that we want to scrape so we can begin the process of actually scraping them. Note that each table is very similar meaning that we can reuse some code to scrape as well as to clean the data. That means that we will want to write some functions to make our work easier and avoid copy and pasting code.</p>
<p>We will start by using the <code>pdf_text()</code> function from the <code>pdftools</code> package to read the PDFs into R.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="scrape-table.html#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;pdftools&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="scrape-table.html#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="cb396-2"><a href="scrape-table.html#cb396-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Using poppler version 21.04.0</span></span></code></pre></div>
<p>We can assign the output of the <code>pdf_text()</code> function to the object <em>border_patrol</em> and we’ll use it for each table. The input to <code>pdf_text()</code> is the name of the PDF we want to scrape.</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="scrape-table.html#cb397-1" aria-hidden="true" tabindex="-1"></a>border_patrol <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="st">&quot;data/usbp_stats_fy2017_sector_profile.pdf&quot;</span>)</span></code></pre></div>
<p>We can take a look at the <code>head()</code> of the result using <code>head(border_patrol)</code>.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="scrape-table.html#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(border_patrol)</span></code></pre></div>
<p><img src="images/pdf_scrape_1.PNG" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<p>If you look closely in this huge amount of text output, you can see that it is a vector with each table being an element in the vector. We can see this further by checking the <code>length()</code> of “border_patrol” which tells us how many elements are in a vector.</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="scrape-table.html#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(border_patrol)</span>
<span id="cb399-2"><a href="scrape-table.html#cb399-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>It is four elements long, one for each table.</p>
<p>Looking at just the first element in <em>border_patrol</em> gives us all the values in the first table plus a few sentences at the end detailing some features of the table. At the end of each line (where in the PDF it should end but doesn’t in our data yet) there is a <code>\n</code> indicating that there should be a new line. We want to use <code>strsplit()</code> to split at the <code>\n</code>.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="scrape-table.html#cb400-1" aria-hidden="true" tabindex="-1"></a>border_patrol[<span class="dv">1</span>]</span></code></pre></div>
<p><img src="images/pdf_scrape_2.PNG" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<p>The <code>strsplit()</code> function breaks up a string into pieces based on a value inside of the string. Let’s use the word “criminology” as an example. If we want to split it by the letter “n” we’d have two results, “crimi” and “ology” as these are the pieces of the word after breaking up “criminology” at letter “n.”</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="scrape-table.html#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(<span class="st">&quot;criminology&quot;</span>, <span class="at">split =</span> <span class="st">&quot;n&quot;</span>)</span>
<span id="cb401-2"><a href="scrape-table.html#cb401-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb401-3"><a href="scrape-table.html#cb401-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;crimi&quot; &quot;ology&quot;</span></span></code></pre></div>
<p>Note that it deletes whatever value is used to break up the string.</p>
<p>Let’s assign a new object with the value in the first element of <em>border_patrol</em>, calling it <em>sector_profile</em> as that’s the name of that table, and then using <code>strsplit()</code> on it to split it every <code>\n</code>. In effect this makes each line of the table an element in a vector that we’ll create rather than having the entire table be a single long string as it is now. <code>strsplit()</code> returns a list so we will also want to keep just the first element of that list using double square bracket <code>[[]]</code> notation.</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="scrape-table.html#cb402-1" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> border_patrol[<span class="dv">1</span>]</span>
<span id="cb402-2"><a href="scrape-table.html#cb402-2" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(sector_profile, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb402-3"><a href="scrape-table.html#cb402-3" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> sector_profile[[<span class="dv">1</span>]]</span></code></pre></div>
<p>Now we can look at the first six rows of this data.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="scrape-table.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sector_profile)</span></code></pre></div>
<p><img src="images/pdf_scrape_3.PNG" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<p>Notice that there is a lot of empty white space at the beginning of the rows. We want to get rid of that to make our next steps easier. We can use <code>trimws()</code> and put the entire <em>sector_profile</em> data in the () and it’ll remove any white space that is at the beginning or end of the string.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="scrape-table.html#cb404-1" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> <span class="fu">trimws</span>(sector_profile)</span></code></pre></div>
<p>We have more rows than we want so let’s look at the entire data and try to figure out how to keep just the necessary rows.</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="scrape-table.html#cb405-1" aria-hidden="true" tabindex="-1"></a>sector_profile</span></code></pre></div>
<p><img src="images/pdf_scrape_4.PNG" width="100%" height="100%"  style="display: block; margin: auto;" /></p>
<p>Based on the PDF, we want every row from Miami to Nationwide Total. But here we have several rows with the title of the table and the column names, and at the end we have the sentences with some details that we don’t need.</p>
<p>To keep only the rows that we want, we can combine <code>grep()</code> and subsetting to find the rows from Miami to Nationwide Total and keep only those rows. We will use <code>grep()</code> to find which row has the text “Miami” and which has the text “Nationwide Total” and keep all rows between them (including those matched rows as well). Since each only appears once in the table we don’t need to worry about handling duplicate results.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="scrape-table.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Miami&quot;</span>, sector_profile)</span>
<span id="cb406-2"><a href="scrape-table.html#cb406-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code></pre></div>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="scrape-table.html#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">&quot;Nationwide Total&quot;</span>, sector_profile)</span>
<span id="cb407-2"><a href="scrape-table.html#cb407-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 34</span></span></code></pre></div>
<p>We’ll use square bracket notation to keep all rows between those two values (including each value). Since the data is a vector, not a data.frame, we don’t need a comma.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="scrape-table.html#cb408-1" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> sector_profile[<span class="fu">grep</span>(<span class="st">&quot;Miami&quot;</span>, sector_profile)<span class="sc">:</span></span>
<span id="cb408-2"><a href="scrape-table.html#cb408-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">grep</span>(<span class="st">&quot;Nationwide Total&quot;</span>, sector_profile)]</span></code></pre></div>
<p>Note that we’re getting rid of the rows which had the column names. It’s easier to make the names ourselves than to deal with that mess. The data now has only the rows we want but still doesn’t have any columns, it’s currently just a vector of strings. We want to make it into a data.frame to be able to work on it like we usually do.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="scrape-table.html#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sector_profile)</span></code></pre></div>
<p><img src="images/pdf_scrape_5.PNG" width="100%" height="45%"  style="display: block; margin: auto;" /></p>
<p>When looking at this data it is clear that where the division between columns is supposed to be is a bunch of white space in each string. Take the first row for example, it says “Miami” then after lots of white spaces “111” than again with “2,280” and so on for the rest of the row. We’ll use this pattern of columns differentiated by white space to make <em>sector_profile</em> into a data.frame.</p>
<p>We will use the function <code>str_split_fixed()</code> from the <code>stringr</code> package. This function is very similar to <code>strsplit()</code> except you can tell it how many columns to expect.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="scrape-table.html#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;stringr&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="scrape-table.html#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>The syntax of <code>str_split_fixed()</code> is similar to <code>strsplit()</code> except the new parameter of the number of splits to expect. The “_fixed” part of <code>str_split_fixed()</code> is that it expects the same number of splits (which in our case become columns) for every element in the vector that we input. Looking at the PDF shows us that there are 10 columns so that’s the number we’ll use. Our split will be ” {2,}“. That is, a space that occurs two or more times. Since there are sectors with spaces in their name, we can’t have only one space, we need at least two. If you look carefully at the rows with sectors”Coastal Border Sectors Total” and “Northern Border Sectors Total,” the final two columns actually do not have two spaces between them because of the amount of asterisks they have. Normally we’d want to fix this using <code>gsub()</code>, but those values will turn to NA anyway so we won’t bother in this case.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="scrape-table.html#cb412-1" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(sector_profile, <span class="st">&quot; {2,}&quot;</span>, <span class="dv">10</span>)</span></code></pre></div>
<p>If we check the <code>head()</code> we can see that we have the proper columns now, but this still isn’t a data.frame and has no column names.</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="scrape-table.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sector_profile)</span>
<span id="cb413-2"><a href="scrape-table.html#cb413-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,1]                           [,2]  [,3]    [,4]   </span></span>
<span id="cb413-3"><a href="scrape-table.html#cb413-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;Miami&quot;                        &quot;111&quot; &quot;2,280&quot; &quot;1,646&quot;</span></span>
<span id="cb413-4"><a href="scrape-table.html#cb413-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;New Orleans&quot;                  &quot;63&quot;  &quot;920&quot;   &quot;528&quot;  </span></span>
<span id="cb413-5"><a href="scrape-table.html#cb413-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,] &quot;Ramey&quot;                        &quot;38&quot;  &quot;388&quot;   &quot;387&quot;  </span></span>
<span id="cb413-6"><a href="scrape-table.html#cb413-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4,] &quot;Coastal Border Sectors Total&quot; &quot;212&quot; &quot;3,588&quot; &quot;2,561&quot;</span></span>
<span id="cb413-7"><a href="scrape-table.html#cb413-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5,] &quot;&quot;                             &quot;&quot;    &quot;&quot;      &quot;&quot;     </span></span>
<span id="cb413-8"><a href="scrape-table.html#cb413-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6,] &quot;Blaine&quot;                       &quot;296&quot; &quot;288&quot;   &quot;237&quot;  </span></span>
<span id="cb413-9"><a href="scrape-table.html#cb413-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      [,5]    [,6]    [,7]  [,8] [,9]       [,10]     </span></span>
<span id="cb413-10"><a href="scrape-table.html#cb413-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;2,253&quot; &quot;231&quot;   &quot;292&quot; &quot;1&quot;  &quot;N/A&quot;      &quot;N/A&quot;     </span></span>
<span id="cb413-11"><a href="scrape-table.html#cb413-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;21&quot;    &quot;6&quot;     &quot;10&quot;  &quot;0&quot;  &quot;N/A&quot;      &quot;N/A&quot;     </span></span>
<span id="cb413-12"><a href="scrape-table.html#cb413-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3,] &quot;3&quot;     &quot;2,932&quot; &quot;89&quot;  &quot;0&quot;  &quot;N/A&quot;      &quot;N/A&quot;     </span></span>
<span id="cb413-13"><a href="scrape-table.html#cb413-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4,] &quot;2,277&quot; &quot;3,169&quot; &quot;391&quot; &quot;1&quot;  &quot;N/A ****&quot; &quot;N/A ****&quot;</span></span>
<span id="cb413-14"><a href="scrape-table.html#cb413-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5,] &quot;&quot;      &quot;&quot;      &quot;&quot;    &quot;&quot;   &quot;&quot;         &quot;&quot;        </span></span>
<span id="cb413-15"><a href="scrape-table.html#cb413-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6,] &quot;0&quot;     &quot;0&quot;     &quot;9&quot;   &quot;0&quot;  &quot;N/A&quot;      &quot;N/A&quot;</span></span></code></pre></div>
<p>We can make it a data.frame just by putting it in <code>data.frame()</code>. And we can assign the columns names using a vector of strings we can make. We’ll use the same column names as in the PDF but in lowercase and replacing spaces and parentheses with underscores.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="scrape-table.html#cb414-1" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(sector_profile)</span>
<span id="cb414-2"><a href="scrape-table.html#cb414-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(sector_profile) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;sector&quot;</span>,</span>
<span id="cb414-3"><a href="scrape-table.html#cb414-3" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;agent_staffing&quot;</span>,</span>
<span id="cb414-4"><a href="scrape-table.html#cb414-4" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;apprehensions&quot;</span>,</span>
<span id="cb414-5"><a href="scrape-table.html#cb414-5" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;other_than_mexican_apprehensions&quot;</span>, </span>
<span id="cb414-6"><a href="scrape-table.html#cb414-6" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;marijuana_pounds&quot;</span>,</span>
<span id="cb414-7"><a href="scrape-table.html#cb414-7" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;cocaine_pounds&quot;</span>,</span>
<span id="cb414-8"><a href="scrape-table.html#cb414-8" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;accepted_prosecutions&quot;</span>,</span>
<span id="cb414-9"><a href="scrape-table.html#cb414-9" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;assaults&quot;</span>,</span>
<span id="cb414-10"><a href="scrape-table.html#cb414-10" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;rescues&quot;</span>,</span>
<span id="cb414-11"><a href="scrape-table.html#cb414-11" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;deaths&quot;</span>)</span></code></pre></div>
<p>We have now taken a table from a PDF and successfully scraped it to a data.frame in R. Now we can work on it as we would any other data set that we’ve used previously.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="scrape-table.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sector_profile)</span>
<span id="cb415-2"><a href="scrape-table.html#cb415-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         sector agent_staffing apprehensions</span></span>
<span id="cb415-3"><a href="scrape-table.html#cb415-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                        Miami            111         2,280</span></span>
<span id="cb415-4"><a href="scrape-table.html#cb415-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                  New Orleans             63           920</span></span>
<span id="cb415-5"><a href="scrape-table.html#cb415-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                        Ramey             38           388</span></span>
<span id="cb415-6"><a href="scrape-table.html#cb415-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Coastal Border Sectors Total            212         3,588</span></span>
<span id="cb415-7"><a href="scrape-table.html#cb415-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                                                          </span></span>
<span id="cb415-8"><a href="scrape-table.html#cb415-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                       Blaine            296           288</span></span>
<span id="cb415-9"><a href="scrape-table.html#cb415-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   other_than_mexican_apprehensions marijuana_pounds</span></span>
<span id="cb415-10"><a href="scrape-table.html#cb415-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                            1,646            2,253</span></span>
<span id="cb415-11"><a href="scrape-table.html#cb415-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                              528               21</span></span>
<span id="cb415-12"><a href="scrape-table.html#cb415-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                              387                3</span></span>
<span id="cb415-13"><a href="scrape-table.html#cb415-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                            2,561            2,277</span></span>
<span id="cb415-14"><a href="scrape-table.html#cb415-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                                                  </span></span>
<span id="cb415-15"><a href="scrape-table.html#cb415-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                              237                0</span></span>
<span id="cb415-16"><a href="scrape-table.html#cb415-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   cocaine_pounds accepted_prosecutions assaults  rescues</span></span>
<span id="cb415-17"><a href="scrape-table.html#cb415-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            231                   292        1      N/A</span></span>
<span id="cb415-18"><a href="scrape-table.html#cb415-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2              6                    10        0      N/A</span></span>
<span id="cb415-19"><a href="scrape-table.html#cb415-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          2,932                    89        0      N/A</span></span>
<span id="cb415-20"><a href="scrape-table.html#cb415-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          3,169                   391        1 N/A ****</span></span>
<span id="cb415-21"><a href="scrape-table.html#cb415-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                                                       </span></span>
<span id="cb415-22"><a href="scrape-table.html#cb415-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6              0                     9        0      N/A</span></span>
<span id="cb415-23"><a href="scrape-table.html#cb415-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     deaths</span></span>
<span id="cb415-24"><a href="scrape-table.html#cb415-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      N/A</span></span>
<span id="cb415-25"><a href="scrape-table.html#cb415-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      N/A</span></span>
<span id="cb415-26"><a href="scrape-table.html#cb415-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      N/A</span></span>
<span id="cb415-27"><a href="scrape-table.html#cb415-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 N/A ****</span></span>
<span id="cb415-28"><a href="scrape-table.html#cb415-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         </span></span>
<span id="cb415-29"><a href="scrape-table.html#cb415-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      N/A</span></span></code></pre></div>
<p>To really be able to use this data we’ll want to clean the columns to turn the values to numeric type but we can leave that until later. For now let’s write a function that replicates much of this work for the next tables.</p>
</div>
<div id="making-a-function" class="section level2 hasAnchor" number="22.2">
<h2><span class="header-section-number">22.2</span> Making a function<a href="scrape-table.html#making-a-function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As we’ve done before, we want to take the code we wrote for the specific case of the first table in this PDF and turn it into a function for the general case of other tables in the PDF. Let’s copy the code we used above before we convert it to a function.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="scrape-table.html#cb416-1" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> border_patrol[<span class="dv">1</span>]</span>
<span id="cb416-2"><a href="scrape-table.html#cb416-2" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> <span class="fu">trimws</span>(sector_profile)</span>
<span id="cb416-3"><a href="scrape-table.html#cb416-3" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(sector_profile, <span class="st">&quot;</span><span class="sc">\r\n</span><span class="st">&quot;</span>)</span>
<span id="cb416-4"><a href="scrape-table.html#cb416-4" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> sector_profile[[<span class="dv">1</span>]]</span>
<span id="cb416-5"><a href="scrape-table.html#cb416-5" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> sector_profile[<span class="fu">grep</span>(<span class="st">&quot;Miami&quot;</span>,</span>
<span id="cb416-6"><a href="scrape-table.html#cb416-6" aria-hidden="true" tabindex="-1"></a>                                      sector_profile)<span class="sc">:</span></span>
<span id="cb416-7"><a href="scrape-table.html#cb416-7" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">grep</span>(<span class="st">&quot;Nationwide Total&quot;</span>,</span>
<span id="cb416-8"><a href="scrape-table.html#cb416-8" aria-hidden="true" tabindex="-1"></a>                                        sector_profile)]</span>
<span id="cb416-9"><a href="scrape-table.html#cb416-9" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(sector_profile, <span class="st">&quot; {2,}&quot;</span>, <span class="dv">10</span>)</span>
<span id="cb416-10"><a href="scrape-table.html#cb416-10" aria-hidden="true" tabindex="-1"></a>sector_profile <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(sector_profile)</span>
<span id="cb416-11"><a href="scrape-table.html#cb416-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(sector_profile) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;sector&quot;</span>,</span>
<span id="cb416-12"><a href="scrape-table.html#cb416-12" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;agent_staffing&quot;</span>,</span>
<span id="cb416-13"><a href="scrape-table.html#cb416-13" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;total_apprehensions&quot;</span>,</span>
<span id="cb416-14"><a href="scrape-table.html#cb416-14" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;other_than_mexican_apprehensions&quot;</span>, </span>
<span id="cb416-15"><a href="scrape-table.html#cb416-15" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;marijuana_pounds&quot;</span>,</span>
<span id="cb416-16"><a href="scrape-table.html#cb416-16" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;cocaine_pounds&quot;</span>,</span>
<span id="cb416-17"><a href="scrape-table.html#cb416-17" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;accepted_prosecutions&quot;</span>,</span>
<span id="cb416-18"><a href="scrape-table.html#cb416-18" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;assaults&quot;</span>,</span>
<span id="cb416-19"><a href="scrape-table.html#cb416-19" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;rescues&quot;</span>,</span>
<span id="cb416-20"><a href="scrape-table.html#cb416-20" aria-hidden="true" tabindex="-1"></a>                           <span class="st">&quot;deaths&quot;</span>)</span></code></pre></div>
<p>Since each table is so similar our function will only need a few changes in the above code to work for all three tables. The object <em>border_patrol</em> has all four of the tables in the data, so we need to say which of these tables we want - we can call the parameter <code>table_number</code>. Then each table has a different number of columns so we need to change the <code>str_split_fixed()</code> function to take a variable with the number of columns we input, a value we’ll call <code>number_columns</code>. We rename each column to its proper name so we need to input a vector - which we’ll call <code>column_names</code> - with the names for each column. Finally, we want to have a parameter where we enter in the data which holds all of the tables, our object <em>border_patrol</em>, we can call this <code>list_of_tables</code> as it is fairly descriptive.</p>
<p>We do this as it is bad form (and potentially dangerous) to have a function that relies on an object that isn’t explicitly put in the function. It we change our <em>border_patrol</em> object (such as by scraping a different file but calling that object <em>border_patrol</em>) and the function doesn’t have that as an input, it will work differently than we expect. Since we called the object we scraped <em>sector_profile</em> for the first table, let’s change that to <em>data</em> as not all tables are called Sector Profile.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="scrape-table.html#cb417-1" aria-hidden="true" tabindex="-1"></a>scrape_pdf <span class="ot">&lt;-</span> <span class="cf">function</span>(list_of_tables,</span>
<span id="cb417-2"><a href="scrape-table.html#cb417-2" aria-hidden="true" tabindex="-1"></a>                       table_number,</span>
<span id="cb417-3"><a href="scrape-table.html#cb417-3" aria-hidden="true" tabindex="-1"></a>                       number_columns, </span>
<span id="cb417-4"><a href="scrape-table.html#cb417-4" aria-hidden="true" tabindex="-1"></a>                       column_names) {</span>
<span id="cb417-5"><a href="scrape-table.html#cb417-5" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> list_of_tables[table_number]</span>
<span id="cb417-6"><a href="scrape-table.html#cb417-6" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">trimws</span>(data)</span>
<span id="cb417-7"><a href="scrape-table.html#cb417-7" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(data, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb417-8"><a href="scrape-table.html#cb417-8" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data[[<span class="dv">1</span>]]</span>
<span id="cb417-9"><a href="scrape-table.html#cb417-9" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data[<span class="fu">grep</span>(<span class="st">&quot;Miami&quot;</span>, data)<span class="sc">:</span></span>
<span id="cb417-10"><a href="scrape-table.html#cb417-10" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">grep</span>(<span class="st">&quot;Nationwide Total&quot;</span>, data)]</span>
<span id="cb417-11"><a href="scrape-table.html#cb417-11" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">str_split_fixed</span>(data, <span class="st">&quot; {2,}&quot;</span>, number_columns)</span>
<span id="cb417-12"><a href="scrape-table.html#cb417-12" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(data)</span>
<span id="cb417-13"><a href="scrape-table.html#cb417-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(data) <span class="ot">&lt;-</span> column_names</span>
<span id="cb417-14"><a href="scrape-table.html#cb417-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb417-15"><a href="scrape-table.html#cb417-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(data)</span>
<span id="cb417-16"><a href="scrape-table.html#cb417-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now let’s run this function for each of the three tables we want to scrape, changing the function’s parameters to work for each table. To see what parameter values you need to input, look at the PDF itself or the screenshots in this lesson.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="scrape-table.html#cb418-1" aria-hidden="true" tabindex="-1"></a>table_1 <span class="ot">&lt;-</span> <span class="fu">scrape_pdf</span>(<span class="at">list_of_tables =</span> border_patrol,</span>
<span id="cb418-2"><a href="scrape-table.html#cb418-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">table_number =</span> <span class="dv">1</span>, </span>
<span id="cb418-3"><a href="scrape-table.html#cb418-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">number_columns =</span> <span class="dv">10</span>, </span>
<span id="cb418-4"><a href="scrape-table.html#cb418-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">column_names =</span> <span class="fu">c</span>(<span class="st">&quot;sector&quot;</span>,</span>
<span id="cb418-5"><a href="scrape-table.html#cb418-5" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;agent_staffing&quot;</span>,</span>
<span id="cb418-6"><a href="scrape-table.html#cb418-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;total_apprehensions&quot;</span>,</span>
<span id="cb418-7"><a href="scrape-table.html#cb418-7" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;other_than_mexican_apprehensions&quot;</span>, </span>
<span id="cb418-8"><a href="scrape-table.html#cb418-8" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;marijuana_pounds&quot;</span>,</span>
<span id="cb418-9"><a href="scrape-table.html#cb418-9" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;cocaine_pounds&quot;</span>,</span>
<span id="cb418-10"><a href="scrape-table.html#cb418-10" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;accepted_prosecutions&quot;</span>,</span>
<span id="cb418-11"><a href="scrape-table.html#cb418-11" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;assaults&quot;</span>,</span>
<span id="cb418-12"><a href="scrape-table.html#cb418-12" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;rescues&quot;</span>,</span>
<span id="cb418-13"><a href="scrape-table.html#cb418-13" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;deaths&quot;</span>))</span>
<span id="cb418-14"><a href="scrape-table.html#cb418-14" aria-hidden="true" tabindex="-1"></a>table_2 <span class="ot">&lt;-</span> <span class="fu">scrape_pdf</span>(<span class="at">list_of_tables =</span> border_patrol,</span>
<span id="cb418-15"><a href="scrape-table.html#cb418-15" aria-hidden="true" tabindex="-1"></a>                      <span class="at">table_number =</span> <span class="dv">2</span>, </span>
<span id="cb418-16"><a href="scrape-table.html#cb418-16" aria-hidden="true" tabindex="-1"></a>                      <span class="at">number_columns =</span> <span class="dv">6</span>, </span>
<span id="cb418-17"><a href="scrape-table.html#cb418-17" aria-hidden="true" tabindex="-1"></a>                      <span class="at">column_names =</span> <span class="fu">c</span>(<span class="st">&quot;sector&quot;</span>,</span>
<span id="cb418-18"><a href="scrape-table.html#cb418-18" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;accompanied_juveniles&quot;</span>,</span>
<span id="cb418-19"><a href="scrape-table.html#cb418-19" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;unaccompanied_juveniles&quot;</span>,</span>
<span id="cb418-20"><a href="scrape-table.html#cb418-20" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;total_juveniles&quot;</span>, </span>
<span id="cb418-21"><a href="scrape-table.html#cb418-21" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;total_adults&quot;</span>,</span>
<span id="cb418-22"><a href="scrape-table.html#cb418-22" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;total_apprehensions&quot;</span>))</span>
<span id="cb418-23"><a href="scrape-table.html#cb418-23" aria-hidden="true" tabindex="-1"></a>table_3 <span class="ot">&lt;-</span> <span class="fu">scrape_pdf</span>(<span class="at">list_of_tables =</span> border_patrol,</span>
<span id="cb418-24"><a href="scrape-table.html#cb418-24" aria-hidden="true" tabindex="-1"></a>                      <span class="at">table_number =</span> <span class="dv">3</span>, </span>
<span id="cb418-25"><a href="scrape-table.html#cb418-25" aria-hidden="true" tabindex="-1"></a>                      <span class="at">number_columns =</span> <span class="dv">4</span>, </span>
<span id="cb418-26"><a href="scrape-table.html#cb418-26" aria-hidden="true" tabindex="-1"></a>                      <span class="at">column_names =</span> <span class="fu">c</span>(<span class="st">&quot;sector&quot;</span>,</span>
<span id="cb418-27"><a href="scrape-table.html#cb418-27" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;female&quot;</span>,</span>
<span id="cb418-28"><a href="scrape-table.html#cb418-28" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;male&quot;</span>,</span>
<span id="cb418-29"><a href="scrape-table.html#cb418-29" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">&quot;total_apprehensions&quot;</span>))</span></code></pre></div>
<p>We can use the function <code>left_join()</code> from the <code>dplyr</code> package to combine the three tables into a single object. In the first table there are some asterisks after the final two row names in the Sector column. For our match to work properly we need to delete them which we can do using <code>gsub()</code>.</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="scrape-table.html#cb419-1" aria-hidden="true" tabindex="-1"></a>table_1<span class="sc">$</span>sector <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">*&quot;</span>, <span class="st">&quot;&quot;</span>, table_1<span class="sc">$</span>sector)</span></code></pre></div>
<p>Now we can run <code>left_join()</code>. <code>left_join()</code> will automatically join based on shared column names in the two data sets we are joining. In our case this is “sector” and “total_apprehensions.” All we need to input into <code>left_join()</code> is the name of the data sets we want to join together. <code>left_join()</code> can only combine two data sets at a time so we’ll first join table_1 and table_2 and then join table_3 with the result of the first join, which we’ll call “final_data.”</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="scrape-table.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb420-2"><a href="scrape-table.html#cb420-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb420-3"><a href="scrape-table.html#cb420-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;dplyr&#39;</span></span>
<span id="cb420-4"><a href="scrape-table.html#cb420-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb420-5"><a href="scrape-table.html#cb420-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb420-6"><a href="scrape-table.html#cb420-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb420-7"><a href="scrape-table.html#cb420-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></span>
<span id="cb420-8"><a href="scrape-table.html#cb420-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb420-9"><a href="scrape-table.html#cb420-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb420-10"><a href="scrape-table.html#cb420-10" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(table_1, table_2)</span>
<span id="cb420-11"><a href="scrape-table.html#cb420-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Joining, by = c(&quot;sector&quot;, &quot;total_apprehensions&quot;)</span></span>
<span id="cb420-12"><a href="scrape-table.html#cb420-12" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(final_data, table_3)</span>
<span id="cb420-13"><a href="scrape-table.html#cb420-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Joining, by = c(&quot;sector&quot;, &quot;total_apprehensions&quot;)</span></span></code></pre></div>
<p>Let’s take a look at the <code>head()</code> of this combined data.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="scrape-table.html#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(final_data)</span>
<span id="cb421-2"><a href="scrape-table.html#cb421-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         sector agent_staffing</span></span>
<span id="cb421-3"><a href="scrape-table.html#cb421-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                        Miami            111</span></span>
<span id="cb421-4"><a href="scrape-table.html#cb421-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                  New Orleans             63</span></span>
<span id="cb421-5"><a href="scrape-table.html#cb421-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                        Ramey             38</span></span>
<span id="cb421-6"><a href="scrape-table.html#cb421-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Coastal Border Sectors Total            212</span></span>
<span id="cb421-7"><a href="scrape-table.html#cb421-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                                            </span></span>
<span id="cb421-8"><a href="scrape-table.html#cb421-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                       Blaine            296</span></span>
<span id="cb421-9"><a href="scrape-table.html#cb421-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   total_apprehensions other_than_mexican_apprehensions</span></span>
<span id="cb421-10"><a href="scrape-table.html#cb421-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1               2,280                            1,646</span></span>
<span id="cb421-11"><a href="scrape-table.html#cb421-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                 920                              528</span></span>
<span id="cb421-12"><a href="scrape-table.html#cb421-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                 388                              387</span></span>
<span id="cb421-13"><a href="scrape-table.html#cb421-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4               3,588                            2,561</span></span>
<span id="cb421-14"><a href="scrape-table.html#cb421-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                                                     </span></span>
<span id="cb421-15"><a href="scrape-table.html#cb421-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                 288                              237</span></span>
<span id="cb421-16"><a href="scrape-table.html#cb421-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   marijuana_pounds cocaine_pounds accepted_prosecutions</span></span>
<span id="cb421-17"><a href="scrape-table.html#cb421-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            2,253            231                   292</span></span>
<span id="cb421-18"><a href="scrape-table.html#cb421-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2               21              6                    10</span></span>
<span id="cb421-19"><a href="scrape-table.html#cb421-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                3          2,932                    89</span></span>
<span id="cb421-20"><a href="scrape-table.html#cb421-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            2,277          3,169                   391</span></span>
<span id="cb421-21"><a href="scrape-table.html#cb421-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                                                      </span></span>
<span id="cb421-22"><a href="scrape-table.html#cb421-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                0              0                     9</span></span>
<span id="cb421-23"><a href="scrape-table.html#cb421-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   assaults  rescues   deaths accompanied_juveniles</span></span>
<span id="cb421-24"><a href="scrape-table.html#cb421-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1        1      N/A      N/A                    19</span></span>
<span id="cb421-25"><a href="scrape-table.html#cb421-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2        0      N/A      N/A                     1</span></span>
<span id="cb421-26"><a href="scrape-table.html#cb421-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3        0      N/A      N/A                     7</span></span>
<span id="cb421-27"><a href="scrape-table.html#cb421-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4        1 N/A **** N/A ****                    27</span></span>
<span id="cb421-28"><a href="scrape-table.html#cb421-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                                             &lt;NA&gt;</span></span>
<span id="cb421-29"><a href="scrape-table.html#cb421-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6        0      N/A      N/A                    29</span></span>
<span id="cb421-30"><a href="scrape-table.html#cb421-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   unaccompanied_juveniles total_juveniles total_adults</span></span>
<span id="cb421-31"><a href="scrape-table.html#cb421-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                      42              61        2,219</span></span>
<span id="cb421-32"><a href="scrape-table.html#cb421-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                      22              23          897</span></span>
<span id="cb421-33"><a href="scrape-table.html#cb421-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                       1               8          380</span></span>
<span id="cb421-34"><a href="scrape-table.html#cb421-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                      65              92        3,496</span></span>
<span id="cb421-35"><a href="scrape-table.html#cb421-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5                    &lt;NA&gt;            &lt;NA&gt;         &lt;NA&gt;</span></span>
<span id="cb421-36"><a href="scrape-table.html#cb421-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6                       7              36          252</span></span>
<span id="cb421-37"><a href="scrape-table.html#cb421-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   female  male</span></span>
<span id="cb421-38"><a href="scrape-table.html#cb421-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    219 2,061</span></span>
<span id="cb421-39"><a href="scrape-table.html#cb421-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     92   828</span></span>
<span id="cb421-40"><a href="scrape-table.html#cb421-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     65   323</span></span>
<span id="cb421-41"><a href="scrape-table.html#cb421-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    376 3,212</span></span>
<span id="cb421-42"><a href="scrape-table.html#cb421-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   &lt;NA&gt;  &lt;NA&gt;</span></span>
<span id="cb421-43"><a href="scrape-table.html#cb421-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6     97   191</span></span></code></pre></div>
<p>In one data set we now have information from three separate tables in a PDF. We have now scraped three different tables from a PDF and turned them into a single data set, turning the PDF into actually usable (and useful) data!</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="for-loops.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="scrape-table2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": true,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jacobkap/crimebythenumbers/edit/master/pdf-tables.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>

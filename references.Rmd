`r if (knitr::is_html_output()) '
# References {-}
'`


```{r include=FALSE, warn = FALSE}
files <- list.files(pattern = ".Rmd")
packages_to_reference <- c()
for (file in files) {
  file <- readr::read_lines(file)
  refs <- file[grep("^library", file)]
  refs <- gsub("library\\((.*)\\)", "\\1", refs)
  
  packages_to_reference <- c(packages_to_reference, refs)
  packages_to_reference <- sort(packages_to_reference)
}


knitr::write_bib(packages_to_reference, 'packages.bib')
```